<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/gear48.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/gear32.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="true"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"autovy.github.io","root":"/","scheme":"Gemini","version":"7.7.2","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Netflix OSSå·²åœ¨æ–°ç‰ˆçš„SpringCloudä¸­ç§»é™¤äº†ï¼ŒSpringCloud Netflixå·²ç»è½åç‰ˆæœ¬äº†ğŸ¤¯ï¼Œä½†æ˜¯ä¸å¦¨é€šè¿‡å…¶æŒæ¡å¾®æœåŠ¡çš„æ€æƒ³ï¼Œç†è§£SpringCloudçš„æ ¸å¿ƒæ€æƒ³ï¼Œæ ¸å¿ƒç»„ä»¶">
<meta property="og:type" content="article">
<meta property="og:title" content="Java|SpringCloud + Netflix OSS Demo">
<meta property="og:url" content="https://autovy.github.io/2021/09/20/Java/Java-SpringCloud/index.html">
<meta property="og:site_name" content="Autovy&#39;s blog">
<meta property="og:description" content="Netflix OSSå·²åœ¨æ–°ç‰ˆçš„SpringCloudä¸­ç§»é™¤äº†ï¼ŒSpringCloud Netflixå·²ç»è½åç‰ˆæœ¬äº†ğŸ¤¯ï¼Œä½†æ˜¯ä¸å¦¨é€šè¿‡å…¶æŒæ¡å¾®æœåŠ¡çš„æ€æƒ³ï¼Œç†è§£SpringCloudçš„æ ¸å¿ƒæ€æƒ³ï¼Œæ ¸å¿ƒç»„ä»¶">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109201109518.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109121533917.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109121532105.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109121533619.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109121619055.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191356386.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191358031.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191401332.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191404204.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191407817.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191411510.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191414604.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191415873.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191417418.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191419460.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191421059.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191429890.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191432572.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191431299.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191358031.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191426987.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109160921566.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109160922543.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109160935154.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109160946397.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109160953038.png">
<meta property="article:published_time" content="2021-09-20T06:30:00.000Z">
<meta property="article:modified_time" content="2021-09-20T09:01:47.980Z">
<meta property="article:author" content="Autovy">
<meta property="article:tag" content="å¼€å‘å®æˆ˜">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="æ¡†æ¶å­¦ä¹ ">
<meta property="article:tag" content="åç«¯">
<meta property="article:tag" content="SpringBoot">
<meta property="article:tag" content="SpringCloud">
<meta property="article:tag" content="å¾®æœåŠ¡">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109201109518.png">

<link rel="canonical" href="https://autovy.github.io/2021/09/20/Java/Java-SpringCloud/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true
  };
</script>

  <title>Java|SpringCloud + Netflix OSS Demo | Autovy's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Autovy's blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Autovy's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Just For Interest</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/" rel="section"><i class="fa fa-fw fa-user"></i>å…³äº</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>æ ‡ç­¾<span class="badge">56</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>åˆ†ç±»<span class="badge">11</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>å½’æ¡£<span class="badge">48</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="search-pop-overlay">
  <div class="popup search-popup">
      <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="off"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

  </div>
</div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://autovy.github.io/2021/09/20/Java/Java-SpringCloud/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/2.png">
      <meta itemprop="name" content="Autovy">
      <meta itemprop="description" content="æ–°æ—¶ä»£å†œæ°‘å·¥çš„æ•°å­—å†œç”°">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Autovy's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Java|SpringCloud + Netflix OSS Demo
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2021/09/20 14:30:00" itemprop="dateCreated datePublished" datetime="2021-09-20T14:30:00+08:00">2021/09/20</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="çƒ­åº¦" id="busuanzi_container_page_pv_test" style="display: inline;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">çƒ­åº¦ï¼š</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valineï¼š</span>
    
    <a title="valine" href="/2021/09/20/Java/Java-SpringCloud/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2021/09/20/Java/Java-SpringCloud/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>24k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109201109518.png" alt="image-20210920110949198"></p>
<p>Netflix OSSå·²åœ¨æ–°ç‰ˆçš„SpringCloudä¸­ç§»é™¤äº†ï¼ŒSpringCloud Netflixå·²ç»è½åç‰ˆæœ¬äº†ğŸ¤¯ï¼Œä½†æ˜¯ä¸å¦¨é€šè¿‡å…¶æŒæ¡å¾®æœåŠ¡çš„æ€æƒ³ï¼Œç†è§£SpringCloudçš„æ ¸å¿ƒæ€æƒ³ï¼Œæ ¸å¿ƒç»„ä»¶</p>
<span id="more"></span>

<h4 id="åˆ†å¸ƒå¼ä¸é›†ç¾¤"><a href="#åˆ†å¸ƒå¼ä¸é›†ç¾¤" class="headerlink" title="åˆ†å¸ƒå¼ä¸é›†ç¾¤"></a>åˆ†å¸ƒå¼ä¸é›†ç¾¤</h4><h5 id="ï¼ˆ1ï¼‰å¾®æœåŠ¡æ¦‚å¿µ"><a href="#ï¼ˆ1ï¼‰å¾®æœåŠ¡æ¦‚å¿µ" class="headerlink" title="ï¼ˆ1ï¼‰å¾®æœåŠ¡æ¦‚å¿µ"></a>ï¼ˆ1ï¼‰å¾®æœåŠ¡æ¦‚å¿µ</h5><p>å¾®æœåŠ¡ç®€å•æ¥è¯´ï¼Œä¸€ä¸ªspringbootå°±æ˜¯ä¸€ä¸ªå¾®æœåŠ¡ï¼Œä¸åŒçš„æ˜¯è¿™ä¸ªspringbootåªåšä¸€é¡¹å•çº¯çš„ä»»åŠ¡</p>
<h5 id="ï¼ˆ2ï¼‰æœåŠ¡æ³¨å†Œ"><a href="#ï¼ˆ2ï¼‰æœåŠ¡æ³¨å†Œ" class="headerlink" title="ï¼ˆ2ï¼‰æœåŠ¡æ³¨å†Œ"></a>ï¼ˆ2ï¼‰æœåŠ¡æ³¨å†Œ</h5><p>springcloudæœ‰ä¸ªå¾®æœåŠ¡æ³¨å†Œä¸­eureka serverï¼Œé€šè¿‡å®ƒæŠŠå¾®æœåŠ¡æ³¨å†Œèµ·æ¥ä»¥ä¾›æ¥è°ƒç”¨</p>
<h5 id="ï¼ˆ3ï¼‰æœåŠ¡è®¿é—®"><a href="#ï¼ˆ3ï¼‰æœåŠ¡è®¿é—®" class="headerlink" title="ï¼ˆ3ï¼‰æœåŠ¡è®¿é—®"></a>ï¼ˆ3ï¼‰æœåŠ¡è®¿é—®</h5><p>å¾®æœåŠ¡ç›´æ¥å¯ä»¥é€šè¿‡æ³¨å†Œä¸­å¿ƒçš„å®šä½ç›¸äº’è®¿é—®</p>
<h5 id="ï¼ˆ4ï¼‰åˆ†å¸ƒå¼æ¦‚å¿µ"><a href="#ï¼ˆ4ï¼‰åˆ†å¸ƒå¼æ¦‚å¿µ" class="headerlink" title="ï¼ˆ4ï¼‰åˆ†å¸ƒå¼æ¦‚å¿µ"></a>ï¼ˆ4ï¼‰åˆ†å¸ƒå¼æ¦‚å¿µ</h5><p> ç®€å•è¯´ï¼ŒåŸæ¥æ˜¯åœ¨ä¸€ä¸ª springbooté‡Œå°±å®Œæˆçš„äº‹æƒ…ï¼Œç°åœ¨åˆ†å¸ƒåœ¨å¤šä¸ª springbooté‡Œåšï¼Œè¿™å°±æ˜¯åˆæ­¥å…·å¤‡åˆ†å¸ƒå¼é›å½¢äº†</p>
<ul>
<li>å¦‚æœæˆ‘è¦æ›´æ–°æ•°æ®å¾®æœåŠ¡ï¼Œè§†å›¾å¾®æœåŠ¡æ˜¯ä¸å—å½±å“çš„</li>
<li>å¯ä»¥è®©ä¸åŒçš„å›¢é˜Ÿå¼€å‘ä¸åŒçš„å¾®æœåŠ¡ï¼Œä»–ä»¬ä¹‹é—´åªè¦çº¦å®šå¥½æ¥å£ï¼Œå½¼æ­¤ä¹‹é—´æ˜¯ä½è€¦åˆçš„ã€‚</li>
<li>å¦‚æœè§†å›¾å¾®æœåŠ¡æŒ‚äº†ï¼Œæ•°æ®å¾®æœåŠ¡ä¾ç„¶å¯ä»¥ç»§ç»­ä½¿ç”¨<br>ç­‰ç­‰</li>
</ul>
<h5 id="ï¼ˆ5ï¼‰é›†ç¾¤"><a href="#ï¼ˆ5ï¼‰é›†ç¾¤" class="headerlink" title="ï¼ˆ5ï¼‰é›†ç¾¤"></a>ï¼ˆ5ï¼‰é›†ç¾¤</h5><p>æä¾›ç›¸åŒåŠŸèƒ½ï¼Œåªæ˜¯ç«¯å£ä¸ä¸€æ ·çš„å¾®æœåŠ¡ç§°ä¸ºé›†ç¾¤</p>
<ul>
<li>æ¯”èµ·ä¸€ä¸ª springboot, ä¸¤ä¸ªspringboot å¯ä»¥åˆ†åˆ«éƒ¨ç½²åœ¨ä¸¤ä¸ªä¸åŒçš„æœºå™¨ä¸Šï¼Œé‚£ä¹ˆç†è®ºä¸Šæ¥è¯´ï¼Œèƒ½å¤Ÿæ‰¿å—çš„è´Ÿè½½å°±æ˜¯ x 2. è¿™æ ·ç³»ç»Ÿå°±å…·å¤‡é€šè¿‡æ¨ªå‘æ‰©å±•è€Œæé«˜æ€§èƒ½çš„æœºåˆ¶</li>
<li>å¦‚æœ 8001 æŒ‚äº†ï¼Œè¿˜æœ‰ 8002 ç»§ç»­æä¾›å¾®æœåŠ¡ï¼Œè¿™å°±å«åšé«˜å¯ç”¨ </li>
</ul>
<h4 id="SpringCloudä»‹ç»"><a href="#SpringCloudä»‹ç»" class="headerlink" title="SpringCloudä»‹ç»"></a>SpringCloudä»‹ç»</h4><p>å‚è€ƒèµ„æ–™ï¼š<a target="_blank" rel="noopener" href="https://crimsonromance.github.io/2019/03/23/%E5%9B%9B%E7%A7%8D%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%EF%BC%9A%E5%8D%95%E4%BD%93%E6%9E%B6%E6%9E%84%E3%80%81%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84%E3%80%81%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84%E3%80%81Serverless%E6%9E%B6%E6%9E%84/">å››ç§è½¯ä»¶æ¶æ„</a></p>
<h5 id="ï¼ˆ1ï¼‰å•ä½“æ¶æ„"><a href="#ï¼ˆ1ï¼‰å•ä½“æ¶æ„" class="headerlink" title="ï¼ˆ1ï¼‰å•ä½“æ¶æ„"></a>ï¼ˆ1ï¼‰å•ä½“æ¶æ„</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109121533917.png" alt="image-20210912153357714"></p>
<p>å…¸å‹çš„ä¸‰çº§æ¶æ„ï¼Œå‰ç«¯(Web/æ‰‹æœºç«¯)+ä¸­é—´ä¸šåŠ¡é€»è¾‘å±‚+æ•°æ®åº“å±‚</p>
<h5 id="ï¼ˆ2ï¼‰åˆ†å¸ƒå¼æ¶æ„"><a href="#ï¼ˆ2ï¼‰åˆ†å¸ƒå¼æ¶æ„" class="headerlink" title="ï¼ˆ2ï¼‰åˆ†å¸ƒå¼æ¶æ„"></a>ï¼ˆ2ï¼‰åˆ†å¸ƒå¼æ¶æ„</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109121532105.png" alt="img"></p>
<p>å°†ä¸€ä¸ªå¤§çš„ç³»ç»Ÿåˆ’åˆ†ä¸ºå¤šä¸ªä¸šåŠ¡æ¨¡å—ï¼Œä¸šåŠ¡æ¨¡å—åˆ†åˆ«éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œå„ä¸ªä¸šåŠ¡æ¨¡å—ä¹‹é—´é€šè¿‡æ¥å£è¿›è¡Œæ•°æ®äº¤äº’ã€‚æ•°æ®åº“ä¹Ÿå¤§é‡é‡‡ç”¨åˆ†å¸ƒå¼æ•°æ®åº“ï¼Œé€šè¿‡LVS/Nginxä»£ç†åº”ç”¨ï¼Œå°†ç”¨æˆ·è¯·æ±‚å‡è¡¡çš„è´Ÿè½½åˆ°ä¸åŒçš„æœåŠ¡å™¨ä¸Š</p>
<h5 id="ï¼ˆ3ï¼‰å¾®æœåŠ¡æ¶æ„"><a href="#ï¼ˆ3ï¼‰å¾®æœåŠ¡æ¶æ„" class="headerlink" title="ï¼ˆ3ï¼‰å¾®æœåŠ¡æ¶æ„"></a>ï¼ˆ3ï¼‰å¾®æœåŠ¡æ¶æ„</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109121533619.png" alt="img"></p>
<p>å°†ç³»ç»Ÿæ‹†åˆ†æˆå¾ˆå¤šå°åº”ç”¨ï¼ˆå¾®æœåŠ¡ï¼‰ï¼Œå¾®æœåŠ¡å¯ä»¥éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œä¹Ÿå¯ä»¥éƒ¨ç½²åœ¨ç›¸åŒçš„æœåŠ¡å™¨ä¸åŒçš„å®¹å™¨ä¸Šã€‚å½“åº”ç”¨çš„æ•…éšœä¸ä¼šå½±å“åˆ°å…¶ä»–åº”ç”¨ï¼Œå•åº”ç”¨çš„è´Ÿè½½ä¹Ÿä¸ä¼šå½±å“åˆ°å…¶ä»–åº”ç”¨</p>
<h5 id="ï¼ˆ4ï¼‰SpringCloudç»„æˆ"><a href="#ï¼ˆ4ï¼‰SpringCloudç»„æˆ" class="headerlink" title="ï¼ˆ4ï¼‰SpringCloudç»„æˆ"></a>ï¼ˆ4ï¼‰SpringCloudç»„æˆ</h5><p>SpringCloud å°±æ˜¯ä¸€å¥—å·¥å…·ï¼Œå¸®åŠ©æˆ‘ä»¬å¾ˆå®¹æ˜“åœ°æ­å»ºå‡ºè¿™ä¹ˆä¸€ä¸ª é›†ç¾¤å’Œåˆ†å¸ƒå¼çš„æ¶å­å‡ºæ¥ï¼ŒSpring Cloud ä¸“æ³¨äºä¸ºå…¸å‹ç”¨ä¾‹æä¾›è‰¯å¥½çš„å¼€ç®±å³ç”¨ä½“éªŒï¼Œå¹¶ä¸ºå…¶ä»–ç”¨æˆ·æä¾›å¯æ‰©å±•æ€§æœºåˆ¶</p>
<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109121619055.png" alt="img"></p>
<ul>
<li>Spring Cloud Netflixï¼šcloudå„é¡¹æœåŠ¡ä¾èµ–ä¸å®ƒï¼Œä¸å„ç§Netflix OSSç»„ä»¶é›†æˆï¼Œç»„æˆå¾®æœåŠ¡çš„æ ¸å¿ƒï¼Œå®ƒçš„ä¸»è¦æœ‰ç»„æˆæœ‰Eureka, Hystrix, Zuul</li>
<li>Eurekaæ³¨å†Œä¸­å¿ƒæœåŠ¡ï¼šSpringCloudæœåŠ¡ä¸­å¿ƒï¼Œäº‘ç«¯æœåŠ¡å‘ç°ï¼Œä¸€ä¸ªåŸºäº REST çš„æœåŠ¡ï¼Œç”¨äºå®šä½æœåŠ¡ï¼Œä»¥å®ç°äº‘ç«¯ä¸­é—´å±‚æœåŠ¡å‘ç°å’Œæ•…éšœè½¬ç§»</li>
<li>Microserviceï¼šå¾®æœåŠ¡ï¼Œåœ¨springcloudå¯ä»¥ç®€å•ç†è§£ä¸ºä¸“èŒåšä¸€é¡¹ä»»åŠ¡çš„springbootï¼Œå¾®æœåŠ¡ä¹‹é—´å¯ä»¥é€šè¿‡Ribbonå’ŒFeignä¸¤ç§æ–¹å¼è¿›è¡Œå¾®æœåŠ¡ä¹‹é—´çš„è®¿é—®ï¼ˆFeignæ˜¯ä¸»æµæ–¹å¼ï¼‰</li>
<li>Zipkiné“¾è·¯è·Ÿè¸ªï¼šä»å±äºSpring Cloud Sleuthï¼ˆæ—¥å¿—æ”¶é›†å·¥å…·åŒ…ï¼‰ï¼Œä¸ºSpringCloudåº”ç”¨å®ç°äº†ä¸€ç§åˆ†å¸ƒå¼è¿½è¸ªè§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥æŸ¥çœ‹å¾®æœåŠ¡ä¹‹é—´çš„å¤æ‚çš„è°ƒç”¨å…³ç³»</li>
<li>Config Server é…ç½®æœåŠ¡å™¨ï¼šä¿—ç§°é…ç½®ä¸­å¿ƒï¼Œé…ç½®ç®¡ç†å·¥å…·åŒ…ï¼Œè®©ä½ å¯ä»¥æŠŠé…ç½®æ”¾åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼ˆæ¯”å¦‚é›†ä¸­æ”¾åœ¨gitï¼‰ï¼Œé›†ä¸­åŒ–ç®¡ç†é›†ç¾¤é…ç½®</li>
<li>Bus æ¶ˆæ¯æ€»çº¿ï¼šäº‹ä»¶ã€æ¶ˆæ¯æ€»çº¿ï¼Œç”¨äºåœ¨é›†ç¾¤ï¼ˆä¾‹å¦‚ï¼Œé…ç½®å˜åŒ–äº‹ä»¶ï¼‰ä¸­ä¼ æ’­çŠ¶æ€å˜åŒ–ï¼Œå¯ä¸Config Server è”åˆï¼Œå†ä½¿ç”¨RabbitMQå®ç°çƒ­éƒ¨ç½²ï¼ˆæ‰€è°“çƒ­éƒ¨ç½²å³ä¸éœ€è¦é‡å¯å¾®æœåŠ¡ï¼Œå¯¹é…ç½®ä¿¡æ¯è‡ªåŠ¨æ›´æ–°ï¼‰</li>
<li>æ–­è·¯å™¨Hystrixï¼šå®¹é”™ç®¡ç†å·¥å…·ï¼Œæ—¨åœ¨é€šè¿‡ç†”æ–­æœºåˆ¶æ§åˆ¶æœåŠ¡å’Œç¬¬ä¸‰æ–¹åº“çš„èŠ‚ç‚¹,ä»è€Œå¯¹å»¶è¿Ÿå’Œæ•…éšœæä¾›æ›´å¼ºå¤§çš„å®¹é”™èƒ½åŠ›ï¼Œç®€å•æ¥è¯´å°±æ˜¯æä¾›å¼‚å¸¸æˆ–é”™è¯¯çš„å¤„ç†å¾®æœåŠ¡ï¼Œæ¯”å¦‚è¯´æŸä¸ªå¾®æœåŠ¡å¯„äº†ï¼Œæ–­è·¯å™¨å°±å¯ä»¥è°ƒç”¨å…¶ä»–å¾®æœåŠ¡é¡¶ä¸Šï¼ˆä¸€èˆ¬æ˜¯é”™è¯¯å¤„ç†çš„å¾®æœåŠ¡ï¼‰</li>
<li>Hystrix dashboard æ–­è·¯å™¨ç›‘æ§ï¼šé€šè¿‡turbineå°†é›†ç¾¤ä¸­å¤šä¸ªå®ä¾‹æ±‡èšåœ¨ä¸€èµ·ï¼Œå¯¹å¾®æœåŠ¡è¿›è¡Œæ–­è·¯å™¨ç›‘æ§</li>
<li>ç½‘å…³Zuulï¼šZuul æ˜¯åœ¨äº‘å¹³å°ä¸Šæä¾›åŠ¨æ€è·¯ç”±,ç›‘æ§,å¼¹æ€§,å®‰å…¨ç­‰è¾¹ç¼˜æœåŠ¡çš„æ¡†æ¶ï¼Œé€šè¿‡ç½‘å…³ç®€åŒ–äº†å¯¹å„ä¸ªæœåŠ¡çš„è®¿é—®ï¼šä¸å†éœ€è¦è®°å½•å„ä¸ªå¾®æœåŠ¡çš„åœ°å€å’Œç«¯å£ï¼Œè€Œæ˜¯é€šè¿‡ç½‘å…³å»è®¿é—®ä»–ä»¬</li>
</ul>
<h4 id="Springcloud-å¯åŠ¨æµ‹è¯•"><a href="#Springcloud-å¯åŠ¨æµ‹è¯•" class="headerlink" title="Springcloud å¯åŠ¨æµ‹è¯•"></a>Springcloud å¯åŠ¨æµ‹è¯•</h4><h5 id="ï¼ˆ1ï¼‰é¡¹ç›®å¯åŠ¨"><a href="#ï¼ˆ1ï¼‰é¡¹ç›®å¯åŠ¨" class="headerlink" title="ï¼ˆ1ï¼‰é¡¹ç›®å¯åŠ¨"></a>ï¼ˆ1ï¼‰é¡¹ç›®å¯åŠ¨</h5><ul>
<li><p>å¯åŠ¨RabbitMQï¼ˆè®¿é—®<a target="_blank" rel="noopener" href="http://127.0.0.1:15672/#">http://127.0.0.1:15672/#</a> å³å·²å¼€å¯ï¼‰</p>
</li>
<li><p>å¯åŠ¨é“¾è·¯è¿½è¸ªæœåŠ¡å™¨ï¼ˆè¿™é‡Œå¼€å¯çš„ç«¯å£è¦ä¸å¾®æœåŠ¡ä¸­çš„é…ç½®ä¸€è‡´ï¼‰</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar zipkin-server-2.10.1-exec.jar  --server.port=8050 --zipkin.collector.rabbitmq.addresses=localhost</span><br></pre></td></tr></table></figure>
</li>
<li><p>è®¿é—®é…ç½®ä»“åº“<a target="_blank" rel="noopener" href="https://github.com/Autovy/SpringCloudConfig/">https://github.com/Autovy/SpringCloudConfig/</a> ï¼ˆä¹Ÿå¯ä»¥åœ¨config-serveræ¨¡å—çš„é…ç½®æ–‡ä»¶ä¿®æ”¹æˆè‡ªå·±çš„ä»“åº“ï¼‰</p>
</li>
<li><p>è¿è¡ŒEurekaServerApplicationï¼Œå¯åŠ¨æ³¨å†Œä¸­å¿ƒæœåŠ¡ï¼ˆç«¯å£ä¸º8761ï¼‰</p>
</li>
<li><p>è¿è¡ŒConfigServerApplicationï¼Œå¯åŠ¨é…ç½®æœåŠ¡å™¨ï¼ˆç«¯å£ä¸º8030ï¼‰</p>
</li>
<li><p>è¿è¡ŒProductDataServiceApplicationï¼Œå¯åŠ¨æ•°æ®å¾®æœåŠ¡ï¼ˆç«¯å£å¡«å†™8001ï¼Œ8002å½¢æˆé›†ç¾¤ï¼‰</p>
</li>
<li><p>è¿è¡ŒProductViewServiceFeignApplicationï¼Œå¯åŠ¨è§†å›¾å¾®æœåŠ¡ï¼ˆç«¯å£å¯å¡«å†™8012ï¼Œ8013ï¼‰</p>
</li>
<li><p>è¿è¡ŒProductServiceHystrixDashboardApplicationï¼Œå¼€å¯æ–­è·¯å™¨ç›‘æ§ï¼Œç›‘æ§å•ä¸ªå¾®æœåŠ¡ï¼ˆç«¯å£ä¸º8020ï¼‰</p>
</li>
<li><p>è¿è¡ŒProductServiceTurbineApplicationï¼Œå¼€å¯èšåˆæ–­è·¯å™¨ç›‘æ§ä»¥ç›‘æ§é›†ç¾¤ï¼ˆç«¯å£ä¸º8021ï¼‰</p>
</li>
<li><p>è¿è¡Œè§†å›¾å¾®æœåŠ¡é‡Œçš„ AccessViewService æ¥å‘¨æœŸæ€§åœ°è®¿é—® <code>http://127.0.0.1:8012/products</code> å’Œ <code>http://127.0.0.1:8013/products</code>ï¼Œä»¥æä¾›ç›‘æ§æ•°æ®</p>
</li>
<li><p>è¿è¡ŒProductServiceZuulApplicationï¼Œå¼€å¯ç½‘å…³æœåŠ¡ï¼ˆç«¯å£ä¸º8060ï¼‰</p>
</li>
</ul>
<h5 id="ï¼ˆ2ï¼‰æµ‹è¯•æœåŠ¡æ³¨å†Œä¸­å¿ƒ"><a href="#ï¼ˆ2ï¼‰æµ‹è¯•æœåŠ¡æ³¨å†Œä¸­å¿ƒ" class="headerlink" title="ï¼ˆ2ï¼‰æµ‹è¯•æœåŠ¡æ³¨å†Œä¸­å¿ƒ"></a>ï¼ˆ2ï¼‰æµ‹è¯•æœåŠ¡æ³¨å†Œä¸­å¿ƒ</h5><p>æ‰“å¼€é“¾æ¥<a target="_blank" rel="noopener" href="http://127.0.0.1:8761/">http://127.0.0.1:8761/</a>   ï¼Œå³å¯æŸ¥çœ‹åˆ°æ³¨å†ŒæœåŠ¡ä¸­å¿ƒEureka</p>
<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191356386.png" alt="image-20210919135602819"></p>
<h5 id="ï¼ˆ3ï¼‰æµ‹è¯•æ•°æ®å¾®æœåŠ¡"><a href="#ï¼ˆ3ï¼‰æµ‹è¯•æ•°æ®å¾®æœåŠ¡" class="headerlink" title="ï¼ˆ3ï¼‰æµ‹è¯•æ•°æ®å¾®æœåŠ¡"></a>ï¼ˆ3ï¼‰æµ‹è¯•æ•°æ®å¾®æœåŠ¡</h5><p>æ‰“å¼€é“¾æ¥<a target="_blank" rel="noopener" href="http://127.0.0.1:8001/products">http://127.0.0.1:8001/products</a> å’Œ <a target="_blank" rel="noopener" href="http://127.0.0.1:8002/products">http://127.0.0.1:8002/products</a> éƒ½å¯ä»¥è®¿é—®åˆ°è¿”å›çš„æ•°æ®</p>
<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191358031.png" alt="image-20210919135818137"></p>
<h5 id="ï¼ˆ4ï¼‰æµ‹è¯•è§†å›¾å¾®æœåŠ¡"><a href="#ï¼ˆ4ï¼‰æµ‹è¯•è§†å›¾å¾®æœåŠ¡" class="headerlink" title="ï¼ˆ4ï¼‰æµ‹è¯•è§†å›¾å¾®æœåŠ¡"></a>ï¼ˆ4ï¼‰æµ‹è¯•è§†å›¾å¾®æœåŠ¡</h5><p>æ‰“å¼€é“¾æ¥<a target="_blank" rel="noopener" href="http://127.0.0.1:8012/products">http://127.0.0.1:8012/products</a> å’Œ <a target="_blank" rel="noopener" href="http://127.0.0.1:8013/products">http://127.0.0.1:8013/products</a> å¯ä»¥è®¿é—®åˆ°è§†å›¾é¡µé¢ï¼Œå¹¶ä¸”å¯ä»¥å‘ç°è§†å›¾å¾®æœåŠ¡ä¼šéšæœºé€‰æ‹©ç«¯å£è®¿é—®æ•°æ®å¾®æœåŠ¡å®ç°è´Ÿè½½å‡è¡¡</p>
<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191401332.png" alt="image-20210919140106927"></p>
<h5 id="ï¼ˆ5ï¼‰æµ‹è¯•æœåŠ¡é“¾è·¯è¿½è¸ª"><a href="#ï¼ˆ5ï¼‰æµ‹è¯•æœåŠ¡é“¾è·¯è¿½è¸ª" class="headerlink" title="ï¼ˆ5ï¼‰æµ‹è¯•æœåŠ¡é“¾è·¯è¿½è¸ª"></a>ï¼ˆ5ï¼‰æµ‹è¯•æœåŠ¡é“¾è·¯è¿½è¸ª</h5><p>æ‰“å¼€é“¾æ¥<a target="_blank" rel="noopener" href="http://127.0.0.1:8050/zipkin/dependency/">http://127.0.0.1:8050/zipkin/dependency/</a>  å³å¯è®¿é—®åˆ°</p>
<p>Zipkiné“¾è·¯è·Ÿè¸ªæœåŠ¡é¡µé¢ï¼Œå³å¯çœ‹åˆ°å¾®æœåŠ¡é—´çš„è®¿é—®å…³ç³»</p>
<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191404204.png" alt="image-20210919140414948"></p>
<h5 id="ï¼ˆ6ï¼‰æµ‹è¯•Busæ¶ˆæ¯æ€»çº¿"><a href="#ï¼ˆ6ï¼‰æµ‹è¯•Busæ¶ˆæ¯æ€»çº¿" class="headerlink" title="ï¼ˆ6ï¼‰æµ‹è¯•Busæ¶ˆæ¯æ€»çº¿"></a>ï¼ˆ6ï¼‰æµ‹è¯•Busæ¶ˆæ¯æ€»çº¿</h5><p>å¯è®¿é—®<a target="_blank" rel="noopener" href="http://127.0.0.1:8030/version/dev">http://127.0.0.1:8030/version/dev</a> æŸ¥çœ‹åˆ°é…ç½®æœåŠ¡å™¨çš„ä¿¡æ¯</p>
<p>è®¿é—®è§†å›¾æŸ¥çœ‹å½“å‰ç‰ˆæœ¬å·</p>
<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191407817.png" alt="image-20210919140727703"></p>
<p>ä¿®æ”¹é…ç½®æœåŠ¡å™¨gitä¸Šçš„ç‰ˆæœ¬å·ï¼Œè¿™é‡Œæˆ‘çš„ä»“åº“åœ°å€ä¸º<a target="_blank" rel="noopener" href="https://github.com/Autovy/SpringCloudConfig/">https://github.com/Autovy/SpringCloudConfig/</a></p>
<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191411510.png" alt="image-20210919141137143"></p>
<p>å¯åŠ¨è§†å›¾å¾®æœåŠ¡ä¸­çš„FreshConfigUtilä½¿ç”¨ post çš„æ–¹å¼è®¿é—® <a target="_blank" rel="noopener" href="http://localhost:8012/actuator/bus-refresh">http://localhost:8012/actuator/bus-refresh</a>  åœ°å€ï¼Œæ›´æ–°é…ç½®ä¿¡æ¯</p>
<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191414604.png" alt="image-20210919141416336"></p>
<p>æœ€åå†æŸ¥çœ‹è§†å›¾ä¸Šçš„æ›´æ–°</p>
<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191415873.png" alt="image-20210919141503558"></p>
<p>å¯ä»¥è®¿é—®RabbitMQé¡µé¢ï¼š<a target="_blank" rel="noopener" href="http://127.0.0.1:15672/">http://127.0.0.1:15672/</a> ï¼ŒæŸ¥çœ‹é˜Ÿåˆ—ï¼Œè¿æ¥ï¼Œè¿˜æœ‰äº¤æ¢æœº</p>
<h5 id="ï¼ˆ7ï¼‰æµ‹è¯•Hystrixæ–­è·¯å™¨åŠå…¶ç›‘æ§"><a href="#ï¼ˆ7ï¼‰æµ‹è¯•Hystrixæ–­è·¯å™¨åŠå…¶ç›‘æ§" class="headerlink" title="ï¼ˆ7ï¼‰æµ‹è¯•Hystrixæ–­è·¯å™¨åŠå…¶ç›‘æ§"></a>ï¼ˆ7ï¼‰æµ‹è¯•Hystrixæ–­è·¯å™¨åŠå…¶ç›‘æ§</h5><p>æ‰“å¼€é“¾æ¥<a target="_blank" rel="noopener" href="http://localhost:8020/hystrix">http://localhost:8020/hystrix</a> å³å¯è¿›å…¥Hystrixæ–­è·¯å™¨çš„ç›‘æ§å…¥å£</p>
<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191417418.png" alt="image-20210919141754328"></p>
<p>æ¡†å†…è¾“å…¥<a target="_blank" rel="noopener" href="http://localhost:8012/actuator/hystrix.stream">http://localhost:8012/actuator/hystrix.stream</a> å³å¯å¯¹8012ç«¯å£çš„è§†å›¾å¾®æœåŠ¡è¿›è¡Œç›‘æ§</p>
<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191419460.png" alt="image-20210919141940229"></p>
<p>æ¡†å†…è¾“å…¥<a target="_blank" rel="noopener" href="http://localhost:8021/turbine.stream">http://localhost:8021/turbine.stream</a> å³å¯å®ç°å¯¹æ•´ä¸ªé›†ç¾¤çš„è§†å›¾å¾®æœåŠ¡è¿›è¡Œç›‘æ§</p>
<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191421059.png" alt="image-20210919142137829"></p>
<p><strong>åœæ­¢æ•°æ®å¾®æœåŠ¡</strong>ProductDataServiceApplicationé›†ç¾¤ï¼Œè§¦å‘æ–­è·¯å™¨ï¼š</p>
<p>è®¿é—®è§†å›¾å¯å¾—</p>
<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191429890.png" alt="image-20210919142903819"></p>
<p>è®¿é—®å•ä¸ªå¾®æœåŠ¡ç›‘æ§é¡µé¢å¯å¾—</p>
<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191432572.png" alt="image-20210919143250565"></p>
<p>è®¿é—®èšåˆé›†ç¾¤å¾®æœåŠ¡ç›‘æ§é¡µé¢å¯å¾—</p>
<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191431299.png" alt="image-20210919143120242"></p>
<h5 id="ï¼ˆ8ï¼‰ç½‘å…³æµ‹è¯•"><a href="#ï¼ˆ8ï¼‰ç½‘å…³æµ‹è¯•" class="headerlink" title="ï¼ˆ8ï¼‰ç½‘å…³æµ‹è¯•"></a>ï¼ˆ8ï¼‰ç½‘å…³æµ‹è¯•</h5><p>å¯ä»¥åœ¨zuulçš„é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹å¾®æœåŠ¡çš„è®¿é—®è·¯ç”±ï¼Œæˆ‘ç»‘å®šçš„è·¯ç”±å¦‚ä¸‹ï¼š</p>
<p><a target="_blank" rel="noopener" href="http://localhost:8060/api-data/products">http://localhost:8060/api-data/products</a>  ï¼šè®¿é—®æ•°æ®å¾®æœåŠ¡é›†ç¾¤</p>
<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191358031.png" alt="image-20210919135818137"></p>
<p><a target="_blank" rel="noopener" href="http://localhost:8060/api-view/products">http://localhost:8060/api-view/products</a>  ï¼šè®¿é—®è§†å›¾å¾®æœåŠ¡é›†ç¾¤</p>
<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191426987.png" alt="image-20210919142625877"></p>
<p>å¯ä»¥å‘ç°å…¶è®¿é—®é›†ç¾¤çš„ç«¯å£ä¹Ÿæ˜¯è´Ÿè½½å‡è¡¡çš„</p>
<h4 id="æœåŠ¡æ³¨å†Œä¸­å¿ƒ"><a href="#æœåŠ¡æ³¨å†Œä¸­å¿ƒ" class="headerlink" title="æœåŠ¡æ³¨å†Œä¸­å¿ƒ"></a>æœåŠ¡æ³¨å†Œä¸­å¿ƒ</h4><h5 id="ï¼ˆ1ï¼‰éœ€æ±‚"><a href="#ï¼ˆ1ï¼‰éœ€æ±‚" class="headerlink" title="ï¼ˆ1ï¼‰éœ€æ±‚"></a>ï¼ˆ1ï¼‰éœ€æ±‚</h5><p>é€šè¿‡æœåŠ¡æ³¨å†Œä¸­å¿ƒç®¡ç†å¾®æœåŠ¡ï¼Œå¹¶ä¸”è®©å¾®æœåŠ¡ç›´æ¥å¯ä»¥ç›¸äº’å®šä½äº¤æµ</p>
<h5 id="ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–"><a href="#ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–" class="headerlink" title="ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–"></a>ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--        æ·»åŠ eurekaæœåŠ¡ç«¯--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="ï¼ˆ3ï¼‰ç›¸å…³é…ç½®"><a href="#ï¼ˆ3ï¼‰ç›¸å…³é…ç½®" class="headerlink" title="ï¼ˆ3ï¼‰ç›¸å…³é…ç½®"></a>ï¼ˆ3ï¼‰ç›¸å…³é…ç½®</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># eurekaæœåŠ¡é…ç½®</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">localhost</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">fetch-registry:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">serviceUrl:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://$&#123;eureka.instance.hostname&#125;:$&#123;server.port&#125;/eureka/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># sringå¾®æœåŠ¡æ¨¡å—å‘½å</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">eureka-server</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>hostname: localhost è¡¨ç¤ºä¸»æœºåç§°</li>
<li>registerWithEurekaï¼šfalse è¡¨ç¤ºæ˜¯å¦æ³¨å†Œåˆ°æœåŠ¡å™¨ã€‚ å› ä¸ºå®ƒæœ¬èº«å°±æ˜¯æœåŠ¡å™¨ï¼Œæ‰€ä»¥å°±æ— éœ€æŠŠè‡ªå·±æ³¨å†Œåˆ°æœåŠ¡å™¨</li>
<li>fetchRegistry: false è¡¨ç¤ºæ˜¯å¦è·å–æœåŠ¡å™¨çš„æ³¨å†Œä¿¡æ¯ï¼Œå’Œä¸Šé¢åŒç†ï¼Œè¿™é‡Œä¹Ÿè®¾ç½®ä¸º false</li>
<li>defaultZoneï¼š <code>http://$&#123;eureka.instance.hostname&#125;:$&#123;server.port&#125;/eureka/</code> è‡ªå·±ä½œä¸ºæœåŠ¡å™¨ï¼Œå…¬å¸ƒå‡ºæ¥çš„åœ°å€ã€‚ æ¯”å¦‚åç»­æŸä¸ªå¾®æœåŠ¡è¦æŠŠè‡ªå·±æ³¨å†Œåˆ° eureka server, é‚£ä¹ˆå°±è¦ä½¿ç”¨è¿™ä¸ªåœ°å€ï¼š <a target="_blank" rel="noopener" href="http://localhost:8761/eureka/">http://localhost:8761/eureka/</a></li>
</ul>
<h5 id="ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨"><a href="#ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨" class="headerlink" title="ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨"></a>ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaServer</span> <span class="comment">// æ³¨è§£æ ‡æ³¨ä¸ºEurekaæœåŠ¡ç«¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EurekaServerApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¾ç½®é»˜è®¤ç«¯å£</span></span><br><span class="line">        <span class="keyword">int</span> port = <span class="number">8761</span>;</span><br><span class="line">        <span class="comment">// å¯åŠ¨EurekaServerç®¡ç†é¡µé¢</span></span><br><span class="line">        <span class="keyword">new</span> SpringApplicationBuilder(EurekaServerApplication.class)</span><br><span class="line">                .properties(<span class="string">&quot;server.port=&quot;</span> + port)</span><br><span class="line">                .run(args);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>







<h4 id="é…ç½®æœåŠ¡å™¨"><a href="#é…ç½®æœåŠ¡å™¨" class="headerlink" title="é…ç½®æœåŠ¡å™¨"></a>é…ç½®æœåŠ¡å™¨</h4><h5 id="ï¼ˆ1ï¼‰éœ€æ±‚-1"><a href="#ï¼ˆ1ï¼‰éœ€æ±‚-1" class="headerlink" title="ï¼ˆ1ï¼‰éœ€æ±‚"></a>ï¼ˆ1ï¼‰éœ€æ±‚</h5><p>å¾®æœåŠ¡è¦åšé›†ç¾¤ï¼Œè¿™å°±æ„å‘³ç€ï¼Œä¼šæœ‰å¤šä¸ªå¾®æœåŠ¡å®ä¾‹ã€‚ åœ¨ä¸šåŠ¡ä¸Šæœ‰æ—¶å€™éœ€è¦ä¿®æ”¹ä¸€äº›é…ç½®ä¿¡æ¯ï¼Œæ¯”å¦‚è¯´ ç‰ˆæœ¬ä¿¡æ¯ï¼Œå€˜è‹¥æ²¡æœ‰é…ç½®æœåŠ¡ï¼Œ é‚£ä¹ˆå°±éœ€è¦æŒ¨ä¸ªä¿®æ”¹å¾®æœåŠ¡ï¼ŒæŒ¨ä¸ªé‡æ–°éƒ¨ç½²å¾®æœåŠ¡ï¼Œè¿™æ ·å°±æ¯”è¾ƒéº»çƒ¦ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥æŠŠè¿™äº›é…ç½®ä¿¡æ¯æ”¾åœ¨ä¸€ä¸ªå…¬å…±çš„åœ°æ–¹ï¼Œæ¯”å¦‚gitï¼Œç„¶åé€šè¿‡é…ç½®æœåŠ¡å™¨æŠŠå®ƒè·å–ä¸‹æ¥ï¼Œç„¶åå¾®æœåŠ¡å†ä»é…ç½®æœåŠ¡å™¨ä¸Šå–ä¸‹æ¥</p>
<h5 id="ï¼ˆ2ï¼‰gitå‡†å¤‡"><a href="#ï¼ˆ2ï¼‰gitå‡†å¤‡" class="headerlink" title="ï¼ˆ2ï¼‰gitå‡†å¤‡"></a>ï¼ˆ2ï¼‰gitå‡†å¤‡</h5><p>åœ¨githubä¸Šæ–°å»ºä»“åº“ï¼Œå¹¶åˆ›å»ºrespoç›®å½•ï¼Œåœ¨ç›®å½•ä¸‹æ·»åŠ  product-view-service-feign-dev.propertiesæ–‡ä»¶å¹¶å†™å…¥ç‰ˆæœ¬ä¿¡æ¯</p>
<p>å¦‚æˆ‘åˆ›å»ºçš„ä»“åº“ï¼š<a target="_blank" rel="noopener" href="https://github.com/Autovy/SpringCloudConfig">https://github.com/Autovy/SpringCloudConfig</a></p>
<h5 id="ï¼ˆ3ï¼‰ç›¸å…³ä¾èµ–"><a href="#ï¼ˆ3ï¼‰ç›¸å…³ä¾èµ–" class="headerlink" title="ï¼ˆ3ï¼‰ç›¸å…³ä¾èµ–"></a>ï¼ˆ3ï¼‰ç›¸å…³ä¾èµ–</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- eurekaå®¢æˆ·ç«¯æ³¨å†Œä¾èµ– --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- springboot webæ”¯æŒ --&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®æœåŠ¡æ”¯æŒ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-config-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="ï¼ˆ4ï¼‰ç›¸å…³é…ç½®"><a href="#ï¼ˆ4ï¼‰ç›¸å…³é…ç½®" class="headerlink" title="ï¼ˆ4ï¼‰ç›¸å…³é…ç½®"></a>ï¼ˆ4ï¼‰ç›¸å…³é…ç½®</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é…ç½®å¾®æœåŠ¡åä¸é…ç½®æœåŠ¡å™¨çš„é…ç½®ä¿¡æ¯ï¼ˆè¿™é‡Œç”¨gitä½œä¸ºé…ç½®æœåŠ¡å™¨ï¼‰</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">config-server</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">config:</span></span><br><span class="line">      <span class="attr">label:</span> <span class="string">master</span></span><br><span class="line">      <span class="attr">server:</span></span><br><span class="line">        <span class="attr">git:</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">https://github.com/Autovy/SpringCloudConfig/</span> <span class="comment">#githubä»“åº“åœ°å€</span></span><br><span class="line">          <span class="attr">search-paths:</span> <span class="string">respo</span>  <span class="comment"># ä»“åº“ä¸‹çš„ç›®å½•</span></span><br><span class="line">          <span class="attr">default-label:</span> <span class="string">main</span>  <span class="comment"># åˆ†æ”¯åæ”¹ä¸ºäº†main</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®æ³¨å†Œä¸­æ€§çš„åœ°å€è¦ä¸Eurekaçš„é…ç½®å¯¹åº”</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">serviceUrl:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://localhost:8761/eureka/</span></span><br></pre></td></tr></table></figure>





<h5 id="ï¼ˆ5ï¼‰æœåŠ¡å¯åŠ¨"><a href="#ï¼ˆ5ï¼‰æœåŠ¡å¯åŠ¨" class="headerlink" title="ï¼ˆ5ï¼‰æœåŠ¡å¯åŠ¨"></a>ï¼ˆ5ï¼‰æœåŠ¡å¯åŠ¨</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span>  <span class="comment">// æ³¨è§£æ ‡æ³¨ä¸ºEurekaå®¢æˆ·ç«¯ï¼Œå®ç°æ³¨å†Œ</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="meta">@EnableConfigServer</span>  <span class="comment">// ä½¿ç”¨è¯¥æ³¨è§£è¡¨æ˜è¯¥springbootæ˜¯ä¸ªé…ç½®æœåŠ¡å™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConfigServerApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> port = <span class="number">8030</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> SpringApplicationBuilder(ConfigServerApplication.class)</span><br><span class="line">                .properties(<span class="string">&quot;server.port=&quot;</span>+port)</span><br><span class="line">                .run(args);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h4 id="RabbitMQ"><a href="#RabbitMQ" class="headerlink" title="RabbitMQ"></a>RabbitMQ</h4><h5 id="ï¼ˆ1ï¼‰-RabbitMQçš„ä»‹ç»"><a href="#ï¼ˆ1ï¼‰-RabbitMQçš„ä»‹ç»" class="headerlink" title="ï¼ˆ1ï¼‰ RabbitMQçš„ä»‹ç»"></a>ï¼ˆ1ï¼‰ RabbitMQçš„ä»‹ç»</h5><p>é€šè¿‡RabbitMQä¸æ¶ˆæ¯æ€»çº¿Buså®ç°é…ç½®æœåŠ¡å™¨çƒ­éƒ¨ç½²å³è‡ªåŠ¨æ›´æ–°é…ç½®ä¿¡æ¯</p>
<p>RabbitMQ æ˜¯ä¸€ä¸ªç”± Erlang è¯­è¨€å¼€å‘çš„ AMQP çš„å¼€æºå®ç°ã€‚</p>
<p><code>AMQP</code>(<code>Advanced Message Queuing Protocol</code>)ï¼Œé¡¾åæ€ä¹‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ¶ˆæ¯åè®®ï¼Œèƒ½å¤Ÿä½¿å¾—éµå¾ªè¯¥åè®®çš„å®¢æˆ·ç«¯å’Œæ¶ˆæ¯ä¸­é—´ä»¶(<code>Broker</code>)è¿›è¡Œé€šè®¯</p>
<h5 id="ï¼ˆ2ï¼‰RabbitMQå®‰è£…"><a href="#ï¼ˆ2ï¼‰RabbitMQå®‰è£…" class="headerlink" title="ï¼ˆ2ï¼‰RabbitMQå®‰è£…"></a>ï¼ˆ2ï¼‰RabbitMQå®‰è£…</h5><p>é¦–å…ˆè¦å®‰è£…erlangï¼Œå¹¶é…ç½®ç¯å¢ƒï¼Œæ‰ç»§ç»­å®‰è£…RabbitMQ</p>
<p>é…ç½®æ’ä»¶åé‡å¯RabbitMQ</p>
<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109160921566.png" alt="image-20210916092150386"></p>
<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109160922543.png" alt="image-20210916092243391"></p>
<h5 id="ï¼ˆ3ï¼‰RabbitMQé¡µé¢æ— æ³•è®¿é—®é—®é¢˜"><a href="#ï¼ˆ3ï¼‰RabbitMQé¡µé¢æ— æ³•è®¿é—®é—®é¢˜" class="headerlink" title="ï¼ˆ3ï¼‰RabbitMQé¡µé¢æ— æ³•è®¿é—®é—®é¢˜"></a>ï¼ˆ3ï¼‰RabbitMQé¡µé¢æ— æ³•è®¿é—®é—®é¢˜</h5><p>ä¸€èˆ¬æ¥è¯´å¼€å¯äº†RabbitMQæœåŠ¡åï¼Œå¯ä»¥é€šè¿‡é“¾æ¥<a target="_blank" rel="noopener" href="http://127.0.0.1:15672/è¿›è¡Œè®¿é—®">http://127.0.0.1:15672/è¿›è¡Œè®¿é—®</a></p>
<p>å¦‚æœé¡µé¢æ— æ³•è®¿é—®åˆ°ï¼Œå¯ä»¥è‡ªè¡Œä¸‹åˆ—è¯­å¥é‡æ–°ç”Ÿæˆç›¸å…³é…ç½®æ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net stop rabbitmq &amp;&amp; rabbitmq-server -detached &amp;&amp; net start rabbitmq</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å³å¯è®¿é—®åˆ°RabbitMQçš„é¡µé¢ï¼ˆç”¨æˆ·ä¸å¯†ç é»˜è®¤ä¸ºguest/guestï¼‰</p>
<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109160935154.png" alt="image-20210916093536018"></p>
<h5 id="ï¼ˆ4ï¼‰æ¶ˆæ¯è·¯ç”±è¿‡ç¨‹"><a href="#ï¼ˆ4ï¼‰æ¶ˆæ¯è·¯ç”±è¿‡ç¨‹" class="headerlink" title="ï¼ˆ4ï¼‰æ¶ˆæ¯è·¯ç”±è¿‡ç¨‹"></a>ï¼ˆ4ï¼‰æ¶ˆæ¯è·¯ç”±è¿‡ç¨‹</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109160946397.png" alt="image-20210916094610081"></p>
<p>æ¶ˆæ¯<code>(message)</code>å‘å¸ƒç»™äº¤æ¢æœº<code>(Exchange)</code></p>
<p><code>Exchange</code>ç›¸å½“äºé‚®å±€æˆ–è€…ä¿¡ç®±ï¼Œå®ƒæ¥æ”¶åˆ°æ¶ˆæ¯åä¼šæ ¹æ®ä¸åŒçš„è§„åˆ™(ç§°ä¸º<code>Bindings</code>)æ¥ç¡®å®šè¦å‘ç»™å“ªä¸ªé˜Ÿåˆ—<code>(queue)</code></p>
<p>æœ€åAMQPä»£ç†ä¼šå°†æ¶ˆæ¯æŠ•é€’ç»™è®¢é˜…äº†æ­¤é˜Ÿåˆ—çš„æ¶ˆè´¹è€…ï¼Œæˆ–è€…æ˜¯æ¶ˆè´¹è€…ä¾æ®éœ€æ±‚è‡ªè¡Œè·å–</p>
<h5 id="ï¼ˆ5ï¼‰æ¨¡å¼åˆ†ç±»"><a href="#ï¼ˆ5ï¼‰æ¨¡å¼åˆ†ç±»" class="headerlink" title="ï¼ˆ5ï¼‰æ¨¡å¼åˆ†ç±»"></a>ï¼ˆ5ï¼‰æ¨¡å¼åˆ†ç±»</h5><p>RabbitMQæä¾›äº†å››ç§Exchangeæ¨¡å¼ï¼šfanout,direct,topic,header ã€‚headeråœ¨å®é™…ä½¿ç”¨ä¸­å¾ˆå°‘ç”¨åˆ°ï¼Œæ•…æˆ‘ä»¬åªä»‹ç»å‰é¢ä¸‰ç§</p>
<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109160953038.png" alt="img"></p>
<ul>
<li>Direct æ¨¡å¼å°±æ˜¯æŒ‡å®šé˜Ÿåˆ—æ¨¡å¼ï¼Œ æ¶ˆæ¯æ¥äº†ï¼Œåªå‘ç»™æŒ‡å®šçš„ Queue, å…¶ä»–Queue éƒ½æ”¶ä¸åˆ°</li>
<li>Topic æ¨¡å¼å°±æ˜¯ä¸»é¢˜æ¨¡å¼ï¼ŒQueue æŒ‰ç…§æŸç§ä¸»é¢˜åˆ†ç±»æ¥æ”¶æ¶ˆæ¯</li>
<li>Fanout æ¨¡å¼å°±æ˜¯å¹¿æ’­æ¨¡å¼ï¼Œæ¶ˆæ¯æ¥äº†ï¼Œä¼šå‘ç»™æ‰€æœ‰çš„é˜Ÿåˆ—</li>
</ul>
<p>åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬è®©config-serverå»gitè·å–æœ€æ–°é…ç½®ä¿¡æ¯ï¼Œå¹¶å°†è¯¥ä¿¡æ¯å¹¿æ’­ç»™é›†ç¾¤ä¸­çš„æ‰€æœ‰è§†å›¾å¾®æœåŠ¡</p>
<h4 id="æ–­è·¯å™¨ç›‘æ§"><a href="#æ–­è·¯å™¨ç›‘æ§" class="headerlink" title="æ–­è·¯å™¨ç›‘æ§"></a>æ–­è·¯å™¨ç›‘æ§</h4><h5 id="ï¼ˆ1ï¼‰éœ€æ±‚-2"><a href="#ï¼ˆ1ï¼‰éœ€æ±‚-2" class="headerlink" title="ï¼ˆ1ï¼‰éœ€æ±‚"></a>ï¼ˆ1ï¼‰éœ€æ±‚</h5><p>å‰é¢æˆ‘ä»¬äº†è§£äº†æ–­è·¯å™¨ï¼Œ å½“æ•°æ®æœåŠ¡ä¸å¯ç”¨çš„æ—¶å€™ï¼Œ æ–­è·¯å™¨å°±ä¼šå‘æŒ¥ä½œç”¨</p>
<p>è€Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ–­è·¯å™¨ç›‘æ§æ¥å¯è§†åŒ–æ–­è·¯å™¨è¿è¡Œæƒ…å†µ</p>
<h5 id="ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–-1"><a href="#ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–-1" class="headerlink" title="ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–"></a>ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- åœ¨eurekaæ³¨å†Œå¾®æœåŠ¡ä¾èµ– --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ·»åŠ webæ”¯æŒ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ¶ˆæ¯æ€»çº¿ä¾èµ–ï¼Œç”¨äºè®¿é—®è·¯å¾„/actuator/bus-refresh --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å¢åŠ æ–­è·¯å™¨ä¾èµ– --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-hystrix<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">&lt;!-- å¢åŠ æ–­è·¯å™¨ä¾èµ–ç›‘æ§é¢æ¿ä¾èµ– --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-hystrix-dashboard<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="ï¼ˆ3ï¼‰ç›¸å…³é…ç½®-1"><a href="#ï¼ˆ3ï¼‰ç›¸å…³é…ç½®-1" class="headerlink" title="ï¼ˆ3ï¼‰ç›¸å…³é…ç½®"></a>ï¼ˆ3ï¼‰ç›¸å…³é…ç½®</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é…ç½®å¾®æœåŠ¡å¹¶å‘½å</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">hystrix-dashboard</span></span><br></pre></td></tr></table></figure>



<h5 id="ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨-1"><a href="#ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨-1" class="headerlink" title="ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨"></a>ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableHystrixDashboard</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductServiceHystrixDashboardApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> port = <span class="number">8020</span>;</span><br><span class="line">        <span class="keyword">if</span>(!NetUtil.isUsableLocalPort(port)) &#123;</span><br><span class="line">            System.err.printf(<span class="string">&quot;ç«¯å£%dè¢«å ç”¨äº†ï¼Œæ— æ³•å¯åŠ¨%n&quot;</span>, port );</span><br><span class="line">            System.exit(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ„é€ æœåŠ¡</span></span><br><span class="line">        <span class="keyword">new</span> SpringApplicationBuilder(ProductServiceHystrixDashboardApplication.class)</span><br><span class="line">                .properties(<span class="string">&quot;server.port=&quot;</span> + port)</span><br><span class="line">                .run(args);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h4 id="æ–­è·¯å™¨èšåˆç›‘æ§"><a href="#æ–­è·¯å™¨èšåˆç›‘æ§" class="headerlink" title="æ–­è·¯å™¨èšåˆç›‘æ§"></a>æ–­è·¯å™¨èšåˆç›‘æ§</h4><h5 id="ï¼ˆ1ï¼‰éœ€æ±‚-3"><a href="#ï¼ˆ1ï¼‰éœ€æ±‚-3" class="headerlink" title="ï¼ˆ1ï¼‰éœ€æ±‚"></a>ï¼ˆ1ï¼‰éœ€æ±‚</h5><p>ä¸Šé¢çš„å†…å®¹åªèƒ½é’ˆå¯¹ä¸€ä¸ªå¾®æœåŠ¡è¿›è¡Œæ–­è·¯å™¨ç›‘æ§ï¼Œä½†æ˜¯ä¸€ä¸ªå¾®æœåŠ¡é€šå¸¸ç”±å¤šä¸ªå®ä¾‹ç»„æˆï¼Œç›‘æ§èµ·æ¥ååˆ†ä¸æ–¹ä¾¿ï¼›springcloudæä¾›äº†turbineå¯ä»¥æŠŠä¸€ä¸ªé›†ç¾¤é‡Œçš„å¤šä¸ªå®ä¾‹æ±‡èšåœ¨ä¸€ä¸ªturbineé‡Œï¼Œè¿™æ ·å°±èƒ½å¤Ÿåœ¨é›†ç¾¤å±‚é¢è¿›è¡Œç›‘æ§äº†</p>
<h5 id="ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–-2"><a href="#ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–-2" class="headerlink" title="ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–"></a>ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åœ¨eurekaæ³¨å†Œå¾®æœåŠ¡ä¾èµ– --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ¶ˆæ¯æ€»çº¿ä¾èµ–ï¼Œç”¨äºè®¿é—®è·¯å¾„/actuator/bus-refresh --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¢åŠ æ–­è·¯å™¨ä¾èµ– --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-hystrix<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¢åŠ æ–­è·¯å™¨ä¾èµ–ç›‘æ§é¢æ¿ä¾èµ– --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-hystrix-dashboard<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¢åŠ turbine --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-turbine<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="ï¼ˆ3ï¼‰ç›¸å…³é…ç½®-2"><a href="#ï¼ˆ3ï¼‰ç›¸å…³é…ç½®-2" class="headerlink" title="ï¼ˆ3ï¼‰ç›¸å…³é…ç½®"></a>ï¼ˆ3ï¼‰ç›¸å…³é…ç½®</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">turbine</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®turbine</span></span><br><span class="line"><span class="attr">turbine:</span></span><br><span class="line">  <span class="attr">aggregator:</span></span><br><span class="line">    <span class="attr">cluster-config:</span> <span class="string">default</span></span><br><span class="line">  <span class="comment"># é…ç½®Eurekaä¸­çš„serviceIdåˆ—è¡¨ï¼Œè¡¨æ˜ç›‘æ§å“ªäº›æœåŠ¡</span></span><br><span class="line">  <span class="comment">#ï¼ˆè¿™æ ·å°±ä¼šæŠŠå¾®æœåŠ¡åç§°ä¸ºproduct-view-service-feignçš„å®ä¾‹ä¿¡æ¯æ”¶é›†èµ·æ¥ï¼‰</span></span><br><span class="line">  <span class="attr">app-config:</span> <span class="string">product-view-service-feign</span></span><br><span class="line">  <span class="attr">cluster-name-expression:</span> <span class="string">new</span> <span class="string">String(&quot;default&quot;)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®æ³¨å†Œä¸­æ€§çš„åœ°å€è¦ä¸Eurekaçš„é…ç½®å¯¹åº”ï¼ˆæ³¨å†Œï¼‰</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">serviceUrl:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://localhost:8761/eureka/</span></span><br></pre></td></tr></table></figure>





<h5 id="ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨-2"><a href="#ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨-2" class="headerlink" title="ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨"></a>ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯åŠ¨ç±»</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableTurbine</span> <span class="comment">// å¼€å¯Turbine</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductServiceTurbineApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> port = <span class="number">8021</span>;</span><br><span class="line">        <span class="keyword">if</span>(!NetUtil.isUsableLocalPort(port))&#123;</span><br><span class="line">            System.err.printf(<span class="string">&quot;ç«¯å£%dè¢«å ç”¨ï¼Œæ— æ³•å¯åŠ¨%n&quot;</span>, port);</span><br><span class="line">            System.exit(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">new</span> SpringApplicationBuilder(ProductServiceTurbineApplication.class)</span><br><span class="line">                .properties(<span class="string">&quot;server.port=&quot;</span>+ port)</span><br><span class="line">                .run(args);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h4 id="ç½‘å…³Zuul"><a href="#ç½‘å…³Zuul" class="headerlink" title="ç½‘å…³Zuul"></a>ç½‘å…³Zuul</h4><h5 id="ï¼ˆ1ï¼‰éœ€æ±‚-4"><a href="#ï¼ˆ1ï¼‰éœ€æ±‚-4" class="headerlink" title="ï¼ˆ1ï¼‰éœ€æ±‚"></a>ï¼ˆ1ï¼‰éœ€æ±‚</h5><p>å¾®æœåŠ¡æœ‰å¯èƒ½æ”¾åœ¨ä¸åŒçš„ ip åœ°å€ä¸Šï¼Œæœ‰å¯èƒ½æ˜¯ä¸åŒçš„ç«¯å£</p>
<p>ä¸ºäº†è®¿é—®ä»–ä»¬ï¼Œå°±éœ€è¦è®°å½•è¿™äº›åœ°å€å’Œç«¯å£ã€‚ è€Œåœ°å€å’Œç«¯å£éƒ½å¯èƒ½ä¼šå˜åŒ–ï¼Œè¿™å°±å¢åŠ äº†è®¿é—®è€…çš„è´Ÿæ‹…</p>
<p>è¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ç½‘å…³ç®€åŒ–å¯¹å¾®æœåŠ¡çš„è®¿é—®ï¼Œä»…éœ€è¦ä¸€ä¸ªåœ°å€ä¸€ä¸ªç«¯å£å°±å¯ä»¥å®ç°å¯¹ä¸€ä¸ªå¾®æœåŠ¡é›†ç¾¤çš„è®¿é—®</p>
<h5 id="ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–-3"><a href="#ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–-3" class="headerlink" title="ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–"></a>ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¾®æœåŠ¡æ³¨å†Œä¸­å¿ƒ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- webæœåŠ¡æ”¯æŒ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¢åŠ zuulç½‘å…³ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-zuul<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="ï¼ˆ3ï¼‰ç›¸å…³é…ç½®-3"><a href="#ï¼ˆ3ï¼‰ç›¸å…³é…ç½®-3" class="headerlink" title="ï¼ˆ3ï¼‰ç›¸å…³é…ç½®"></a>ï¼ˆ3ï¼‰ç›¸å…³é…ç½®</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">product-service-zuul</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®æ³¨å†Œä¸­æ€§çš„åœ°å€è¦ä¸Eurekaçš„é…ç½®å¯¹åº”ï¼ˆæ³¨å†Œï¼‰</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">serviceUrl:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://localhost:8761/eureka/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹zuulè¿›è¡Œè·¯ç”±æ˜ å°„</span></span><br><span class="line"><span class="attr">zuul:</span></span><br><span class="line">  <span class="attr">routes:</span></span><br><span class="line">    <span class="attr">api-a:</span></span><br><span class="line">      <span class="attr">path:</span> <span class="string">/api-data/**</span></span><br><span class="line">      <span class="attr">serviceId:</span> <span class="string">PRODUCT-DATA-SERVICE</span></span><br><span class="line">    <span class="attr">api-b:</span></span><br><span class="line">      <span class="attr">path:</span> <span class="string">/api-view/**</span></span><br><span class="line">      <span class="attr">serviceId:</span> <span class="string">PRODUCT-VIEW-SERVICE-FEIGN</span></span><br></pre></td></tr></table></figure>



<h5 id="ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨-3"><a href="#ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨-3" class="headerlink" title="ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨"></a>ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯åŠ¨ç±»</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableZuulProxy</span> <span class="comment">// ç½‘å…³æœåŠ¡</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span> <span class="comment">// æ³¨å†ŒæœåŠ¡å®¢æˆ·ç«¯</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductServiceZuulApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> port = <span class="number">8060</span>;</span><br><span class="line">        <span class="keyword">if</span>(!NetUtil.isUsableLocalPort(port))&#123;</span><br><span class="line">            System.err.printf(<span class="string">&quot;ç«¯å£%dè¢«å ç”¨äº†ï¼Œæ— æ³•å¯åŠ¨%d&quot;</span>, port);</span><br><span class="line">            System.exit(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> SpringApplicationBuilder(ProductServiceZuulApplication.class)</span><br><span class="line">                .properties(<span class="string">&quot;server.port=&quot;</span> + port)</span><br><span class="line">                .run(args);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h4 id="æ•°æ®å¾®æœåŠ¡"><a href="#æ•°æ®å¾®æœåŠ¡" class="headerlink" title="æ•°æ®å¾®æœåŠ¡"></a>æ•°æ®å¾®æœåŠ¡</h4><h5 id="ï¼ˆ1ï¼‰éœ€æ±‚-5"><a href="#ï¼ˆ1ï¼‰éœ€æ±‚-5" class="headerlink" title="ï¼ˆ1ï¼‰éœ€æ±‚"></a>ï¼ˆ1ï¼‰éœ€æ±‚</h5><p>è®¿é—®æ•°æ®åº“ä¸ºè§†å›¾å¾®æœåŠ¡æä¾›æ•°æ®ï¼ˆåœ¨æœ¬é¡¹ç›®ä¸­ä¸ºäº†é…ç½®æ–¹ä¾¿ï¼Œä¸è®¾daoå±‚ç›´æ¥åœ¨serviceå±‚æä¾›å‡æ•°æ®ï¼‰ï¼ŒçœŸæ­£æ„ä¹‰ä¸Šå®Œæ•´çš„springboot</p>
<h5 id="ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–-4"><a href="#ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–-4" class="headerlink" title="ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–"></a>ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- eurekaå®¢æˆ·ç«¯ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- webæœåŠ¡ç”¨äºæä¾›æ§åˆ¶å±‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--å¢åŠ zipkinï¼Œä½¿æœåŠ¡å¯ä»¥è¢«è¿½è¸ªåˆ°--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-zipkin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="ï¼ˆ3ï¼‰ç›¸å…³é…ç½®-4"><a href="#ï¼ˆ3ï¼‰ç›¸å…³é…ç½®-4" class="headerlink" title="ï¼ˆ3ï¼‰ç›¸å…³é…ç½®"></a>ï¼ˆ3ï¼‰ç›¸å…³é…ç½®</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é…ç½®å¾®æœåŠ¡åä¸é…ç½®æœåŠ¡é“¾è·¯è¿½è¸ª</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">product-data-service</span></span><br><span class="line">  <span class="attr">zipkin:</span></span><br><span class="line">    <span class="attr">base-url:</span> <span class="string">http://localhost:8050</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®æ³¨å†Œä¸­æ€§çš„åœ°å€è¦ä¸Eurekaçš„é…ç½®å¯¹åº”</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">serviceUrl:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://localhost:8761/eureka/</span></span><br></pre></td></tr></table></figure>



<h5 id="ï¼ˆ4ï¼‰å®ä½“ç±»"><a href="#ï¼ˆ4ï¼‰å®ä½“ç±»" class="headerlink" title="ï¼ˆ4ï¼‰å®ä½“ç±»"></a>ï¼ˆ4ï¼‰å®ä½“ç±»</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ„é€ å®ä½“ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> price;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPrice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPrice</span><span class="params">(<span class="keyword">int</span> price)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">	<span class="comment">// é»˜è®¤æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Product</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ©ç”¨è¯¥æ„é€ æ–¹æ³•ï¼Œå¯ä»¥å£°æ˜ä¸€ä¸ªç”±é»˜è®¤å€¼çš„å¯¹è±¡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Product</span><span class="params">(<span class="keyword">int</span> id, String name, <span class="keyword">int</span> price)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="ï¼ˆ5ï¼‰æœåŠ¡å±‚"><a href="#ï¼ˆ5ï¼‰æœåŠ¡å±‚" class="headerlink" title="ï¼ˆ5ï¼‰æœåŠ¡å±‚"></a>ï¼ˆ5ï¼‰æœåŠ¡å±‚</h5><p>ä¸æ¥å…¥daoå±‚ï¼Œç›´æ¥åœ¨æœåŠ¡å±‚æä¾›å‡æ•°æ®</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æœåŠ¡å±‚ï¼ˆè¿™é‡Œä¸æ¥å…¥daoå±‚ï¼Œè€Œæ˜¯æä¾›å‡æ•°æ®ï¼‰</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å¾—é…ç½®ä¸­çš„ç«¯å£å·</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;server.port&#125;&quot;)</span></span><br><span class="line">    String port;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Product&gt; <span class="title">list</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;Product&gt; ps = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="comment">// æä¾›å‡æ•°æ®ï¼Œlistæ–¹æ³•æ²¡æœ‰å¯¹åº”daoå±‚ç›¸åº”çš„æ•°æ®åº“æ“ä½œæ–¹æ³•</span></span><br><span class="line">        ps.add(<span class="keyword">new</span> Product(<span class="number">1</span>,<span class="string">&quot;product a from port:&quot;</span>+port, <span class="number">50</span>));</span><br><span class="line">        ps.add(<span class="keyword">new</span> Product(<span class="number">2</span>,<span class="string">&quot;product b from port:&quot;</span>+port, <span class="number">150</span>));</span><br><span class="line">        ps.add(<span class="keyword">new</span> Product(<span class="number">3</span>,<span class="string">&quot;product c from port:&quot;</span>+port, <span class="number">250</span>));</span><br><span class="line">        <span class="keyword">return</span> ps;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="ï¼ˆ6ï¼‰æ§åˆ¶å±‚"><a href="#ï¼ˆ6ï¼‰æ§åˆ¶å±‚" class="headerlink" title="ï¼ˆ6ï¼‰æ§åˆ¶å±‚"></a>ï¼ˆ6ï¼‰æ§åˆ¶å±‚</h5><p>æ¥å…¥æœåŠ¡å±‚å¹¶æ˜ å°„è·¯å¾„</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductController</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è‡ªåŠ¨è£…é…æœåŠ¡å±‚</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    ProductService productService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ˜ å°„urlè·¯å¾„</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/products&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">products</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// è°ƒç”¨æœåŠ¡å±‚çš„æ–¹æ³•</span></span><br><span class="line">        List&lt;Product&gt; ps = productService.list();</span><br><span class="line">        <span class="keyword">return</span> ps;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="ï¼ˆ7ï¼‰æœåŠ¡å¯åŠ¨"><a href="#ï¼ˆ7ï¼‰æœåŠ¡å¯åŠ¨" class="headerlink" title="ï¼ˆ7ï¼‰æœåŠ¡å¯åŠ¨"></a>ï¼ˆ7ï¼‰æœåŠ¡å¯åŠ¨</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span> <span class="comment">// æœåŠ¡æ³¨å†Œä¸­å¿ƒå®¢æˆ·ç«¯ï¼Œå¾®æœåŠ¡æ³¨å†Œ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductDataServiceApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®©ç”¨æˆ·è¾“å…¥ç«¯å£å·ï¼Œå¼€å¯å¤šä¸ªæœåŠ¡å½¢æˆé›†ç¾¤</span></span><br><span class="line">        <span class="keyword">int</span> port = <span class="number">0</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;è¯·è¾“å…¥å¼€å¯æœåŠ¡çš„ç«¯å£å·ï¼š&quot;</span>);</span><br><span class="line">        Scanner strpost = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        port = strpost.nextInt();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¯åŠ¨ProductDataServiceæœåŠ¡</span></span><br><span class="line">        <span class="keyword">new</span> SpringApplicationBuilder(ProductDataServiceApplication.class)</span><br><span class="line">                .properties(<span class="string">&quot;server.port=&quot;</span> + port)</span><br><span class="line">                .run(args);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* é…ç½®zipkin:åœ¨å¯åŠ¨ç±»é‡Œé…ç½® Sampler æŠ½æ ·ç­–ç•¥ï¼š ALWAYS_SAMPLE è¡¨ç¤ºæŒç»­æŠ½æ ·*/</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Sampler <span class="title">defaultSampler</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Sampler.ALWAYS_SAMPLE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="è§†å›¾å¾®æœåŠ¡"><a href="#è§†å›¾å¾®æœåŠ¡" class="headerlink" title="è§†å›¾å¾®æœåŠ¡"></a>è§†å›¾å¾®æœåŠ¡</h4><h5 id="ï¼ˆ1ï¼‰éœ€æ±‚-6"><a href="#ï¼ˆ1ï¼‰éœ€æ±‚-6" class="headerlink" title="ï¼ˆ1ï¼‰éœ€æ±‚"></a>ï¼ˆ1ï¼‰éœ€æ±‚</h5><p>è®¿é—®æ•°æ®å¾®æœåŠ¡ï¼ˆè¿™é‡Œä¸»è¦ç”¨feignçš„æ–¹å¼ï¼‰ï¼Œå°†æ•°æ®å‘é€åˆ°è§†å›¾å±‚å±•ç¤º</p>
<h5 id="ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–-5"><a href="#ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–-5" class="headerlink" title="ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–"></a>ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æœåŠ¡æ³¨å†Œä¾èµ– --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ”¯æŒ Feign æ–¹å¼çš„å¾®æœåŠ¡è®¿é—®--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- webæ”¯æŒä¾èµ– --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è§†å›¾å±‚ä¾èµ– --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--å¢åŠ zipkinï¼Œä½¿æœåŠ¡å¯ä»¥è¢«è¿½è¸ªåˆ°--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-zipkin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¢åŠ ä¸€ä¸ª spring-cloud-starter-config ç”¨äºè®¿é—®é…ç½®æœåŠ¡å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-config<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ¶ˆæ¯æ€»çº¿ä¾èµ–ï¼Œç”¨äºè®¿é—®è·¯å¾„/actuator/bus-refresh --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ç”¨äºæ”¯æŒrabbitmq --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-bus-amqp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ç”¨äºæ”¯æŒæ–­è·¯å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-hystrix<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="ï¼ˆ3ï¼‰ç›¸å…³é…ç½®-5"><a href="#ï¼ˆ3ï¼‰ç›¸å…³é…ç½®-5" class="headerlink" title="ï¼ˆ3ï¼‰ç›¸å…³é…ç½®"></a>ï¼ˆ3ï¼‰ç›¸å…³é…ç½®</h5><p>è¿™é‡Œçš„å¾®æœåŠ¡ç”±äºè¦é€šè¿‡rabbitMQè®¿é—®åˆ°é…ç½®æœåŠ¡å™¨ï¼Œéœ€è¦ç³»ç»Ÿå±‚é¢ä¸Šçš„é…ç½®ï¼Œæ•…éœ€è¦ä¸¤ä¸ªé…ç½®æ–‡ä»¶ï¼š<strong>bootstrap.yml å’Œ application.yml</strong></p>
<p>å‚è€ƒèµ„æ–™ï¼š<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/c955c44ae534">application.ymlä¸bootstrap.ymlçš„åŒºåˆ«</a></p>
<ul>
<li>bootstrap.yml å’Œ application.yml éƒ½å¯ä»¥ç”¨æ¥é…ç½®å‚æ•°</li>
<li>bootstrap.yml ç”¨æ¥ç¨‹åºå¼•å¯¼æ—¶æ‰§è¡Œï¼Œåº”ç”¨äºæ›´åŠ æ—©æœŸé…ç½®ä¿¡æ¯è¯»å–ã€‚å¯ä»¥ç†è§£æˆç³»ç»Ÿçº§åˆ«çš„ä¸€äº›å‚æ•°é…ç½®ï¼Œè¿™äº›å‚æ•°ä¸€èˆ¬æ˜¯ä¸ä¼šå˜åŠ¨çš„ã€‚ä¸€æ—¦bootStrap.yml è¢«åŠ è½½ï¼Œåˆ™å†…å®¹ä¸ä¼šè¢«è¦†ç›–</li>
<li>application.yml å¯ä»¥ç”¨æ¥å®šä¹‰åº”ç”¨çº§åˆ«çš„ï¼Œ åº”ç”¨ç¨‹åºç‰¹æœ‰é…ç½®ä¿¡æ¯ï¼Œå¯ä»¥ç”¨æ¥é…ç½®åç»­å„ä¸ªæ¨¡å—ä¸­éœ€ä½¿ç”¨çš„å…¬å…±å‚æ•°ç­‰</li>
</ul>
<p><strong>bootstrap.ymlæ–‡ä»¶</strong></p>
<p>ä¸»è¦æä¾›äº† serviceId: config-server, è¿™ä¸ªæ˜¯é…ç½®æœåŠ¡å™¨åœ¨ eureka server é‡Œçš„æœåŠ¡åç§°ï¼Œè¿™æ ·å°±å¯ä»¥å®šä½ config-serveräº†</p>
<p>åœ¨æ³¨å†ŒæœåŠ¡ä¸­å¿ƒçš„æ³¨å†Œä¹Ÿç§»åˆ°äº†bootstrap.yml</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é…ç½® config-serverï¼ˆæœåŠ¡ç«¯ï¼‰çš„ä¿¡æ¯</span></span><br><span class="line"><span class="attr">spring :</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">config:</span></span><br><span class="line">      <span class="attr">label:</span> <span class="string">main</span></span><br><span class="line">      <span class="attr">profile:</span> <span class="string">dev</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">service-id:</span> <span class="string">config-server</span></span><br><span class="line">    <span class="comment"># å¢åŠ æ€»çº¿é…ç½®</span></span><br><span class="line">    <span class="attr">bus:</span></span><br><span class="line">      <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">trace:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># æ–°å¢rabbitMQé…ç½®</span></span><br><span class="line">  <span class="attr">rabbitmq:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">5672</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">guest</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">guest</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®æ³¨å†Œä¸­å¿ƒçš„åœ°å€è¦ä¸Eurekaçš„é…ç½®å¯¹åº”ï¼ˆæ³¨å†Œï¼‰</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">serviceUrl:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://localhost:8761/eureka/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>application.ymlæ–‡ä»¶</strong></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é…ç½®å¾®æœåŠ¡åä¸é…ç½®æœåŠ¡é“¾è·¯è¿½è¸ª</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">product-view-service-feign</span></span><br><span class="line">  <span class="attr">zipkin:</span></span><br><span class="line">    <span class="attr">base-url:</span> <span class="string">http://localhost:8050</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># é…ç½®thymeleaf</span></span><br><span class="line">  <span class="attr">thymeleaf:</span></span><br><span class="line">    <span class="attr">cache:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">prefix:</span> <span class="string">classpath:/templates/</span></span><br><span class="line">    <span class="attr">suffix:</span> <span class="string">.html</span></span><br><span class="line">    <span class="attr">encoding:</span> <span class="string">UTF-8</span></span><br><span class="line">    <span class="attr">servlet:</span></span><br><span class="line">      <span class="attr">content-type:</span> <span class="string">text/html</span></span><br><span class="line">    <span class="attr">mode:</span> <span class="string">HTML5</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å¯æ–­è·¯å™¨</span></span><br><span class="line"><span class="attr">feign.hystrix.enabled:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–°å¢è·¯å¾„è®¿é—®å…è®¸ï¼Œè¿™æ ·æ‰èƒ½è®¿é—® /actuator/bus-refresh,ç”¨äºè®¿é—®é…ç½®æœåŠ¡å™¨æ›´æ–°é…ç½®ä¿¡æ¯</span></span><br><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoints:</span></span><br><span class="line">    <span class="attr">web:</span></span><br><span class="line">      <span class="attr">exposure:</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">&quot;*&quot;</span></span><br><span class="line">      <span class="attr">cors:</span></span><br><span class="line">        <span class="attr">allowed-origins:</span> <span class="string">&quot;*&quot;</span></span><br><span class="line">        <span class="attr">allowed-methods:</span> <span class="string">&quot;*&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="ï¼ˆ4ï¼‰å®ä½“ç±»-1"><a href="#ï¼ˆ4ï¼‰å®ä½“ç±»-1" class="headerlink" title="ï¼ˆ4ï¼‰å®ä½“ç±»"></a>ï¼ˆ4ï¼‰å®ä½“ç±»</h5><p>ä¸æ•°æ®å¾®æœåŠ¡çš„ä¸€è‡´</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ„é€ å®ä½“ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> price;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPrice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPrice</span><span class="params">(<span class="keyword">int</span> price)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Product</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Product</span><span class="params">(<span class="keyword">int</span> id, String name, <span class="keyword">int</span> price)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="ï¼ˆ5ï¼‰å®¢æˆ·ç«¯"><a href="#ï¼ˆ5ï¼‰å®¢æˆ·ç«¯" class="headerlink" title="ï¼ˆ5ï¼‰å®¢æˆ·ç«¯"></a>ï¼ˆ5ï¼‰å®¢æˆ·ç«¯</h5><p>è§†å›¾å¾®æœåŠ¡ä½œä¸ºå®¢æˆ·ç«¯å»è®¿é—®æ•°æ®å¾®æœåŠ¡è¿™ä¸ªæœåŠ¡ç«¯ï¼Œå¹¶åˆ©ç”¨æ–­è·¯å™¨æä¾›è®¿é—®å¤±è´¥åçš„å¼‚å¸¸å¤„ç†ä¿¡æ¯</p>
<p><strong>Feignå®¢æˆ·ç«¯</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Feign å®¢æˆ·ç«¯ï¼Œ é€šè¿‡ æ³¨è§£æ–¹å¼è®¿é—®PRODUCT-DATA-SERVICEæœåŠ¡çš„ productsè·¯å¾„</span></span><br><span class="line"><span class="comment">// å¦‚æœè®¿é—®çš„ PRODUCT-DATA-SERVICE ä¸å¯ç”¨çš„è¯ï¼Œå°±è°ƒç”¨ ProductClientFeignHystrix æ¥è¿›è¡Œåé¦ˆä¿¡æ¯</span></span><br><span class="line"><span class="meta">@FeignClient(value = &quot;PRODUCT-DATA-SERVICE&quot;, fallback = ProductClientFeignHystrix.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ProductClientFeign</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;products&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Product&gt; <span class="title">list</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>Hystrixæ–­è·¯å™¨å¤„ç†</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®ç°äº† ProductClientFeign æ¥å£ï¼Œå¹¶æä¾›äº† list() æ–¹æ³•</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductClientFeignHystrix</span> <span class="keyword">implements</span>  <span class="title">ProductClientFeign</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Product&gt; <span class="title">list</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;Product&gt; res = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        res.add(<span class="keyword">new</span> Product(<span class="number">0</span>, <span class="string">&quot;äº§å“æ•°æ®å¾®æœåŠ¡ä¸å¯ç”¨&quot;</span>, <span class="number">0</span>));</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="ï¼ˆ6ï¼‰æœåŠ¡å±‚"><a href="#ï¼ˆ6ï¼‰æœåŠ¡å±‚" class="headerlink" title="ï¼ˆ6ï¼‰æœåŠ¡å±‚"></a>ï¼ˆ6ï¼‰æœåŠ¡å±‚</h5><p>æ¥å…¥å®¢æˆ·ç«¯ï¼Œè‡ªåŠ¨è£…é…å®¢æˆ·ç«¯è¯·æ±‚åˆ°çš„æ•°æ®</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    ProductClientFeign productClientFeign;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æœåŠ¡ç±»çš„æ•°æ®ä»ProductClientRibbonï¼ˆå®¢æˆ·ç«¯ï¼‰ä¸­è·å–</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Product&gt; <span class="title">list</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> productClientFeign.list();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="ï¼ˆ7ï¼‰æ§åˆ¶å±‚"><a href="#ï¼ˆ7ï¼‰æ§åˆ¶å±‚" class="headerlink" title="ï¼ˆ7ï¼‰æ§åˆ¶å±‚"></a>ï¼ˆ7ï¼‰æ§åˆ¶å±‚</h5><p>æ¥å…¥æœåŠ¡å±‚ï¼Œæ˜ å°„è®¿é—®è·¯å¾„ï¼Œå‘é€æ•°æ®åˆ°è§†å›¾å±‚å¹¶è¾“å‡ºè§†å›¾</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RefreshScope</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    ProductService productService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ¨é…ç½®æœåŠ¡å™¨è·å¾—ç‰ˆæœ¬å·</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;version&#125;&quot;)</span></span><br><span class="line">    String version;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ§åˆ¶å™¨å°†æ•°æ®æ”¾å…¥product.html</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/products&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">products</span><span class="params">(Model m)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        List&lt;Product&gt; ps = productService.list();</span><br><span class="line">        <span class="comment">// å‘é€åˆ°è§†å›¾</span></span><br><span class="line">        m.addAttribute(<span class="string">&quot;version&quot;</span>, version);</span><br><span class="line">        m.addAttribute(<span class="string">&quot;ps&quot;</span>, ps);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;products&quot;</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="ï¼ˆ8ï¼‰è§†å›¾å±‚"><a href="#ï¼ˆ8ï¼‰è§†å›¾å±‚" class="headerlink" title="ï¼ˆ8ï¼‰è§†å›¾å±‚"></a>ï¼ˆ8ï¼‰è§†å›¾å±‚</h5><p>ä½¿ç”¨thymeleafå¯æ¥å…¥javaåŠ¨æ€åŒ–æ•°æ®</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">HTML</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>products<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Content-Type&quot;</span> <span class="attr">content</span>=<span class="string">&quot;text/html; charset=UTF-8&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-tag">table</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="attribute">border-collapse</span>:collapse;</span></span><br><span class="line"><span class="css">      <span class="attribute">width</span>:<span class="number">400px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">margin</span>:<span class="number">20px</span> auto;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-tag">td</span>,<span class="selector-tag">th</span>&#123;</span></span><br><span class="line"><span class="css">      <span class="attribute">border</span>:<span class="number">1px</span> solid gray;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;workingArea&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">th</span>&gt;</span>id<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">th</span>&gt;</span>äº§å“åç§°<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">th</span>&gt;</span>ä»·æ ¼<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">&quot;p: $&#123;ps&#125;&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;p.id&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;p.name&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;p.price&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">colspan</span>=<span class="string">&quot;3&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;version&#125;&quot;</span> &gt;</span>how2j springcloud version unknown<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="ï¼ˆ9ï¼‰ç½‘ç»œè®¿é—®"><a href="#ï¼ˆ9ï¼‰ç½‘ç»œè®¿é—®" class="headerlink" title="ï¼ˆ9ï¼‰ç½‘ç»œè®¿é—®"></a>ï¼ˆ9ï¼‰ç½‘ç»œè®¿é—®</h5><p><strong>æ›´æ–°é…ç½®ä¿¡æ¯</strong></p>
<p>ä½¿ç”¨ post çš„æ–¹å¼è®¿é—®é…ç½®æœåŠ¡å™¨çš„ <a target="_blank" rel="noopener" href="http://localhost:8012/actuator/bus-refresh">http://localhost:8012/actuator/bus-refresh</a> åœ°å€ï¼Œç”¨äºæ›´æ–°é…ç½®ä¿¡æ¯</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä½¿ç”¨ post çš„æ–¹å¼è®¿é—® http://localhost:8012/actuator/bus-refresh åœ°å€</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FreshConfigUntil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">          <span class="comment">// å¢åŠ è¯·æ±‚å¤´</span></span><br><span class="line">          HashMap&lt;String, String&gt; headers = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">          headers.put(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;application/json; charset=utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">          <span class="comment">// å› ä¸ºè¦å»gitè·å–ï¼Œè¿˜è¦åˆ·æ–°config-server, ä¼šæ¯”è¾ƒå¡ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¼šè¦å¥½å‡ ç§’æ‰èƒ½å®Œæˆ</span></span><br><span class="line">          System.out.println(<span class="string">&quot;è¯·è€å¿ƒç­‰å¾…&quot;</span>);</span><br><span class="line"></span><br><span class="line">          <span class="comment">// å‘é€postè¯·æ±‚</span></span><br><span class="line">          String result = HttpUtil.createPost(<span class="string">&quot;http://localhost:8012/actuator/bus-refresh&quot;</span>)</span><br><span class="line">                  .addHeaders(headers).execute().body();</span><br><span class="line"></span><br><span class="line">          System.out.println(<span class="string">&quot;result&quot;</span> + result);</span><br><span class="line">          System.out.println(<span class="string">&quot;refresh å®Œæˆ&quot;</span>);</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>æä¾›ç›‘æ§æ•°æ®</strong></p>
<p>ä¸æ–­å¯¹è§†å›¾å±‚è¿›è¡Œè®¿é—®ï¼Œä»¥æä¾›æ–­è·¯å™¨ç›‘æ§çš„æ•°æ®</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸€ä¸ªä¸æ–­è®¿é—®è§†å›¾æœåŠ¡çš„ç±»ï¼Œä»¥ä¾¿åœ¨ç›‘æ§ä¸­è§‚å¯Ÿåˆ°ç°è±¡</span></span><br><span class="line"><span class="comment">// è®¿é—®é›†ç¾¤çš„8012å’Œ8013ç«¯å£</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccessViewService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>)&#123;</span><br><span class="line">            ThreadUtil.sleep(<span class="number">1000</span>);</span><br><span class="line">            access(<span class="number">8012</span>);</span><br><span class="line">            access(<span class="number">8013</span>);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">access</span><span class="params">(<span class="keyword">int</span> port)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            String html = HttpUtil.get(String.format(<span class="string">&quot;http://127.0.0.1:%d/products&quot;</span>, port));</span><br><span class="line">            System.out.println(<span class="string">&quot;html length:&quot;</span> + html.length());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            System.out.printf(<span class="string">&quot;%dåœ°å€çš„è§†å›¾æœåŠ¡æ— æ³•è®¿é—®%n&quot;</span>, port);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="ï¼ˆ10ï¼‰æœåŠ¡å¯åŠ¨"><a href="#ï¼ˆ10ï¼‰æœåŠ¡å¯åŠ¨" class="headerlink" title="ï¼ˆ10ï¼‰æœåŠ¡å¯åŠ¨"></a>ï¼ˆ10ï¼‰æœåŠ¡å¯åŠ¨</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span> <span class="comment">// æ³¨å†ŒæœåŠ¡ä¸­ä¿¡æ¯æ³¨å†Œå®¢æˆ·ç«¯</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="meta">@EnableFeignClients</span>   <span class="comment">//è¡¨æ˜ä½¿ç”¨Feignæ–¹å¼</span></span><br><span class="line"><span class="meta">@EnableCircuitBreaker</span> <span class="comment">// å…±äº«ä¿¡æ¯ç»™æ–­è·¯ç›‘æ§å™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductViewServiceFeignApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¢åŠ rabbitmqæ˜¯å¦å¯åŠ¨åˆ¤æ–­</span></span><br><span class="line">        <span class="keyword">int</span> rabbitMQPort = <span class="number">5672</span>;</span><br><span class="line">        <span class="keyword">if</span>(NetUtil.isUsableLocalPort(rabbitMQPort))&#123;</span><br><span class="line">            System.err.printf(<span class="string">&quot;æœªåœ¨ç«¯å£%då‘ç°rabbitMQæœåŠ¡ï¼Œè¯·æ£€æŸ¥&quot;</span>, rabbitMQPort);</span><br><span class="line">            System.exit(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®©ç”¨æˆ·è¾“å…¥ç«¯å£å·ï¼Œå¼€å¯å¤šä¸ªæœåŠ¡å½¢æˆé›†ç¾¤</span></span><br><span class="line">        <span class="keyword">int</span> port = <span class="number">0</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;è¯·è¾“å…¥å¼€å¯æœåŠ¡çš„ç«¯å£å·ï¼š&quot;</span>);</span><br><span class="line">        Scanner strpost = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        port = strpost.nextInt();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> SpringApplicationBuilder(ProductViewServiceFeignApplication.class)</span><br><span class="line">                .properties(<span class="string">&quot;server.port=&quot;</span> + port)</span><br><span class="line">                .run(args);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* é…ç½®zipkon:åœ¨å¯åŠ¨ç±»é‡Œé…ç½® Sampler æŠ½æ ·ç­–ç•¥ï¼š ALWAYS_SAMPLE è¡¨ç¤ºæŒç»­æŠ½æ ·*/</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Sampler <span class="title">defaultSampler</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Sampler.ALWAYS_SAMPLE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>æœ¬æ–‡ä½œè€…ï¼š </strong>Autovy
  </li>
  <li class="post-copyright-link">
    <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong>
    <a href="https://autovy.github.io/2021/09/20/Java/Java-SpringCloud/" title="Java|SpringCloud + Netflix OSS Demo">https://autovy.github.io/2021/09/20/Java/Java-SpringCloud/</a>
  </li>
  <li class="post-copyright-license">
    <strong>ç‰ˆæƒå£°æ˜ï¼š </strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/" rel="tag"><i class="fa fa-tag"></i> å¼€å‘å®æˆ˜</a>
              <a href="/tags/Java/" rel="tag"><i class="fa fa-tag"></i> Java</a>
              <a href="/tags/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/" rel="tag"><i class="fa fa-tag"></i> æ¡†æ¶å­¦ä¹ </a>
              <a href="/tags/%E5%90%8E%E7%AB%AF/" rel="tag"><i class="fa fa-tag"></i> åç«¯</a>
              <a href="/tags/SpringBoot/" rel="tag"><i class="fa fa-tag"></i> SpringBoot</a>
              <a href="/tags/SpringCloud/" rel="tag"><i class="fa fa-tag"></i> SpringCloud</a>
              <a href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" rel="tag"><i class="fa fa-tag"></i> å¾®æœåŠ¡</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/09/14/Java/Java-JavaWeb%E5%85%A5%E9%97%A8%E8%AE%B2%E8%A7%A3/" rel="prev" title="Java|JavaWebå…¥é—¨è®²è§£">
      <i class="fa fa-chevron-left"></i> Java|JavaWebå…¥é—¨è®²è§£
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/09/30/DevPrinciple/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" rel="next" title="å¼€å‘åŸç†|åç«¯æ¶æ„åŸºç¡€çŸ¥è¯†">
      å¼€å‘åŸç†|åç«¯æ¶æ„åŸºç¡€çŸ¥è¯† <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>



  
  
  

  </div>


          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%8E%E9%9B%86%E7%BE%A4"><span class="nav-text">åˆ†å¸ƒå¼ä¸é›†ç¾¤</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%881%EF%BC%89%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%A6%82%E5%BF%B5"><span class="nav-text">ï¼ˆ1ï¼‰å¾®æœåŠ¡æ¦‚å¿µ</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%882%EF%BC%89%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C"><span class="nav-text">ï¼ˆ2ï¼‰æœåŠ¡æ³¨å†Œ</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%883%EF%BC%89%E6%9C%8D%E5%8A%A1%E8%AE%BF%E9%97%AE"><span class="nav-text">ï¼ˆ3ï¼‰æœåŠ¡è®¿é—®</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%884%EF%BC%89%E5%88%86%E5%B8%83%E5%BC%8F%E6%A6%82%E5%BF%B5"><span class="nav-text">ï¼ˆ4ï¼‰åˆ†å¸ƒå¼æ¦‚å¿µ</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%885%EF%BC%89%E9%9B%86%E7%BE%A4"><span class="nav-text">ï¼ˆ5ï¼‰é›†ç¾¤</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SpringCloud%E4%BB%8B%E7%BB%8D"><span class="nav-text">SpringCloudä»‹ç»</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%881%EF%BC%89%E5%8D%95%E4%BD%93%E6%9E%B6%E6%9E%84"><span class="nav-text">ï¼ˆ1ï¼‰å•ä½“æ¶æ„</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%882%EF%BC%89%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84"><span class="nav-text">ï¼ˆ2ï¼‰åˆ†å¸ƒå¼æ¶æ„</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%883%EF%BC%89%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84"><span class="nav-text">ï¼ˆ3ï¼‰å¾®æœåŠ¡æ¶æ„</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%884%EF%BC%89SpringCloud%E7%BB%84%E6%88%90"><span class="nav-text">ï¼ˆ4ï¼‰SpringCloudç»„æˆ</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Springcloud-%E5%90%AF%E5%8A%A8%E6%B5%8B%E8%AF%95"><span class="nav-text">Springcloud å¯åŠ¨æµ‹è¯•</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%881%EF%BC%89%E9%A1%B9%E7%9B%AE%E5%90%AF%E5%8A%A8"><span class="nav-text">ï¼ˆ1ï¼‰é¡¹ç›®å¯åŠ¨</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%882%EF%BC%89%E6%B5%8B%E8%AF%95%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83"><span class="nav-text">ï¼ˆ2ï¼‰æµ‹è¯•æœåŠ¡æ³¨å†Œä¸­å¿ƒ</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%883%EF%BC%89%E6%B5%8B%E8%AF%95%E6%95%B0%E6%8D%AE%E5%BE%AE%E6%9C%8D%E5%8A%A1"><span class="nav-text">ï¼ˆ3ï¼‰æµ‹è¯•æ•°æ®å¾®æœåŠ¡</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%884%EF%BC%89%E6%B5%8B%E8%AF%95%E8%A7%86%E5%9B%BE%E5%BE%AE%E6%9C%8D%E5%8A%A1"><span class="nav-text">ï¼ˆ4ï¼‰æµ‹è¯•è§†å›¾å¾®æœåŠ¡</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%885%EF%BC%89%E6%B5%8B%E8%AF%95%E6%9C%8D%E5%8A%A1%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA"><span class="nav-text">ï¼ˆ5ï¼‰æµ‹è¯•æœåŠ¡é“¾è·¯è¿½è¸ª</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%886%EF%BC%89%E6%B5%8B%E8%AF%95Bus%E6%B6%88%E6%81%AF%E6%80%BB%E7%BA%BF"><span class="nav-text">ï¼ˆ6ï¼‰æµ‹è¯•Busæ¶ˆæ¯æ€»çº¿</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%887%EF%BC%89%E6%B5%8B%E8%AF%95Hystrix%E6%96%AD%E8%B7%AF%E5%99%A8%E5%8F%8A%E5%85%B6%E7%9B%91%E6%8E%A7"><span class="nav-text">ï¼ˆ7ï¼‰æµ‹è¯•Hystrixæ–­è·¯å™¨åŠå…¶ç›‘æ§</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%888%EF%BC%89%E7%BD%91%E5%85%B3%E6%B5%8B%E8%AF%95"><span class="nav-text">ï¼ˆ8ï¼‰ç½‘å…³æµ‹è¯•</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9C%8D%E5%8A%A1%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83"><span class="nav-text">æœåŠ¡æ³¨å†Œä¸­å¿ƒ</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%881%EF%BC%89%E9%9C%80%E6%B1%82"><span class="nav-text">ï¼ˆ1ï¼‰éœ€æ±‚</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%882%EF%BC%89%E7%9B%B8%E5%85%B3%E4%BE%9D%E8%B5%96"><span class="nav-text">ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%883%EF%BC%89%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE"><span class="nav-text">ï¼ˆ3ï¼‰ç›¸å…³é…ç½®</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%884%EF%BC%89%E6%9C%8D%E5%8A%A1%E5%90%AF%E5%8A%A8"><span class="nav-text">ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-text">é…ç½®æœåŠ¡å™¨</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%881%EF%BC%89%E9%9C%80%E6%B1%82-1"><span class="nav-text">ï¼ˆ1ï¼‰éœ€æ±‚</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%882%EF%BC%89git%E5%87%86%E5%A4%87"><span class="nav-text">ï¼ˆ2ï¼‰gitå‡†å¤‡</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%883%EF%BC%89%E7%9B%B8%E5%85%B3%E4%BE%9D%E8%B5%96"><span class="nav-text">ï¼ˆ3ï¼‰ç›¸å…³ä¾èµ–</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%884%EF%BC%89%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE"><span class="nav-text">ï¼ˆ4ï¼‰ç›¸å…³é…ç½®</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%885%EF%BC%89%E6%9C%8D%E5%8A%A1%E5%90%AF%E5%8A%A8"><span class="nav-text">ï¼ˆ5ï¼‰æœåŠ¡å¯åŠ¨</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#RabbitMQ"><span class="nav-text">RabbitMQ</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%881%EF%BC%89-RabbitMQ%E7%9A%84%E4%BB%8B%E7%BB%8D"><span class="nav-text">ï¼ˆ1ï¼‰ RabbitMQçš„ä»‹ç»</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%882%EF%BC%89RabbitMQ%E5%AE%89%E8%A3%85"><span class="nav-text">ï¼ˆ2ï¼‰RabbitMQå®‰è£…</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%883%EF%BC%89RabbitMQ%E9%A1%B5%E9%9D%A2%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%E9%97%AE%E9%A2%98"><span class="nav-text">ï¼ˆ3ï¼‰RabbitMQé¡µé¢æ— æ³•è®¿é—®é—®é¢˜</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%884%EF%BC%89%E6%B6%88%E6%81%AF%E8%B7%AF%E7%94%B1%E8%BF%87%E7%A8%8B"><span class="nav-text">ï¼ˆ4ï¼‰æ¶ˆæ¯è·¯ç”±è¿‡ç¨‹</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%885%EF%BC%89%E6%A8%A1%E5%BC%8F%E5%88%86%E7%B1%BB"><span class="nav-text">ï¼ˆ5ï¼‰æ¨¡å¼åˆ†ç±»</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%AD%E8%B7%AF%E5%99%A8%E7%9B%91%E6%8E%A7"><span class="nav-text">æ–­è·¯å™¨ç›‘æ§</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%881%EF%BC%89%E9%9C%80%E6%B1%82-2"><span class="nav-text">ï¼ˆ1ï¼‰éœ€æ±‚</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%882%EF%BC%89%E7%9B%B8%E5%85%B3%E4%BE%9D%E8%B5%96-1"><span class="nav-text">ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%883%EF%BC%89%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE-1"><span class="nav-text">ï¼ˆ3ï¼‰ç›¸å…³é…ç½®</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%884%EF%BC%89%E6%9C%8D%E5%8A%A1%E5%90%AF%E5%8A%A8-1"><span class="nav-text">ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%AD%E8%B7%AF%E5%99%A8%E8%81%9A%E5%90%88%E7%9B%91%E6%8E%A7"><span class="nav-text">æ–­è·¯å™¨èšåˆç›‘æ§</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%881%EF%BC%89%E9%9C%80%E6%B1%82-3"><span class="nav-text">ï¼ˆ1ï¼‰éœ€æ±‚</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%882%EF%BC%89%E7%9B%B8%E5%85%B3%E4%BE%9D%E8%B5%96-2"><span class="nav-text">ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%883%EF%BC%89%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE-2"><span class="nav-text">ï¼ˆ3ï¼‰ç›¸å…³é…ç½®</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%884%EF%BC%89%E6%9C%8D%E5%8A%A1%E5%90%AF%E5%8A%A8-2"><span class="nav-text">ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BD%91%E5%85%B3Zuul"><span class="nav-text">ç½‘å…³Zuul</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%881%EF%BC%89%E9%9C%80%E6%B1%82-4"><span class="nav-text">ï¼ˆ1ï¼‰éœ€æ±‚</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%882%EF%BC%89%E7%9B%B8%E5%85%B3%E4%BE%9D%E8%B5%96-3"><span class="nav-text">ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%883%EF%BC%89%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE-3"><span class="nav-text">ï¼ˆ3ï¼‰ç›¸å…³é…ç½®</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%884%EF%BC%89%E6%9C%8D%E5%8A%A1%E5%90%AF%E5%8A%A8-3"><span class="nav-text">ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BE%AE%E6%9C%8D%E5%8A%A1"><span class="nav-text">æ•°æ®å¾®æœåŠ¡</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%881%EF%BC%89%E9%9C%80%E6%B1%82-5"><span class="nav-text">ï¼ˆ1ï¼‰éœ€æ±‚</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%882%EF%BC%89%E7%9B%B8%E5%85%B3%E4%BE%9D%E8%B5%96-4"><span class="nav-text">ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%883%EF%BC%89%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE-4"><span class="nav-text">ï¼ˆ3ï¼‰ç›¸å…³é…ç½®</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%884%EF%BC%89%E5%AE%9E%E4%BD%93%E7%B1%BB"><span class="nav-text">ï¼ˆ4ï¼‰å®ä½“ç±»</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%885%EF%BC%89%E6%9C%8D%E5%8A%A1%E5%B1%82"><span class="nav-text">ï¼ˆ5ï¼‰æœåŠ¡å±‚</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%886%EF%BC%89%E6%8E%A7%E5%88%B6%E5%B1%82"><span class="nav-text">ï¼ˆ6ï¼‰æ§åˆ¶å±‚</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%887%EF%BC%89%E6%9C%8D%E5%8A%A1%E5%90%AF%E5%8A%A8"><span class="nav-text">ï¼ˆ7ï¼‰æœåŠ¡å¯åŠ¨</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%86%E5%9B%BE%E5%BE%AE%E6%9C%8D%E5%8A%A1"><span class="nav-text">è§†å›¾å¾®æœåŠ¡</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%881%EF%BC%89%E9%9C%80%E6%B1%82-6"><span class="nav-text">ï¼ˆ1ï¼‰éœ€æ±‚</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%882%EF%BC%89%E7%9B%B8%E5%85%B3%E4%BE%9D%E8%B5%96-5"><span class="nav-text">ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%883%EF%BC%89%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE-5"><span class="nav-text">ï¼ˆ3ï¼‰ç›¸å…³é…ç½®</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%884%EF%BC%89%E5%AE%9E%E4%BD%93%E7%B1%BB-1"><span class="nav-text">ï¼ˆ4ï¼‰å®ä½“ç±»</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%885%EF%BC%89%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="nav-text">ï¼ˆ5ï¼‰å®¢æˆ·ç«¯</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%886%EF%BC%89%E6%9C%8D%E5%8A%A1%E5%B1%82"><span class="nav-text">ï¼ˆ6ï¼‰æœåŠ¡å±‚</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%887%EF%BC%89%E6%8E%A7%E5%88%B6%E5%B1%82"><span class="nav-text">ï¼ˆ7ï¼‰æ§åˆ¶å±‚</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%888%EF%BC%89%E8%A7%86%E5%9B%BE%E5%B1%82"><span class="nav-text">ï¼ˆ8ï¼‰è§†å›¾å±‚</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%889%EF%BC%89%E7%BD%91%E7%BB%9C%E8%AE%BF%E9%97%AE"><span class="nav-text">ï¼ˆ9ï¼‰ç½‘ç»œè®¿é—®</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%EF%BC%8810%EF%BC%89%E6%9C%8D%E5%8A%A1%E5%90%AF%E5%8A%A8"><span class="nav-text">ï¼ˆ10ï¼‰æœåŠ¡å¯åŠ¨</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
<a href="/">  <img class="site-author-image" itemprop="image" alt="Autovy"
      src="/images/2.png">  </a>
  <p class="site-author-name" itemprop="name">Autovy</p>
  <div class="site-description" itemprop="description">æ–°æ—¶ä»£å†œæ°‘å·¥çš„æ•°å­—å†œç”°</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">48</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">56</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 2020 â€“ 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-code"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Autovy</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
      <span class="post-meta-item-text">ç«™ç‚¹æ€»å­—æ•°ï¼š</span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">629k</span>
</div>

<!-- åœ¨ç½‘é¡µåº•éƒ¨æ·»åŠ ç½‘ç«™è¿è¡Œæ—¶é—´ -->
<span id="timeDate">è½½å…¥å¤©æ•°...</span><span id="times">è½½å…¥æ—¶åˆ†ç§’...</span>
<script>
    var now = new Date();
    function createtime() {
        var grt= new Date("01/01/2020 00:00:00");//æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´æˆ–è€…ç½‘ç«™ä¸Šçº¿æ—¶é—´
        now.setTime(now.getTime()+250);
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
        document.getElementById("timeDate").innerHTML = "Run for "+dnum+" Days ";
        document.getElementById("times").innerHTML = hnum + " Hours " + mnum + " m " + snum + " s";
    }
setInterval("createtime()",250);
</script>


    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv" title="æ€»è®¿å®¢é‡">
    æœ¬ç«™å·²æœ‰
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    ä½è®¿å®¢
    <i class="fa fa-user"></i>
    </span>
  
<span> | </span>

  
    <span class="site-pv" title="æ€»è®¿é—®é‡">
   
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    æ¬¡é˜…è¯»
    <i class="fa fa-eye"></i>
    </span>
  
</div>







      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'RVJRabsBhxWXvhMcG8CH5wbc-gzGzoHsz',
      appKey     : 'JSGLk7guOagDPMFN9wbASkEh',
      placeholder: "è¯´ç‚¹ä»€ä¹ˆå§",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
  <script src="/js/bloom.js" type="text/javascript"></script>