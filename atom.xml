<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Autovy&#39;s blog</title>
  
  <subtitle>Just For Interest</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://autovy.github.io/"/>
  <updated>2022-03-04T06:16:51.073Z</updated>
  <id>https://autovy.github.io/</id>
  
  <author>
    <name>Autovy</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>å¼€å‘åŸç†|MySQLæœ€ä½³å®è·µ</title>
    <link href="https://autovy.github.io/2022/02/25/DevPrinciple/MySQL%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/"/>
    <id>https://autovy.github.io/2022/02/25/DevPrinciple/MySQL%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/</id>
    <published>2022-02-25T15:45:00.000Z</published>
    <updated>2022-03-04T06:16:51.073Z</updated>
    
    <content type="html"><![CDATA[<img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202203041310207.png" alt="image-20220304131032975" style="zoom: 33%;"><p>MySQL  â</p><p>OurSQL âœ…</p><span id="more"></span><h3 id="Debainå®‰è£…MySQL"><a href="#Debainå®‰è£…MySQL" class="headerlink" title="Debainå®‰è£…MySQL"></a>Debainå®‰è£…MySQL</h3><h4 id="æ·»åŠ -MySQL-å­˜å‚¨åº“"><a href="#æ·»åŠ -MySQL-å­˜å‚¨åº“" class="headerlink" title="æ·»åŠ  MySQL å­˜å‚¨åº“"></a>æ·»åŠ  MySQL å­˜å‚¨åº“</h4><p>MySQL æœåŠ¡å™¨åŒ…å¯é€šè¿‡å…¶å®˜æ–¹å­˜å‚¨åº“è·å¾—ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬ç°åœ¨å°†ä¸‹è½½å¹¶å®‰è£… MySQL å­˜å‚¨åº“å®‰è£…åŒ…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://dev.mysql.com/get/mysql-apt-config_0.8.18-1_all.deb</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>dpkg</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg -i mysql-apt-config_0.8.18-1_all.deb</span><br></pre></td></tr></table></figure><p>è¿›å…¥mysqlå®‰è£…é¡µé¢é€‰æ‹©okå³å¯</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202203021941621.png" alt="image-20220302194144873"></p><h4 id="å®‰è£…mysql"><a href="#å®‰è£…mysql" class="headerlink" title="å®‰è£…mysql"></a>å®‰è£…mysql</h4><p>ç­‰å¾…å­˜å‚¨åº“é…ç½®å®Œæˆï¼Œç„¶åä½¿ç”¨ apt å‘½ä»¤æ›´æ–°å­˜å‚¨åº“ç´¢å¼•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br></pre></td></tr></table></figure><p>å®‰è£…mysqlæœåŠ¡å™¨</p><p>ä½¿ç”¨apt-get install mysql-serverå®‰è£…æ—¶ï¼Œå¦‚æœå‡ºç°æŠ¥é”™Package â€˜mysql-serverâ€™ has no installation candidateï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤è¿›è¡Œå®‰è£…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install mariadb-server</span><br></pre></td></tr></table></figure><h4 id="å¯åŠ¨æœåŠ¡"><a href="#å¯åŠ¨æœåŠ¡" class="headerlink" title="å¯åŠ¨æœåŠ¡"></a>å¯åŠ¨æœåŠ¡</h4><p>ç†è®ºä¸Šè¿™æ—¶å€™çš„mysqlæœåŠ¡å·²ç»å®‰è£…å®Œæˆäº†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å‘½ä»¤service â€“status-all æŸ¥çœ‹åˆ°æœåŠ¡åˆ—è¡¨ä¸­æœ‰mariadb</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202203021949399.png" alt="image-20220302194955961"></p><p>ä½†æ˜¯ä½¿ç”¨mysqlå‘½ä»¤æ—¶ï¼Œä¼šå‡ºç°ä»¥ä¸‹æŠ¥é”™ï¼Œè¿™æ˜¯å› ä¸ºmariadbæœåŠ¡è¿˜æœªå¯åŠ¨</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202203021952567.png" alt="image-20220302195236210"></p><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨å³å¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mariadb start</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202203021955103.png" alt="image-20220302195514826"></p><h3 id="å‘½ä»¤è¡Œå‡†å¤‡æ•°æ®åº“"><a href="#å‘½ä»¤è¡Œå‡†å¤‡æ•°æ®åº“" class="headerlink" title="å‘½ä»¤è¡Œå‡†å¤‡æ•°æ®åº“"></a>å‘½ä»¤è¡Œå‡†å¤‡æ•°æ®åº“</h3><h4 id="rootè´¦å·è¿›å…¥æ•°æ®åº“"><a href="#rootè´¦å·è¿›å…¥æ•°æ®åº“" class="headerlink" title="rootè´¦å·è¿›å…¥æ•°æ®åº“"></a>rootè´¦å·è¿›å…¥æ•°æ®åº“</h4><p>mysqlå‘½ä»¤è¿›å…¥mysqlæœåŠ¡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹rootè´¦å·å¯†ç </p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202203022003140.png" alt="image-20220302200352926"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set password for root@localhost &#x3D; password(&quot;123456&quot;)</span><br></pre></td></tr></table></figure><p>é€€å‡ºmysqlæœåŠ¡ï¼Œå¹¶ä½¿ç”¨rootè´¦å·ç™»å½•</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exit</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202203022006437.png" alt></p><h4 id="æ–°ç”¨æˆ·ä¸æ–°æ•°æ®åº“"><a href="#æ–°ç”¨æˆ·ä¸æ–°æ•°æ®åº“" class="headerlink" title="æ–°ç”¨æˆ·ä¸æ–°æ•°æ®åº“"></a>æ–°ç”¨æˆ·ä¸æ–°æ•°æ®åº“</h4><p>åˆ›å»ºæ–°æ•°æ®åº“</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database testdb;</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å·²æœ‰æ•°æ®åº“</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show databases;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202203022010700.png" alt="image-20220302201054361"></p><p>åˆ›å»ºæ–°ç”¨æˆ·</p><p>@localhostè®¾ç½®åªå…è®¸ç”¨æˆ·æœ¬åœ°ç™»å½•ï¼Œå¹¶è®¾ç½®å…¶å¯†ç ä¸º123456</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create user aut@localhost identifide by &#39;123456&#39;;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202203022015408.png" alt="image-20220302201501975"></p><p>æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select user for mysql.user</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202203022018844.png" alt="image-20220302201847575"></p><p>åˆ†é…æ–°æ•°æ®åº“ç»™æ–°ç”¨æˆ·</p><p>æ³¨æ„è¿™é‡Œæ˜¯æŒ‡å°†testdbåº“çš„æ‰€æœ‰è¡¨ï¼ˆtestdb.*ï¼‰çš„æ‰€æœ‰æƒé™ï¼ˆallï¼‰ç»™autæœ¬åœ°ä½¿ç”¨ï¼ˆlocalhostï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant all on testdb.* to aut@localhost;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202203022027073.png" alt="image-20220302202739833"></p><p>æŸ¥çœ‹ç”¨æˆ·æƒé™</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show grants for aut@localhost;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202203022031370.png" alt="image-20220302203155016"></p><h4 id="æµ‹è¯•æ•°æ®å‡†å¤‡"><a href="#æµ‹è¯•æ•°æ®å‡†å¤‡" class="headerlink" title="æµ‹è¯•æ•°æ®å‡†å¤‡"></a>æµ‹è¯•æ•°æ®å‡†å¤‡</h4><p>ä½¿ç”¨æ–°ç”¨æˆ·autè¿æ¥mysql</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u aut -p</span><br></pre></td></tr></table></figure><p>åˆ‡æ¢æ•°æ®åº“åˆ°æ–°æ•°æ®åº“</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use testdb;</span><br></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ªåªå«ä¸€ä¸ªå­—æ®µçš„æ•°æ®è¡¨</p><p>testè¡¨åªå«æœ‰ä¸€ä¸ªæ•´å‹ä¸ä¸ºç©ºçš„å­—æ®µmoney</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create table test (money int not null)</span><br></pre></td></tr></table></figure><p>æ·»åŠ ä¸€æ¡æ•°æ®åˆ°è¡¨ä¸­</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert test(money) values(5000) </span><br></pre></td></tr></table></figure><h3 id="MySQLäº‹åŠ¡éš”ç¦»å®éªŒ"><a href="#MySQLäº‹åŠ¡éš”ç¦»å®éªŒ" class="headerlink" title="MySQLäº‹åŠ¡éš”ç¦»å®éªŒ"></a>MySQLäº‹åŠ¡éš”ç¦»å®éªŒ</h3><p>æ–°å¼€ä¸€ä¸ªç»ˆç«¯ä½¿ç”¨è¿æ¥ä¸Šæ–°æ•°æ®åº“testdbï¼ˆå¯ä»¥autï¼Œä¹Ÿå¯ä»¥è‡ªå·±æ–°å»ºä¸€ä¸ªç”¨æˆ·ï¼‰</p><h4 id="è¯»æœªæäº¤çº§åˆ«"><a href="#è¯»æœªæäº¤çº§åˆ«" class="headerlink" title="è¯»æœªæäº¤çº§åˆ«"></a>è¯»æœªæäº¤çº§åˆ«</h4><p>å‡ºç°è„è¯»é—®é¢˜</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202203022050355.jpeg" alt="img"></p><h4 id="è¯»å·²æäº¤çº§åˆ«"><a href="#è¯»å·²æäº¤çº§åˆ«" class="headerlink" title="è¯»å·²æäº¤çº§åˆ«"></a>è¯»å·²æäº¤çº§åˆ«</h4><p>é¿å…è„è¯»ï¼Œä½†æ˜¯ä¸å¯é‡å¤è¯»</p><h5 id="1-é¿å…è„è¯»æµ‹è¯•"><a href="#1-é¿å…è„è¯»æµ‹è¯•" class="headerlink" title="1.é¿å…è„è¯»æµ‹è¯•"></a>1.é¿å…è„è¯»æµ‹è¯•</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202203022051306.jpeg" alt="img"></p><h5 id="2-ä¸å¯é‡å¤è¯»æµ‹è¯•"><a href="#2-ä¸å¯é‡å¤è¯»æµ‹è¯•" class="headerlink" title="2.ä¸å¯é‡å¤è¯»æµ‹è¯•"></a>2.ä¸å¯é‡å¤è¯»æµ‹è¯•</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202203022051474.jpeg" alt="img"></p><h4 id="å¯é‡å¤è¯»çº§åˆ«"><a href="#å¯é‡å¤è¯»çº§åˆ«" class="headerlink" title="å¯é‡å¤è¯»çº§åˆ«"></a>å¯é‡å¤è¯»çº§åˆ«</h4><p>å¯ä»¥é‡å¤è¯»ï¼Œå¹¶ä¸”å¯ä»¥é˜²æ­¢å¹»è¯»</p><h5 id="1-å¯é‡å¤è¯»æµ‹è¯•"><a href="#1-å¯é‡å¤è¯»æµ‹è¯•" class="headerlink" title="1.å¯é‡å¤è¯»æµ‹è¯•"></a>1.å¯é‡å¤è¯»æµ‹è¯•</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202203022052001.jpeg" alt="img"></p><h5 id="2-é˜²æ­¢å¹»è¯»æµ‹è¯•"><a href="#2-é˜²æ­¢å¹»è¯»æµ‹è¯•" class="headerlink" title="2.é˜²æ­¢å¹»è¯»æµ‹è¯•"></a>2.é˜²æ­¢å¹»è¯»æµ‹è¯•</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202203022052706.jpeg" alt="img"></p><h3 id="MySQLä¼˜åŒ–å®éªŒ"><a href="#MySQLä¼˜åŒ–å®éªŒ" class="headerlink" title="MySQLä¼˜åŒ–å®éªŒ"></a>MySQLä¼˜åŒ–å®éªŒ</h3><p>ä¸Šé¢çš„å®éªŒå…¨ç¨‹åœ¨Linuxç¯å¢ƒä¸­ï¼Œåœ¨æ—¥å¸¸å¼€å‘ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ•°æ®åº“å¯è§†åŒ–å·¥å…·å¦‚Navicatæˆ–IDEAè‡ªå¸¦çš„æ•°æ®åº“å·¥å…·ï¼Œä¸‹é¢æˆ‘ä¸»è¦ä½¿ç”¨Navicatè¿›è¡Œæ“ä½œ</p><p>æ­¤ç« èŠ‚çš„ä¼˜åŒ–å®ä¾‹æ¥è‡ªä¸€æ¬¡å¯¹å­¦æ ¡æ ¡å›¢å§”ç‰©èµ„ç®¡ç†ç³»ç»Ÿçš„ç»´æŠ¤ï¼Œé‰´äºæ­¤é¡¹ç›®ç³Ÿå¿ƒçš„æ•°æ®åº“è®¾è®¡ï¼Œç»™æˆ‘ç•™ä¸‹äº†æ·±åˆ»çš„å°è±¡ï¼Œéš¾ä»¥æƒ³è±¡çš„æ˜¯è¿™æ ·çš„é¡¹ç›®ç«Ÿç„¶ä»16å¹´è¿è¡Œè‡³ä»Š</p><h4 id="T-SQLè„šæœ¬åˆ†è¡¨ä¼˜åŒ–"><a href="#T-SQLè„šæœ¬åˆ†è¡¨ä¼˜åŒ–" class="headerlink" title="T-SQLè„šæœ¬åˆ†è¡¨ä¼˜åŒ–"></a>T-SQLè„šæœ¬åˆ†è¡¨ä¼˜åŒ–</h4><h5 id="1-ç›¸å…³è¡¨çš„ç»“æ„"><a href="#1-ç›¸å…³è¡¨çš„ç»“æ„" class="headerlink" title="1.ç›¸å…³è¡¨çš„ç»“æ„"></a>1.ç›¸å…³è¡¨çš„ç»“æ„</h5><p>æ­¤å¤„å±•ç¤ºçš„è¡¨ç»“æ„ä¸ºç»´æŠ¤å‰</p><p>ç‰©èµ„ç”³è¯·è¡¨ï¼šå…±4817æ¡æ•°æ®</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202203031543098.png" alt="image-20220303154338625"></p><p>ç‰©èµ„ä¿¡æ¯è¡¨ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202203031545235.png" alt="image-20220303154513022"></p><p>goods_countï¼šå½“å‰ä»“åº“ç‰©å“æ•°ï¼ˆç‰©ç†çš„ï¼‰</p><p>good_leftCountï¼šå½“å‰ç‰©å“å¯å€Ÿæ•°ï¼ˆç½‘ç»œçš„ï¼šå­˜åœ¨éƒ¨åˆ†æœªå€Ÿå‡ºï¼Œä½†å·²è¢«é¢„è®¢ä»åœ¨å®¡æ ¸ä¸­çš„ç‰©å“ï¼‰</p><h5 id="2-ä¼˜åŒ–æ€è·¯ï¼šç‰©èµ„ç”³è¯·è¡¨åˆ†è¡¨"><a href="#2-ä¼˜åŒ–æ€è·¯ï¼šç‰©èµ„ç”³è¯·è¡¨åˆ†è¡¨" class="headerlink" title="2.ä¼˜åŒ–æ€è·¯ï¼šç‰©èµ„ç”³è¯·è¡¨åˆ†è¡¨"></a>2.ä¼˜åŒ–æ€è·¯ï¼šç‰©èµ„ç”³è¯·è¡¨åˆ†è¡¨</h5><p>ä»ä¸Šé¢çš„tw_applyè¡¨å°±å¯ä»¥çŸ¥é“ï¼š</p><ul><li><p>åœ¨ç”¨æˆ·æå‡ºç”³è¯·åï¼Œç‰©èµ„ç”³è¯·ä¿¡æ¯è¢«åç«¯æ‹¼æˆäº†ä¸€ä¸ªå­—ç¬¦ä¸²å­˜å‚¨åœ¨apply_contentï¼ˆåŒæ—¶åˆ©ç”¨äº†å‰ç«¯çš„æ•°æ®æ‰§è¡Œäº†ç‰©å“å¯å€Ÿæ•°çš„é¢„æ‰£é™¤ï¼Œæ‰€ä»¥è¿™éƒ¨åˆ†æ²¡æœ‰ç”¨åˆ°ç‰©èµ„ç”³è¯·ä¿¡æ¯å­—ç¬¦ä¸²çš„è§£æï¼‰</p></li><li><p>é€šè¿‡å®¡æ ¸åï¼Œç‰©å“æ­£å¼å€Ÿå‡ºï¼Œè¿™æ—¶å€™åªç•™æœ‰ç‰©èµ„ç”³è¯·ä¿¡æ¯çš„å­—ç¬¦ä¸²å­˜å‚¨åœ¨æ•°æ®åº“ï¼Œæ‰€ä»¥éœ€è¦åç«¯å¯¹è¯¥å­—ç¬¦ä¸²è§£ææå–å‡ºç”³è¯·ç‰©èµ„ä¸å…¶å€Ÿç”¨æ•°é‡ï¼Œå†å»æ“ä½œæ•°æ®åº“</p></li></ul><p>è¿˜å¥½åç«¯å¤§å“¥æ²¡æœ‰æŠŠç‰©èµ„ç”³è¯·ä¿¡æ¯çš„å­—ç¬¦ä¸²ç›´æ¥å‘ç»™å‰ç«¯ï¼Œæˆ‘çœŸçš„å“­æ­»ï¼Œè®¾è®¡æ•°æ®åº“çš„é‚£ä¸ªå‡ºæ¥æŒ¨æ‰“ï¼ˆå‰ç«¯ä¸éœ€è¦è§£æï¼Œä½†æ˜¯è¦æ‹¼æ¥å±•ç¤ºå­—ç¬¦ä¸²ï¼‰</p><p>æ•°æ®åº“è®¾è®¡ååˆ†ä¸åˆç†ï¼Œç”šè‡³ä¸ç¬¦åˆç¬¬ä¸€èŒƒå¼ï¼Œ<strong>æµªè´¹æ•°æ®åº“å¤§é‡å­˜å‚¨ç©ºé—´</strong>ä¸è¯´ï¼Œè€Œä¸”åç«¯æ‹¼æ¥å­—ç¬¦ä¸²è§£æå­—ç¬¦ä¸²è¿™ä¸€è¿‡ç¨‹<strong>ååˆ†è€—æ—¶ä¸”å ç”¨å†…å­˜</strong>ï¼Œè€Œä¸”æœ€æ–°çš„éœ€æ±‚æ˜¯éœ€è¦å¢åŠ ä¸€ä¸ªå®¡æ ¸è¿‡ç¨‹ç”³è¯·ç‰©èµ„è°ƒæ•´åŠŸèƒ½</p><p>æ‰€ä»¥æˆ‘å°†ç‰©èµ„ç”³è¯·è¡¨è¿›è¡Œåˆ†è¡¨ï¼ˆæ°´å¹³åˆ†è¡¨ï¼‰ï¼Œåˆ†å‡ºç‰©èµ„ç”³è¯·è¯¦æƒ…è¡¨å¹¶è”ç³»ç‰©èµ„ä¿¡æ¯è¡¨ï¼Œå…¶ç»“æ„å¦‚ä¸‹</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202203031646110.png" alt="image-20220303164602406"></p><p>åˆ é™¤æ‰apply_contentå­—æ®µï¼ŒèŠ‚çœæ•°æ®åº“ç©ºé—´</p><p>åˆ†è¡¨åï¼Œé€šè¿‡tw_applydetailè¡¨ï¼Œæˆ‘ä»¬å¯¹ç‰©èµ„ç”³è¯·ä¿¡æ¯çš„æ‰€ä»¥å†…å®¹è¿›è¡Œæ“ä½œï¼Œçœå»äº†ç‰©èµ„å®¡æ ¸æ¥å£å¯¹å­—ç¬¦ä¸²è§£æçš„è€—æ—¶è¿‡ç¨‹å¹¶ä¸”æ–¹ä¾¿å®¡æ ¸è¿‡ç¨‹ç”³è¯·ç‰©èµ„è°ƒæ•´åŠŸèƒ½çš„å¼€å‘ï¼ˆé€šè¿‡tw_appdetailæ‰¾åˆ°ç‰©å“ä¿¡æ¯å’Œç‰©å“æ•°é‡ï¼‰</p><h5 id="3-ä¼˜åŒ–æ“ä½œï¼šå­˜å‚¨è¿‡ç¨‹è„šæœ¬"><a href="#3-ä¼˜åŒ–æ“ä½œï¼šå­˜å‚¨è¿‡ç¨‹è„šæœ¬" class="headerlink" title="3.ä¼˜åŒ–æ“ä½œï¼šå­˜å‚¨è¿‡ç¨‹è„šæœ¬"></a>3.ä¼˜åŒ–æ“ä½œï¼šå­˜å‚¨è¿‡ç¨‹è„šæœ¬</h5><p>å­˜å‚¨è¿‡ç¨‹ï¼ˆStored Procedureï¼‰æ˜¯ä¸€ç§åœ¨æ•°æ®åº“ä¸­å­˜å‚¨å¤æ‚ç¨‹åºï¼Œä»¥ä¾¿å¤–éƒ¨ç¨‹åºè°ƒç”¨çš„ä¸€ç§æ•°æ®åº“å¯¹è±¡</p><p>è¿™é‡Œå€¼å¾—æ³¨æ„çš„æ˜¯åœ¨éå†æ¸¸æ ‡çš„å¾ªç¯ä¸­ï¼Œå¦‚æœæŸ¥è¯¢ä¸å­˜åœ¨æˆ–ä¸ºç©ºä¼šè·³å‡ºå¾ªç¯</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DEFINER<span class="operator">=</span>`Autovy`@`localhost` <span class="keyword">PROCEDURE</span> `demo`()</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">-- å®šä¹‰å˜é‡</span></span><br><span class="line"><span class="keyword">DECLARE</span> i <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">DECLARE</span> s <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">DECLARE</span> n TINYTEXT;</span><br><span class="line"><span class="keyword">DECLARE</span> m <span class="type">INT</span>(<span class="number">11</span>);</span><br><span class="line"> # æ±‚åˆ†å‰²ç¬¦å·<span class="string">&#x27;,&#x27;</span>çš„ä½ç½®</span><br><span class="line"><span class="keyword">DECLARE</span> _index <span class="type">INT</span>;</span><br><span class="line"></span><br><span class="line"># å•ä¸ªç‰©å“ç”³è¯·ä¿¡æ¯</span><br><span class="line"><span class="keyword">DECLARE</span> str TINYTEXT;</span><br><span class="line"></span><br><span class="line"># å•ä¸ªç‰©å“ç”³è¯·ä¿¡æ¯é•¿åº¦</span><br><span class="line"><span class="keyword">DECLARE</span> strLength <span class="type">int</span>;</span><br><span class="line"></span><br><span class="line"># ç‰©å“åç§°</span><br><span class="line"><span class="keyword">DECLARE</span> goodName <span class="type">VARCHAR</span>(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"># ç‰©å“æ•°é‡</span><br><span class="line"><span class="keyword">DECLARE</span> goodCount <span class="type">int</span>(<span class="number">11</span>);</span><br><span class="line"></span><br><span class="line"># ç‰©å“id</span><br><span class="line"><span class="keyword">DECLARE</span> goodId <span class="type">int</span>(<span class="number">11</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- å®šä¹‰æ¸¸æ ‡ï¼Œå¹¶å°†sqlç»“æœé›†èµ‹å€¼ç»™æ¸¸æ ‡</span></span><br><span class="line"><span class="keyword">DECLARE</span> apply_id1 <span class="keyword">CURSOR</span> <span class="keyword">FOR</span> <span class="keyword">SELECT</span> id, apply_content <span class="keyword">FROM</span> tw_apply <span class="keyword">WHERE</span> apply_content <span class="keyword">LIKE</span> &quot;æœ¬éƒ¨%&quot;;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å£°æ˜å½“æ¸¸æ ‡éå†å®Œåå°†æ ‡å¿—å˜é‡ç½®æˆ1</span></span><br><span class="line"><span class="keyword">DECLARE</span> CONTINUE HANDLER <span class="keyword">FOR</span> <span class="keyword">NOT</span> FOUND <span class="keyword">SET</span> s<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ‰“å¼€æ¸¸æ ‡</span></span><br><span class="line"><span class="keyword">OPEN</span> apply_id1;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å°†æ¸¸æ ‡ä¸­çš„å€¼èµ‹å€¼ç»™å˜é‡ï¼Œæ³¨æ„ï¼šå˜é‡åä¸è¦å’Œè¿”å›åˆ—ååŒåï¼Œå˜é‡é¡ºåºè¦å’Œsqlç»“æœé¡ºåºä¸€è‡´</span></span><br><span class="line"><span class="keyword">FETCH</span> apply_id1 <span class="keyword">into</span> m, n;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å½“s != 1,ä¸€ç›´å¾ªç¯</span></span><br><span class="line">while s<span class="operator">&lt;&gt;</span><span class="number">1</span> do</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> _index <span class="operator">=</span> LOCATE(<span class="string">&#x27;;&#x27;</span>, n);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- é€šè¿‡;åˆ†å‰²å•ä¸ªç‰©å“çš„ç”³è¯·ä¿¡æ¯ï¼šåŒ—é™¢â€”å¸ç¯·ç‰©å“1ä¸ª;åŒ—é™¢â€”æ¤…å­ç‰©å“1ä¸ª;åŒ—é™¢â€”æ¡Œå­ç‰©å“1ä¸ª;</span></span><br><span class="line">while _index <span class="operator">&gt;</span> <span class="number">0</span>  do</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ‹¿åˆ°å•ä¸ªç‰©å“ç”³è¯·ä¿¡æ¯ï¼šæœ¬éƒ¨â€”â€”æ¡Œå­ç‰©å“1ä¸ª</span></span><br><span class="line"><span class="keyword">SET</span> str <span class="operator">=</span> <span class="keyword">LEFT</span>(n, _index<span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> strLength <span class="operator">=</span> LENGTH(str) <span class="operator">/</span> <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ‹¿åˆ°ç‰©å“åç§°</span></span><br><span class="line"><span class="keyword">SET</span> goodName <span class="operator">=</span> <span class="keyword">LEFT</span>(str, strLength);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ‹¿åˆ°ç‰©å“ä¸ªæ•°(ç±»å‹è½¬æ¢ä¸ºæ•´æ•°)</span></span><br><span class="line"><span class="keyword">SET</span> goodCount <span class="operator">=</span> <span class="built_in">CAST</span>(<span class="keyword">LEFT</span>(<span class="keyword">RIGHT</span>(str, <span class="number">2</span>), <span class="number">1</span>) <span class="keyword">AS</span> signed) ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> goodName;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æŒ‰ç‰©å“åç§°æŸ¥åˆ°ç‰©å“idå¹¶å­˜å‚¨åˆ°goodIdä¸­</span></span><br><span class="line"><span class="comment">-- è¿™é‡Œå¦‚æœæŸ¥è¯¢ä¸å­˜åœ¨æˆ–ä¸ºç©ºä¼šè·³å‡ºæ¸¸æ ‡å¾ªç¯ï¼Œå€¼å¾—æ³¨æ„</span></span><br><span class="line"><span class="keyword">SELECT</span> goods_id <span class="keyword">into</span> goodId <span class="keyword">FROM</span> tw_goods <span class="keyword">WHERE</span> goods_show <span class="keyword">LIKE</span> goodName <span class="keyword">ORDER</span> <span class="keyword">BY</span> goods_count <span class="keyword">DESC</span> LIMIT <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ’å…¥æ•°æ®</span></span><br><span class="line"><span class="keyword">INSERT</span> tw_applydetail(apply_id, good_id, count) <span class="keyword">VALUES</span> (m, goodId, goodCount);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ç§»åŠ¨åˆ°ä¸‹ä¸ªåˆ†ç•Œç‚¹</span></span><br><span class="line"><span class="keyword">SET</span> n <span class="operator">=</span> SUBSTR(n <span class="keyword">FROM</span> _index<span class="operator">+</span><span class="number">1</span>);</span><br><span class="line"><span class="keyword">SET</span> _index <span class="operator">=</span> LOCATE(<span class="string">&#x27;;&#x27;</span>, n);</span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span> while;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- æ‰§è¡Œä¸šåŠ¡é€»è¾‘</span></span><br><span class="line"><span class="keyword">set</span> i <span class="operator">=</span> i<span class="operator">+</span><span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- è¯»å–ä¸‹ä¸€æ¡æ•°æ®ï¼Œè¯»å–å®Œæˆç½®å˜é‡s=1</span></span><br><span class="line"><span class="keyword">FETCH</span> apply_id1 <span class="keyword">into</span> m, n;</span><br><span class="line"><span class="keyword">end</span> while;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- å…³é—­æ¸¸æ ‡</span></span><br><span class="line"><span class="keyword">close</span> apply_id1;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></table></figure><p>å½“æ—¶ç»è¿‡ä¸€å¤©çš„å¯¹å­˜å‚¨è¿‡ç¨‹çš„å­¦ä¹ ï¼Œæˆ‘æ€»ç»“å‡ºäº†ä»¥ä¸‹ç»éªŒï¼šå­˜å‚¨è¿‡ç¨‹éå¸¸ä¸æ–¹ä¾¿è°ƒè¯•ï¼Œè€Œä¸”æŠ¥é”™ä¿¡æ¯åªå®šä½ä¸æŠ¥é”™è¯¯ç±»å‹ï¼ˆsqlæ˜¯è¿™æ ·çš„ï¼‰ã€‚å¦‚æœèƒ½é‡æ¥ï¼Œå¯¹æ•°æ®åº“çš„æ‰¹é‡æ“ä½œï¼Œé¦–é€‰Pythonæˆ–Shell</p><h5 id="4-ä¼˜åŒ–ç»“æœ"><a href="#4-ä¼˜åŒ–ç»“æœ" class="headerlink" title="4.ä¼˜åŒ–ç»“æœ"></a>4.ä¼˜åŒ–ç»“æœ</h5><ul><li>æˆªè‡³ç›®å‰ç‰©èµ„ç”³è¯·è¡¨å·²æœ‰4817æ¡æ•°æ®ï¼Œè€ƒè™‘åˆ°åé¢æ•°æ®ä¼šé•¿æœŸç§¯ç´¯ï¼Œè¿™æ ·çš„ä¼˜åŒ–æ˜¯æœ‰å¿…è¦çš„</li><li>å»æ‰åç«¯è€—æ—¶è€—å†…å­˜çš„å­—ç¬¦ä¸²è§£æå·¥ä½œ</li><li>èŠ‚çœæ•°æ®åº“å­˜å‚¨ç©ºé—´ï¼Œä¼˜åŒ–å‰ç”³è¯·è¡¨å†…å­˜å 0.79MBï¼Œä¼˜åŒ–åå 0.56MB</li></ul><p>å¦å¤–é™„åŠ ä¸€ä¸ªå®¹é‡æŸ¥è¯¢å°å·¥å…·ï¼Œå¯æŸ¥è¯¢æ•°æ®åº“å„è¡¨å®¹é‡å¤§å°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">select</span><br><span class="line">table_schema as &#39;æ•°æ®åº“&#39;,</span><br><span class="line">table_name as &#39;è¡¨å&#39;,</span><br><span class="line">table_rows as &#39;è®°å½•æ•°&#39;,</span><br><span class="line">truncate(data_length&#x2F;1024&#x2F;1024, 2) as &#39;æ•°æ®å®¹é‡(MB)&#39;,</span><br><span class="line">truncate(index_length&#x2F;1024&#x2F;1024, 2) as &#39;ç´¢å¼•å®¹é‡(MB)&#39;</span><br><span class="line">from information_schema.tables</span><br><span class="line">where table_schema&#x3D;&#39;bgs&#39;</span><br><span class="line">order by data_length desc, index_length desc;</span><br></pre></td></tr></table></figure><h4 id="ç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢"><a href="#ç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢" class="headerlink" title="ç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢"></a>ç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢</h4><h5 id="1-ç›¸å…³è¡¨ç»“æ„"><a href="#1-ç›¸å…³è¡¨ç»“æ„" class="headerlink" title="1.ç›¸å…³è¡¨ç»“æ„"></a>1.ç›¸å…³è¡¨ç»“æ„</h5><p>æ—¥å¿—è®°å½•è¡¨ï¼šå…±33687æ¡æ•°æ®</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202203031910440.png" alt="image-20220303191047146"></p><h5 id="2-ä¼˜åŒ–æ€è·¯ï¼šæ·»åŠ ç´¢å¼•"><a href="#2-ä¼˜åŒ–æ€è·¯ï¼šæ·»åŠ ç´¢å¼•" class="headerlink" title="2.ä¼˜åŒ–æ€è·¯ï¼šæ·»åŠ ç´¢å¼•"></a>2.ä¼˜åŒ–æ€è·¯ï¼šæ·»åŠ ç´¢å¼•</h5><p>å…³äºç´¢å¼•çš„çŸ¥è¯†ç‚¹è¿™é‡Œä¸ç»†è¯´ï¼Œæ¨èé˜…è¯»ï¼š<a href="https://javaguide.cn/database/mysql/mysql-index/">MySQL ç´¢å¼•è¯¦è§£</a></p><p>ç”±äºæ—¥å¿—è¡¨æ•°æ®åºå¤§ï¼Œæœ‰3ä¸‡æ¡æ•°æ®ï¼Œä¸ºäº†è¾¾åˆ°å¿«é€Ÿé€šè¿‡ç”¨æˆ·åæ¨¡ç³ŠæŸ¥æ‰¾åˆ°æ—¥å¿—æ“ä½œå†…å®¹å’Œæ“ä½œæ—¶é—´ï¼Œå°±éœ€è¦ç”¨åˆ°ç´¢å¼•ï¼Œå¦å¤–åœ¨æ¨¡ç³ŠæŸ¥è¯¢ä¸­ï¼Œ<strong>likeè¯­å¥è¦ä½¿ç´¢å¼•ç”Ÿæ•ˆï¼Œlikeåä¸èƒ½ä»¥%å¼€å§‹ï¼Œä¹Ÿå°±æ˜¯è¯´ ï¼ˆlike %å­—æ®µå%ï¼‰ ã€ï¼ˆlike %å­—æ®µåï¼‰è¿™ç±»è¯­å¥ä¼šä½¿ç´¢å¼•å¤±æ•ˆï¼Œè€Œï¼ˆlike å­—æ®µåï¼‰ã€ï¼ˆlike å­—æ®µå%ï¼‰è¿™ç±»è¯­å¥ç´¢å¼•æ˜¯å¯ä»¥æ­£å¸¸ä½¿ç”¨</strong></p><p>æ‰€ä»¥æˆ‘å°†æŸ¥è¯¢çš„æ¨¡ç³ŠåŒ¹é…ç”±â€œ%xxxx%â€æ”¹ä¸ºâ€œxxxx%â€ï¼Œåªæ¨¡ç³ŠåŒ¹é…å‰é¢éƒ¨åˆ†</p><h5 id="3-ä¼˜åŒ–æ“ä½œ"><a href="#3-ä¼˜åŒ–æ“ä½œ" class="headerlink" title="3.ä¼˜åŒ–æ“ä½œ"></a>3.ä¼˜åŒ–æ“ä½œ</h5><p>è¿™é‡Œç›´æ¥ä½¿ç”¨Navicatå¯è§†åŒ–æ·»åŠ ç´¢å¼•ï¼Œå› ä¸ºåå°æŸ¥è¯¢æ—¥å¿—æ˜¯éœ€è¦ç”¨ç”¨æˆ·åæ¨¡ç³ŠæŸ¥æ‰¾åˆ°æ—¥å¿—æ“ä½œå†…å®¹å’Œæ“ä½œæ—¶é—´ï¼Œæ‰€ä»¥éœ€è¦æ·»åŠ çš„ç´¢å¼•ä¸ºlog_realnam</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202203031939750.png" alt="image-20220303193939350"></p><p>æ›´æ”¹mybatisçš„sqlæ˜ å°„ï¼Œè§£å†³sqlæ³¨å…¥å’Œç´¢å¼•å¤±æ•ˆé—®é¢˜</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT log_realname, log_content, log_time FROM tw_log WHERE log_realname LIKE &quot;%$&#123;log_name&#125;%&quot;;  </span><br></pre></td></tr></table></figure><p>åœ¨è¿™ç§æƒ…å†µä¸‹ä½¿ç”¨#ç¨‹åºä¼šæŠ¥é”™ï¼Œæ–°æ‰‹ç¨‹åºå‘˜å°±æŠŠ#å·æ”¹æˆäº†$,è¿™æ ·å¦‚æœjavaä»£ç å±‚é¢æ²¡æœ‰å¯¹ç”¨æˆ·è¾“å…¥çš„å†…å®¹åšå¤„ç†åŠ¿å¿…ä¼šäº§ç”ŸSQLæ³¨å…¥æ¼æ´ã€‚</p><p>æ­£ç¡®å†™æ³•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT log_realname, log_content, log_time FROM tw_log WHERE log_realname LIKE concat(â€˜%â€™,#&#123;log_name&#125;, â€˜%â€™)   </span><br></pre></td></tr></table></figure><h5 id="4-ä¼˜åŒ–ç»“æœ-1"><a href="#4-ä¼˜åŒ–ç»“æœ-1" class="headerlink" title="4.ä¼˜åŒ–ç»“æœ"></a>4.ä¼˜åŒ–ç»“æœ</h5><ul><li>æ·»åŠ ç´¢å¼•å‰ä½¿ç”¨ç”¨æˆ·åæ¨¡ç³ŠæŸ¥è¯¢æ—¥å¿—ï¼Œè€—æ—¶å¤§çº¦0.045sï¼Œæ·»åŠ ç´¢å¼•åè€—æ—¶å¤§çº¦0.032sï¼Œå‡å°‘äº†ç£ç›˜IOï¼Œæé«˜äº†æŸ¥è¯¢é€Ÿåº¦</li><li>ä¿®æ”¹mybatisä¸­æ¨¡ç³ŠæŸ¥è¯¢çš„sqlè¯­å¥ï¼Œè§£å†³ç´¢å¼•å¤±æ•ˆçš„é—®é¢˜ï¼Œå¹¶è§£å†³äº†æ¨¡ç³ŠæŸ¥è¯¢ä¸­æ‹¼æ¥å­—ç¬¦ä¸²çš„sqlæ³¨å…¥é—®é¢˜</li></ul><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><p><a href="https://bynss.com/linux/476637.html">æ€æ ·åœ¨ Debian 11 / Debian 10 ä¸Šå®‰è£… MySQL 8.0 / 5.7</a></p><p><a href="https://stackoverflow.com/questions/20259036/mysql-package-mysql-server-has-no-installation-candidate">install.packages - MySQL: Package â€˜mysql-serverâ€™ has no installation candidate - Stack Overflow</a></p><p><a href="https://javaguide.cn/database/mysql/a-thousand-lines-of-mysql-study-notes/">ä¸€åƒè¡Œ MySQL å­¦ä¹ ç¬”è®°</a></p><p><a href="https://javaguide.cn/database/mysql/transaction-isolation-level/">äº‹åŠ¡éš”ç¦»çº§åˆ«(å›¾æ–‡è¯¦è§£)</a></p><p><a href="https://juejin.cn/post/6844903688553627661">ä½ çš„likeè¯­å¥ä¸ºå•¥æ²¡ç´¢å¼•ï¼Ÿ</a></p><p><a href="https://juejin.cn/post/6911101492497743879#heading-3">MySQLæ˜¯å¦‚ä½•ä¼˜åŒ–æ¨¡ç³ŠåŒ¹é…likeçš„SQL</a></p><p><a href="https://www.cnblogs.com/hoojo/archive/2011/07/15/2107740.html">Transact-SQL ç¼–ç¨‹</a></p><p><a href="https://segmentfault.com/a/1190000039248897">é’ˆå¯¹æ–°æ‰‹çš„MYSQLå­˜å‚¨è¿‡ç¨‹è¯¦è§£</a></p>]]></content>
    
    <summary type="html">
    
      &lt;img src=&quot;https://cdn.jsdelivr.net/gh/Autovy/Image/img/202203041310207.png&quot; alt=&quot;image-20220304131032975&quot; style=&quot;zoom: 33%;&quot;&gt;

&lt;p&gt;MySQL  â&lt;/p&gt;
&lt;p&gt;OurSQL âœ…&lt;/p&gt;
    
    </summary>
    
    
      <category term="å¼€å‘åŸç†" scheme="https://autovy.github.io/categories/%E5%BC%80%E5%8F%91%E5%8E%9F%E7%90%86/"/>
    
    
      <category term="å¼€å‘åŸç†" scheme="https://autovy.github.io/tags/%E5%BC%80%E5%8F%91%E5%8E%9F%E7%90%86/"/>
    
      <category term="æ•°æ®åº“" scheme="https://autovy.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
      <category term="Mysql" scheme="https://autovy.github.io/tags/Mysql/"/>
    
  </entry>
  
  <entry>
    <title>Java|Javaå¤šçº¿ç¨‹æ¡ˆä¾‹</title>
    <link href="https://autovy.github.io/2022/02/04/Java/Java-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%A1%88%E4%BE%8B/"/>
    <id>https://autovy.github.io/2022/02/04/Java/Java-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%A1%88%E4%BE%8B/</id>
    <published>2022-02-04T06:30:00.000Z</published>
    <updated>2022-03-02T13:04:13.278Z</updated>
    
    <content type="html"><![CDATA[<img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202203022103663.jpeg" alt="Multithreading | threading-memes, multithreading-memes | ProgrammerHumor.io" style="zoom:80%;"><p>å·ï¼</p><span id="more"></span><h3 id="çº¿ç¨‹çš„åˆ›å»ºåŠçŠ¶æ€"><a href="#çº¿ç¨‹çš„åˆ›å»ºåŠçŠ¶æ€" class="headerlink" title="çº¿ç¨‹çš„åˆ›å»ºåŠçŠ¶æ€"></a>çº¿ç¨‹çš„åˆ›å»ºåŠçŠ¶æ€</h3><h4 id="1-çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#1-çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="1.çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ"></a>1.çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202202260851266.png" alt="Java çº¿ç¨‹çš„çŠ¶æ€ "></p><h4 id="2-åˆ›å»ºä¸€ä¸ªçº¿ç¨‹"><a href="#2-åˆ›å»ºä¸€ä¸ªçº¿ç¨‹" class="headerlink" title="2.åˆ›å»ºä¸€ä¸ªçº¿ç¨‹"></a>2.åˆ›å»ºä¸€ä¸ªçº¿ç¨‹</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadStateTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å¯¹è±¡</span></span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread();</span><br><span class="line">        System.out.println(<span class="string">&quot;1- &quot;</span> + thread.getState());</span><br><span class="line">        <span class="comment">// å¯åŠ¨çº¿ç¨‹</span></span><br><span class="line">        thread.start();</span><br><span class="line">        System.out.println(<span class="string">&quot;2- &quot;</span> + thread.getState());</span><br><span class="line"></span><br><span class="line">       <span class="comment">// ä¸»çº¿ç¨‹ç¡çœ ç­‰å¾…çº¿ç¨‹æ‰§è¡Œç»“æŸ</span></span><br><span class="line">        TimeUnit.SECONDS.sleep(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;3- &quot;</span> + thread.getState());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-åˆ›å»ºæœ‰ä»»åŠ¡çº¿ç¨‹"><a href="#3-åˆ›å»ºæœ‰ä»»åŠ¡çº¿ç¨‹" class="headerlink" title="3.åˆ›å»ºæœ‰ä»»åŠ¡çº¿ç¨‹"></a>3.åˆ›å»ºæœ‰ä»»åŠ¡çº¿ç¨‹</h4><p>åˆ›å»ºæœ‰ä»»åŠ¡çº¿ç¨‹æœ‰ä»¥ä¸‹ä¸‰ç§æ–¹å¼ï¼š</p><ul><li>é‡å†™Threadçš„run()æ–¹æ³•</li><li>å®ç°Runnableæ¥å£ï¼Œåœ¨åˆ›å»ºThreadå¯¹è±¡æ—¶ä¼ å…¥</li><li>ä½¿ç”¨FutureTaskï¼Œåœ¨åˆ›å»ºThreadå¯¹è±¡çš„æ—¶å€™ä¼ å…¥</li></ul><h5 id="é‡å†™run-æ–¹æ³•"><a href="#é‡å†™run-æ–¹æ³•" class="headerlink" title="é‡å†™run()æ–¹æ³•"></a>é‡å†™run()æ–¹æ³•</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CreateThreadRun</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread()&#123;</span><br><span class="line">            <span class="comment">// é‡å†™runæ–¹æ³•</span></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;ä¸€ä¸ªå­çº¿ç¨‹ä»»åŠ¡&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        thread.start();</span><br><span class="line">        System.out.println(<span class="string">&quot;mainç»“æŸ&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="Runnableå®ç°"><a href="#Runnableå®ç°" class="headerlink" title="Runnableå®ç°"></a>Runnableå®ç°</h5><p>Runnableæ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼Œå¯ä»¥ä½œä¸ºThreadæ„é€ å‡½æ•°çš„å‚æ•°</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202202260915940.png" alt="image-20220226091533448"></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202202260916952.png" alt="image-20220226091616762"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CreateThreadRunnable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread(</span><br><span class="line">                <span class="comment">// lambdaè¡¨è¾¾å¼å¯ä»¥ä¸ºå‡½æ•°å¼æ¥å£åˆ›å»ºåŒ¿åå¯¹è±¡(ç±»å‹æ˜¯Runnable)</span></span><br><span class="line">                () -&gt; System.out.println(<span class="string">&quot;ä¸€ä¸ªå­çº¿ç¨‹ä»»åŠ¡&quot;</span>)</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        thread.start();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;mainç»“æŸ&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="FutureTaskå®ç°"><a href="#FutureTaskå®ç°" class="headerlink" title="FutureTaskå®ç°"></a>FutureTaskå®ç°</h5><p>ä¸Šé¢ä¸¤è€…æ–¹å¼ä¸­ï¼Œå­çº¿ç¨‹æ²¡æœ‰è¿”å›å€¼ä¹Ÿæ²¡æœ‰æŠ›å‡ºå¼‚å¸¸ï¼ˆè¿™æ˜¯ç”±å…¶ä¸­çš„runæ–¹æ³•å†³å®šçš„ï¼‰ï¼Œæ‰€ä»¥ä¸»çº¿ç¨‹å¯¹å­çº¿ç¨‹çš„çŠ¶å†µä¸€æ— æ‰€çŸ¥ï¼Œè€Œæ¥ä¸‹æ¥çš„FutureTaskå¯ä»¥è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202202260928525.png" alt="image-20220226092833201"></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202202260926628.png" alt="image-20220226092625296"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.Callable;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutionException;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.FutureTask;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CreateThreadFutureTask</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å®ç°Callableæ¥å£ï¼Œå†™å…¥ä»»åŠ¡ï¼Œæ”¾å…¥FutureTaskä¸­</span></span><br><span class="line">        Callable&lt;String&gt; callable = () -&gt;&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ä¸€ä¸ªå­çº¿ç¨‹ä»»åŠ¡&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;sub task done&quot;</span>;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ„é€ FutureTaskç±»ï¼ˆå…¶å®è´¨æ˜¯Runnableçš„ä¸€ä¸ªå®ç°ï¼‰</span></span><br><span class="line">        FutureTask&lt;String&gt; task = <span class="keyword">new</span> FutureTask&lt;&gt;(callable);</span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread(task);</span><br><span class="line">        thread.start();</span><br><span class="line">        System.out.println(<span class="string">&quot;å­çº¿ç¨‹å¯åŠ¨&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¸»çº¿ç¨‹è·å¾—å­çº¿ç¨‹è¿”å›å€¼å¹¶æ•æ‰å¼‚å¸¸</span></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">// get()è·å¾—å­çº¿ç¨‹è¿”å›å€¼</span></span><br><span class="line">            String subResult = task.get();</span><br><span class="line">            System.out.println(<span class="string">&quot;å­çº¿ç¨‹è¿”å›å€¼ï¼š&quot;</span> + subResult);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (InterruptedException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (ExecutionException e)&#123;</span><br><span class="line">            <span class="comment">// getCauseè·å¾—å­çº¿ç¨‹å‘ç”Ÿçš„å¼‚å¸¸</span></span><br><span class="line">            Throwable cause = e.getCause();</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;mainç»“æŸ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸»çº¿ç¨‹è°ƒç”¨getæ–¹æ³•åï¼Œä¼šä¸æ–­è¯¢é—®å­çº¿ç¨‹çš„æƒ…å†µï¼Œç›´åˆ°å­çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ã€‚FutureTaské€‚ç”¨äºå¤šä¸ªä»»åŠ¡éœ€è¦åŒæ—¶å®Œæˆçš„æƒ…å†µï¼ˆä¸»çº¿ç¨‹åšå®Œè‡ªå·±çš„ä»»åŠ¡åï¼Œä¸€ç›´ç­‰å¾…å­çº¿ç¨‹ç›´åˆ°å®ƒå®Œæˆä»»åŠ¡ï¼Œç„¶åä¸€èµ·ç»“æŸï¼‰</p><h3 id="CompleteFuture"><a href="#CompleteFuture" class="headerlink" title="CompleteFuture"></a>CompleteFuture</h3><p>CompleteFutureå’ŒFutureTaskéƒ½æ˜¯Futureæ¥å£çš„å®ç°ç±»ï¼Œä½†æ˜¯CompleteFutureçš„ä½¿ç”¨å§¿åŠ¿æ›´åŠ ä¼˜é›…ã€‚å»ºè®®åŠæ—¶æŠ›å¼ƒFutureTaskï¼Œæ‹¥æŠ±CompleteFutureğŸ¥°</p><h4 id="1-å¿…å¤‡å·¥å…·ç±»"><a href="#1-å¿…å¤‡å·¥å…·ç±»" class="headerlink" title="1.å¿…å¤‡å·¥å…·ç±»"></a>1.å¿…å¤‡å·¥å…·ç±»</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.StringJoiner;</span><br><span class="line"></span><br><span class="line"><span class="comment">// çº¿ç¨‹å°å·¥å…·</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SmallTool</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è®©å½“å‰çº¿ç¨‹ç¡çœ næ¯«ç§’</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sleepMillis</span><span class="params">(<span class="keyword">long</span> millis)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Thread.sleep(millis);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (InterruptedException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰“å°å½“å‰æ—¶é—´æˆ³+çº¿ç¨‹ä¿¡æ¯+æ¶ˆæ¯</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printTimeAndThread</span><span class="params">(String tag)</span></span>&#123;</span><br><span class="line">        String res = <span class="keyword">new</span> StringJoiner(<span class="string">&quot;\t|\t&quot;</span>)</span><br><span class="line">                .add(String.valueOf(System.currentTimeMillis()))</span><br><span class="line">                .add(String.valueOf(Thread.currentThread().getId()))</span><br><span class="line">                .add(Thread.currentThread().getName())</span><br><span class="line">                .add(tag)</span><br><span class="line">                .toString();</span><br><span class="line"></span><br><span class="line">        System.out.println(res);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="2-CompletableFutureå…¥é—¨"><a href="#2-CompletableFutureå…¥é—¨" class="headerlink" title="2.CompletableFutureå…¥é—¨"></a>2.CompletableFutureå…¥é—¨</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202202261121903.png" alt="image-20220226112153973"></p><ul><li>å¼€å¯ï¼šsupplyAsync</li><li>è¿æ¥ï¼šthenCompose</li><li>åˆå¹¶ï¼šthenCombine</li></ul><h5 id="å¼‚æ­¥ä»»åŠ¡çš„å¼€å¯"><a href="#å¼‚æ­¥ä»»åŠ¡çš„å¼€å¯" class="headerlink" title="å¼‚æ­¥ä»»åŠ¡çš„å¼€å¯"></a>å¼‚æ­¥ä»»åŠ¡çš„å¼€å¯</h5><p>supplyAsyncæ–¹æ³•å¼€å¯ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡</p><p><strong>åœºæ™¯æ¨¡æ‹Ÿ</strong></p><ul><li>é¡¾å®¢è¿›å…¥é¤å…</li><li>é¡¾å®¢ç‚¹èœ</li><li>é¡¾å®¢åˆ·æ‰‹æœºç­‰å¾… <ul><li>ï¼ˆçº¿ç¨‹2ï¼‰å¨å¸ˆç‚’èœ</li><li>ï¼ˆçº¿ç¨‹2ï¼‰å¨å¸ˆæ‰“é¥­</li></ul></li><li>é¡¾å®¢å¼€å§‹å¹²é¥­</li></ul><p>è¿™é‡Œçš„ç­‰å¾…é˜Ÿåˆ—æ˜¯ é¡¾å®¢ä»»åŠ¡ -&gt; å¨å¸ˆä»»åŠ¡</p><p><strong>ä»£ç æ¡ˆä¾‹</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.CompletableFuture;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CompleteFutureSupplyAsync</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SmallTool.printTimeAndThread(<span class="string">&quot;é¡¾å®¢è¿›å…¥é¤å…&quot;</span>);</span><br><span class="line">        SmallTool.printTimeAndThread(<span class="string">&quot;é¡¾å®¢ç‚¹èœ&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// supplyAsyncæ–¹æ³•éœ€è¦ä¸€ä¸ªsupplierä½œä¸ºå‚æ•°</span></span><br><span class="line">        <span class="comment">// ä¸ºå‡½æ•°å¼æ¥å£ï¼Œæ— å…¥å‚ï¼Œè¿™é‡Œåªæœ‰ä¸€ä¸ªStringç±»å‹çš„è¿”å›å€¼ï¼ˆä½œä¸ºCompletableFutureçš„æ³›å‹ï¼‰</span></span><br><span class="line">        <span class="comment">// è°ƒç”¨supplyAsyncï¼Œsupplierä¸­çš„ä»£ç ä¼šè·‘åˆ°å­çº¿ç¨‹ä¸­æ‰§è¡Œ</span></span><br><span class="line">        CompletableFuture&lt;String&gt; sub = CompletableFuture.supplyAsync(</span><br><span class="line">                () -&gt; &#123;</span><br><span class="line">                    SmallTool.printTimeAndThread(<span class="string">&quot;å¨å¸ˆç‚’èœ&quot;</span>);</span><br><span class="line">                    <span class="comment">// ç‚’èœè€—æ—¶</span></span><br><span class="line">                    SmallTool.sleepMillis(<span class="number">200</span>);</span><br><span class="line">                    SmallTool.printTimeAndThread(<span class="string">&quot;å¨å¸ˆæ‰“é¥­&quot;</span>);</span><br><span class="line">                    <span class="comment">// æ‰“é¥­è€—æ—¶</span></span><br><span class="line">                    SmallTool.sleepMillis(<span class="number">100</span>);</span><br><span class="line">                    <span class="keyword">return</span> <span class="string">&quot;é¥­èœå·²å¤‡å¥½&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        SmallTool.printTimeAndThread(<span class="string">&quot;é¡¾å®¢æ­£åœ¨åˆ·æ‰‹æœºç­‰å¾…&quot;</span>);</span><br><span class="line">        <span class="comment">// joinæ–¹æ³•è¿”å›å€¼ç±»å‹ä¸ºCompletableFutureæ³›å‹çš„ç±»å‹</span></span><br><span class="line">        <span class="comment">// joinæ–¹æ³•è¿”å›å€¼å³ä¸ºsupplierçš„è¿”å›å€¼</span></span><br><span class="line">        <span class="comment">// joinæ–¹æ³•ä¼šç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œç»“æŸï¼Œå¹¶è·å¾—å…¶è¿”å›å€¼</span></span><br><span class="line">        SmallTool.printTimeAndThread(String.format(<span class="string">&quot;%sï¼Œé¡¾å®¢å¼€å§‹å¹²é¥­&quot;</span>, sub.join()));</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>è¿è¡Œç»“æœ</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202202261031080.png" alt="image-20220226103120810"></p><h5 id="å¼‚æ­¥ä»»åŠ¡çš„è¿æ¥"><a href="#å¼‚æ­¥ä»»åŠ¡çš„è¿æ¥" class="headerlink" title="å¼‚æ­¥ä»»åŠ¡çš„è¿æ¥"></a>å¼‚æ­¥ä»»åŠ¡çš„è¿æ¥</h5><p>thenComposeè¿æ¥ä¸¤ä¸ªä»»åŠ¡å½“åšä¸€ä¸ªçº¿ç¨‹æäº¤åˆ°çº¿ç¨‹æ± ï¼ŒthenComposeAsyncè¿æ¥ä¸¤ä¸ªä»»åŠ¡åˆ†åˆ«å•ç‹¬æäº¤åˆ°çº¿ç¨‹æ± å¤„ç†</p><p><strong>åœºæ™¯æ¨¡æ‹Ÿ</strong></p><ul><li>é¡¾å®¢è¿›å…¥é¤å…</li><li>é¡¾å®¢ç‚¹èœ</li><li>é¡¾å®¢åˆ·æ‰‹æœºç­‰å¾… <ul><li>ï¼ˆçº¿ç¨‹2ï¼‰å¨å¸ˆç‚’èœï¼Œå°†èœäº¤ç»™æœåŠ¡å‘˜</li><li>ï¼ˆçº¿ç¨‹3ï¼‰æœåŠ¡å‘˜æ‹¿åˆ°èœå¹¶å»æ‰“é¥­</li></ul></li><li>é¡¾å®¢å¼€å§‹å¹²é¥­</li></ul><p>è¿™é‡Œçš„ç­‰å¾…é˜Ÿåˆ—æ˜¯ é¡¾å®¢ä»»åŠ¡ -&gt; å¨å¸ˆä»»åŠ¡ -&gt; æœåŠ¡å‘˜ä»»åŠ¡</p><p><strong>ä»£ç æ¡ˆä¾‹</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.CompletableFuture;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CompleteFutureThenCompose</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SmallTool.printTimeAndThread(<span class="string">&quot;é¡¾å®¢è¿›å…¥é¤å…&quot;</span>);</span><br><span class="line">        SmallTool.printTimeAndThread(<span class="string">&quot;é¡¾å®¢ç‚¹èœ&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// supplyAsyncæ–¹æ³•éœ€è¦ä¸€ä¸ªsupplierä½œä¸ºå‚æ•°</span></span><br><span class="line">        <span class="comment">// ä¸ºå‡½æ•°å¼æ¥å£ï¼Œæ— å…¥å‚ï¼Œè¿™é‡Œåªæœ‰ä¸€ä¸ªStringç±»å‹çš„è¿”å›å€¼ï¼ˆä½œä¸ºCompletableFutureçš„æ³›å‹ï¼‰</span></span><br><span class="line">        <span class="comment">// è°ƒç”¨supplyAsyncï¼Œsupplierä¸­çš„ä»£ç ä¼šè·‘åˆ°å­çº¿ç¨‹ä¸­æ‰§è¡Œ</span></span><br><span class="line">        CompletableFuture&lt;String&gt; sub = CompletableFuture.supplyAsync(</span><br><span class="line">               <span class="comment">// å¨å¸ˆä»»åŠ¡</span></span><br><span class="line">                () -&gt; &#123;</span><br><span class="line">                    SmallTool.printTimeAndThread(<span class="string">&quot;å¨å¸ˆç‚’èœ&quot;</span>);</span><br><span class="line">                    <span class="comment">// ç‚’èœè€—æ—¶</span></span><br><span class="line">                    SmallTool.sleepMillis(<span class="number">300</span>);</span><br><span class="line">                    <span class="keyword">return</span> <span class="string">&quot;é±¼é¦™è‚‰ä¸&quot;</span>;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// dishå³ä¼ å…¥å¨å¸ˆä»»åŠ¡çš„è¿”å›å€¼</span></span><br><span class="line">                <span class="comment">// èœåšå¥½åï¼Œå¼€å¯æœåŠ¡å‘˜çº¿ç¨‹æ‹¿å¾—é¥­èœå¹¶æ‰“é¥­</span></span><br><span class="line">                <span class="comment">// thenComposeä¼šåœ¨å‰ä¸€ä¸ªçº¿ç¨‹å®Œæˆåï¼Œå¼€å¯å¦ä¸€ä¸ªçº¿ç¨‹</span></span><br><span class="line">        ).thenCompose(dish -&gt; CompletableFuture.supplyAsync(</span><br><span class="line"></span><br><span class="line">                <span class="comment">// æœåŠ¡å‘˜ä»»åŠ¡</span></span><br><span class="line">                () -&gt; &#123;</span><br><span class="line">                    SmallTool.printTimeAndThread(<span class="string">&quot;æœåŠ¡å‘˜æ‰“é¥­&quot;</span>);</span><br><span class="line">                    <span class="comment">// æ‰“é¥­è€—æ—¶</span></span><br><span class="line">                    SmallTool.sleepMillis(<span class="number">100</span>);</span><br><span class="line">                    <span class="keyword">return</span> dish + <span class="string">&quot; ç±³é¥­å·²å¤‡å¥½&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        ));</span><br><span class="line"></span><br><span class="line">        SmallTool.printTimeAndThread(<span class="string">&quot;é¡¾å®¢æ­£åœ¨åˆ·æ‰‹æœºç­‰å¾…&quot;</span>);</span><br><span class="line">        <span class="comment">// joinæ–¹æ³•è¿”å›å€¼ç±»å‹ä¸ºCompletableFutureæ³›å‹çš„ç±»å‹</span></span><br><span class="line">        <span class="comment">// joinæ–¹æ³•è¿”å›å€¼å³ä¸ºsupplierçš„è¿”å›å€¼</span></span><br><span class="line">        <span class="comment">// joinæ–¹æ³•ä¼šç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œç»“æŸï¼Œå¹¶è·å¾—å…¶è¿”å›å€¼</span></span><br><span class="line">        SmallTool.printTimeAndThread(String.format(<span class="string">&quot;%sï¼Œé¡¾å®¢å¼€å§‹å¹²é¥­&quot;</span>, sub.join()));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>è¿è¡Œç»“æœ</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202202261134832.png" alt="image-20220226113453404"></p><h5 id="å¼‚æ­¥ä»»åŠ¡çš„ç»“åˆ"><a href="#å¼‚æ­¥ä»»åŠ¡çš„ç»“åˆ" class="headerlink" title="å¼‚æ­¥ä»»åŠ¡çš„ç»“åˆ"></a>å¼‚æ­¥ä»»åŠ¡çš„ç»“åˆ</h5><p>thenCombineåˆå¹¶ä¸¤ä¸ªä»»åŠ¡ï¼ŒåŒæ—¶æ‰§è¡Œä»–ä»¬</p><p><strong>åœºæ™¯æ¨¡æ‹Ÿ</strong></p><ul><li>é¡¾å®¢è¿›å…¥é¤å…</li><li>é¡¾å®¢ç‚¹èœ</li><li>é¡¾å®¢åˆ·æ‰‹æœºç­‰å¾… <ul><li>ï¼ˆçº¿ç¨‹2ï¼‰å¨å¸ˆç‚’èœ</li><li>ï¼ˆçº¿ç¨‹3ï¼‰æœåŠ¡å‘˜è’¸é¥­</li><li>ï¼ˆçº¿ç¨‹3ï¼‰èœå’Œé¥­éƒ½å¤‡å¥½äº†ï¼ŒæœåŠ¡å‘˜æ‰“é¥­ä¸Šèœ</li></ul></li><li>é¡¾å®¢å¼€å§‹å¹²é¥­</li></ul><p><strong>ä»£ç æ¡ˆä¾‹</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.CompletableFuture;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CompleteFutureThenCombine</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SmallTool.printTimeAndThread(<span class="string">&quot;é¡¾å®¢è¿›å…¥é¤å…&quot;</span>);</span><br><span class="line">        SmallTool.printTimeAndThread(<span class="string">&quot;é¡¾å®¢ç‚¹èœ&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// supplyAsyncæ–¹æ³•éœ€è¦ä¸€ä¸ªsupplierä½œä¸ºå‚æ•°</span></span><br><span class="line">        <span class="comment">// ä¸ºå‡½æ•°å¼æ¥å£ï¼Œæ— å…¥å‚ï¼Œè¿™é‡Œåªæœ‰ä¸€ä¸ªStringç±»å‹çš„è¿”å›å€¼ï¼ˆä½œä¸ºCompletableFutureçš„æ³›å‹ï¼‰</span></span><br><span class="line">        <span class="comment">// è°ƒç”¨supplyAsyncï¼Œsupplierä¸­çš„ä»£ç ä¼šè·‘åˆ°å­çº¿ç¨‹ä¸­æ‰§è¡Œ</span></span><br><span class="line">        CompletableFuture&lt;String&gt; sub = CompletableFuture.supplyAsync(</span><br><span class="line">                <span class="comment">// å¨å¸ˆä»»åŠ¡</span></span><br><span class="line">                () -&gt; &#123;</span><br><span class="line">                    SmallTool.printTimeAndThread(<span class="string">&quot;å¨å¸ˆç‚’èœ&quot;</span>);</span><br><span class="line">                    <span class="comment">// ç‚’èœè€—æ—¶</span></span><br><span class="line">                    SmallTool.sleepMillis(<span class="number">200</span>);</span><br><span class="line">                    <span class="keyword">return</span> <span class="string">&quot;é±¼é¦™è‚‰ä¸&quot;</span>;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// thenCombineå°†ä¸¤ä¸ªçº¿ç¨‹ä¸€èµ·æ‰§è¡Œ</span></span><br><span class="line">        ).thenCombine(CompletableFuture.supplyAsync(</span><br><span class="line"></span><br><span class="line">                <span class="comment">// æœåŠ¡å‘˜ä»»åŠ¡</span></span><br><span class="line">                () -&gt; &#123;</span><br><span class="line">                    SmallTool.printTimeAndThread(<span class="string">&quot;æœåŠ¡å‘˜è’¸é¥­&quot;</span>);</span><br><span class="line">                    <span class="comment">// è’¸é¥­è€—æ—¶</span></span><br><span class="line">                    SmallTool.sleepMillis(<span class="number">300</span>);</span><br><span class="line">                    <span class="keyword">return</span> <span class="string">&quot;ç±³é¥­&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        ), (dish, rice) -&gt; &#123;</span><br><span class="line">            <span class="comment">// ä¸¤ä¸ªå¹¶è¡Œçš„çº¿ç¨‹éƒ½å®Œæˆä»»åŠ¡åï¼Œåˆå¹¶ä¸¤ä¸ªç»“æœåç»“æŸä¸¤ä¸ªä»»åŠ¡</span></span><br><span class="line">           SmallTool.printTimeAndThread(<span class="string">&quot;æœåŠ¡å‘˜æ‰“é¥­&quot;</span>);</span><br><span class="line">           SmallTool.sleepMillis(<span class="number">100</span>);</span><br><span class="line">           <span class="keyword">return</span> String.format(<span class="string">&quot;%s + %s å·²å¤‡å¥½&quot;</span>, dish, rice);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        SmallTool.printTimeAndThread(<span class="string">&quot;é¡¾å®¢æ­£åœ¨åˆ·æ‰‹æœºç­‰å¾…&quot;</span>);</span><br><span class="line">        <span class="comment">// joinæ–¹æ³•è¿”å›å€¼ç±»å‹ä¸ºCompletableFutureæ³›å‹çš„ç±»å‹</span></span><br><span class="line">        <span class="comment">// joinæ–¹æ³•è¿”å›å€¼å³ä¸ºsupplierçš„è¿”å›å€¼</span></span><br><span class="line">        <span class="comment">// joinæ–¹æ³•ä¼šç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œç»“æŸï¼Œå¹¶è·å¾—å…¶è¿”å›å€¼</span></span><br><span class="line">        SmallTool.printTimeAndThread(String.format(<span class="string">&quot;%sï¼Œé¡¾å®¢å¼€å§‹å¹²é¥­&quot;</span>, sub.join()));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>è¿è¡Œç»“æœ</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202202261117831.png" alt="image-20220226111744105"></p><h4 id="3-CompletableFutureè¿›é˜¶"><a href="#3-CompletableFutureè¿›é˜¶" class="headerlink" title="3.CompletableFutureè¿›é˜¶"></a>3.CompletableFutureè¿›é˜¶</h4><h5 id="ä»»åŠ¡çš„åç½®å¤„ç†"><a href="#ä»»åŠ¡çš„åç½®å¤„ç†" class="headerlink" title="ä»»åŠ¡çš„åç½®å¤„ç†"></a>ä»»åŠ¡çš„åç½®å¤„ç†</h5><p><strong>åœºæ™¯æ¨¡æ‹Ÿ</strong></p><ul><li>é¡¾å®¢å°±é¤å®Œæ¯•</li><li>é¡¾å®¢ç»“è´¦å¹¶è¦æ±‚å¼€å‘ç¥¨</li><li>é¡¾å®¢åˆ·æ‰‹æœºç­‰å¾…<ul><li>ï¼ˆçº¿ç¨‹2ï¼‰æœåŠ¡å‘˜æ”¶æ¬¾500å…ƒ</li><li>ï¼ˆçº¿ç¨‹3ï¼‰æœåŠ¡å‘˜å¼€å‘ç¥¨</li></ul></li><li>é¡¾å®¢æ‹¿åˆ°å‘ç¥¨</li></ul><p><strong>thenApplyçš„ä½¿ç”¨</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.CompletableFuture;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CompleteFutureThenApply</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SmallTool.printTimeAndThread(<span class="string">&quot;é¡¾å®¢å°±é¤å®Œæ¯•&quot;</span>);</span><br><span class="line">        SmallTool.printTimeAndThread(<span class="string">&quot;é¡¾å®¢ç»“è´¦å¹¶è¦æ±‚å¼€å‘ç¥¨&quot;</span>);</span><br><span class="line"></span><br><span class="line">        CompletableFuture&lt;String&gt; sub = CompletableFuture.supplyAsync(</span><br><span class="line">                () -&gt; &#123;</span><br><span class="line">                    SmallTool.printTimeAndThread(<span class="string">&quot;æœåŠ¡å‘˜æ”¶æ¬¾500å…ƒ&quot;</span>);</span><br><span class="line">                    SmallTool.sleepMillis(<span class="number">100</span>);</span><br><span class="line">                    <span class="keyword">return</span> <span class="string">&quot;500&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// thenApplyå°†å‰é¢å¼‚æ­¥ä»»åŠ¡çš„ç»“æœäº¤ç»™åé¢çš„Function</span></span><br><span class="line">        <span class="comment">// å‰åä¸¤ä¸ªä»»åŠ¡éƒ½æ˜¯ä¸€ä¸ªæœåŠ¡å‘˜å®Œæˆçš„ï¼ˆåœ¨åŒä¸€çº¿ç¨‹ä¸­ï¼‰        </span></span><br><span class="line">        ).thenApply(money -&gt; &#123;</span><br><span class="line"></span><br><span class="line">            SmallTool.printTimeAndThread(String.format(<span class="string">&quot;æœåŠ¡å‘˜å¼€å‘ç¥¨ï¼Œé¢é¢%så…ƒ&quot;</span>, money));</span><br><span class="line">            SmallTool.sleepMillis(<span class="number">200</span>);</span><br><span class="line">            <span class="keyword">return</span> String.format(<span class="string">&quot;%så…ƒå‘ç¥¨&quot;</span>, money);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        SmallTool.printTimeAndThread(<span class="string">&quot;é¡¾å®¢æ­£åœ¨åˆ·æ‰‹æœºç­‰å¾…&quot;</span>);</span><br><span class="line">        SmallTool.printTimeAndThread(String.format(<span class="string">&quot;é¡¾å®¢æ‹¿åˆ°%s&quot;</span>, sub.join()));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>è¿è¡Œç»“æœ</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202202261152150.png" alt="image-20220226115245885"></p><p>å¯ä»¥çœ‹åˆ°ä½¿ç”¨thenApplyï¼Œæ”¶æ¬¾å’Œå¼€å‘ç¥¨éƒ½åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸ç¬¦åˆè¦æ±‚ï¼Œæˆ‘ä»¬åªéœ€è¦å°†thenApplyæ›´æ”¹ä¸ºthenApplyAsyncå³å¯å®ç°å¼€å¯å¦ä¸€ä¸ªçº¿ç¨‹è¿è¡Œ</p><p><strong>thenApplyAsyncçš„ä½¿ç”¨</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.CompletableFuture;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CompleteFutureThenApply</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SmallTool.printTimeAndThread(<span class="string">&quot;é¡¾å®¢å°±é¤å®Œæ¯•&quot;</span>);</span><br><span class="line">        SmallTool.printTimeAndThread(<span class="string">&quot;é¡¾å®¢ç»“è´¦å¹¶è¦æ±‚å¼€å‘ç¥¨&quot;</span>);</span><br><span class="line"></span><br><span class="line">        CompletableFuture&lt;String&gt; sub = CompletableFuture.supplyAsync(</span><br><span class="line">                () -&gt; &#123;</span><br><span class="line">                    SmallTool.printTimeAndThread(<span class="string">&quot;æœåŠ¡å‘˜æ”¶æ¬¾500å…ƒ&quot;</span>);</span><br><span class="line">                    SmallTool.sleepMillis(<span class="number">100</span>);</span><br><span class="line">                    <span class="keyword">return</span> <span class="string">&quot;500&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// thenApplyAsyncå°†å‰é¢å¼‚æ­¥ä»»åŠ¡çš„ç»“æœäº¤ç»™åé¢çš„Functionï¼Œå¹¶å¼€å¯ä¸€ä¸ªæ–°çš„çº¿ç¨‹</span></span><br><span class="line">        ).thenApplyAsync(money -&gt; &#123;</span><br><span class="line"></span><br><span class="line">            SmallTool.printTimeAndThread(String.format(<span class="string">&quot;æœåŠ¡å‘˜å¼€å‘ç¥¨ï¼Œé¢é¢%så…ƒ&quot;</span>, money));</span><br><span class="line">            SmallTool.sleepMillis(<span class="number">200</span>);</span><br><span class="line">            <span class="keyword">return</span> String.format(<span class="string">&quot;%så…ƒå‘ç¥¨&quot;</span>, money);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        SmallTool.printTimeAndThread(<span class="string">&quot;é¡¾å®¢æ­£åœ¨åˆ·æ‰‹æœºç­‰å¾…&quot;</span>);</span><br><span class="line">        SmallTool.printTimeAndThread(String.format(<span class="string">&quot;é¡¾å®¢æ‹¿åˆ°%s&quot;</span>, sub.join()));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="è·å¾—æœ€å…ˆå®Œæˆçš„ä»»åŠ¡"><a href="#è·å¾—æœ€å…ˆå®Œæˆçš„ä»»åŠ¡" class="headerlink" title="è·å¾—æœ€å…ˆå®Œæˆçš„ä»»åŠ¡"></a>è·å¾—æœ€å…ˆå®Œæˆçš„ä»»åŠ¡</h5><p><strong>åœºæ™¯æ¨¡æ‹Ÿ</strong></p><ul><li>è€ç‹èµ°å‡ºé¤å…ï¼Œæ¥åˆ°å…¬äº¤è½¦ç«™</li><li>ç­‰å¾…700è·¯æˆ–800è·¯å…¬äº¤åˆ°æ¥<ul><li>ï¼ˆçº¿ç¨‹2ï¼‰700è·¯å…¬äº¤æ­£åœ¨èµ¶æ¥</li><li>ï¼ˆçº¿ç¨‹3ï¼‰800è·¯å…¬äº¤æ­£åœ¨èµ¶æ¥</li></ul></li><li>è€ç‹åæœ€å…ˆåˆ°çš„å…¬äº¤å›å®¶</li></ul><p><strong>ä»£ç æ¡ˆä¾‹</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.CompletableFuture;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CompleteFutureToEither</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SmallTool.printTimeAndThread(<span class="string">&quot;è€ç‹èµ°å‡ºé¤å…ï¼Œæ¥åˆ°å…¬äº¤è½¦ç«™&quot;</span>);</span><br><span class="line">        <span class="comment">// 700è·¯å…¬äº¤å’Œ800è·¯å…¬äº¤å“ªä¸€ä¸ªå…ˆåˆ°ï¼Œå°±å…ˆä¸Šå“ªä¸€è¾†è½¦</span></span><br><span class="line">        SmallTool.printTimeAndThread(<span class="string">&quot;ç­‰å¾…700è·¯æˆ–800è·¯å…¬äº¤åˆ°æ¥&quot;</span>);</span><br><span class="line"></span><br><span class="line">        CompletableFuture&lt;String&gt; bus = CompletableFuture.supplyAsync(() -&gt; &#123;</span><br><span class="line">                    SmallTool.printTimeAndThread(<span class="string">&quot;700è·¯å…¬äº¤æ­£åœ¨èµ¶æ¥&quot;</span>);</span><br><span class="line">                    SmallTool.sleepMillis(<span class="number">100</span>);</span><br><span class="line">                    <span class="keyword">return</span> <span class="string">&quot;700è·¯å…¬äº¤å·²åˆ°ç«™&quot;</span>;</span><br><span class="line">                    <span class="comment">// applyToEitherè¿æ¥ä¸¤ä¸ªä»»åŠ¡ï¼Œå“ªä¸ªä»»åŠ¡å…ˆå®Œæˆå°±ä¼ åˆ°Functionï¼ˆå³firstComeBusä¸­ï¼‰</span></span><br><span class="line">                    <span class="comment">// è¿”å›è¾“å‡ºåˆ°bus</span></span><br><span class="line">                &#125;).applyToEither(CompletableFuture.supplyAsync(() -&gt; &#123;</span><br><span class="line">                    SmallTool.printTimeAndThread(<span class="string">&quot;800è·¯å…¬äº¤æ­£åœ¨èµ¶æ¥&quot;</span>);</span><br><span class="line">                    SmallTool.sleepMillis(<span class="number">200</span>);</span><br><span class="line">                    <span class="keyword">return</span> <span class="string">&quot;800è·¯å…¬äº¤å·²åˆ°ç«™&quot;</span>;</span><br><span class="line">                &#125;), firstComeBus -&gt; firstComeBus);</span><br><span class="line"></span><br><span class="line">        SmallTool.printTimeAndThread(String.format(<span class="string">&quot;%sï¼Œè€ç‹åè½¦å›å®¶&quot;</span>, bus.join()));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>è¿è¡Œç»“æœ</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202202261335892.png" alt="image-20220226133508092"></p><h5 id="å¤„ç†å‘ç”Ÿçš„å¼‚å¸¸æƒ…å†µ"><a href="#å¤„ç†å‘ç”Ÿçš„å¼‚å¸¸æƒ…å†µ" class="headerlink" title="å¤„ç†å‘ç”Ÿçš„å¼‚å¸¸æƒ…å†µ"></a>å¤„ç†å‘ç”Ÿçš„å¼‚å¸¸æƒ…å†µ</h5><p><strong>åœºæ™¯æ¨¡æ‹Ÿ</strong></p><ul><li><p>è€ç‹èµ°å‡ºé¤å…ï¼Œæ¥åˆ°å…¬äº¤è½¦ç«™</p></li><li><p>ç­‰å¾…700è·¯æˆ–800è·¯å…¬äº¤åˆ°æ¥</p><ul><li>ï¼ˆçº¿ç¨‹2ï¼‰700è·¯å…¬äº¤æ­£åœ¨èµ¶æ¥</li><li>ï¼ˆçº¿ç¨‹3ï¼‰800è·¯å…¬äº¤æ­£åœ¨èµ¶æ¥</li></ul></li><li><p>è€ç‹åæœ€å…ˆåˆ°çš„å…¬äº¤å›å®¶</p></li><li><p>700è·¯å…¬äº¤å‡ºç°æ•…éšœï¼Œè€ç‹å«å‡ºç§Ÿè½¦å›å®¶</p></li></ul><p><strong>ä»£ç æ¡ˆä¾‹</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">import java.util.concurrent.CompletableFuture;</span><br><span class="line"></span><br><span class="line">public class CompleteFutureToEither &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        SmallTool.printTimeAndThread(&quot;è€ç‹èµ°å‡ºé¤å…ï¼Œæ¥åˆ°å…¬äº¤è½¦ç«™&quot;);</span><br><span class="line">        &#x2F;&#x2F; 700è·¯å…¬äº¤å’Œ800è·¯å…¬äº¤å“ªä¸€ä¸ªå…ˆåˆ°ï¼Œå°±å…ˆä¸Šå“ªä¸€è¾†è½¦</span><br><span class="line">        SmallTool.printTimeAndThread(&quot;ç­‰å¾…700è·¯æˆ–800è·¯å…¬äº¤åˆ°æ¥&quot;);</span><br><span class="line"></span><br><span class="line">        CompletableFuture&lt;String&gt; bus &#x3D; CompletableFuture.supplyAsync(() -&gt; &#123;</span><br><span class="line">                    SmallTool.printTimeAndThread(&quot;700è·¯å…¬äº¤æ­£åœ¨èµ¶æ¥&quot;);</span><br><span class="line">                    SmallTool.sleepMillis(100);</span><br><span class="line">                    return &quot;700è·¯å…¬äº¤å·²åˆ°ç«™&quot;;</span><br><span class="line">                    &#x2F;&#x2F; applyToEitherè¿æ¥ä¸¤ä¸ªä»»åŠ¡ï¼Œå“ªä¸ªä»»åŠ¡å…ˆå®Œæˆå°±ä¼ åˆ°Functionï¼ˆå³firstComeBusä¸­ï¼‰</span><br><span class="line">                    &#x2F;&#x2F; è¿”å›è¾“å‡ºåˆ°bus</span><br><span class="line">                &#125;).applyToEither(CompletableFuture.supplyAsync(() -&gt; &#123;</span><br><span class="line">                    SmallTool.printTimeAndThread(&quot;800è·¯å…¬äº¤æ­£åœ¨èµ¶æ¥&quot;);</span><br><span class="line">                    SmallTool.sleepMillis(200);</span><br><span class="line">                    return &quot;800è·¯å…¬äº¤å·²åˆ°ç«™&quot;;</span><br><span class="line"></span><br><span class="line">                    &#x2F;&#x2F; å…ˆåˆ°çš„è½¦å¦‚æœæ˜¯700è·¯ï¼Œå…¶ä¸­é€”ä¼šæŠ›å‡ºå¼‚å¸¸</span><br><span class="line">                &#125;), firstComeBus -&gt; &#123;</span><br><span class="line">                    SmallTool.printTimeAndThread(firstComeBus);</span><br><span class="line">                    if(firstComeBus.startsWith(&quot;700&quot;))</span><br><span class="line">                    &#123;</span><br><span class="line">                        throw new RuntimeException(&quot;å…¬äº¤è½¦å‘ç”Ÿæ•…éšœ&quot;);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    return firstComeBus;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; ä¸Šé¢ä»»ä»»æ„çš„é“¾å¼è°ƒç”¨ä¸­å‡ºç°å¼‚å¸¸éƒ½ä¼šè§¦å‘è¿™é‡Œçš„äº‹ä»¶</span><br><span class="line">        &#125;).exceptionally(e -&gt; &#123;</span><br><span class="line">            SmallTool.printTimeAndThread(e.getMessage());</span><br><span class="line">            SmallTool.printTimeAndThread(&quot;è€ç‹å«å‡ºç§Ÿè½¦&quot;);</span><br><span class="line">            return &quot;å‡ºç§Ÿè½¦åˆ°äº†&quot;;</span><br><span class="line"></span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        SmallTool.printTimeAndThread(String.format(&quot;%sï¼Œè€ç‹åè½¦å›å®¶&quot;, bus.join()));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>è¿è¡Œç»“æœ</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202202261347003.png" alt="image-20220226134731888"></p><h3 id="çº¿ç¨‹æ± "><a href="#çº¿ç¨‹æ± " class="headerlink" title="çº¿ç¨‹æ± "></a>çº¿ç¨‹æ± </h3><h4 id="1-çº¿ç¨‹æ± çš„åˆ›å»º"><a href="#1-çº¿ç¨‹æ± çš„åˆ›å»º" class="headerlink" title="1.çº¿ç¨‹æ± çš„åˆ›å»º"></a>1.çº¿ç¨‹æ± çš„åˆ›å»º</h4><h5 id="ä½¿ç”¨æ„é€ å‡½æ•°åˆ›å»º"><a href="#ä½¿ç”¨æ„é€ å‡½æ•°åˆ›å»º" class="headerlink" title="ä½¿ç”¨æ„é€ å‡½æ•°åˆ›å»º"></a>ä½¿ç”¨æ„é€ å‡½æ•°åˆ›å»º</h5><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ThreadPoolExecutorçš„æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± ï¼Œå…¶æ„é€ å‡½æ•°å¦‚ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ThreadPoolExecutor</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">int</span> corePoolSize,//çº¿ç¨‹æ± çš„æ ¸å¿ƒçº¿ç¨‹æ•°é‡</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">int</span> maximumPoolSize,//çº¿ç¨‹æ± çš„æœ€å¤§çº¿ç¨‹æ•°</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">long</span> keepAliveTime,//å½“çº¿ç¨‹æ•°å¤§äºæ ¸å¿ƒçº¿ç¨‹æ•°æ—¶ï¼Œå¤šä½™çš„ç©ºé—²çº¿ç¨‹å­˜æ´»çš„æœ€é•¿æ—¶é—´</span></span></span><br><span class="line"><span class="function"><span class="params">    TimeUnit unit,//æ—¶é—´å•ä½</span></span></span><br><span class="line"><span class="function"><span class="params">    BlockingQueue&lt;Runnable&gt; workQueue,//ä»»åŠ¡é˜Ÿåˆ—ï¼Œç”¨æ¥å‚¨å­˜ç­‰å¾…æ‰§è¡Œä»»åŠ¡çš„é˜Ÿåˆ—</span></span></span><br><span class="line"><span class="function"><span class="params">    ThreadFactory threadFactory,//çº¿ç¨‹å·¥å‚ï¼Œç”¨æ¥åˆ›å»ºçº¿ç¨‹ï¼Œä¸€èˆ¬é»˜è®¤å³å¯</span></span></span><br><span class="line"><span class="function"><span class="params">    RejectedExecutionHandler handler//æ‹’ç»ç­–ç•¥ï¼Œå½“æäº¤çš„ä»»åŠ¡è¿‡å¤šè€Œä¸èƒ½åŠæ—¶å¤„ç†æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å®šåˆ¶ç­–ç•¥æ¥å¤„ç†ä»»åŠ¡</span></span></span><br><span class="line"><span class="function"><span class="params">    )</span></span>&#123;...&#125;</span><br></pre></td></tr></table></figure><p>æ‹’ç»ç­–ç•¥å¦‚ä¸‹ï¼š</p><p><strong><code>ThreadPoolExecutor.AbortPolicy</code></strong> ï¼šæŠ›å‡ºå¼‚å¸¸</p><p><strong><code>ThreadPoolExecutor.CallerRunsPolicy</code></strong> ï¼šè°æäº¤è°æ‰§è¡Œ</p><p><strong><code>ThreadPoolExecutor.DiscardPolicy</code></strong> ï¼šç›´æ¥ä¸¢å¼ƒ</p><p><strong><code>ThreadPoolExecutor.DiscardOldestPolicy</code></strong> ï¼š æ›¿æ¢æ‰å·¥ä½œé˜Ÿåˆ—ä¸­æœ€åä¸€ä¸ª</p><h5 id="ä½¿ç”¨å·¥å…·ç±»åˆ›å»º"><a href="#ä½¿ç”¨å·¥å…·ç±»åˆ›å»º" class="headerlink" title="ä½¿ç”¨å·¥å…·ç±»åˆ›å»º"></a>ä½¿ç”¨å·¥å…·ç±»åˆ›å»º</h5><p>ä¸€èˆ¬ä¸æ¨èä½¿ç”¨ï¼Œå› ä¸ºå®ƒæ— æ³•é€‚åº”å¤šå˜çš„ä¸šåŠ¡éœ€æ±‚ï¼Œè€Œä¸”å®¹æ˜“å¯¼è‡´OOM</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202202261635984.png" alt="é€šè¿‡Executor æ¡†æ¶çš„å·¥å…·ç±»Executorsæ¥å®ç°"></p><h4 id="2-çº¿ç¨‹ä¸­æ–­"><a href="#2-çº¿ç¨‹ä¸­æ–­" class="headerlink" title="2.çº¿ç¨‹ä¸­æ–­"></a>2.çº¿ç¨‹ä¸­æ–­</h4><p>åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­å¯ä»¥é€šè¿‡ä¸­æ–­å”¤é†’å¦ä¸€ä¸ªåœ¨ç¡çœ ä¸­çš„çº¿ç¨‹ï¼Œè¾¾åˆ°çº¿ç¨‹é—´é€šä¿¡çš„ç›®çš„ã€‚ä¸å»ºè®®ä½¿ç”¨ä¸­æ–­</p><p><strong>åœºæ™¯æ¨¡æ‹Ÿ</strong></p><p>ä¸¤è½¦è¿‡ç‹¬æœ¨æ¡¥åœºæ™¯</p><p><strong>ä»£ç æ¡ˆä¾‹</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> java.util.TreeMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TwoCarCrossBridge</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Thread carTwo  = <span class="keyword">new</span> Thread(()-&gt; &#123;</span><br><span class="line"></span><br><span class="line">            SmallTool.printTimeAndThread(<span class="string">&quot;äºŒå·è½¦è¾†å‡†å¤‡è¿‡æ¡¥&quot;</span>);</span><br><span class="line">            SmallTool.printTimeAndThread(<span class="string">&quot;å‘ç°ä¸€å·è½¦æ­£åœ¨è¿‡æ¡¥ï¼Œå¼€å§‹ç­‰å¾…&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">// äºŒå·è½¦çº¿ç¨‹è¿›å…¥TIMED_WAITINGçŠ¶æ€</span></span><br><span class="line">                Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// ä¸€å·è½¦å‘å‡ºä¸­æ–­é€šçŸ¥ï¼Œå¯ä»¥é€šè¿‡æ•æ‰IEå¼‚å¸¸æ¥æ”¶</span></span><br><span class="line">            <span class="comment">// sleepå’Œwaitæ–¹æ³•ä¼šæŠ›å‡ºInterruptedExceptionå¼‚å¸¸</span></span><br><span class="line">           </span><br><span class="line">            <span class="keyword">catch</span> (InterruptedException e)&#123;</span><br><span class="line">                SmallTool.printTimeAndThread(<span class="string">&quot;äºŒå·è½¦å¼€å§‹è¿‡æ¡¥&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            SmallTool.sleepMillis(<span class="number">200</span>);</span><br><span class="line">            SmallTool.printTimeAndThread(<span class="string">&quot;äºŒå·è½¦è¿‡æ¡¥å®Œæ¯•&quot;</span>);</span><br><span class="line"></span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        Thread carOne = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">           SmallTool.printTimeAndThread(<span class="string">&quot;ä¸€å·è½¦å¼€å§‹è¿‡æ¡¥&quot;</span>);</span><br><span class="line">           <span class="keyword">int</span> timeSpend = <span class="keyword">new</span> Random().nextInt(<span class="number">500</span>) + <span class="number">1000</span>;</span><br><span class="line">           SmallTool.sleepMillis(timeSpend);</span><br><span class="line">           SmallTool.printTimeAndThread(<span class="string">&quot;äºŒå·è½¦è¿‡æ¡¥å®Œæ¯•ï¼Œè€—æ—¶ï¼š&quot;</span> + timeSpend);</span><br><span class="line"></span><br><span class="line">           <span class="comment">// ä¸€å·è½¦è¿‡æ¡¥å®Œæ¯•åï¼Œåˆ©ç”¨ä¸­æ–­é€šçŸ¥äºŒå·è½¦</span></span><br><span class="line">            carTwo.interrupt();</span><br><span class="line"></span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä¸€å·è½¦ï¼ŒäºŒå·è½¦åŒæ—¶èµ·æ­¥</span></span><br><span class="line">        carOne.start();</span><br><span class="line">        carTwo.start();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½†çº¿ç¨‹å¤„äºblockedï¼Œwaitingï¼Œtimed_waitingçŠ¶æ€ï¼Œæˆ–è€…ä»ä¸Šè¿°ä¸‰ä¸ªçŠ¶æ€è½¬ä¸ºrunnableçŠ¶æ€çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœè¢«ä¸­æ–­å°±ä¼šæ”¶åˆ°InterruptedExceptionå¼‚å¸¸</p><p><strong>è¿è¡Œç»“æœ</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202202261712019.png" alt="image-20220226171200852"></p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><p><a href="https://space.bilibili.com/51950540/channel/collectiondetail?sid=20808">Javaå¹¶å‘ç¼–ç¨‹åˆé›†</a></p><p><a href="https://javaguide.cn/java/concurrent/java-thread-pool-summary/">Java çº¿ç¨‹æ± è¯¦è§£</a></p>]]></content>
    
    <summary type="html">
    
      &lt;img src=&quot;https://cdn.jsdelivr.net/gh/Autovy/Image/img/202203022103663.jpeg&quot; alt=&quot;Multithreading | threading-memes, multithreading-memes | ProgrammerHumor.io&quot; style=&quot;zoom:80%;&quot;&gt;

&lt;p&gt;å·ï¼&lt;/p&gt;
    
    </summary>
    
    
      <category term="Java" scheme="https://autovy.github.io/categories/Java/"/>
    
    
      <category term="Java" scheme="https://autovy.github.io/tags/Java/"/>
    
      <category term="å¤šçº¿ç¨‹" scheme="https://autovy.github.io/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"/>
    
      <category term="é¡¹ç›®å®æˆ˜" scheme="https://autovy.github.io/tags/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/"/>
    
  </entry>
  
  <entry>
    <title>Java|Socketç¼–ç¨‹æŒ‡å—</title>
    <link href="https://autovy.github.io/2022/01/20/Java/Java-Socket%E7%BC%96%E7%A8%8B%E6%8C%87%E5%8D%97/"/>
    <id>https://autovy.github.io/2022/01/20/Java/Java-Socket%E7%BC%96%E7%A8%8B%E6%8C%87%E5%8D%97/</id>
    <published>2022-01-20T15:45:00.000Z</published>
    <updated>2022-02-25T15:06:09.578Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202202252305878.png" alt="That is a good excuse"></p><span id="more"></span><h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>Socketç¼–ç¨‹æ˜¯æŒ‡ç¼–å†™åœ¨å¤šå°è®¡ç®—æœºä¸Šæ‰§è¡Œçš„ç¨‹åºï¼Œå…¶ä¸­çš„è®¾å¤‡éƒ½ä½¿ç”¨ç½‘ç»œç›¸äº’è¿æ¥</p><p>Socketå¸¸ç”¨çš„é€šä¿¡åè®®æœ‰UDPå’ŒTCPï¼Œæœ¬æ–‡ä¸»è¦ä»‹ç»é€šè¿‡TCP/IPç½‘ç»œåè®®è¿›è¡ŒSocketç¼–ç¨‹</p><h3 id="Socketé€šä¿¡æµç¨‹"><a href="#Socketé€šä¿¡æµç¨‹" class="headerlink" title="Socketé€šä¿¡æµç¨‹"></a>Socketé€šä¿¡æµç¨‹</h3><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202202251212126.png" alt="img"></p><ul><li>æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯åˆå§‹åŒ– <code>socket</code>ï¼Œå¾—åˆ°æ–‡ä»¶æè¿°ç¬¦ï¼›</li><li>æœåŠ¡ç«¯è°ƒç”¨ <code>bind</code>ï¼Œå°†ç»‘å®šåœ¨ IP åœ°å€å’Œç«¯å£;</li><li>æœåŠ¡ç«¯è°ƒç”¨ <code>listen</code>ï¼Œè¿›è¡Œç›‘å¬ï¼›</li><li>æœåŠ¡ç«¯è°ƒç”¨ <code>accept</code>ï¼Œç­‰å¾…å®¢æˆ·ç«¯è¿æ¥ï¼›</li><li>å®¢æˆ·ç«¯è°ƒç”¨ <code>connect</code>ï¼Œå‘æœåŠ¡å™¨ç«¯çš„åœ°å€å’Œç«¯å£å‘èµ·è¿æ¥è¯·æ±‚ï¼›</li><li>æœåŠ¡ç«¯ <code>accept</code> è¿”å›ç”¨äºä¼ è¾“çš„ <code>socket</code> çš„æ–‡ä»¶æè¿°ç¬¦ï¼›</li><li>å®¢æˆ·ç«¯è°ƒç”¨ <code>write</code> å†™å…¥æ•°æ®ï¼›æœåŠ¡ç«¯è°ƒç”¨ <code>read</code> è¯»å–æ•°æ®ï¼›</li><li>å®¢æˆ·ç«¯æ–­å¼€è¿æ¥æ—¶ï¼Œä¼šè°ƒç”¨ <code>close</code>ï¼Œé‚£ä¹ˆæœåŠ¡ç«¯ <code>read</code> è¯»å–æ•°æ®çš„æ—¶å€™ï¼Œå°±ä¼šè¯»å–åˆ°äº† <code>EOF</code>ï¼Œå¾…å¤„ç†å®Œæ•°æ®åï¼ŒæœåŠ¡ç«¯è°ƒç”¨ <code>close</code>ï¼Œè¡¨ç¤ºè¿æ¥å…³é—­ï¼›</li></ul><p>æœåŠ¡ç«¯è°ƒç”¨ <code>accept</code> æ—¶ï¼Œè¿æ¥æˆåŠŸäº†ä¼šè¿”å›ä¸€ä¸ªå·²å®Œæˆè¿æ¥çš„ socketï¼Œåç»­ç”¨æ¥ä¼ è¾“æ•°æ®ã€‚æ‰€ä»¥ï¼Œç›‘å¬çš„ socket å’ŒçœŸæ­£ç”¨æ¥ä¼ é€æ•°æ®çš„ socketï¼Œæ˜¯ã€Œä¸¤ä¸ªã€ socketï¼Œä¸€ä¸ªå«ä½œ<strong>ç›‘å¬ socket</strong>ï¼Œä¸€ä¸ªå«ä½œ<strong>å·²å®Œæˆè¿æ¥ socket</strong>ã€‚</p><h3 id="ç®€å•ç¤ºä¾‹"><a href="#ç®€å•ç¤ºä¾‹" class="headerlink" title="ç®€å•ç¤ºä¾‹"></a>ç®€å•ç¤ºä¾‹</h3><p>Socketæ˜¯ç½‘ç»œä¸Šä¸åŒè®¡ç®—æœºè¿è¡Œçš„ä¸¤ä¸ªç¨‹åºä¹‹é—´åŒå‘é€šä¿¡é“¾è·¯çš„ä¸€ä¸ªç«¯ç‚¹ã€‚Socketéœ€è¦ç»‘å®šç«¯å£å·ï¼Œä¸€éä¼ è¾“å±‚å¯ä»¥æ ‡è¯†æ•°æ®è¦å‘é€åˆ°çš„åº”ç”¨ç¨‹åº</p><h4 id="æœåŠ¡ç«¯"><a href="#æœåŠ¡ç«¯" class="headerlink" title="æœåŠ¡ç«¯"></a>æœåŠ¡ç«¯</h4><p>æœåŠ¡ç«¯ä¼šç”¨åˆ°ä¸¤ä¸ªsocketï¼Œä¸€ä¸ªå«ä½œ<strong>ç›‘å¬ socket</strong>ï¼Œä¸€ä¸ªå«ä½œ<strong>å·²å®Œæˆè¿æ¥ socket</strong></p><p>ç›®å‰çš„æœåŠ¡å™¨ä¸èƒ½ä¿è¯é€šä¿¡çš„è¿ç»­æ€§ï¼Œå®ƒä¼šåœ¨å‘é€å®Œæ¶ˆæ¯åå…³é—­è¿æ¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="comment">// socketæœåŠ¡ç«¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Server</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ServerSocket serverSocket;</span><br><span class="line">    <span class="keyword">private</span> Socket clientSocket;</span><br><span class="line">    <span class="keyword">private</span> PrintWriter out;</span><br><span class="line">    <span class="keyword">private</span> BufferedReader in;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">(<span class="keyword">int</span> port)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">// ï¼ˆç›‘å¬socketï¼‰</span></span><br><span class="line">            <span class="comment">// ç»‘å®šæŒ‡å®šç«¯å£ï¼Œä½¿æœåŠ¡å™¨çš„Socketåœ¨æŒ‡å®šç«¯å£å·ä¸Šè¿è¡Œ</span></span><br><span class="line">            serverSocket = <span class="keyword">new</span> ServerSocket(port);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ï¼ˆå·²è¿æ¥socketï¼‰</span></span><br><span class="line">            <span class="comment">// æœåŠ¡å™¨é‡åˆ°acceptè¿›å…¥é˜»å¡ï¼Œç­‰å¾…å®¢æˆ·ç«¯å‘å‡ºè¿æ¥</span></span><br><span class="line">            <span class="comment">// è¿æ¥æˆåŠŸåï¼ŒæœåŠ¡å™¨å°†è·å¾—ç»‘å®šåˆ°åŒä¸€æœ¬åœ°ç«¯å£6666çš„æ–°socketï¼Œç”¨äºä¼ è¾“æ•°æ®</span></span><br><span class="line">            clientSocket = serverSocket.accept();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è¾“å‡ºæµï¼Œå¯å‘é€æ¶ˆæ¯åˆ°å®¢æˆ·ç«¯</span></span><br><span class="line">            out = <span class="keyword">new</span> PrintWriter(clientSocket.getOutputStream(), <span class="keyword">true</span>);</span><br><span class="line">            <span class="comment">// è¾“å…¥æµï¼Œå¯æ¥æ”¶å®¢æˆ·ç«¯æ¶ˆæ¯</span></span><br><span class="line">            in = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(clientSocket.getInputStream()));</span><br><span class="line"></span><br><span class="line">            String greeting = in.readLine();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(greeting.equals(<span class="string">&quot;hello server&quot;</span>))&#123;</span><br><span class="line">                out.println(<span class="string">&quot;hello client&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                out.println(<span class="string">&quot;unrecognised greeting&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            in.close();</span><br><span class="line">            out.close();</span><br><span class="line">            clientSocket.close();</span><br><span class="line">            serverSocket.close();</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Server server = <span class="keyword">new</span> Server();</span><br><span class="line">        <span class="comment">// å¼€å¯æœåŠ¡å™¨</span></span><br><span class="line">        server.start(<span class="number">6666</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å®¢æˆ·ç«¯"><a href="#å®¢æˆ·ç«¯" class="headerlink" title="å®¢æˆ·ç«¯"></a>å®¢æˆ·ç«¯</h4><p>å®¢æˆ·ç«¯åªéœ€è¦åˆ›å»ºä¸€ä¸ªsocketä»¥ä¿æŒè¿æ¥ï¼Œæœ€ç»ˆå®¢æˆ·ç«¯çš„è¾“å…¥æµè¿æ¥åˆ°æœåŠ¡ç«¯çš„è¾“å‡ºæµï¼ŒæœåŠ¡å™¨çš„è¾“å…¥æµè¿æ¥åˆ°å®¢æˆ·ç«¯çš„è¾“å‡ºæµ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.sun.javafx.iio.ios.IosDescriptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Socket clientSocket;</span><br><span class="line">    <span class="keyword">private</span> PrintWriter out;</span><br><span class="line">    <span class="keyword">private</span> BufferedReader in;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">startConnection</span><span class="params">(String ip, <span class="keyword">int</span> port)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">// å®¢æˆ·ç«¯éœ€è¦çŸ¥é“æœåŠ¡ç«¯çš„ipå’Œå…¶æ­£åœ¨ç›‘å¬çš„ç«¯å£å·ï¼Œæ‰èƒ½å‘èµ·è¿æ¥</span></span><br><span class="line">            <span class="comment">// æœåŠ¡å™¨æ¥æ”¶è¿æ¥ååˆ›å»ºå®¢æˆ·ç«¯socket</span></span><br><span class="line">            clientSocket = <span class="keyword">new</span> Socket(ip, port);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è·å–socketçš„è¾“å…¥è¾“å‡ºæµï¼Œä»¥ä¾¿ä¸æœåŠ¡ç«¯é€šä¿¡</span></span><br><span class="line">            out = <span class="keyword">new</span> PrintWriter(clientSocket.getOutputStream(), <span class="keyword">true</span>);</span><br><span class="line">            in = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(clientSocket.getInputStream()));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">sendMessage</span><span class="params">(String msg)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å®¢æˆ·ç«¯è¾“å‡ºè¯·æ±‚æ¶ˆæ¯</span></span><br><span class="line">        out.println(msg);</span><br><span class="line">        String resp = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// å®¢æˆ·ç«¯æ¥æ”¶å“åº”æ¶ˆæ¯</span></span><br><span class="line">            resp = in.readLine();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> resp;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stopConnection</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            in.close();</span><br><span class="line">            out.close();</span><br><span class="line">            clientSocket.close();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><p>å…ˆæ‰‹åŠ¨å¯åŠ¨æœåŠ¡ç«¯ï¼Œç„¶åè¿è¡Œä»¥ä¸Šæµ‹è¯•æ¡ˆä¾‹å³å¯å®Œæˆä¸€æ¬¡è¿æ¥å’Œä¸€æ¬¡æ¶ˆæ¯å‘é€</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Client client = <span class="keyword">new</span> Client();</span><br><span class="line">        <span class="comment">// å®¢æˆ·ç«¯å¯¹æœåŠ¡ç«¯å‘èµ·è¿æ¥</span></span><br><span class="line">        client.startConnection(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">6666</span>);</span><br><span class="line">        <span class="comment">// å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯åˆ°æœåŠ¡ç«¯å¹¶æ¥æ”¶å“åº”ç»“æœ</span></span><br><span class="line">        String response = client.sendMessage(<span class="string">&quot;hello server&quot;</span>);</span><br><span class="line">        System.out.println(response);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è‹¥å¯åŠ¨æœåŠ¡ç«¯æ—¶å‡ºç°ä»¥ä¸‹æŠ¥é”™ï¼Œæ˜¯å‡ºç°äº†ç«¯å£å ç”¨ï¼Œå¯ä»¥ä¿®æ”¹ç«¯å£ä¹Ÿå¯ä»¥å…³é—­å ç”¨ç«¯å£çš„è¿›ç¨‹</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202202251257783.png" alt="image-20220225125717019"></p><p>Windowsä¸‹ä½¿ç”¨å‘½ä»¤è¡Œå…³é—­å ç”¨ç«¯å£çš„è¿›ç¨‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// å‚çœ‹ç«¯å£å·å«6666çš„æ¡ç›®</span><br><span class="line">netstat -ano|findstr &quot;6666&quot;</span><br><span class="line"></span><br><span class="line">// æ ¹æ®pidæŸ¥è¯¢å¯¹åº”çš„åº”ç”¨ç¨‹åº</span><br><span class="line">tasklist|findstr &quot;1828&quot;</span><br><span class="line"></span><br><span class="line">// æ€æ­»è¿›ç¨‹</span><br><span class="line">taskkill /f /pid 1828</span><br></pre></td></tr></table></figure><h3 id="æŒç»­è¿æ¥ä¼˜åŒ–"><a href="#æŒç»­è¿æ¥ä¼˜åŒ–" class="headerlink" title="æŒç»­è¿æ¥ä¼˜åŒ–"></a>æŒç»­è¿æ¥ä¼˜åŒ–</h3><p>åœ¨å‰ä¸€ä¸ªæ¡ˆä¾‹ä¸­ï¼ŒæœåŠ¡å™¨ä¼šé˜»å¡ç›´åˆ°å®¢æˆ·ç«¯è¿æ¥å®ƒã€‚åœ¨å•ä¸ªæ¶ˆæ¯åï¼Œè¿æ¥å°±ä¼šå…³é—­ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æ— æ³•æŒç»­æ²Ÿé€šï¼Œå› æ­¤ä»…ä»…ä¼šå‡ºç°åœ¨pingè¯·æ±‚ä¸­</p><p>å¦‚æœè¦å®ç°ä¸€ä¸ªèŠå¤©æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´å°±éœ€è¦è¿ç»­çš„æ¥å›é€šä¿¡</p><h4 id="æœåŠ¡ç«¯-1"><a href="#æœåŠ¡ç«¯-1" class="headerlink" title="æœåŠ¡ç«¯"></a>æœåŠ¡ç«¯</h4><p>åœ¨ä¼˜åŒ–ä¸­æˆ‘åœ¨æœåŠ¡ç«¯åˆ›å»ºä¸€ä¸ªwhileå¾ªç¯æ¥è¿ç»­è§‚å¯Ÿä¼ æ¥æ¶ˆæ¯çš„æœåŠ¡å™¨è¾“å…¥æµ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EchoServer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ServerSocket serverSocket;</span><br><span class="line">    <span class="keyword">private</span> Socket clientSocket;</span><br><span class="line">    <span class="keyword">private</span> PrintWriter out;</span><br><span class="line">    <span class="keyword">private</span> BufferedReader in;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">(<span class="keyword">int</span> port)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">// ï¼ˆç›‘å¬socketï¼‰</span></span><br><span class="line">            <span class="comment">// ç»‘å®šæŒ‡å®šç«¯å£ï¼Œä½¿æœåŠ¡å™¨çš„Socketåœ¨æŒ‡å®šç«¯å£å·ä¸Šè¿è¡Œ</span></span><br><span class="line">            serverSocket = <span class="keyword">new</span> ServerSocket(port);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ï¼ˆå·²è¿æ¥socketï¼‰</span></span><br><span class="line">            <span class="comment">// æœåŠ¡å™¨é‡åˆ°acceptè¿›å…¥é˜»å¡ï¼Œç­‰å¾…å®¢æˆ·ç«¯å‘å‡ºè¿æ¥</span></span><br><span class="line">            <span class="comment">// è¿æ¥æˆåŠŸåï¼ŒæœåŠ¡å™¨å°†è·å¾—ç»‘å®šåˆ°åŒä¸€æœ¬åœ°ç«¯å£4444çš„æ–°socketï¼Œç”¨äºä¼ è¾“æ•°æ®</span></span><br><span class="line">            clientSocket = serverSocket.accept();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è¾“å‡ºæµï¼Œå¯å‘é€æ¶ˆæ¯åˆ°å®¢æˆ·ç«¯</span></span><br><span class="line">            out = <span class="keyword">new</span> PrintWriter(clientSocket.getOutputStream(), <span class="keyword">true</span>);</span><br><span class="line">            <span class="comment">// è¾“å…¥æµï¼Œå¯æ¥æ”¶å®¢æˆ·ç«¯æ¶ˆæ¯</span></span><br><span class="line">            in = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(clientSocket.getInputStream()));</span><br><span class="line"></span><br><span class="line">            String inputLine;</span><br><span class="line">            <span class="comment">// whileå¾ªç¯è¿ç»­è§‚å¯Ÿä»å®¢æˆ·ç«¯ä¼ æ¥æ¶ˆæ¯çš„æœåŠ¡å™¨è¾“å…¥æµ</span></span><br><span class="line">            <span class="comment">// ç›´åˆ°è¯»å–åˆ°exitæ–­å¼€è¿æ¥</span></span><br><span class="line">            <span class="keyword">while</span> ((inputLine = in.readLine()) != <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(inputLine.equals(<span class="string">&quot;exit&quot;</span>))&#123;</span><br><span class="line">                    out.println(<span class="string">&quot;goodbye&quot;</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                out.println(inputLine.replace(<span class="string">&quot;req&quot;</span>, <span class="string">&quot;res&quot;</span>));</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            in.close();</span><br><span class="line">            out.close();</span><br><span class="line">            clientSocket.close();</span><br><span class="line">            serverSocket.close();</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        EchoServer server = <span class="keyword">new</span> EchoServer();</span><br><span class="line">        <span class="comment">// å¼€å¯æœåŠ¡å™¨</span></span><br><span class="line">        server.start(<span class="number">4444</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å®¢æˆ·ç«¯-1"><a href="#å®¢æˆ·ç«¯-1" class="headerlink" title="å®¢æˆ·ç«¯"></a>å®¢æˆ·ç«¯</h4><p>å®¢æˆ·ç«¯ä¸éœ€è¦è¿›è¡Œä¼˜åŒ–ä¿®æ”¹ï¼Œè¿™é‡Œä¸ºäº†æ–¹åŒºåˆ†åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»EchoClient</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EchoClient</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Socket clientSocket;</span><br><span class="line">    <span class="keyword">private</span> PrintWriter out;</span><br><span class="line">    <span class="keyword">private</span> BufferedReader in;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">startConnection</span><span class="params">(String ip, <span class="keyword">int</span> port)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">// å®¢æˆ·ç«¯éœ€è¦çŸ¥é“æœåŠ¡ç«¯çš„ipå’Œå…¶æ­£åœ¨ç›‘å¬çš„ç«¯å£å·ï¼Œæ‰èƒ½å‘èµ·è¿æ¥</span></span><br><span class="line">            <span class="comment">// æœåŠ¡å™¨æ¥æ”¶è¿æ¥ååˆ›å»ºå®¢æˆ·ç«¯socket</span></span><br><span class="line">            clientSocket = <span class="keyword">new</span> Socket(ip, port);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è·å–socketçš„è¾“å…¥è¾“å‡ºæµï¼Œä»¥ä¾¿ä¸æœåŠ¡ç«¯é€šä¿¡</span></span><br><span class="line">            out = <span class="keyword">new</span> PrintWriter(clientSocket.getOutputStream(), <span class="keyword">true</span>);</span><br><span class="line">            in = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(clientSocket.getInputStream()));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">sendMessage</span><span class="params">(String msg)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å®¢æˆ·ç«¯è¾“å‡ºè¯·æ±‚æ¶ˆæ¯</span></span><br><span class="line">        out.println(msg);</span><br><span class="line">        String resp = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// å®¢æˆ·ç«¯æ¥æ”¶å“åº”æ¶ˆæ¯</span></span><br><span class="line">            resp = in.readLine();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> resp;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stopConnection</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            in.close();</span><br><span class="line">            out.close();</span><br><span class="line">            clientSocket.close();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•-1"><a href="#æµ‹è¯•-1" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><p>åœ¨åˆå§‹ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åªåœ¨æœåŠ¡å™¨å…³é—­è¿æ¥ä¹‹å‰è¿›è¡Œä¸€æ¬¡é€šä¿¡ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å‘é€ä¸€ä¸ªç»ˆæ­¢ä¿¡å·ï¼Œä»¥ä¾¿åœ¨ä¼šè¯å®Œæˆæ—¶å‘Šè¯‰æœåŠ¡å™¨ï¼Œä»¥æ­¤å…³é—­æœåŠ¡å™¨çš„socketè¿›ç¨‹</p><p>å¼€å¯EchoServeræœåŠ¡å™¨è¿è¡Œä»¥ä¸‹æµ‹è¯•æ¡ˆä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.After;</span><br><span class="line"><span class="keyword">import</span> org.junit.Before;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EchoTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> EchoClient client = <span class="keyword">new</span> EchoClient();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setup</span><span class="params">()</span></span>&#123;</span><br><span class="line">        client.startConnection(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">4444</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">tearDown</span><span class="params">()</span></span>&#123;</span><br><span class="line">        client.stopConnection();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">echo</span><span class="params">()</span></span>&#123;</span><br><span class="line">        String resp1 = client.sendMessage(<span class="string">&quot;req:hello&quot;</span>);</span><br><span class="line">        String resp2 = client.sendMessage(<span class="string">&quot;req:world&quot;</span>);</span><br><span class="line">        String resp3 = client.sendMessage(<span class="string">&quot;exit&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(resp1);</span><br><span class="line">        System.out.println(resp2);</span><br><span class="line">        System.out.println(resp3);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>@BeforeClass â€“ è¡¨ç¤ºåœ¨ç±»ä¸­çš„ä»»æ„public static voidæ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œ</li><li>@AfterClass â€“ è¡¨ç¤ºåœ¨ç±»ä¸­çš„ä»»æ„public static voidæ–¹æ³•æ‰§è¡Œä¹‹åæ‰§è¡Œ</li><li>@Before â€“ è¡¨ç¤ºåœ¨ä»»æ„ä½¿ç”¨@Testæ³¨è§£æ ‡æ³¨çš„public voidæ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œ</li><li>@After â€“ è¡¨ç¤ºåœ¨ä»»æ„ä½¿ç”¨@Testæ³¨è§£æ ‡æ³¨çš„public voidæ–¹æ³•æ‰§è¡Œä¹‹åæ‰§è¡Œ</li><li>@Test â€“ ä½¿ç”¨è¯¥æ³¨è§£æ ‡æ³¨çš„public voidæ–¹æ³•ä¼šè¡¨ç¤ºä¸ºä¸€ä¸ªæµ‹è¯•æ–¹æ³•</li></ul><h3 id="å¤šå®¢æˆ·ç«¯ä¼˜åŒ–"><a href="#å¤šå®¢æˆ·ç«¯ä¼˜åŒ–" class="headerlink" title="å¤šå®¢æˆ·ç«¯ä¼˜åŒ–"></a>å¤šå®¢æˆ·ç«¯ä¼˜åŒ–</h3><p>åœ¨å®é™…æƒ…å†µä¸­ï¼ŒæœåŠ¡ç«¯å¸¸å¸¸è¦å¤„ç†å¤šä¸ªå®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œä¸ºæ­¤æˆ‘ä»¬è¦åœ¨æœåŠ¡ç«¯ä¸ºæ¯ä¸€ä¸ªå®¢æˆ·ç«¯è¯·æ±‚åˆ›å»ºä¸€ä¸ªæ–°çš„socketçº¿ç¨‹ï¼Œå³æä¾›æœåŠ¡çš„å®¢æˆ·ç«¯æ•°å°†ç­‰äºæœåŠ¡ç«¯æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ•°</p><h4 id="æœåŠ¡ç«¯-2"><a href="#æœåŠ¡ç«¯-2" class="headerlink" title="æœåŠ¡ç«¯"></a>æœåŠ¡ç«¯</h4><p>ä»ç„¶ç”¨ä¸€ä¸ª<strong>ç›‘å¬socket</strong>åœ¨ä¸»çº¿ç¨‹ç›‘å¬ç«¯å£ï¼Œè€Œéœ€è¦å¤šçº¿ç¨‹å­˜å‚¨<strong>å·²è¿æ¥socket</strong>ä»¥ä¿æŒä¸å¤šä¸ªå®¢æˆ·ç«¯çš„è¿æ¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EchoMultiSever</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ServerSocket serverSocket;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">(<span class="keyword">int</span> port)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// ä»ç„¶ä½¿ç”¨ä¸€ä¸ªsocketåœ¨ä¸»çº¿ç¨‹ä¸­ç›‘å¬ç«¯å£</span></span><br><span class="line">            serverSocket = <span class="keyword">new</span> ServerSocket(port);</span><br><span class="line">            <span class="keyword">while</span> (<span class="keyword">true</span>)&#123;</span><br><span class="line">                <span class="comment">// æ¯æ¬¡å¾ªç¯ä¸­ï¼Œacceptä¼šé˜»å¡è°ƒç”¨ï¼Œç›´åˆ°æ–°çš„å®¢æˆ·ç«¯è°ƒç”¨</span></span><br><span class="line">                <span class="comment">// è¿æ¥æˆåŠŸåï¼ŒEchoMultiServerä¼šå°†å·²è¿æ¥çš„socketå§”æ‰˜ç»™ EchoClientHandler</span></span><br><span class="line">                <span class="keyword">new</span> EchoClientHandler(serverSocket.accept()).start();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            serverSocket.close();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹EchoClientHandler</span></span><br><span class="line">    <span class="comment">// ä¿å­˜å·²è¿æ¥çš„socketä¸å®¢æˆ·ç«¯äº¤æµ</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">EchoClientHandler</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">        <span class="keyword">private</span> Socket clientSocket;</span><br><span class="line">        <span class="keyword">private</span> PrintWriter out;</span><br><span class="line">        <span class="keyword">private</span> BufferedReader in;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">EchoClientHandler</span><span class="params">(Socket socket)</span></span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.clientSocket = socket;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// çº¿ç¨‹æ‰§è¡Œstartç›´åˆ°è¿è¡Œrunæ–¹æ³•ï¼Œä¸ç›®æ ‡å®¢æˆ·ç«¯è¿›è¡Œäº¤æµ</span></span><br><span class="line">        <span class="comment">// å…¶å†…éƒ¨å‘ç”Ÿçš„æƒ…å†µä¸EchoSeverç›¸åŒ</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line"></span><br><span class="line">                out = <span class="keyword">new</span> PrintWriter(clientSocket.getOutputStream(), <span class="keyword">true</span>);</span><br><span class="line">                in = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(clientSocket.getInputStream()));</span><br><span class="line"></span><br><span class="line">                String inputLine;</span><br><span class="line">                <span class="keyword">while</span> ((inputLine = in.readLine()) != <span class="keyword">null</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(inputLine.equals(<span class="string">&quot;exit&quot;</span>))&#123;</span><br><span class="line">                        out.println(<span class="string">&quot;bye&quot;</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    out.println(inputLine.replace(<span class="string">&quot;req&quot;</span>, <span class="string">&quot;res&quot;</span>));</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                in.close();</span><br><span class="line">                out.close();</span><br><span class="line">                clientSocket.close();</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        EchoMultiSever server = <span class="keyword">new</span> EchoMultiSever();</span><br><span class="line">        <span class="comment">// å¼€å¯æœåŠ¡å™¨</span></span><br><span class="line">        server.start(<span class="number">5555</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="å®¢æˆ·ç«¯-2"><a href="#å®¢æˆ·ç«¯-2" class="headerlink" title="å®¢æˆ·ç«¯"></a>å®¢æˆ·ç«¯</h4><p>å®¢æˆ·ç«¯ä¸éœ€è¦è¿›è¡Œä¼˜åŒ–ä¿®æ”¹ï¼Œä¸ä¸Šé¢çš„ç›¸åŒ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EchoMultiClient</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Socket clientSocket;</span><br><span class="line">    <span class="keyword">private</span> PrintWriter out;</span><br><span class="line">    <span class="keyword">private</span> BufferedReader in;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">startConnection</span><span class="params">(String ip, <span class="keyword">int</span> port)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">// å®¢æˆ·ç«¯éœ€è¦çŸ¥é“æœåŠ¡ç«¯çš„ipå’Œå…¶æ­£åœ¨ç›‘å¬çš„ç«¯å£å·ï¼Œæ‰èƒ½å‘èµ·è¿æ¥</span></span><br><span class="line">            <span class="comment">// æœåŠ¡å™¨æ¥æ”¶è¿æ¥ååˆ›å»ºå®¢æˆ·ç«¯socket</span></span><br><span class="line">            clientSocket = <span class="keyword">new</span> Socket(ip, port);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// è·å–socketçš„è¾“å…¥è¾“å‡ºæµï¼Œä»¥ä¾¿ä¸æœåŠ¡ç«¯é€šä¿¡</span></span><br><span class="line">            out = <span class="keyword">new</span> PrintWriter(clientSocket.getOutputStream(), <span class="keyword">true</span>);</span><br><span class="line">            in = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(clientSocket.getInputStream()));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">sendMessage</span><span class="params">(String msg)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        out.println(msg);</span><br><span class="line">        String resp = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            resp = in.readLine();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> resp;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stopConnection</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            in.close();</span><br><span class="line">            out.close();</span><br><span class="line">            clientSocket.close();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•-2"><a href="#æµ‹è¯•-2" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><p>æµ‹è¯•ç±»ä¸­éœ€è¦å‘èµ·å¤šä¸ªå®¢æˆ·ç«¯è¯·æ±‚</p><p>è¿è¡ŒEchoMultiSeveråï¼Œè¿è¡Œä»¥ä¸‹æ¡ˆä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•æ–¹æ³•å¼€å¯å¤šä¸ªå®¢æˆ·ç«¯è¯·æ±‚</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EchoMultiTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buildClient1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        EchoClient client1 = <span class="keyword">new</span> EchoClient();</span><br><span class="line">        client1.startConnection(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">5555</span>);</span><br><span class="line">        String resp1 = client1.sendMessage(<span class="string">&quot;req:hello&quot;</span>);</span><br><span class="line">        String resp2 = client1.sendMessage(<span class="string">&quot;req:world&quot;</span>);</span><br><span class="line">        String resp3 = client1.sendMessage(<span class="string">&quot;exit&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(resp1);</span><br><span class="line">        System.out.println(resp2);</span><br><span class="line">        System.out.println(resp3);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buildClient2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        EchoClient client2 = <span class="keyword">new</span> EchoClient();</span><br><span class="line">        client2.startConnection(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">5555</span>);</span><br><span class="line">        String resp1 = client2.sendMessage(<span class="string">&quot;req:hello&quot;</span>);</span><br><span class="line">        String resp2 = client2.sendMessage(<span class="string">&quot;req:world&quot;</span>);</span><br><span class="line">        String resp3 = client2.sendMessage(<span class="string">&quot;exit&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(resp1);</span><br><span class="line">        System.out.println(resp2);</span><br><span class="line">        System.out.println(resp3);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buildClient3</span><span class="params">()</span></span>&#123;</span><br><span class="line">        EchoClient client3 = <span class="keyword">new</span> EchoClient();</span><br><span class="line">        client3.startConnection(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">5555</span>);</span><br><span class="line">        String resp1 = client3.sendMessage(<span class="string">&quot;req:hello&quot;</span>);</span><br><span class="line">        String resp2 = client3.sendMessage(<span class="string">&quot;req:world&quot;</span>);</span><br><span class="line">        String resp3 = client3.sendMessage(<span class="string">&quot;exit&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(resp1);</span><br><span class="line">        System.out.println(resp2);</span><br><span class="line">        System.out.println(resp3);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h3><p><a href="https://www.baeldung.com/a-guide-to-java-sockets">Java å¥—æ¥å­—</a></p><p><a href="https://mp.weixin.qq.com/s/rX3A_FA19n4pI9HicIEsXg">TCP/IPå›¾è§£</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/Autovy/Image/img/202202252305878.png&quot; alt=&quot;That is a good excuse&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="Java" scheme="https://autovy.github.io/categories/Java/"/>
    
    
      <category term="å¼€å‘å®æˆ˜" scheme="https://autovy.github.io/tags/%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/"/>
    
      <category term="Java" scheme="https://autovy.github.io/tags/Java/"/>
    
      <category term="è®¡ç®—æœºç½‘ç»œ" scheme="https://autovy.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
  </entry>
  
  <entry>
    <title>å¼€å‘åŸç†|æ·±å…¥ç†è§£TCP/IP</title>
    <link href="https://autovy.github.io/2021/12/22/DevPrinciple/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3TCP/"/>
    <id>https://autovy.github.io/2021/12/22/DevPrinciple/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3TCP/</id>
    <published>2021-12-22T15:45:00.000Z</published>
    <updated>2022-02-18T03:22:41.558Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111222123110.png" alt="Packets incoming "></p><span id="more"></span><h3 id="æ·±å…¥TCPè¿æ¥"><a href="#æ·±å…¥TCPè¿æ¥" class="headerlink" title="æ·±å…¥TCPè¿æ¥"></a>æ·±å…¥TCPè¿æ¥</h3><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://mp.weixin.qq.com/s/rX3A_FA19n4pI9HicIEsXg">https://mp.weixin.qq.com/s/rX3A_FA19n4pI9HicIEsXg</a></p><h4 id="1-TCPåŸºæœ¬è®¤è¯†"><a href="#1-TCPåŸºæœ¬è®¤è¯†" class="headerlink" title="1.TCPåŸºæœ¬è®¤è¯†"></a>1.TCPåŸºæœ¬è®¤è¯†</h4><h5 id="ï¼ˆ1ï¼‰TCPå¤´éƒ¨ç»“æ„"><a href="#ï¼ˆ1ï¼‰TCPå¤´éƒ¨ç»“æ„" class="headerlink" title="ï¼ˆ1ï¼‰TCPå¤´éƒ¨ç»“æ„"></a>ï¼ˆ1ï¼‰TCPå¤´éƒ¨ç»“æ„</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111172102110.png" alt="image-20211117210224727"></p><p>ä¸‹é¢ä»‹ç»å…¶ä¸­è¾ƒä¸ºé‡è¦çš„éƒ¨åˆ†ï¼š</p><ul><li><strong>åºåˆ—å·</strong>ï¼šå»ºç«‹è¿æ¥æ—¶è®¡ç®—ç”Ÿæˆçš„éšæœºæ•°ä½œä¸ºå…¶åˆå§‹å€¼ï¼Œé€šè¿‡SYNåŒ…ä¼ ç»™æ¥æ”¶ç«¯ä¸»æœºã€‚æ¯å‘é€ä¸€æ¬¡æ•°æ®å°±ä¼š<strong>ç´¯åŠ </strong>ä¸€æ¬¡è¯¥<strong>æ•°æ®å­—èŠ‚æ•°</strong>çš„å¤§å°ï¼Œæ‰€ä»¥å¯ä»¥ç”¨æ¥<strong>è§£å†³ç½‘ç»œåŒ…ä¹±åº</strong>çš„é—®é¢˜</li><li><strong>ç¡®è®¤åº”ç­”å·</strong>ï¼šå³ä¸‹ä¸€æ¬¡<strong>æœŸæœ›</strong>æ”¶åˆ°çš„æ•°æ®åºåˆ—å·ï¼Œå‘é€ç«¯æ¥æ”¶åˆ°è¿™ä¸ªç¡®è®¤åº”ç­”å°±å¯ä»¥è®¤ä¸ºè¿™ä¸ªåºå·ä¹‹å‰çš„æ•°æ®å·²è¢«æ­£å¸¸æ¥æ”¶ï¼Œç”¨ä»¥è§£å†³<strong>ä¸ä¸¢åŒ…çš„é—®é¢˜</strong></li><li><strong>æ§åˆ¶ä½ï¼ˆçŠ¶æ€ä½ï¼‰</strong>ï¼šè¯¥å­—æ®µä¸­çš„æ¯ä¸ªæ¯”ç‰¹åˆ†åˆ«è¡¨ç¤ºä»¥ä¸‹é€šä¿¡æ§åˆ¶å«ä¹‰<ul><li>ACKï¼šè¡¨ç¤ºæ¥æ”¶æ•°æ®åºå·å­—æ®µæœ‰æ•ˆï¼Œä¸€èˆ¬è¡¨ç¤ºæ•°æ®å·²è¢«æ¥æ”¶æ–¹<strong>æ”¶åˆ°</strong></li><li>RSTï¼š<strong>å¼ºåˆ¶æ–­å¼€</strong>è¿æ¥ï¼Œç”¨äºå¼‚å¸¸ä¸­æ–­çš„æƒ…å†µ</li><li>SYNï¼šå‘é€æ–¹å’Œæ¥æ”¶æ–¹ç›¸äº’ç¡®è®¤åºå·ï¼Œè¡¨ç¤º<strong>è¿æ¥</strong>æ“ä½œ</li><li>FINï¼šè¡¨ç¤º<strong>æ–­å¼€</strong>è¿æ¥</li></ul></li><li><strong>çª—å£å¤§å°</strong>ï¼šæ¥æ”¶æ–¹å‘ŠçŸ¥å‘é€æ–¹çª—å£å¤§å°ï¼ˆçª—å£å¤§å°å³ç¼“å­˜å¤§å°ï¼Œæ ‡è¯†å½“å‰å¤„ç†èƒ½åŠ›ï¼Œç”¨äº<strong>æµé‡æ§åˆ¶</strong>ï¼Œ<strong>æ‹¥å¡æ§åˆ¶</strong>ï¼‰</li></ul><h5 id="ï¼ˆ2ï¼‰TCPåŸºæœ¬å®šä¹‰"><a href="#ï¼ˆ2ï¼‰TCPåŸºæœ¬å®šä¹‰" class="headerlink" title="ï¼ˆ2ï¼‰TCPåŸºæœ¬å®šä¹‰"></a>ï¼ˆ2ï¼‰TCPåŸºæœ¬å®šä¹‰</h5><p>TCP æ˜¯ä¸€ä¸ªå·¥ä½œåœ¨<strong>ä¼ è¾“å±‚</strong>çš„<strong>å¯é </strong>æ•°æ®ä¼ è¾“çš„æœåŠ¡ï¼Œå®ƒèƒ½ç¡®ä¿æ¥æ”¶ç«¯æ¥æ”¶çš„ç½‘ç»œåŒ…æ˜¯<strong>æ— æŸåã€æ— é—´éš”ã€éå†—ä½™å’ŒæŒ‰åºçš„</strong></p><p>TCP æ˜¯<strong>é¢å‘è¿æ¥çš„ã€å¯é çš„ã€åŸºäºå­—èŠ‚æµ</strong>çš„ä¼ è¾“å±‚é€šä¿¡åè®®</p><ul><li>é¢å‘è¿æ¥ï¼šååˆ†ä¸“ä¸€ï¼Œåªæ”¯æŒä¸€å¯¹ä¸€è¿æ¥</li><li>å¯é çš„ï¼šä¸ç®¡ç½‘ç»œé“¾è·¯å‡ºç°æ€æ ·çš„é“¾è·¯å˜åŒ–ï¼ŒTCPéƒ½å¯ä»¥ä¿è¯ä¸€ä¸ªæŠ¥æ–‡ä¸€å®šèƒ½åˆ°è¾¾ä¸­æ–­</li><li>å­—èŠ‚æµï¼šæ¶ˆæ¯æ— è®ºå¤šå¤§éƒ½å¯ä»¥ä¼ è¾“ï¼Œè€Œä¸”ä¸€å®šæ˜¯<strong>æœ‰åºçš„</strong>ï¼Œ<strong>é¡ºåºä¸å¯¹</strong>çš„ï¼Œ<strong>é‡å¤</strong>çš„æŠ¥æ–‡ä¼šè¢«è‡ªåŠ¨ä¸¢å¼ƒ</li></ul><p>TCPè¿æ¥å³<strong>ç”¨äºä¿è¯å¯é æ€§å’Œæµé‡æ§åˆ¶ç»´æŠ¤</strong>çš„æŸäº›çŠ¶æ€ä¿¡æ¯åŒ…æ‹¬ï¼š</p><ul><li><strong>Socket</strong>ï¼šç”± IP åœ°å€å’Œç«¯å£å·ç»„æˆ</li><li><strong>åºåˆ—å·</strong>ï¼šç”¨æ¥è§£å†³ä¹±åºé—®é¢˜ç­‰</li><li><strong>çª—å£å¤§å°</strong>ï¼šç”¨æ¥åšæµé‡æ§åˆ¶</li></ul><p>TCPå››å…ƒç»„å¯ä»¥å”¯ä¸€ç¡®å®šä¸€ä¸ªè¿æ¥ï¼š</p><ul><li><p>æºåœ°å€</p></li><li><p>æºç«¯å£</p></li><li><p>ç›®æ ‡åœ°å€</p></li><li><p>ç›®æ ‡ç«¯å£</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111172153405.png" alt="img"></p><p>åœ°å€å‚¨å­˜åœ¨IPå¤´éƒ¨ä¸­ï¼Œä½œç”¨æ˜¯é€šè¿‡IPåè®®å‘é€æŠ¥æ–‡ç»™å¯¹æ–¹ä¸»æœº</p><p>ç«¯å£å­˜å‚¨åœ¨TCPå¤´éƒ¨ï¼Œä½œç”¨æ˜¯å‘Šè¯‰TCPåè®®åº”è¯¥æŠŠæŠ¥æ–‡å‘ç»™å“ªä¸ªè¿›ç¨‹</p><p>æœåŠ¡å™¨é€šå¸¸å›ºå®šåœ¨æŸä¸ªæœ¬åœ°ç«¯å£ç›‘å¬ï¼ˆå¦‚80ï¼Œ443ç­‰ï¼‰ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„è¿æ¥è¯·æ±‚</p><p>TCPç†è®ºä¸Šçš„æœ€å¤§è¿æ¥æ•°ä¸å®¢æˆ·ç«¯çš„IPæ•°å’Œå®¢æˆ·ç«¯çš„ç«¯å£æ•°æœ‰å…³<br>$$<br>æœ€å¤§TCPè¿æ¥æ•° = å®¢æˆ·ç«¯çš„IPæ•° Ã— å®¢æˆ·ç«¯çš„ç«¯å£æ•°<br>$$<br>å½“å®é™…ä¸ŠæœåŠ¡ç«¯æœ€å¤§TCPè¿æ¥è¿˜ä¼šå—åˆ°<strong>æ–‡ä»¶æè¿°ç¬¦</strong>å’Œ<strong>å†…å­˜</strong>é™åˆ¶</p><h5 id="ï¼ˆ3ï¼‰TCPä¸UDPçš„åŒºåˆ«"><a href="#ï¼ˆ3ï¼‰TCPä¸UDPçš„åŒºåˆ«" class="headerlink" title="ï¼ˆ3ï¼‰TCPä¸UDPçš„åŒºåˆ«"></a>ï¼ˆ3ï¼‰TCPä¸UDPçš„åŒºåˆ«</h5><p>TCPä¸UDPçš„ç»“æ„å¯¹æ¯”ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110091935607.png" alt="img" style="zoom:50%;"><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111172209140.png" alt="image-20211117220850428" style="zoom: 67%;"></p><ul><li>é¦–éƒ¨é•¿åº¦ï¼šTCPæœ‰é¦–éƒ¨é•¿åº¦ï¼ŒUDPåˆ™æ²¡æœ‰ã€‚å› ä¸ºTCPæœ‰å¯å˜é•¿çš„<strong>é€‰é¡¹</strong>å­—æ®µï¼Œæ‰€ä»¥éœ€è¦é¦–éƒ¨é•¿åº¦æ¥è®°å½•ï¼›UDPçš„å¤´éƒ¨é•¿åº¦æ˜¯ä¸ä¼šå˜åŒ–çš„ï¼Œæ‰€ä»¥éœ€è¦å»è®°å½•é¦–éƒ¨é•¿åº¦</li></ul><ul><li>åŒ…é•¿åº¦ï¼šUDPæœ‰é¦–éƒ¨é•¿åº¦ï¼ŒUDPåˆ™æ²¡æœ‰ã€‚TCPå’ŒUDPçš„æ•°æ®é•¿åº¦éƒ½å¯ä»¥é€šè¿‡ä¸‹é¢å…¬å¼è®¡ç®—å‡ºæ¥ï¼Œæ‰€ä»¥åŒ…é•¿åº¦æ˜¯ä¸éœ€è¦çš„ï¼Œè¿™é‡Œçš„UDPå¯èƒ½çº¯å±æ˜¯è¡¥å…¨UDPçš„é¦–éƒ¨é•¿åº¦ä¸º4å­—èŠ‚<br>$$<br>TCP/UDPæ•°æ®é•¿åº¦ = IPæ€»é•¿åº¦ - IPé¦–éƒ¨é•¿åº¦ - TCP/UDPé¦–éƒ¨é•¿åº¦<br>$$</li></ul><p>TCPå’ŒUDPåè®®çš„åº”ç”¨ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110090832758.jpeg" alt="TCP/UDPå¸¸è§åº”ç”¨"></p><p>TCP/UDPæ¯”è¾ƒï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110131208230.webp" alt="TCP/UDPæ¯”è¾ƒ"></p><p>å’³å’³ï¼Œæ­£ç»è¯¦ç»†çš„æ¯”è¾ƒå¦‚ä¸‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110131209573.png" alt="image-20211013120922107"></p><p>TCP/UDPç¼–ç¨‹æ¨¡å‹å¯¹æ¯”ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110090836254.jpeg" alt="TCP/UDPç¼–ç¨‹æ¨¡å‹"></p><h4 id="2-TCPè¿æ¥å»ºç«‹"><a href="#2-TCPè¿æ¥å»ºç«‹" class="headerlink" title="2.TCPè¿æ¥å»ºç«‹"></a>2.TCPè¿æ¥å»ºç«‹</h4><h5 id="ï¼ˆ1ï¼‰ä¸‰æ¬¡æ¡æ‰‹"><a href="#ï¼ˆ1ï¼‰ä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="ï¼ˆ1ï¼‰ä¸‰æ¬¡æ¡æ‰‹"></a>ï¼ˆ1ï¼‰ä¸‰æ¬¡æ¡æ‰‹</h5><p>TCPä¸‰æ¬¡æ¡æ‰‹å…¶å®å°±æ˜¯<strong>å»ºç«‹ä¸€ä¸ªTCPè¿æ¥</strong>ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´éœ€è¦<strong>3ä¸ªæ•°æ®åŒ…</strong>ï¼Œæ¡æ‰‹çš„ä¸»è¦ä½œç”¨å°±æ˜¯ä¸ºäº†ç¡®è®¤åŒæ–¹çš„æ¥æ”¶å’Œå‘é€èƒ½åŠ›æ˜¯å¦æ­£å¸¸ï¼Œåˆå§‹åºåˆ—å·ï¼Œäº¤æ¢çª—å£å¤§å°ä»¥åŠ MSS ç­‰ä¿¡æ¯</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110091957945.png" alt="img"></p><p>SYNï¼šå‘é€æ–¹å’Œæ¥æ”¶æ–¹ç›¸äº’ç¡®è®¤åºå·ï¼Œè¡¨ç¤º<strong>è¿æ¥</strong>æ“ä½œï¼›    ACKï¼šè¡¨ç¤ºæ¥æ”¶æ•°æ®åºå·å­—æ®µæœ‰æ•ˆï¼Œä¸€èˆ¬è¡¨ç¤ºæ•°æ®å·²è¢«æ¥æ”¶æ–¹<strong>æ”¶åˆ°</strong></p><ul><li>åˆå§‹çŠ¶æ€ä¸‹ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½å¤„åœ¨<strong>CLOSED</strong>çŠ¶æ€ï¼Œå…ˆæ˜¯æœåŠ¡ç«¯ä¸»åŠ¨ç›‘å¬æŸä¸ªç«¯å£ï¼Œå¤„äº<strong>LISTEN</strong>çŠ¶æ€</li></ul><ul><li>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯å‘é€<strong>SYN</strong>æŠ¥æ–‡ï¼Œå¹¶è¿›å…¥<strong>SYN-SENT</strong>çŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨ç¡®è®¤</li></ul><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111181640784.png" alt="img" style="zoom: 67%;"><ul><li>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡å™¨æ”¶åˆ°<strong>SYN</strong>æŠ¥æ–‡åï¼Œéœ€è¦å‘å®¢æˆ·ç«¯å‘é€<strong>ACK</strong>ç¡®è®¤<strong>æ”¶åˆ°</strong>çš„æŠ¥æ–‡ï¼›åŒæ—¶æœåŠ¡ç«¯ä¹Ÿå‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ª<strong>SYNæŠ¥æ–‡</strong>ï¼ˆä¹Ÿå°±æ˜¯è¯´æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å‘é€äº†<strong>SYN+ACK</strong>æŠ¥æ–‡ï¼‰ï¼Œç„¶åæœåŠ¡ç«¯è¿›å…¥<strong>SYN_RCVD</strong>çŠ¶æ€</li></ul><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111181640604.png" alt="img" style="zoom: 67%;"><ul><li><p>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ°<strong>SYN+ACK</strong>æŠ¥æ–‡åï¼Œå‘æœåŠ¡ç«¯å‘é€<strong>ACK</strong>ç¡®è®¤<strong>æ”¶åˆ°</strong>çš„æŠ¥æ–‡ï¼Œå®¢æˆ·ç«¯è¿›å…¥<strong>ESTABLISHED</strong>çŠ¶æ€ï¼› æœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯çš„<strong>ACK</strong>åŒ…åä¹Ÿä¼šè¿›å…¥<strong>ESTABLISHED</strong>çŠ¶æ€ï¼Œå®Œæˆä¸‰æ¬¡æ¡æ‰‹</p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111222130593.png" alt="img" style="zoom: 67%;"></li></ul><p><strong>ç¬¬ä¸‰æ¬¡æ¡æ‰‹æ˜¯å¯ä»¥æºå¸¦æ•°æ®çš„ï¼Œå‰é¢ä¸¤æ¬¡æ¡æ‰‹æ˜¯ä¸å¯ä»¥æºå¸¦æ•°æ®çš„</strong>ï¼Œå®Œæˆä¸‰æ¬¡æ¡æ‰‹åï¼ŒåŒæ–¹éƒ½å¤„äº<strong>ESTABLISHED</strong>çŠ¶æ€ï¼Œè‡³æ­¤è¿æ¥å°±å·²ç»å»ºç«‹å®Œæˆäº†</p><p>åœ¨Linuxç³»ç»Ÿå¯ä»¥é€šè¿‡<code>netstat -napt</code>å‘½ä»¤æŸ¥çœ‹TCPè¿æ¥çŠ¶æ€</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110092029731.png" alt="img"></p><h5 id="ï¼ˆ2ï¼‰éœ€è¦ä¸‰æ¬¡æ¡æ‰‹çš„åŸå› "><a href="#ï¼ˆ2ï¼‰éœ€è¦ä¸‰æ¬¡æ¡æ‰‹çš„åŸå› " class="headerlink" title="ï¼ˆ2ï¼‰éœ€è¦ä¸‰æ¬¡æ¡æ‰‹çš„åŸå› "></a>ï¼ˆ2ï¼‰éœ€è¦ä¸‰æ¬¡æ¡æ‰‹çš„åŸå› </h5><p>æˆ‘ä»¬éœ€è¦ä¸‰æ¬¡æ¡æ‰‹æ‰èƒ½åˆå§‹åŒ–Socketï¼Œåºåˆ—å·å’Œçª—å£å¤§å°å¹¶å»ºç«‹TCPè¿æ¥ï¼Œæ‰èƒ½ä¿è¯åŒæ–¹å…·æœ‰æ¥æ”¶å’Œå‘é€çš„èƒ½åŠ›</p><p>éœ€è¦ä¸‰æ¬¡æ¡æ‰‹çš„åŸå› å¦‚ä¸‹ï¼š</p><ul><li>ä¸‰æ¬¡æ¡æ‰‹æ‰èƒ½é˜»æ­¢å†å²é‡å¤è¿æ¥çš„åˆå§‹åŒ–</li><li>ä¸‰æ¬¡æ¡æ‰‹æ‰èƒ½åŒæ­¥åŒæ–¹çš„åˆå§‹åºåˆ—åŒ–</li><li>ä¸‰æ¬¡æ¡æ‰‹æ‰å¯ä»¥é¿å…èµ„æºæµªè´¹</li></ul><p><strong>é¿å…å†å²è¿æ¥</strong>ï¼šé˜²æ­¢æ—§çš„é‡å¤è¿æ¥åˆå§‹åŒ–é€ æˆæ··ä¹±</p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111222130449.png" alt="img" style="zoom: 67%;"><p>ç½‘ç»œç¯å¢ƒé”™ç»¼å¤æ‚ï¼Œåœ¨ç½‘ç»œæ‹¥å µçš„æƒ…å†µä¸‹ï¼Œä¸€ä¸ªã€Œæ—§ SYN æŠ¥æ–‡ã€å¯èƒ½ä¼šæ¯”ã€Œæœ€æ–°çš„ SYN ã€ æŠ¥æ–‡æ—©åˆ°è¾¾äº†æœåŠ¡ç«¯</p><p>ç¬¬ä¸‰æ¬¡æ¡æ‰‹å¯ä»¥ç”¨æ¥åˆ¤æ–­æ˜¯å¦æ”¶åˆ°äº†è‡ªå·±æœŸæœ›çš„ACKï¼š</p><ul><li>å¦‚æœæ˜¯å†å²è¿æ¥ï¼ˆåºåˆ—å·è¿‡æœŸæˆ–è¶…æ—¶ï¼‰å°±å‘é€<strong>RSTæŠ¥æ–‡</strong>ä¸­æ­¢å†å²è¿æ¥</li><li>å¦‚æœä¸æ˜¯å†å²è¿æ¥åˆ™ç¬¬ä¸‰æ¬¡å‘é€çš„æŠ¥æ–‡æ˜¯<strong>ACKæŠ¥æ–‡</strong>ï¼Œé€šä¿¡åŒæ–¹å°±ä¼šæˆåŠŸå»ºç«‹è¿æ¥</li></ul><p>å¦‚æœæ˜¯ä¸¤æ¬¡æ¡æ‰‹å°†æ— æ³•åˆ¤æ–­å‡ºå†å²è¿æ¥</p><p><strong>åŒæ­¥åŒæ–¹åˆå§‹åºåˆ—å·</strong>ï¼šTCPåè®®é€šä¿¡åŒæ–¹ï¼Œéƒ½å¿…é¡»ç»´æŠ¤ä¸€ä¸ªåºåˆ—å·ï¼Œåªæœ‰å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´é€šè¿‡<strong>SYNå’ŒACK</strong>ä¸€æ¥ä¸€å›çš„ç¡®è®¤ï¼Œæ‰èƒ½ç¡®ä¿åŒæ–¹çš„åˆå§‹åŒ–åºåˆ—å·èƒ½è¢«å¯é çš„åŒæ­¥</p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111181742784.png" alt="img" style="zoom:67%;"><p>å¦‚æœæ˜¯ä¸¤æ¬¡æ¡æ‰‹åªèƒ½ä¿è¯ä¸€æ–¹çš„åˆå§‹åºåˆ—å·å¯ä»¥è¢«å¯¹æ–¹æ¥æ”¶ï¼Œæ²¡åŠæ³•ä¿è¯åŒæ–¹çš„åˆå§‹åºåˆ—å·éƒ½èƒ½è¢«ç¡®è®¤æ¥å—</p><p><strong>é¿å…èµ„æºæµªè´¹</strong>ï¼šäºŒæ¬¡æ¡æ‰‹ä¼šå»ºç«‹å¤šä¸ªå†—æ‚çš„æ— æ•ˆçš„è¿æ¥ï¼Œé€ æˆä¸å¿…è¦çš„èµ„æºæµªè´¹</p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111222130170.png" alt="img" style="zoom:67%;"><p>ä¸¤æ¬¡æ¡æ‰‹ä¼šé€ æˆæ¶ˆæ¯æ»ç•™çš„æƒ…å†µï¼ŒæœåŠ¡å™¨æ¥æ”¶åˆ°æ— ç”¨çš„SYNæŠ¥æ–‡ï¼Œå› ä¸ºæ²¡æœ‰ACKç¡®è®¤ä¿¡å·ï¼ŒæœåŠ¡å™¨å°±ä¼šé€ æˆé‡å¤çš„èµ„æºåˆ†é…</p><h5 id="ï¼ˆ3ï¼‰åˆå§‹åŒ–åºåˆ—å·ISN"><a href="#ï¼ˆ3ï¼‰åˆå§‹åŒ–åºåˆ—å·ISN" class="headerlink" title="ï¼ˆ3ï¼‰åˆå§‹åŒ–åºåˆ—å·ISN"></a>ï¼ˆ3ï¼‰åˆå§‹åŒ–åºåˆ—å·ISN</h5><p>å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„åˆå§‹åºåˆ—å·ISNæ˜¯ä¸ç›¸åŒçš„ï¼Œå› ä¸ºç½‘ç»œçš„<strong>æŠ¥æ–‡ä¼šå»¶è¿Ÿï¼Œä¼šå¤åˆ¶é‡å‘ï¼Œä¹Ÿå¯èƒ½ä¸¢å¤±</strong>ã€‚ä¸ºäº†é¿å…ç›¸äº’å½±å“ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„åˆå§‹åºåˆ—å·æ˜¯éšæœºä¸”ä¸åŒçš„</p><p>åˆå§‹åºåˆ—å·ISNçš„éšæœºç”Ÿæˆç®—æ³•æ˜¯åŸºäºæ—¶é’Ÿçš„ï¼Œå¦‚ä¸‹<br>$$<br>ISN = M + F (localhost, localport, remotehost, remoteport)<br>$$</p><ul><li><code>M</code> æ˜¯ä¸€ä¸ª<strong>è®¡æ—¶å™¨</strong>ï¼Œè¿™ä¸ªè®¡æ—¶å™¨æ¯éš” 4 æ¯«ç§’åŠ  1</li><li><code>F</code> æ˜¯ä¸€ä¸ª Hash ç®—æ³•ï¼Œæ ¹æ®<strong>æº IPã€ç›®çš„ IPã€æºç«¯å£ã€ç›®çš„ç«¯å£ç”Ÿæˆä¸€ä¸ªéšæœºæ•°å€¼</strong>ã€‚è¦ä¿è¯ Hash ç®—æ³•ä¸èƒ½è¢«å¤–éƒ¨è½»æ˜“æ¨ç®—å¾—å‡ºï¼Œç”¨ MD5 ç®—æ³•æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„é€‰æ‹©</li></ul><h5 id="ï¼ˆ4ï¼‰MTUä¸MSS"><a href="#ï¼ˆ4ï¼‰MTUä¸MSS" class="headerlink" title="ï¼ˆ4ï¼‰MTUä¸MSS"></a>ï¼ˆ4ï¼‰MTUä¸MSS</h5><p>IPå±‚åˆ†ç‰‡çš„å¤§å°ä¸ºMTUï¼ŒTCPå±‚åˆ†æ®µçš„å¤§å°ä¸ºMSS</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110092031256.png" alt="image-20211009203103835"></p><ul><li><code>MTU</code>ï¼šä¸€ä¸ªç½‘ç»œåŒ…çš„æœ€å¤§é•¿åº¦ï¼Œä»¥å¤ªç½‘ä¸­ä¸€èˆ¬ä¸º <code>1500</code> å­—èŠ‚ã€‚</li><li><code>MSS</code>ï¼šé™¤å» IP å’Œ TCP å¤´éƒ¨ä¹‹åï¼Œä¸€ä¸ªç½‘ç»œåŒ…æ‰€èƒ½å®¹çº³çš„ TCP æ•°æ®çš„æœ€å¤§é•¿åº¦</li></ul><p>æ—¢ç„¶IPå±‚å¯ä»¥å°†å¤§äºMTUæ•°æ®è¿›è¡Œåˆ†ç‰‡ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦TCPå±‚å°†å¤§äºMSSçš„æ•°æ®åˆ†æ®µå‘¢ï¼Ÿ</p><p>å› ä¸ºIPå±‚æœ¬èº«å¹¶æ²¡æœ‰è¶…æ—¶é‡ä¼ æœºåˆ¶ï¼Œå¦‚æœä¸€ä¸ªIPåˆ†ç‰‡ä¸¢å¤±äº†ï¼Œé‚£ä¹ˆæ•´ä¸ªIPæŠ¥æ–‡çš„<strong>æ‰€æœ‰åˆ†ç‰‡éƒ½è¦è¿›è¡Œé‡ä¼ </strong></p><p>æ‰€æœ‰ä¸ºäº†è¾¾åˆ°æœ€ä½³çš„ä¼ è¾“æ•ˆèƒ½ï¼ŒTCPåè®®åœ¨<strong>å»ºç«‹è¿æ¥æ—¶é€šå¸¸è¦åå•†åŒæ–¹çš„MSSå€¼</strong>ï¼Œå½“TCPå‘ç°æ•°æ®è¶…è¿‡MSSæ—¶å°±ä¼šå¯¹æ•°æ®è¿›è¡Œåˆ†æ®µï¼Œè¿™æ ·å®ƒç”Ÿæˆçš„IPåŒ…é•¿åº¦å°±ä¸ä¼šå¤§äºMTUäº†ï¼Œå½“ç„¶ä¹Ÿä¸éœ€è¦IPå±‚è¿›è¡Œåˆ†ç‰‡ã€‚</p><p>å¦‚æœä¸€ä¸ªTCPåˆ†ç‰‡ä¸¢å¤±ï¼Œå°±å¯ä»¥ä»¥MSSä¸ºå•ä½é‡å‘æ•°æ®</p><h5 id="ï¼ˆ5ï¼‰TCPæ¥æ”¶é˜Ÿåˆ—"><a href="#ï¼ˆ5ï¼‰TCPæ¥æ”¶é˜Ÿåˆ—" class="headerlink" title="ï¼ˆ5ï¼‰TCPæ¥æ”¶é˜Ÿåˆ—"></a>ï¼ˆ5ï¼‰TCPæ¥æ”¶é˜Ÿåˆ—</h5><p>â€‹    åœ¨TCPä¸‰æ¬¡æ¡æ‰‹ä¸­ï¼Œæˆ‘ä»¬å¦‚ä½•åˆ†è¾¨ï¼šå“ªäº›è¿æ¥æ˜¯åŠè¿æ¥ï¼Œå“ªäº›è¿æ¥æ˜¯å…¨è¿æ¥å‘¢ï¼Ÿ</p><p>â€‹    Linuxé€šè¿‡ç»´æŠ¤ä¸¤ä¸ªé˜Ÿåˆ—æ¥è§£å†³é—®é¢˜ï¼š</p><ul><li>åŠè¿æ¥é˜Ÿåˆ—ï¼ˆSYNé˜Ÿåˆ—ï¼‰</li><li>å…¨è¿æ¥é˜Ÿåˆ—ï¼ˆaccepeté˜Ÿåˆ—ï¼‰</li></ul><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110261926809.png" alt="img" style="zoom:80%;"><ul><li>æœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯å‘èµ·çš„<strong>SYN</strong>åï¼Œå†…æ ¸ä¼šå°†è¿æ¥å­˜å‚¨åˆ°<strong>åŠè¿æ¥é˜Ÿåˆ—</strong></li><li>æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å‘é€<strong>SYN+ACK</strong></li><li>å®¢æˆ·ç«¯æ”¶åˆ°<strong>SYN+ACK</strong>åï¼Œå‘é€<strong>ACK</strong>åˆ°æœåŠ¡ç«¯</li><li>æœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯çš„<strong>ACK</strong>åï¼Œå†…æ ¸ä¼šæŠŠè¿æ¥ä»<strong>åŠè¿æ¥é˜Ÿåˆ—</strong>ç§»é™¤ï¼Œå°†å…¶æ·»åŠ åˆ°<strong>å…¨è¿æ¥é˜Ÿåˆ—</strong>ï¼Œç­‰å¾…è¿›ç¨‹è°ƒç”¨<strong>acceptå‡½æ•°</strong>æ—¶æŠŠè¿æ¥å–å‡ºæ¥</li><li>ä¸ç®¡æ˜¯åŠè¿æ¥é˜Ÿåˆ—è¿˜æ˜¯å…¨è¿æ¥é˜Ÿåˆ—ï¼Œéƒ½æœ‰æœ€å¤§é•¿åº¦é™åˆ¶ï¼Œè¶…è¿‡é™åˆ¶æ—¶ï¼Œå†…æ ¸ä¼šç›´æ¥<strong>ä¸¢å¼ƒ</strong>ï¼Œæˆ–<strong>è¿”å› RST åŒ…</strong></li></ul><h5 id="ï¼ˆ6ï¼‰SYNæ”»å‡»ä¸é¿å…æ–¹å¼"><a href="#ï¼ˆ6ï¼‰SYNæ”»å‡»ä¸é¿å…æ–¹å¼" class="headerlink" title="ï¼ˆ6ï¼‰SYNæ”»å‡»ä¸é¿å…æ–¹å¼"></a>ï¼ˆ6ï¼‰SYNæ”»å‡»ä¸é¿å…æ–¹å¼</h5><p>SYNæ”»å‡»å®é™…ä¸Šå°±æ˜¯å¯¹æœåŠ¡ç«¯ä¸€ç›´å‘é€SYNåŒ…ï¼Œä½†æ˜¯ä¸å›ç¬¬ä¸‰æ¬¡æ¡æ‰‹ACKï¼Œè¿™æ ·ä¼šä½¿æœåŠ¡ç«¯æœ‰å¤§é‡çš„å¤„äº <code>SYN_RECV</code> çŠ¶æ€çš„ TCP è¿æ¥ï¼ˆå³<strong>åŠè¿æ¥çŠ¶æ€</strong>ï¼‰ï¼Œä¹…è€Œä¹…ä¹‹å°±ä¼šå¯¼è‡´<strong>TCPåŠè¿æ¥é˜Ÿåˆ—æº¢å‡º</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111221558394.jpeg" alt="img"></p><p><strong>é¿å…SYNæ–¹æ³•</strong>å¦‚ä¸‹</p><p>æ–¹æ³•ä¸€ï¼šè°ƒæ•´Linuxç›¸å…³å‚æ•°</p><p>é€šè¿‡ä¿®æ”¹ Linux å†…æ ¸å‚æ•°ï¼Œæ§åˆ¶é˜Ÿåˆ—å¤§å°å’Œå½“é˜Ÿåˆ—æ»¡æ—¶åº”åšä»€ä¹ˆå¤„ç†</p><ul><li>å½“ç½‘å¡æ¥æ”¶æ•°æ®åŒ…çš„é€Ÿåº¦å¤§äºå†…æ ¸å¤„ç†çš„é€Ÿåº¦æ—¶ï¼Œä¼šæœ‰ä¸€ä¸ªé˜Ÿåˆ—ä¿å­˜è¿™äº›æ•°æ®åŒ…ã€‚æ§åˆ¶è¯¥é˜Ÿåˆ—çš„æœ€å¤§å€¼å¦‚ä¸‹å‚æ•°ï¼š</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net.core.netdev_max_backlog</span><br></pre></td></tr></table></figure><ul><li>SYN_RCVD çŠ¶æ€è¿æ¥çš„æœ€å¤§ä¸ªæ•°ï¼š</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net.ipv4.tcp_max_syn_backlog</span><br></pre></td></tr></table></figure><ul><li>è¶…å‡ºå¤„ç†èƒ½æ—¶ï¼Œå¯¹æ–°çš„ SYN ç›´æ¥å› RSTï¼Œä¸¢å¼ƒè¿æ¥ï¼š</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net.ipv4.tcp_abort_on_overflow</span><br></pre></td></tr></table></figure><p>æ–¹æ³•äºŒï¼š<strong>å¼€å¯tcp_syncookies</strong></p><p>å½“syncookies=1æ—¶ï¼ŒæœåŠ¡ç«¯å¼€å¯ syncookies åŠŸèƒ½ï¼Œå…¶å¯ä»¥åœ¨ä¸ä½¿ç”¨ SYN åŠè¿æ¥é˜Ÿåˆ—çš„æƒ…å†µä¸‹æˆåŠŸå»ºç«‹è¿æ¥ï¼ˆé»˜è®¤é…ç½®ï¼‰</p><p>SYNé˜Ÿåˆ—å³åŠè¿æ¥é˜Ÿåˆ—        Accepté˜Ÿåˆ—å³å…¨è¿æ¥é˜Ÿåˆ—</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111222130712.png" alt="img" style="zoom: 50%;">                                <img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111222130242.png" alt="img" style="zoom: 50%;"></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111222130175.png" alt="img" style="zoom:50%;">                                <img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111222130600.png" alt="img" style="zoom: 50%;"> </p><p>syncookiesçš„è¿è¡ŒåŸç†ï¼šæœåŠ¡å™¨æ ¹æ®å½“å‰çŠ¶æ€è®¡ç®—å‡ºä¸€ä¸ªå€¼ï¼Œæ”¾åœ¨å·±æ–¹å‘å‡ºçš„ SYN+ACK æŠ¥æ–‡ä¸­å‘å‡ºï¼Œå½“å®¢æˆ·ç«¯è¿”å› ACK æŠ¥æ–‡æ—¶ï¼Œå–å‡ºè¯¥å€¼éªŒè¯ï¼Œå¦‚æœåˆæ³•ï¼Œå°±è®¤ä¸ºè¿æ¥å»ºç«‹æˆåŠŸã€‚å…¶å¤„ç†æµç¨‹å¦‚ä¸‹ï¼š</p><ul><li>ã€Œ SYN é˜Ÿåˆ—ã€æ»¡ä¹‹åï¼Œåç»­æœåŠ¡å™¨æ”¶åˆ° SYN åŒ…ï¼Œä¸è¿›å…¥ã€Œ SYN é˜Ÿåˆ—ã€</li><li>è®¡ç®—å‡ºä¸€ä¸ª <code>cookie</code> å€¼ï¼Œå†ä»¥ SYN + ACK ä¸­çš„ã€Œåºåˆ—å·ã€è¿”å›å®¢æˆ·ç«¯</li><li>æœåŠ¡ç«¯æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„åº”ç­”æŠ¥æ–‡æ—¶ï¼ŒæœåŠ¡å™¨ä¼šæ£€æŸ¥è¿™ä¸ª ACK åŒ…çš„åˆæ³•æ€§ã€‚å¦‚æœåˆæ³•ï¼Œç›´æ¥æ”¾å…¥åˆ°ã€Œ Accept é˜Ÿåˆ—ã€</li><li>æœ€ååº”ç”¨é€šè¿‡è°ƒç”¨ <code>accpet()</code> socket æ¥å£ï¼Œä»ã€Œ Accept é˜Ÿåˆ—ã€å–å‡ºçš„è¿æ¥</li></ul><h4 id="3-TCPè¿æ¥æ–­å¼€"><a href="#3-TCPè¿æ¥æ–­å¼€" class="headerlink" title="3.TCPè¿æ¥æ–­å¼€"></a>3.TCPè¿æ¥æ–­å¼€</h4><h5 id="ï¼ˆ1ï¼‰å››æ¬¡æŒ¥æ‰‹"><a href="#ï¼ˆ1ï¼‰å››æ¬¡æŒ¥æ‰‹" class="headerlink" title="ï¼ˆ1ï¼‰å››æ¬¡æŒ¥æ‰‹"></a>ï¼ˆ1ï¼‰å››æ¬¡æŒ¥æ‰‹</h5><p>å½“æˆ‘ä»¬çš„åº”ç”¨ä¸å†éœ€è¦æ•°æ®é€šä¿¡ï¼Œå°±ä¼šå‘èµ·æ–­å¼€TCPè¿æ¥ï¼Œå»ºç«‹ä¸€ä¸ªè¿æ¥éœ€è¦<strong>ä¸‰æ¬¡æ¡æ‰‹</strong>ï¼Œè€Œç»ˆæ­¢ä¸€ä¸ªè¿æ¥éœ€è¦ç»è¿‡<strong>å››æ¬¡æŒ¥æ‰‹</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110111551532.png" alt="img"></p><p>SYNï¼šå‘é€æ–¹å’Œæ¥æ”¶æ–¹ç›¸äº’ç¡®è®¤åºå·ï¼Œè¡¨ç¤º<strong>è¿æ¥</strong>æ“ä½œï¼›    ACKï¼šè¡¨ç¤ºæ¥æ”¶æ•°æ®åºå·å­—æ®µæœ‰æ•ˆï¼Œä¸€èˆ¬è¡¨ç¤ºæ•°æ®å·²è¢«æ¥æ”¶æ–¹<strong>æ”¶åˆ°</strong>ï¼›    FINï¼šè¡¨ç¤º<strong>æ–­å¼€</strong>è¿æ¥</p><ul><li>ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·ç«¯å‘èµ·<strong>FIN</strong>åŒ…ï¼Œå®¢æˆ·ç«¯è¿›å…¥<strong>FIN_WAIT_1</strong>çŠ¶æ€ï¼ˆè™½ç„¶FINåŒ…ä¸æºå¸¦æ•°æ®ï¼Œä¹Ÿéœ€è¦æ¶ˆè€—ä¸€ä¸ªåºå·uï¼‰</li><li>ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼šæœåŠ¡ç«¯æ”¶åˆ°<strong>FIN</strong>åŒ…ï¼Œå‘å‡ºç¡®è®¤åŒ…<strong>ACK</strong>ï¼ˆack=u+1ï¼‰ï¼Œå¹¶å¸¦ä¸Šè‡ªå·±çš„åºå·seq=vï¼ŒæœåŠ¡ç«¯è¿›å…¥<strong>CLOSE_WAIT</strong>çŠ¶æ€ï¼ˆè¿™ä¸ªæ—¶å€™å®¢æˆ·ç«¯ä»éœ€è¦æ¥æ”¶æœåŠ¡å™¨å‘é€çš„æ•°æ®ï¼‰ï¼›å®¢æˆ·ç«¯æ¥æ”¶åˆ°æœåŠ¡ç«¯å‘é€çš„<strong>ACK</strong>åï¼Œè¿›å…¥<strong>FIN_WAIT_2</strong>çŠ¶æ€</li><li>ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼šæœåŠ¡ç«¯æ•°æ®å‘é€å®Œæ¯•åï¼Œå‘å®¢æˆ·ç«¯å‘é€<strong>FIN</strong>åŒ…ï¼ˆseq=wï¼Œack=u+1ï¼‰ï¼Œ<strong>åŠè¿æ¥çŠ¶æ€</strong>ä¸‹æœåŠ¡å™¨å¯èƒ½åˆå‘é€ä¸€äº›æ•°æ®ï¼ŒæœåŠ¡ç«¯æ­¤æ—¶è¿›å…¥<strong>LAST_ACK</strong>çŠ¶æ€</li><li>ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯çš„<strong>FIN</strong>åŒ…åï¼Œå‘å‡ºç¡®è®¤åŒ…ACKï¼ˆACK=1ï¼Œ ack=w+1ï¼‰ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯è¿›å…¥<strong>TIME_WAIT</strong>çŠ¶æ€ï¼›æœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯ç¡®è®¤åŒ…åè¿›å…¥<strong>CLOSED</strong>çŠ¶æ€ï¼Œè€Œå®¢æˆ·ç«¯éœ€è¦ç­‰å¾…2MSLåæ‰è¿›å…¥<strong>CLOSED</strong>çŠ¶æ€</li></ul><p>å››æ¬¡æŒ¥æ‰‹çš„æœ¬è´¨æ˜¯â€”â€”å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨é€šè¿‡<strong>ä¸¤å¯¹FIN-ACKæŠ¥æ–‡</strong>é€šçŸ¥å¯¹æ–¹è‡ªå·±è¦å…³é—­äº†</p><p>ä¸‰æ¬¡æ¡æ‰‹ä¸­ï¼Œåœ¨ç¬¬äºŒæ¬¡æ¡æ‰‹æ—¶ï¼Œæ¥æ”¶ç«¯å°†ä¸€ä¸ª<strong>ACK</strong>åŒ…å’Œä¸€ä¸ª<strong>SYN</strong>åŒ…åˆå¹¶ä¸€èµ·å‘é€ï¼Œæ‰€ä»¥å‡å°‘äº†ä¸€æ¬¡åŒ…çš„å‘é€</p><p>å››æ¬¡æŒ¥æ‰‹ä¸­ï¼Œåœ¨ä¸»åŠ¨å…³é—­æ–¹ï¼ˆå®¢æˆ·ç«¯ï¼‰å‘é€FINåŒ…åï¼Œæ¥æ”¶æ–¹ï¼ˆæœåŠ¡ç«¯ï¼‰å¯èƒ½è¿˜è¦å‘é€æ•°æ®ï¼Œä¸èƒ½ç«‹å³å…³é—­æ•°æ®é€šé“ï¼Œæ‰€ä»¥æœåŠ¡ç«¯è¦å…ˆç¡®è®¤ACKï¼Œç„¶åç­‰åˆ°è‡ªå·±æŠŠæ•°æ®å‘æ— å¯å‘åå†å‘é€<strong>FIN</strong>åŒ…</p><h5 id="ï¼ˆ2ï¼‰éœ€è¦å››æ¬¡æŒ¥æ‰‹çš„åŸå› "><a href="#ï¼ˆ2ï¼‰éœ€è¦å››æ¬¡æŒ¥æ‰‹çš„åŸå› " class="headerlink" title="ï¼ˆ2ï¼‰éœ€è¦å››æ¬¡æŒ¥æ‰‹çš„åŸå› "></a>ï¼ˆ2ï¼‰éœ€è¦å››æ¬¡æŒ¥æ‰‹çš„åŸå› </h5><ul><li>å…³é—­è¿æ¥æ—¶ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€ <code>FIN</code> æ—¶ï¼Œä»…ä»…è¡¨ç¤ºå®¢æˆ·ç«¯ä¸å†å‘é€æ•°æ®äº†ä½†æ˜¯è¿˜èƒ½æ¥æ”¶æ•°æ®</li><li>æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯çš„ <code>FIN</code> æŠ¥æ–‡æ—¶ï¼Œå…ˆå›ä¸€ä¸ª <code>ACK</code> åº”ç­”æŠ¥æ–‡ï¼Œè€ŒæœåŠ¡ç«¯å¯èƒ½<strong>è¿˜æœ‰æ•°æ®éœ€è¦å¤„ç†å’Œå‘é€</strong>ï¼Œç­‰æœåŠ¡ç«¯ä¸å†å‘é€æ•°æ®æ—¶ï¼Œæ‰å‘é€ <code>FIN</code> æŠ¥æ–‡ç»™å®¢æˆ·ç«¯æ¥è¡¨ç¤ºåŒæ„ç°åœ¨å…³é—­è¿æ¥</li></ul><p>æœåŠ¡ç«¯çš„<strong>ACK</strong>å’Œ<strong>FIN</strong>éœ€è¦åˆ†å¼€å‘é€ï¼Œæ˜¯å› ä¸ºé€šå¸¸éœ€è¦ç­‰å¾…å®Œæˆæ•°æ®çš„å‘é€å’Œå¤„ç†ï¼Œæ‰€ä»¥ä¼šæ¯”ä¸‰æ¬¡æ¡æ‰‹å¤šä¸€æ¬¡</p><h5 id="ï¼ˆ3ï¼‰TIME-WAITçŠ¶æ€åŠŸèƒ½"><a href="#ï¼ˆ3ï¼‰TIME-WAITçŠ¶æ€åŠŸèƒ½" class="headerlink" title="ï¼ˆ3ï¼‰TIME_WAITçŠ¶æ€åŠŸèƒ½"></a>ï¼ˆ3ï¼‰TIME_WAITçŠ¶æ€åŠŸèƒ½</h5><p>ä¸ºä»€ä¹ˆå®¢æˆ·ç«¯åœ¨å…³é—­è¿æ¥æ—¶éœ€è¦ä¸€ä¸ªTIME_WAITçš„çŠ¶æ€å‘¢ï¼Ÿ</p><p>å…¶ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ä¸ªåŸå› ï¼š</p><ul><li>é˜²æ­¢æ—§è¿æ¥çš„æ•°æ®åŒ…</li><li>ä¿è¯ã€Œè¢«åŠ¨å…³é—­è¿æ¥ã€çš„ä¸€æ–¹èƒ½è¢«æ­£ç¡®çš„å…³é—­</li></ul><p><strong>é˜²æ­¢æ—§è¿æ¥çš„æ•°æ®åŒ…</strong>ï¼š</p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111222021036.png" alt="img" style="zoom:67%;"><p>å¦‚æœæ²¡æœ‰TIME_WAITæˆ–TIME_WAITçš„æ—¶é—´è¿‡çŸ­ï¼Œé‚£ä¹ˆå›¾ä¸­è¢«å»¶è¿Ÿçš„è¿‡æœŸçš„æ•°æ®åŒ…å¯èƒ½ä¼šè¢«å®¢æˆ·ç«¯æ­£å¸¸æ¥æ”¶</p><p>è€Œç»è¿‡TIME_WAITçš„<code>2MSL</code> è¿™ä¸ªæ—¶é—´ï¼Œè¶³ä»¥è®©ä¸¤ä¸ªæ–¹å‘ä¸Šçš„æ•°æ®åŒ…éƒ½è¢«ä¸¢å¼ƒï¼Œä½¿å¾—åŸæ¥è¿æ¥çš„æ•°æ®åŒ…åœ¨ç½‘ç»œä¸­éƒ½è‡ªç„¶æ¶ˆå¤±ï¼Œå†å‡ºç°çš„æ•°æ®åŒ…ä¸€å®šéƒ½æ˜¯æ–°å»ºç«‹è¿æ¥æ‰€äº§ç”Ÿçš„</p><p><strong>ä¿è¯è¿æ¥æ­£ç¡®å…³é—­</strong>ï¼š</p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111222130617.png" alt="img" style="zoom:67%;"><p>TIME-WAIT ä½œç”¨æ˜¯ç­‰å¾…è¶³å¤Ÿçš„æ—¶é—´ä»¥ç¡®ä¿æœ€åçš„ ACK èƒ½è®©è¢«åŠ¨å…³é—­æ–¹æ¥æ”¶ï¼Œä»è€Œå¸®åŠ©å…¶æ­£å¸¸å…³é—­</p><p>ä¸€æ—¦å®¢æˆ·ç«¯æœ€åçš„ACKæŠ¥æ–‡åœ¨ç½‘ç»œä¸¢å¤±ï¼Œå¦‚æœæ²¡æœ‰TIME_WAITæˆ–TIME_WAITçš„æ—¶é—´è¿‡çŸ­ï¼Œå®¢æˆ·ç«¯å¾ˆå¿«å°±ä¼šè¿›å…¥äº†åˆ™å°±ç›´æ¥è¿›å…¥äº† <code>CLOSE</code> çŠ¶æ€äº†ï¼Œé‚£ä¹ˆæœåŠ¡ç«¯åˆ™ä¼šä¸€ç›´å¤„åœ¨ <code>LASE-ACK</code> çŠ¶æ€ã€‚è¿™æ—¶å¦‚æœå®¢æˆ·ç«¯è¦å‘èµ·æ–°çš„è¿æ¥ï¼ŒæœåŠ¡ç«¯ä¼šå‘é€ <code>RST</code> æŠ¥æ–‡ç»™å®¢æˆ·ç«¯ï¼Œè¿æ¥å»ºç«‹çš„è¿‡ç¨‹å°±ä¼šè¢«ç»ˆæ­¢</p><p>å¦‚æœ TIME-WAIT ç­‰å¾…è¶³å¤Ÿé•¿æ—¶ï¼Œä¸€æ—¦æœåŠ¡ç«¯æ²¡æœ‰æ”¶åˆ°å››æ¬¡æŒ¥æ‰‹çš„æœ€åä¸€ä¸ª <code>ACK</code> æŠ¥æ–‡æ—¶ï¼Œåˆ™ä¼šé‡å‘ <code>FIN</code> å…³é—­è¿æ¥æŠ¥æ–‡å¹¶ç­‰å¾…æ–°çš„ <code>ACK</code> æŠ¥æ–‡</p><h5 id="ï¼ˆ4ï¼‰TIME-WAITæ·±å…¥è®²è§£"><a href="#ï¼ˆ4ï¼‰TIME-WAITæ·±å…¥è®²è§£" class="headerlink" title="ï¼ˆ4ï¼‰TIME_WAITæ·±å…¥è®²è§£"></a>ï¼ˆ4ï¼‰TIME_WAITæ·±å…¥è®²è§£</h5><p><strong>ä¸ºä»€ä¹ˆTIME_WAITç­‰å¾…çš„æ—¶é—´æ˜¯ä¸¤ç§’</strong>ï¼Ÿ</p><p>MSLï¼š<strong>æŠ¥æ–‡æœ€å¤§ç”Ÿå­˜æ—¶é—´</strong>ï¼Œå®ƒæ˜¯ä»»ä½•æŠ¥æ–‡åœ¨ç½‘ç»œä¸Šå­˜åœ¨çš„æœ€é•¿æ—¶é—´ï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´æŠ¥æ–‡å°†è¢«ä¸¢å¼ƒ</p><p>TTLï¼š <strong>IP æ•°æ®æŠ¥å¯ä»¥ç»è¿‡çš„æœ€å¤§è·¯ç”±æ•°</strong>ï¼Œæ¯ç»è¿‡ä¸€ä¸ªå¤„ç†ä»–çš„è·¯ç”±å™¨æ­¤å€¼å°±å‡ 1ï¼Œå½“æ­¤å€¼ä¸º 0 åˆ™æ•°æ®æŠ¥å°†è¢«ä¸¢å¼ƒï¼ŒåŒæ—¶å‘é€ ICMP æŠ¥æ–‡é€šçŸ¥æºä¸»æœº</p><p>å¦‚æœè¢«åŠ¨å…³é—­æ–¹æ²¡æœ‰æ”¶åˆ°æ–­å¼€è¿æ¥çš„æœ€åçš„ ACK æŠ¥æ–‡ï¼Œå°±ä¼šè§¦å‘è¶…æ—¶é‡å‘ Fin æŠ¥æ–‡ï¼Œå¦ä¸€æ–¹æ¥æ”¶åˆ° FIN åï¼Œä¼šé‡å‘ ACK ç»™è¢«åŠ¨å…³é—­æ–¹ï¼Œ <strong>ä¸€æ¥ä¸€å»æ­£å¥½ 2 MSL</strong></p><p><code>2MSL</code> çš„æ—¶é—´æ˜¯ä»<strong>å®¢æˆ·ç«¯æ¥æ”¶åˆ° FIN åå‘é€ ACK å¼€å§‹è®¡æ—¶çš„</strong>ã€‚å¦‚æœåœ¨ TIME-WAIT æ—¶é—´å†…ï¼Œå› ä¸ºå®¢æˆ·ç«¯çš„ ACK æ²¡æœ‰ä¼ è¾“åˆ°æœåŠ¡ç«¯ï¼Œå®¢æˆ·ç«¯åˆæ¥æ”¶åˆ°äº†æœåŠ¡ç«¯é‡å‘çš„ FIN æŠ¥æ–‡ï¼Œé‚£ä¹ˆ <strong>2MSL æ—¶é—´å°†é‡æ–°è®¡æ—¶</strong></p><p><strong>TIME_WAIT è¿‡å¤šæœ‰ä»€ä¹ˆå±å®³ï¼Ÿ</strong></p><p>è¿‡å¤šçš„ TIME-WAIT çŠ¶æ€ä¸»è¦çš„å±å®³æœ‰ä¸¤ç§ï¼š</p><ul><li>ç¬¬ä¸€æ˜¯å†…å­˜èµ„æºå ç”¨ï¼›</li><li>ç¬¬äºŒæ˜¯å¯¹ç«¯å£èµ„æºçš„å ç”¨ï¼Œå¦‚æœ<strong>TIME_WAIT çŠ¶æ€è¿‡å¤šï¼Œå æ»¡äº†æ‰€æœ‰ç«¯å£èµ„æºï¼Œåˆ™ä¼šå¯¼è‡´æ— æ³•åˆ›å»ºæ–°è¿æ¥</strong></li></ul><p><strong>TIME_WAIT ä¼˜åŒ–</strong></p><ul><li>æ‰“å¼€ net.ipv4.tcp_tw_reuse å’Œ net.ipv4.tcp_timestamps é€‰é¡¹ï¼šå¯ä»¥å¤ç”¨<strong>å¤ç”¨å¤„äº TIME_WAIT çš„ socket ä¸ºæ–°çš„è¿æ¥æ‰€ç”¨</strong>ï¼Œå¼•å…¥æ—¶é—´æˆ³åï¼Œé‡å¤çš„æ•°æ®åŒ…ä¼šå› ä¸ºæ—¶é—´æˆ³è¿‡æœŸè€Œè¢«è‡ªç„¶ä¸¢å¼ƒï¼ŒåŒæ—¶<strong>å½“å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ä¸»æœºæ—¶é—´ä¸åŒæ­¥æ—¶ï¼Œå®¢æˆ·ç«¯çš„å‘é€çš„æ¶ˆæ¯ä¼šè¢«ç›´æ¥æ‹’ç»æ‰</strong></li><li>net.ipv4.tcp_max_tw_bucketsï¼šè¿™ä¸ªå€¼é»˜è®¤ä¸º 18000ï¼Œå½“ç³»ç»Ÿä¸­å¤„äº TIME_WAIT çš„è¿æ¥<strong>ä¸€æ—¦è¶…è¿‡è¿™ä¸ªå€¼æ—¶ï¼Œç³»ç»Ÿå°±ä¼šå°†æ‰€æœ‰çš„ TIME_WAIT è¿æ¥çŠ¶æ€é‡ç½®</strong></li><li>ç¨‹åºä¸­ä½¿ç”¨ SO_LINGER ï¼Œåº”ç”¨å¼ºåˆ¶ä½¿ç”¨ RST å…³é—­ï¼ˆä¹Ÿæ˜¯ä¸€ä¸ªå±é™©è¡Œä¸ºï¼Œä¸æ¨èä½¿ç”¨ï¼‰</li></ul><h5 id="ï¼ˆ5ï¼‰TCPä¿æ´»æœºåˆ¶"><a href="#ï¼ˆ5ï¼‰TCPä¿æ´»æœºåˆ¶" class="headerlink" title="ï¼ˆ5ï¼‰TCPä¿æ´»æœºåˆ¶"></a>ï¼ˆ5ï¼‰TCPä¿æ´»æœºåˆ¶</h5><p>å¦‚æœå·²ç»å»ºç«‹äº†è¿æ¥ï¼Œä½†æ˜¯å®¢æˆ·ç«¯çªç„¶å‡ºç°æ•…éšœäº†æ€ä¹ˆåŠï¼Ÿ</p><p>è¿™æ—¶å€™å°±è¦æåˆ°TCPçš„<strong>ä¿æ´»æœºåˆ¶</strong>äº†</p><p>åœ¨ä¸€ä¸ª<strong>è§„å®šçš„æ—¶é—´æ®µ</strong>ï¼ˆtcp_keepalive_timeï¼šä¿æ´»æ—¶é—´ï¼‰å†…ï¼Œå¦‚æœæ²¡æœ‰ä»»ä½•è¿æ¥ç›¸å…³çš„æ´»åŠ¨ï¼ŒTCP ä¿æ´»æœºåˆ¶ä¼šå¼€å§‹ä½œç”¨ï¼Œ<strong>æ¯éš”ä¸€ä¸ªæ—¶é—´é—´éš”</strong>ï¼ˆtcp_keepalive_intvlï¼šæ¯æ¬¡æ£€æµ‹é—´éš”ï¼‰ï¼Œå‘é€ä¸€ä¸ªã€Œæ¢æµ‹æŠ¥æ–‡ã€ï¼Œè¯¥æ¢æµ‹æŠ¥æ–‡åŒ…å«çš„æ•°æ®éå¸¸å°‘ï¼Œå¦‚æœ<strong>è¿ç»­å‡ ä¸ªæ¢æµ‹æŠ¥æ–‡</strong>ï¼ˆtcp_keepalive_probesï¼šæ£€æµ‹æ¬¡æ•°ï¼‰éƒ½æ²¡æœ‰å¾—åˆ°å“åº”ï¼Œåˆ™è®¤ä¸ºå½“å‰çš„ TCP è¿æ¥å·²ç»æ­»äº¡ï¼Œç³»ç»Ÿå†…æ ¸å°†é”™è¯¯ä¿¡æ¯é€šçŸ¥ç»™ä¸Šå±‚åº”ç”¨ç¨‹åº</p><p>  ç›¸å…³å‚æ•°å¦‚ä¸‹ï¼š</p>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/sys/net/ipv4/tcp_keepalive_time</span><br><span class="line">cat /proc/sys/net/ipv4/tcp_keepalive_intvl</span><br><span class="line">cat /proc/sys/net/ipv4/tcp_keepalive_probes</span><br></pre></td></tr></table></figure><p>  <img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110271337578.png" alt="image-20211023214647732">    </p><p>æŒ‰ç…§ç³»ç»Ÿé»˜è®¤çš„è®¾ç½®æ¥è®¡ç®—åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œæœ€å°‘éœ€è¦ç»è¿‡ 2 å°æ—¶ 11 åˆ† 15 ç§’æ‰å¯ä»¥å‘ç°ä¸€ä¸ªã€Œæ­»äº¡ã€è¿æ¥</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110232154413.png" alt="img"></p><p>å¼€å¯äº†TCPä¿æ´»å¯ä»¥è€ƒè™‘ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š</p><ul><li>ç¬¬ä¸€ç§ï¼Œå¯¹ç«¯ç¨‹åºæ˜¯æ­£å¸¸å·¥ä½œçš„ã€‚å½“ TCP ä¿æ´»çš„æ¢æµ‹æŠ¥æ–‡å‘é€ç»™å¯¹ç«¯, å¯¹ç«¯ä¼šæ­£å¸¸å“åº”ï¼Œè¿™æ · <strong>TCP ä¿æ´»æ—¶é—´ä¼šè¢«é‡ç½®</strong>ï¼Œç­‰å¾…ä¸‹ä¸€ä¸ª TCP ä¿æ´»æ—¶é—´çš„åˆ°æ¥</li><li>ç¬¬äºŒç§ï¼Œå¯¹ç«¯ç¨‹åºå´©æºƒå¹¶é‡å¯ã€‚å½“ TCP ä¿æ´»çš„æ¢æµ‹æŠ¥æ–‡å‘é€ç»™å¯¹ç«¯åï¼Œå¯¹ç«¯æ˜¯å¯ä»¥å“åº”çš„ï¼Œä½†ç”±äºæ²¡æœ‰è¯¥è¿æ¥çš„æœ‰æ•ˆä¿¡æ¯ï¼Œ<strong>ä¼šäº§ç”Ÿä¸€ä¸ª RST æŠ¥æ–‡</strong>ï¼Œè¿™æ ·å¾ˆå¿«å°±ä¼šå‘ç° TCP è¿æ¥å·²ç»è¢«é‡ç½®</li><li>ç¬¬ä¸‰ç§ï¼Œæ˜¯å¯¹ç«¯ç¨‹åºå´©æºƒï¼Œæˆ–å¯¹ç«¯ç”±äºå…¶ä»–åŸå› å¯¼è‡´æŠ¥æ–‡ä¸å¯è¾¾ã€‚å½“ TCP ä¿æ´»çš„æ¢æµ‹æŠ¥æ–‡å‘é€ç»™å¯¹ç«¯åï¼ŒçŸ³æ²‰å¤§æµ·ï¼Œæ²¡æœ‰å“åº”ï¼Œè¿ç»­å‡ æ¬¡ï¼Œè¾¾åˆ°ä¿æ´»æ¢æµ‹æ¬¡æ•°åï¼Œ<strong>TCP ä¼šæŠ¥å‘Šè¯¥ TCP è¿æ¥å·²ç»æ­»äº¡</strong></li></ul><p><strong>å‰æ–¹æ–½å·¥ä¸­ã€‚ã€‚ã€‚</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111222117832.webp" alt></p><h3 id="æ·±å…¥TCPæœºåˆ¶"><a href="#æ·±å…¥TCPæœºåˆ¶" class="headerlink" title="æ·±å…¥TCPæœºåˆ¶"></a>æ·±å…¥TCPæœºåˆ¶</h3><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://mp.weixin.qq.com/s/HjOUsKn8eLfDogbBX3hPnA">https://mp.weixin.qq.com/s/HjOUsKn8eLfDogbBX3hPnA</a></p><h4 id="1-é‡ä¼ æœºåˆ¶"><a href="#1-é‡ä¼ æœºåˆ¶" class="headerlink" title="1.é‡ä¼ æœºåˆ¶"></a>1.é‡ä¼ æœºåˆ¶</h4><h4 id="2-æ»‘åŠ¨çª—å£"><a href="#2-æ»‘åŠ¨çª—å£" class="headerlink" title="2.æ»‘åŠ¨çª—å£"></a>2.æ»‘åŠ¨çª—å£</h4><h4 id="3-æµé‡æ§åˆ¶"><a href="#3-æµé‡æ§åˆ¶" class="headerlink" title="3.æµé‡æ§åˆ¶"></a>3.æµé‡æ§åˆ¶</h4><h4 id="4-æ‹¥å µæ§åˆ¶"><a href="#4-æ‹¥å µæ§åˆ¶" class="headerlink" title="4.æ‹¥å µæ§åˆ¶"></a>4.æ‹¥å µæ§åˆ¶</h4><h3 id="TCPå…³é”®å‚æ•°ä¸ä¼˜åŒ–"><a href="#TCPå…³é”®å‚æ•°ä¸ä¼˜åŒ–" class="headerlink" title="TCPå…³é”®å‚æ•°ä¸ä¼˜åŒ–"></a>TCPå…³é”®å‚æ•°ä¸ä¼˜åŒ–</h3><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://mp.weixin.qq.com/s/ytV7RZSyFXyvPW_lKhv8hw">https://mp.weixin.qq.com/s/ytV7RZSyFXyvPW_lKhv8hw</a></p><h4 id="1-TCPä¸‰æ¬¡æ¡æ‰‹å‚æ•°"><a href="#1-TCPä¸‰æ¬¡æ¡æ‰‹å‚æ•°" class="headerlink" title="1.TCPä¸‰æ¬¡æ¡æ‰‹å‚æ•°"></a>1.TCPä¸‰æ¬¡æ¡æ‰‹å‚æ•°</h4><h4 id="2-TCPå››æ¬¡æŒ¥æ‰‹å‚æ•°"><a href="#2-TCPå››æ¬¡æŒ¥æ‰‹å‚æ•°" class="headerlink" title="2.TCPå››æ¬¡æŒ¥æ‰‹å‚æ•°"></a>2.TCPå››æ¬¡æŒ¥æ‰‹å‚æ•°</h4><h4 id="3-TCPæ•°æ®ä¼ è¾“å‚æ•°"><a href="#3-TCPæ•°æ®ä¼ è¾“å‚æ•°" class="headerlink" title="3.TCPæ•°æ®ä¼ è¾“å‚æ•°"></a>3.TCPæ•°æ®ä¼ è¾“å‚æ•°</h4><h3 id="IPåŸºæœ¬çŸ¥è¯†"><a href="#IPåŸºæœ¬çŸ¥è¯†" class="headerlink" title="IPåŸºæœ¬çŸ¥è¯†"></a>IPåŸºæœ¬çŸ¥è¯†</h3><h3 id="IPåœ°å€åŸºç¡€çŸ¥è¯†"><a href="#IPåœ°å€åŸºç¡€çŸ¥è¯†" class="headerlink" title="IPåœ°å€åŸºç¡€çŸ¥è¯†"></a>IPåœ°å€åŸºç¡€çŸ¥è¯†</h3><h3 id="IPåè®®ç›¸å…³æŠ€æœ¯"><a href="#IPåè®®ç›¸å…³æŠ€æœ¯" class="headerlink" title="IPåè®®ç›¸å…³æŠ€æœ¯"></a>IPåè®®ç›¸å…³æŠ€æœ¯</h3><h3 id="Pingå·¥ä½œåŸç†"><a href="#Pingå·¥ä½œåŸç†" class="headerlink" title="Pingå·¥ä½œåŸç†"></a>Pingå·¥ä½œåŸç†</h3>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111222123110.png&quot; alt=&quot;Packets incoming &quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="å¼€å‘åŸç†" scheme="https://autovy.github.io/categories/%E5%BC%80%E5%8F%91%E5%8E%9F%E7%90%86/"/>
    
    
      <category term="å¼€å‘åŸç†" scheme="https://autovy.github.io/tags/%E5%BC%80%E5%8F%91%E5%8E%9F%E7%90%86/"/>
    
      <category term="æ·±åº¦ç³»åˆ—" scheme="https://autovy.github.io/tags/%E6%B7%B1%E5%BA%A6%E7%B3%BB%E5%88%97/"/>
    
      <category term="è®¡ç®—æœºç½‘ç»œ" scheme="https://autovy.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
      <category term="TCP" scheme="https://autovy.github.io/tags/TCP/"/>
    
      <category term="IP" scheme="https://autovy.github.io/tags/IP/"/>
    
  </entry>
  
  <entry>
    <title>å¼€å‘å·¥å…·|Gitçš„ä½¿ç”¨ä¸å·¥ä½œåŸç†</title>
    <link href="https://autovy.github.io/2021/11/16/Tool/Git%E7%9A%84%E4%BD%BF%E7%94%A8%E4%B8%8E%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/"/>
    <id>https://autovy.github.io/2021/11/16/Tool/Git%E7%9A%84%E4%BD%BF%E7%94%A8%E4%B8%8E%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/</id>
    <published>2021-11-16T14:57:00.000Z</published>
    <updated>2021-11-17T03:20:33.640Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111122115839.jpeg" alt="img"></p><span id="more"></span><p>å‚è€ƒæ–‡ç« ï¼š</p><p><a href="https://zhuanlan.zhihu.com/p/45510461">æ·±å…¥ç†è§£Gitå®ç°åŸç† </a></p><p><a href="https://jingsam.github.io/2018/06/03/git-objects.html">Gitå†…éƒ¨åŸç†ä¹‹Gitå¯¹è±¡ </a></p><p><a href="https://zhuanlan.zhihu.com/p/42929114">Git è¯¯æ“ä½œæ•‘å‘½è‰¯æ–¹</a></p><p><a href="https://www.liaoxuefeng.com/wiki/896043488029600">Gitæ•™ç¨‹</a></p><h3 id="GitåŸºæœ¬çŸ¥è¯†"><a href="#GitåŸºæœ¬çŸ¥è¯†" class="headerlink" title="GitåŸºæœ¬çŸ¥è¯†"></a>GitåŸºæœ¬çŸ¥è¯†</h3><h4 id="1-Gitå®šä¹‰"><a href="#1-Gitå®šä¹‰" class="headerlink" title="1.Gitå®šä¹‰"></a>1.Gitå®šä¹‰</h4><p>gitçš„æœ¬è´¨å°±æ˜¯è¦å®ç°<strong>å¯¹æ–‡ä»¶å˜æ›´è¿‡ç¨‹çš„å­˜å‚¨</strong></p><p>Gitæ˜¯ä¸€ç§åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼š</p><ul><li>ç‰ˆæœ¬æ§åˆ¶ï¼šgitå¯ä»¥å¯¹æ–‡ä»¶<strong>å˜æ›´è¿‡ç¨‹</strong>è¿›è¡Œç®¡ç†ï¼Œéšæ—¶å¯ä»¥æ‹¿å‡ºæ‰€éœ€è¦çš„ç‰ˆæœ¬</li><li>åˆ†å¸ƒå¼ï¼šGitçš„æ•°æ®ä¸ä»…å­˜åœ¨<strong>è¿œç¨‹ä»“åº“</strong>ï¼ˆå³Gitå¹³å°çš„æœåŠ¡å™¨ï¼‰ï¼Œä¹Ÿå­˜åœ¨<strong>æœ¬åœ°ä»“åº“</strong>ï¼ˆå³é¡¹ç›®å¼€å‘è€…çš„æœ¬åœ°è®¡ç®—æœºï¼‰ï¼Œæ‰€ä»¥ç§°ä¸º<strong>åˆ†å¸ƒå¼</strong></li></ul><h4 id="2-GitåŠŸèƒ½åˆ—è¡¨"><a href="#2-GitåŠŸèƒ½åˆ—è¡¨" class="headerlink" title="2.GitåŠŸèƒ½åˆ—è¡¨"></a>2.GitåŠŸèƒ½åˆ—è¡¨</h4><ul><li>æˆ‘ä»¬å¯ä»¥ä¸ºæ¯ä¸€æ¬¡å˜æ›´æäº¤ç‰ˆæœ¬æ›´æ–°å¹¶ä¸”å¤‡æ³¨æ›´æ–°çš„å†…å®¹</li><li>æˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®çš„å„ä¸ªå†å²ç‰ˆæœ¬ä¹‹é—´è‡ªå¦‚åˆ‡æ¢</li><li>æˆ‘ä»¬å¯ä»¥ä¸€ç›®äº†ç„¶çš„æ¯”è¾ƒå‡ºä¸¤ä¸ªç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚</li><li>æˆ‘ä»¬å¯ä»¥ä»å½“å‰çš„ä¿®æ”¹ä¸­æ’¤é”€ä¸€äº›æ“ä½œ</li><li>æˆ‘ä»¬å¯ä»¥è‡ªå¦‚çš„åˆ›å»ºåˆ†æ”¯ã€åˆå¹¶åˆ†æ”¯</li><li>æˆ‘ä»¬å¯ä»¥å’Œå¤šäººåä½œå¼€å‘</li><li>æˆ‘ä»¬å¯ä»¥é‡‡å–è‡ªç”±å¤šæ ·çš„å¼€å‘æ¨¡å¼</li></ul><h4 id="3-GitåŸºæœ¬æœ¯è¯­"><a href="#3-GitåŸºæœ¬æœ¯è¯­" class="headerlink" title="3.GitåŸºæœ¬æœ¯è¯­"></a>3.GitåŸºæœ¬æœ¯è¯­</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111122058851.webp" alt="img"></p><ul><li><p>å·¥ä½œåŒºï¼šåœ¨ç¼–è¾‘å™¨å†…å¯å¢åŠ æˆ–ä¿®æ”¹æ–‡ä»¶ç­‰ä½ç½®</p></li><li><p>ç¼“å­˜åŒºï¼šæäº¤ä»£ç ï¼Œè§£å†³å†²çªçš„<strong>ä¸­è½¬ç«™</strong></p></li><li><p>ç‰ˆæœ¬åº“ï¼šæœ¬åœ°<code>.git/</code>ç›®å½•ï¼Œå†…å«<strong>ç¼“å­˜åŒº</strong></p></li><li><p>æœ¬åœ°ä»“åº“ï¼šè¿æ¥æœ¬åœ°ä»£ç å’Œè¿œç¨‹ä»£ç çš„<strong>æ¢çº½</strong>ï¼Œåœ¨æ²¡æœ‰è”ç½‘çŠ¶æ€ä¸‹ï¼Œæœ¬åœ°ä»£ç å¯å…ˆæäº¤è‡³è¯¥å¤„</p></li><li><p>è¿œç¨‹ä»“åº“ï¼šæ‰˜ç®¡è¿œç¨‹ä»£ç çš„<strong>ä¸­å¤®æœåŠ¡å™¨</strong></p></li></ul><h4 id="4-Gitæ‰˜ç®¡å¹³å°"><a href="#4-Gitæ‰˜ç®¡å¹³å°" class="headerlink" title="4.Gitæ‰˜ç®¡å¹³å°"></a>4.Gitæ‰˜ç®¡å¹³å°</h4><h5 id="ï¼ˆ1ï¼‰Github"><a href="#ï¼ˆ1ï¼‰Github" class="headerlink" title="ï¼ˆ1ï¼‰Github"></a>ï¼ˆ1ï¼‰Github</h5><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111171119482.png" alt="img" style="zoom:50%;"><p>ç½‘å€ï¼š<a href="https://github.com/">https://github.com/</a></p><p>Gihubæ˜¯å…¨çƒæœ€æµè¡Œçš„ä»£ç æ‰˜ç®¡å¹³å°ï¼Œæ‹¥æœ‰å¤§é‡éå¸¸çŸ¥åçš„å¼€æºé¡¹ç›®ã€‚githubçš„æœåŠ¡å™¨éƒ¨ç½²åœ¨å›½å¤–ï¼Œå›½å†…è®¿é—®ä¸å‹å¥½ï¼Œé€‚åˆç”¨äºå­¦ä¹ å’Œå¼€å‘å¼€æºé¡¹ç›®</p><h5 id="ï¼ˆ2ï¼‰Gitlab"><a href="#ï¼ˆ2ï¼‰Gitlab" class="headerlink" title="ï¼ˆ2ï¼‰Gitlab"></a>ï¼ˆ2ï¼‰Gitlab</h5><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111171119389.png" alt="img" style="zoom:67%;"><p>ç½‘å€ï¼š<a href="https://about.gitlab.com/">https://about.gitlab.com/</a></p><p>Gitlabæ”¯æŒå…è´¹æ­å»ºç§æœ‰åº“ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œå¯¹ä¼ä¸šçº§çš„å†…éƒ¨å¼€å‘å‹å¥½ï¼Œè¾ƒä¸ºç¬¨é‡ä¸é€‚åˆç”¨äºç®€å•é¡¹ç›®çš„æ­å»º</p><h5 id="ï¼ˆ3ï¼‰Gitee"><a href="#ï¼ˆ3ï¼‰Gitee" class="headerlink" title="ï¼ˆ3ï¼‰Gitee"></a>ï¼ˆ3ï¼‰Gitee</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111122135738.png" alt="logo_gitee_light (1)"></p><p>ç½‘å€ï¼š<a href="https://gitee.com/">https://gitee.com/</a></p><p>ä¿—ç§°ç äº‘ï¼Œå›½å†…çŸ¥åçš„åœ¨çº¿ä»£ç æ‰˜ç®¡å¹³å°ï¼ŒåŸºäºgitlab</p><h5 id="ï¼ˆ4ï¼‰Coding"><a href="#ï¼ˆ4ï¼‰Coding" class="headerlink" title="ï¼ˆ4ï¼‰Coding"></a>ï¼ˆ4ï¼‰Coding</h5><img src="https://assets.codehub.cn/resources/logo2-png.png" alt="img" style="zoom: 150%;"><p>ç½‘å€ï¼š<a href="https://coding.net/">https://coding.net/</a></p><p>Coding æ˜¯ä¸€ä¸ªé¢å‘å¼€å‘è€…çš„äº‘ç«¯å¼€å‘å¹³å°ï¼Œæä¾›git/svn ä»£ç æ‰˜ç®¡,å¹¶ä¸”é¢å‘ä¸ªäººæä¾›ç§æœ‰åº“ã€‚</p><p>å¯¹å›½å†…å°å›¢é˜Ÿå¼€å‘è¾ƒä¸ºå‹å¥½ï¼Œä¸ªäººæ¯”è¾ƒæ¨èï¼Œä¸‹é¢çš„ä¸€äº›æ“ä½œéƒ½ä¼šåŸºäºCodingå¹³å°</p><h3 id="Gitå¿«é€Ÿå…¥é—¨"><a href="#Gitå¿«é€Ÿå…¥é—¨" class="headerlink" title="Gitå¿«é€Ÿå…¥é—¨"></a>Gitå¿«é€Ÿå…¥é—¨</h3><h4 id="1-Gitå®‰è£…"><a href="#1-Gitå®‰è£…" class="headerlink" title="1.Gitå®‰è£…"></a>1.Gitå®‰è£…</h4><p>gitå®˜ç½‘åœ°å€ï¼š<a href="https://git-scm.com/">https://git-scm.com/</a></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111122216111.png" alt="image-20200629224316821"></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111122217579.png" alt="image-20200629224329147"></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111122217315.png" alt="image-20200629224339198"></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111122217952.png" alt="image-20200629224349811"></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111122217176.png" alt="image-20200629224400914"></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111122217277.png" alt="image-20200629224411947"></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111122217903.png" alt="image-20200629224425378"></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111122217019.png" alt="image-20200629224436646"></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111122217284.png" alt="image-20200629224446392"></p><h4 id="2-Gitå¯†é’¥"><a href="#2-Gitå¯†é’¥" class="headerlink" title="2.Gitå¯†é’¥"></a>2.Gitå¯†é’¥</h4><p>æœ¬åœ°ä»“åº“ä¸è¿œç¨‹ä»“åº“é€šè¿‡SSHå…¬ç§é’¥è¿›è¡Œèº«ä»½ç¡®è®¤ï¼Œ</p><h5 id="ï¼ˆ1ï¼‰ç”Ÿæˆå…¬é’¥"><a href="#ï¼ˆ1ï¼‰ç”Ÿæˆå…¬é’¥" class="headerlink" title="ï¼ˆ1ï¼‰ç”Ÿæˆå…¬é’¥"></a>ï¼ˆ1ï¼‰ç”Ÿæˆå…¬é’¥</h5><p>ç»ˆç«¯è¾“å…¥å‘½ä»¤ç”Ÿæˆå…¬é’¥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -o</span><br></pre></td></tr></table></figure><p>è¿ç»­ä¸‰æ¬¡å›è½¦ä½¿ç”¨é»˜è®¤è®¾ç½®</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111122334723.png" alt="image-20211112233436546"></p><h5 id="ï¼ˆ2ï¼‰æŸ¥çœ‹å…¬é’¥"><a href="#ï¼ˆ2ï¼‰æŸ¥çœ‹å…¬é’¥" class="headerlink" title="ï¼ˆ2ï¼‰æŸ¥çœ‹å…¬é’¥"></a>ï¼ˆ2ï¼‰æŸ¥çœ‹å…¬é’¥</h5><p>æ—è¾¹çš„id_rsaå­˜çš„å°±æ˜¯ç§é’¥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat ã€å…¬é’¥ä¿å­˜ä½ç½®ã€‘/id_rsa.pub</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111122342467.png" alt="image-20211112234254250"></p><h5 id="ï¼ˆ3ï¼‰ä¸Šä¼ å…¬é’¥"><a href="#ï¼ˆ3ï¼‰ä¸Šä¼ å…¬é’¥" class="headerlink" title="ï¼ˆ3ï¼‰ä¸Šä¼ å…¬é’¥"></a>ï¼ˆ3ï¼‰ä¸Šä¼ å…¬é’¥</h5><p>æ‰“å¼€codingçš„ä¸ªäººè®¾ç½®é¡µé¢å³å¯ä¸Šä¼ å…¬é’¥</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111122349256.png" alt="image-20211112234911836"></p><h5 id="ï¼ˆ4ï¼‰Gitè¿æ¥æµ‹è¯•"><a href="#ï¼ˆ4ï¼‰Gitè¿æ¥æµ‹è¯•" class="headerlink" title="ï¼ˆ4ï¼‰Gitè¿æ¥æµ‹è¯•"></a>ï¼ˆ4ï¼‰Gitè¿æ¥æµ‹è¯•</h5><p>é€šè¿‡ä»¥ä¸‹å‘½ä»¤å³å¯æµ‹è¯•sshè¿æ¥æ˜¯å¦æˆåŠŸï¼ˆç¬¬ä¸€æ¬¡è¿æ¥éœ€è¦ä¸€ä¸ªè¾“å…¥yesçš„æ­¥éª¤ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@e.coding.net</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111122355195.png" alt="image-20211112235520804"></p><h4 id="3-Gité¡¹ç›®åˆ›å»ºå®æˆ˜"><a href="#3-Gité¡¹ç›®åˆ›å»ºå®æˆ˜" class="headerlink" title="3.Gité¡¹ç›®åˆ›å»ºå®æˆ˜"></a>3.Gité¡¹ç›®åˆ›å»ºå®æˆ˜</h4><h5 id="ï¼ˆ1ï¼‰Codingä¸Šåˆ›å»ºé¡¹ç›®"><a href="#ï¼ˆ1ï¼‰Codingä¸Šåˆ›å»ºé¡¹ç›®" class="headerlink" title="ï¼ˆ1ï¼‰Codingä¸Šåˆ›å»ºé¡¹ç›®"></a>ï¼ˆ1ï¼‰Codingä¸Šåˆ›å»ºé¡¹ç›®</h5><p>ç‚¹å‡»åˆ›å»ºé¡¹ç›®</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111122358086.png" alt="image-20211112235849036"></p><p>é€‰æ‹©æ¨¡æ¿2ä¸­çš„ä»£ç æ‰˜ç®¡å³å¯</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111130004964.png" alt="image-20211113000450682"></p><p>å¡«å†™é¡¹ç›®åŸºæœ¬ä¿¡æ¯ï¼Œå³å¯å®Œæˆåˆ›å»º</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111130008061.png" alt="image-20211113000842644"></p><h5 id="ï¼ˆ2ï¼‰åˆ›å»ºä»£ç ä»“åº“"><a href="#ï¼ˆ2ï¼‰åˆ›å»ºä»£ç ä»“åº“" class="headerlink" title="ï¼ˆ2ï¼‰åˆ›å»ºä»£ç ä»“åº“"></a>ï¼ˆ2ï¼‰åˆ›å»ºä»£ç ä»“åº“</h5><p>åœ¨é¡¹ç›®ä¸‹åˆ›å»ºä»£ç ä»“åº“</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111130012170.png" alt="image-20211113001242845"></p><p>åŸºæœ¬è®¾ç½®å¦‚ä¸‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111130016365.png" alt="image-20211113001619059"></p><h5 id="ï¼ˆ3ï¼‰å°†é¡¹ç›®å…‹éš†åˆ°æœ¬åœ°"><a href="#ï¼ˆ3ï¼‰å°†é¡¹ç›®å…‹éš†åˆ°æœ¬åœ°" class="headerlink" title="ï¼ˆ3ï¼‰å°†é¡¹ç›®å…‹éš†åˆ°æœ¬åœ°"></a>ï¼ˆ3ï¼‰å°†é¡¹ç›®å…‹éš†åˆ°æœ¬åœ°</h5><p>å¤åˆ¶ä»“åº“çš„sshé“¾æ¥ï¼Œå°†ä¸€ä¸ªä»“åº“å†…çš„ä»£ç ä½¿ç”¨sshä¸‹è½½åˆ°æœ¬åœ°</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111130019611.png" alt="image-20211113001922314"></p><p>ç”µè„‘ä¸Šæ‰§è¡Œgit cloneå‘½ä»¤ï¼Œå°†è¿œç¨‹ä»“åº“å…‹éš†ä¸ºæœ¬åœ°ä»“åº“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone ã€SSHé“¾æ¥ã€‘</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111130044923.png" alt="image-20211113004407422"></p><p>æœ‰æ—¶ä¼šå‡ºç°ä¸‹è½½æ—¶æƒé™ä¸è¶³çš„æƒ…å†µï¼Œä½†æ˜¯sshçš„è¿æ¥æµ‹è¯•åˆèƒ½æˆåŠŸï¼Œè¿™æ—¶å€™å¯ä»¥å°è¯•ä¸€ä¸‹é‡æ–°æäº¤å…¬é’¥</p><p>è¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111130047475.png" alt="image-20211113004735237"></p><p>åœ¨git bashä¸‹å¯ä»¥çœ‹åˆ°Testæ–‡ä»¶æœ‰masterçš„ç¬¦å·</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111130048748.png" alt="image-20211113004836580"></p><h5 id="ï¼ˆ4ï¼‰è®¾ç½®ç­¾å"><a href="#ï¼ˆ4ï¼‰è®¾ç½®ç­¾å" class="headerlink" title="ï¼ˆ4ï¼‰è®¾ç½®ç­¾å"></a>ï¼ˆ4ï¼‰è®¾ç½®ç­¾å</h5><p>è®¾ç½®ç­¾åä»¥åŒºåˆ†ä¸åŒå¼€å‘è€…çš„èº«ä»½ï¼ˆä¸ä»£ç æ‰˜ç®¡ä¸­å¿ƒçš„è´¦å·ï¼Œå¯†ç æ— å…³ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config user.name &quot;Autovy&quot;</span><br><span class="line">git config user.email &quot;autovys@gmail.com&quot;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111130053370.png" alt="image-20211113005344281"></p><p>è®¾ç½®å®Œæˆåï¼Œå³å¯åœ¨é…ç½®æ–‡ä»¶çœ‹åˆ°ç›¸å…³ä¿¡æ¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat ./.git/config</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111130055517.png" alt="image-20211113005519211"></p><h5 id="ï¼ˆ5ï¼‰ä»£ç æäº¤æµç¨‹"><a href="#ï¼ˆ5ï¼‰ä»£ç æäº¤æµç¨‹" class="headerlink" title="ï¼ˆ5ï¼‰ä»£ç æäº¤æµç¨‹"></a>ï¼ˆ5ï¼‰ä»£ç æäº¤æµç¨‹</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111130117765.png" alt="img"></p><p>ä¿®æ”¹é¡¹ç›®æ–‡ä»¶</p><p>åˆ›å»ºä¸€ä¸ªhtmlæ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;test&quot; &gt; index.html</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹mdæ–‡ä»¶</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131044670.png" alt="image-20211113104443895"></p><p>å°†å·¥ä½œåŒºæ”¹åŠ¨å†…å®¹æäº¤åˆ°ç¼“å­˜åŒº</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add ./</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å·¥ä½œåŒºå’Œç¼“å­˜åŒºçŠ¶æ€</p><p>å¯ä»¥çœ‹åˆ°æ–‡ä»¶æ”¹åŠ¨æƒ…å†µ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111130109179.png" alt="image-20211113010859895"></p><p>å°†ç¼“å­˜åŒºçš„å†…å®¹æäº¤åˆ°æœ¬åœ°ä»“åº“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m &quot;v1.1ï¼šæ·»åŠ indexæ–‡ä»¶&quot;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111130111345.png" alt="image-20211113011106112"></p><p>æŸ¥çœ‹å†å²è®°å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111130112029.png" alt="image-20211113011224760"></p><p>å°†æœ¬åœ°ä»“åº“çš„å†…å®¹æ¨é€åˆ°è¿œç¨‹ä»“åº“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111130113789.png" alt="image-20211113011323568"></p><p>æœ€åå¯ä»¥çœ‹åˆ°Codingä»“åº“å˜åŒ–</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111130120323.png" alt="image-20211113012003368"></p><h3 id="Gité«˜çº§ä½¿ç”¨"><a href="#Gité«˜çº§ä½¿ç”¨" class="headerlink" title="Gité«˜çº§ä½¿ç”¨"></a>Gité«˜çº§ä½¿ç”¨</h3><h4 id="1-Gitç‰ˆæœ¬ç®¡ç†"><a href="#1-Gitç‰ˆæœ¬ç®¡ç†" class="headerlink" title="1.Gitç‰ˆæœ¬ç®¡ç†"></a>1.Gitç‰ˆæœ¬ç®¡ç†</h4><h5 id="ï¼ˆ1ï¼‰æ›´æ–°1-2ä¸ºæœ€æ–°ç‰ˆ"><a href="#ï¼ˆ1ï¼‰æ›´æ–°1-2ä¸ºæœ€æ–°ç‰ˆ" class="headerlink" title="ï¼ˆ1ï¼‰æ›´æ–°1.2ä¸ºæœ€æ–°ç‰ˆ"></a>ï¼ˆ1ï¼‰æ›´æ–°1.2ä¸ºæœ€æ–°ç‰ˆ</h5><p>é‡å¤ä¸Šé¢æ­¥éª¤ï¼Œä¿®æ”¹å¹¶æ›´æ–°index.htmlæ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim index.html</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111130856940.png" alt="image-20211113085631627"></p><p>ä¿®æ”¹mdä¸­çš„ç‰ˆæœ¬ä¿¡æ¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim README.md</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111130858725.png" alt="image-20211113085813333"></p><p>å°†1.2ç‰ˆæœ¬çš„ä»£ç æŒ‰æ­¥éª¤æäº¤åˆ°æœ¬åœ°ä»“åº“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git add ./</span><br><span class="line">git commit -m &quot;v1.2ï¼šå¢åŠ indexæ–‡ä»¶æ ‡é¢˜&quot;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå…ˆä¸æ¨é€è¿œç«¯ä»“åº“ï¼Œæ–¹ä¾¿åç»­åˆ‡æ¢ç‰ˆæœ¬</p><h5 id="ï¼ˆ2ï¼‰æŸ¥çœ‹æ—¥å¿—"><a href="#ï¼ˆ2ï¼‰æŸ¥çœ‹æ—¥å¿—" class="headerlink" title="ï¼ˆ2ï¼‰æŸ¥çœ‹æ—¥å¿—"></a>ï¼ˆ2ï¼‰æŸ¥çœ‹æ—¥å¿—</h5><p>git log æŸ¥çœ‹æäº¤æ—¥å¿—</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111130908924.png" alt="image-20211113090846535"></p><p>commitåé¢ä¸€å¤§æ®µçš„å­—ç¬¦ä¸²æ˜¯commit idï¼ˆç‰ˆæœ¬å·ï¼‰ï¼Œè¿™é‡Œ<code>HEAD</code>æ˜¯GitæŒ‡å‘å½“å‰ç‰ˆæœ¬çš„æŒ‡é’ˆï¼Œæ‰€ä»¥è¦åˆ‡æ¢ç‰ˆæœ¬å°±è¦ç§»åŠ¨<code>HEAD</code>åˆ°æŒ‡å®šç‰ˆæœ¬</p><h5 id="ï¼ˆ3ï¼‰ä¿®æ”¹æœªæ·»åŠ ç¼“å†²åŒº"><a href="#ï¼ˆ3ï¼‰ä¿®æ”¹æœªæ·»åŠ ç¼“å†²åŒº" class="headerlink" title="ï¼ˆ3ï¼‰ä¿®æ”¹æœªæ·»åŠ ç¼“å†²åŒº"></a>ï¼ˆ3ï¼‰ä¿®æ”¹æœªæ·»åŠ ç¼“å†²åŒº</h5><p>ä¿®æ”¹index.htmlæ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim index.html</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131239773.png" alt="image-20211113123920560"></p><p>åœ¨å¯¹æ–‡ä»¶ä½¿ç”¨<code>add ./</code>å°†é¡¹ç›®æ·»åŠ ç¼“å­˜åŒºä¹‹å‰ï¼Œæˆ‘åæ‚”äº†ï¼Œå†³å®šä¸¢å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹</p><p>æŸ¥çœ‹å½“å‰çŠ¶æ€,å¯ä»¥çœ‹åˆ°æç¤ºä½¿ç”¨<code>git restore</code>ä¸¢å¼ƒä¿®æ”¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131243158.png" alt="image-20211113124311037"></p><p>ä¸¢å¼ƒä¿®æ”¹å·¥ä½œåŒºçš„ä¿®æ”¹ï¼Œæ–‡ä»¶æ¢å¤åˆ°æœ€è¿‘ä¸€æ¬¡<code>git commit</code>æˆ–<code>git add</code>æ—¶çš„çŠ¶æ€</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git restore ./</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131245744.png" alt="image-20211113124505502"></p><h5 id="ï¼ˆ4ï¼‰ä¿®æ”¹æ·»åŠ åˆ°ç¼“å­˜åŒº"><a href="#ï¼ˆ4ï¼‰ä¿®æ”¹æ·»åŠ åˆ°ç¼“å­˜åŒº" class="headerlink" title="ï¼ˆ4ï¼‰ä¿®æ”¹æ·»åŠ åˆ°ç¼“å­˜åŒº"></a>ï¼ˆ4ï¼‰ä¿®æ”¹æ·»åŠ åˆ°ç¼“å­˜åŒº</h5><p>ä¿®æ”¹index.htmlæ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim index.html</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131239773.png" alt="image-20211113123920560"></p><p>æ·»åŠ ä¿®æ”¹åˆ°ç¼“å†²åŒº</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">add ./</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å½“å‰çŠ¶æ€,å¯ä»¥çœ‹åˆ°æç¤ºä½¿ç”¨<code>git restore --staged</code>ä¸¢å¼ƒç¼“å­˜å†…å®¹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131253728.png" alt="image-20211113125325665"></p><p>ä¸¢å¼ƒç¼“å­˜å†…å®¹åï¼Œå†æŒ‰ä¸Šä¸€ç§æƒ…å†µçš„æµç¨‹æ¢å¤å·¥ä½œåŒº</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git restore --staged ./</span><br><span class="line">git status</span><br><span class="line">git restore ./</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131257426.png" alt="image-20211113125708241"></p><h5 id="ï¼ˆ5ï¼‰ä¿®æ”¹æäº¤åˆ°æœ¬åœ°ä»“åº“"><a href="#ï¼ˆ5ï¼‰ä¿®æ”¹æäº¤åˆ°æœ¬åœ°ä»“åº“" class="headerlink" title="ï¼ˆ5ï¼‰ä¿®æ”¹æäº¤åˆ°æœ¬åœ°ä»“åº“"></a>ï¼ˆ5ï¼‰ä¿®æ”¹æäº¤åˆ°æœ¬åœ°ä»“åº“</h5><p>å°†ç‰ˆæœ¬å›é€€åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬å³1.1</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard HEAD^</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111130918240.png" alt="image-20211113091804033"></p><p>è¿™æ—¶æœ¬åœ°ä»“åº“å°±å›é€€åˆ°äº†1.1ç‰ˆæœ¬</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111130921002.png" alt="image-20211113092137541"></p><p>è¿™æ—¶å€™æŸ¥çœ‹git logï¼Œå¯ä»¥å‘ç°1.2çš„æäº¤è®°å½•å°±ç§»é™¤</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131027386.png" alt="image-20211113102703410"></p><p>å¦‚æœåˆéœ€è¦å›åˆ°1.2ç‰ˆæœ¬</p><p>å…ˆé€šè¿‡<code>git reflog</code>æŸ¥çœ‹å†å²å‘½ä»¤ï¼Œå¯ä»¥æ‰¾åˆ°1.2ç‰ˆæœ¬çš„id</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reflog</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131029910.png" alt="image-20211113102934666"></p><p>åŒæ ·å¯ä»¥ä½¿ç”¨git resetåˆ‡æ¢ç‰ˆæœ¬</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard ã€commit idã€‘</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131034955.png" alt="image-20211113103418305"></p><p>è¿™é‡Œçš„commit idä¸ç”¨å¡«å®Œæ•´ï¼Œå¡«åˆ°åé¢çš„å­—æ¯éƒ¨åˆ†</p><p>è¿™æ—¶æœ¬åœ°ä»“åº“åˆåˆ‡å›äº†1.2</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131035167.png" alt="image-20211113103512977"></p><p>ã€æ³¨æ„ã€‘</p><p>å¦‚æœå·²ç»å°†æœ€æ–°çš„ä»£ç æ¨é€è¿‡è¿œç«¯ä»“åº“ï¼ˆå³è¿œç«¯ä»“åº“æœ‰æœ€æ–°çš„ç‰ˆæœ¬ï¼Œè¦ä¿æŒæœ¬åœ°å’Œè¿œç«¯çš„èµ„æºä¸€è‡´ï¼‰ï¼Œä¼šæŠ¥ä»¥ä¸‹é”™è¯¯ã€</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131037463.png" alt="image-20211113103733311"></p><h5 id="ï¼ˆ6ï¼‰ä¿®æ”¹æ¨é€åˆ°è¿œç¨‹ä»“åº“"><a href="#ï¼ˆ6ï¼‰ä¿®æ”¹æ¨é€åˆ°è¿œç¨‹ä»“åº“" class="headerlink" title="ï¼ˆ6ï¼‰ä¿®æ”¹æ¨é€åˆ°è¿œç¨‹ä»“åº“"></a>ï¼ˆ6ï¼‰ä¿®æ”¹æ¨é€åˆ°è¿œç¨‹ä»“åº“</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git revert HEAD --edit //å¹¶ä¿®æ”¹æäº¤ä¿¡æ¯</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111130958874.png" alt="image-20211113095811776"></p><p>è¿™æ—¶åæŸ¥çœ‹è®°å½•git logï¼Œå¯ä»¥çœ‹åˆ°æ’¤é”€çš„æ“ä½œä¹Ÿè¢«è®°å½•å…¶ä¸­</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111130958447.png" alt="image-20211113095828085"></p><p>è¿™æ—¶æœ¬åœ°ä»“åº“å°±æ˜¯å›é€€åˆ°äº†ç‰ˆæœ¬1.1</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131003562.png" alt="image-20211113100356269"></p><p>ç›´æ¥æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼Œè¿œç¨‹ä»“åº“ä¹Ÿå›é€€åˆ°1.1ç‰ˆæœ¬</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131006709.png" alt="image-20211113100641582"></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131008429.png" alt="image-20211113100811889"></p><p>å¦‚æœæäº¤äº†1.1ç‰ˆæœ¬åï¼Œåˆéœ€è¦å›åˆ°1.2ç‰ˆæœ¬ï¼Œè¿™æ—¶å€™åªè¦æ’¤é”€æ‰å¯¹1.2çš„æ’¤é”€å³å¯</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131017882.png" alt="image-20211113101733694"></p><p>å†git pushæ¨é€åˆ°è¿œç¨‹ä»“åº“å³å¯</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131020252.png" alt="image-20211113102000137"></p><h5 id="ï¼ˆ7ï¼‰æ€»ç»“"><a href="#ï¼ˆ7ï¼‰æ€»ç»“" class="headerlink" title="ï¼ˆ7ï¼‰æ€»ç»“"></a>ï¼ˆ7ï¼‰æ€»ç»“</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131304234.webp" alt="img"></p><ul><li>å·¥ä½œåŒºä¿®æ”¹åï¼š<code>git restore ./</code>æ¢å¤å·¥ä½œåŒº</li><li><code>git add ./</code>æ·»åŠ åˆ°ç¼“å†²åŒºåï¼š<code>git restore --staged ./</code> æ¢å¤ç¼“å­˜åŒº</li><li><code>git commit</code>æäº¤åˆ°æœ¬åœ°ä»“åº“åï¼š<code>git reset --hard HEAD^</code>æ¢å¤ä¸Šä¸ªç‰ˆæœ¬åˆ°ç¼“å­˜åŒº</li><li><code>git push</code>æ¨é€åˆ°è¿œç¨‹ä»“åº“åï¼š<code>git revert HEAD --edit</code>æ’¤é”€ä¸Šä¸€ä¸ªæ¨é€æ“ä½œï¼Œå¹¶æ¢å¤åˆ°ç¼“å­˜åŒº</li></ul><h4 id="2-Gitåˆ†æ”¯ç®¡ç†"><a href="#2-Gitåˆ†æ”¯ç®¡ç†" class="headerlink" title="2.Gitåˆ†æ”¯ç®¡ç†"></a>2.Gitåˆ†æ”¯ç®¡ç†</h4><h5 id="ï¼ˆ1ï¼‰åˆ†æ”¯è§£å†³çš„é—®é¢˜"><a href="#ï¼ˆ1ï¼‰åˆ†æ”¯è§£å†³çš„é—®é¢˜" class="headerlink" title="ï¼ˆ1ï¼‰åˆ†æ”¯è§£å†³çš„é—®é¢˜"></a>ï¼ˆ1ï¼‰åˆ†æ”¯è§£å†³çš„é—®é¢˜</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131648459.png" alt="image-20200728190230431"></p><p>åŒæ—¶å¹¶è¡Œæ¨è¿›å¤šä¸ªåŠŸèƒ½å¼€å‘ï¼Œæé«˜å¼€å‘æ•ˆç‡</p><p>å„ä¸ªåˆ†æ”¯åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæŸä¸€ä¸ªåˆ†æ”¯å¼€å‘å¤±è´¥ï¼Œä¸ä¼šå¯¹å…¶ä»–åˆ†æ”¯æœ‰ä»»ä½•å½±å“ã€‚å¤±è´¥çš„åˆ†æ”¯åˆ é™¤é‡æ–°å¼€å§‹å³å¯</p><p>æœ€åå†å°†åˆ†æ”¯åˆå¹¶åˆ°masterä¸Š</p><p>åˆ†æ”¯ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131704793.png" alt="git-br-dev-fd"></p><p>åˆ†æ”¯çš„åˆå¹¶ï¼ˆé»˜è®¤å¿«é€Ÿæ¨¡å¼ï¼‰ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131704428.png" alt="git-br-ff-merge"></p><p>åˆ†æ”¯çš„åˆå¹¶ï¼ˆæ™®é€šæ¨¡å¼ï¼‰ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131923880.png" alt="git-no-ff-mode"></p><h5 id="ï¼ˆ2ï¼‰åˆ†æ”¯åŸºæœ¬æ“ä½œ"><a href="#ï¼ˆ2ï¼‰åˆ†æ”¯åŸºæœ¬æ“ä½œ" class="headerlink" title="ï¼ˆ2ï¼‰åˆ†æ”¯åŸºæœ¬æ“ä½œ"></a>ï¼ˆ2ï¼‰åˆ†æ”¯åŸºæœ¬æ“ä½œ</h5><p>åˆ›å»ºdevåˆ†æ”¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch dev</span><br></pre></td></tr></table></figure><p><code>git checkout -b dev</code>å¯ä»¥åˆ›å»ºå¹¶åˆ‡æ¢åˆ°devåˆ†æ”¯</p><p>æŸ¥çœ‹å½“å‰åˆ†æ”¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131739936.png" alt="image-20211113173909862"></p><p>å¯ä»¥çœ‹åˆ°devåˆ†æ”¯å·²ç»åˆ›å»ºæˆåŠŸäº†ï¼Œè€Œå½“å‰ä½äºmasteråˆ†æ”¯</p><p>åˆ‡æ¢åˆ°devåˆ†æ”¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git switch dev</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131741071.png" alt="image-20211113174105689"></p><p>ä¿®æ”¹æ–‡ä»¶å†…å®¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim README.md</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131743765.png" alt="image-20211113174328787"></p><p>å°†æœ€æ–°ä¿®æ”¹çš„å†…å®¹æäº¤åˆ°devåˆ†æ”¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git add ./</span><br><span class="line">git commit -m &quot;dev new test&quot;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131744195.png" alt="image-20211113174453991"></p><p>åˆ‡æ¢å›masteråˆ†æ”¯ï¼Œå¹¶æŸ¥çœ‹æ–‡ä»¶å†…å®¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git switch master</span><br><span class="line">cat README.md</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131747443.png" alt="image-20211113174734151"></p><p>å¯ä»¥çœ‹åˆ°ä¸»åˆ†æ”¯ä¸Šæ²¡æœ‰devçš„å†…å®¹</p><p>åˆå¹¶åˆ†æ”¯</p><p>åœ¨masteråˆ†æ”¯ä¸Šåˆå¹¶dev</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge dev</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131907625.png" alt="image-20211113190746514"></p><p>å¯ä»¥çœ‹åˆ°åœ¨devä¸Šçš„ä¿®æ”¹åœ¨masterä¸Šç”Ÿæ•ˆäº†</p><h5 id="ï¼ˆ3ï¼‰åˆ†æ”¯åˆå¹¶å†²çªé—®é¢˜"><a href="#ï¼ˆ3ï¼‰åˆ†æ”¯åˆå¹¶å†²çªé—®é¢˜" class="headerlink" title="ï¼ˆ3ï¼‰åˆ†æ”¯åˆå¹¶å†²çªé—®é¢˜"></a>ï¼ˆ3ï¼‰åˆ†æ”¯åˆå¹¶å†²çªé—®é¢˜</h5><p>å‰é¢çš„æƒ…å†µä¸­ï¼Œdevæ˜¯åœ¨masteråŸºç¡€ä¸Šçš„ï¼Œåˆå¹¶å‰masterå¹¶æ²¡æœ‰ä¿®æ”¹ï¼Œå¦‚æœmasterå†åˆå¹¶å‰ä¸devä¿®æ”¹äº†åŒä¸€è¡Œçš„å†…å®¹å°±ä¼šå‡ºç°å†²çª</p><p>å…ˆæ’¤é”€ä¸€ä¸‹åˆå¹¶</p><p>æŸ¥çœ‹å‘½ä»¤è®°å½•ï¼Œå¯ä»¥çœ‹åˆ°åˆå¹¶è®°å½•ä¸­åˆå¹¶çš„æ–¹å¼æ˜¯å¿«é€Ÿæ¨¡å¼ï¼ˆå³ç›´æ¥æŠŠ<code>master</code>æŒ‡å‘<code>dev</code>çš„å½“å‰æäº¤ï¼Œæ‰€ä»¥åˆå¹¶é€Ÿåº¦éå¸¸å¿«ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reflog</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131917856.png" alt="image-20211113191710611"></p><p>æ’¤é”€åˆå¹¶ï¼ˆæœªæ¨é€ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard HEAD^</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131928808.png" alt="image-20211113192813592"></p><p>ä¿®æ”¹masterå†…å®¹ï¼Œå¹¶æäº¤åˆ°æœ¬åœ°ä»“åº“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim README.md</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131936127.png" alt="image-20211113193624097"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git add ./</span><br><span class="line">git commit -m &quot;master new test&quot;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131933331.png" alt="image-20211113193330217"></p><p>å†æ¬¡åˆå¹¶devåˆ†æ”¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge dev</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å°±ä¼šå‡ºç°åˆå¹¶å†²çªçš„é—®é¢˜</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131937333.png" alt="image-20211113193742100"></p><p>è§£å†³å†²çª</p><p>ç¼–è¾‘README.mdæ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim README.md</span><br></pre></td></tr></table></figure><p>åˆ é™¤ç‰¹æ®Šç¬¦å·ï¼Œä¿®æ”¹å†…å®¹</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131948656.png" alt="image-20211113194812446"></p><p>ç„¶åæ­£å¸¸æäº¤åˆ°masteråˆ†æ”¯å³å¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git add ./</span><br><span class="line">git commit -m &quot;master+dev&quot;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131950140.png" alt="image-20211113195019152"></p><p>ä¸€èˆ¬æ¥è¯´ä¸ä¼šå†æœ¬åœ°ä»“åº“åº“å¯¹åˆ†æ”¯è¿›è¡Œåˆå¹¶ï¼Œè€Œæ˜¯åœ¨è¿œç¨‹çš„ä»£ç å¹³å°è¿›è¡Œåˆ†æ”¯çš„åˆå¹¶</p><p>æ¨é€å†…å®¹åˆ°master</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push </span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131954980.png" alt="image-20211113195444076"></p><p>ç”±äºè¿œç¨‹ä»“åº“è¿˜æ²¡æœ‰åˆ›å»ºdevåˆ†æ”¯ï¼Œæ‰€ä»¥æ¨é€æ—¶è¦åˆ›å»ºåˆ†æ”¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push --set-upstream origin dev</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å³å¯åœ¨Codingä¸Šçœ‹åˆ°ä¸¤ä¸ªåˆ†æ”¯äº†</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111131959633.png" alt="image-20211113195934598"></p><p>ä»£ç å¹³å°ä¸Šä¹Ÿå¯ä»¥åˆå¹¶åˆ†æ”¯ï¼Œå½“å¦‚æœæœ‰å†²çªå°±æ— æ³•åˆå¹¶</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111132004299.png" alt="image-20211113200419162"></p><h5 id="ï¼ˆ3ï¼‰åˆ†æ”¯ä¸­çš„å¤šäººåä½œ"><a href="#ï¼ˆ3ï¼‰åˆ†æ”¯ä¸­çš„å¤šäººåä½œ" class="headerlink" title="ï¼ˆ3ï¼‰åˆ†æ”¯ä¸­çš„å¤šäººåä½œ"></a>ï¼ˆ3ï¼‰åˆ†æ”¯ä¸­çš„å¤šäººåä½œ</h5><p>å‡†å¤‡wslæ¨¡æ‹Ÿå¦ä¸€å°ç”µè„‘ï¼Œä¸€ä¸ªæ–°çš„codingè´¦å·ï¼Œæ–°çš„codingè´¦å·æäº¤wslä¸­çš„sshï¼Œç„¶åä½¿ç”¨ä¸¤ä¸ªæµè§ˆå™¨ç™»å½•åˆ†åˆ«ç™»å½•ä¸¤ä¸ªè´¦å·</p><p>å°†ç¬¬äºŒä¸ªè´¦å·ï¼ˆäºŒå·æœºï¼‰é‚€è¯·åˆ°ä¸»è´¦å·çš„å›¢é˜Ÿä¸­</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111132151963.png" alt="image-20211113215154747"></p><p>å°†äºŒå·æœºæ‹‰å…¥é¡¹ç›®ä¸­</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111132153673.png" alt="image-20211113215314621"></p><p>äºŒå·æœºwslçœ‹åˆ°é¡¹ç›®åå…‹éš†é¡¹ç›®åˆ°æœ¬åœ°</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone git@e.coding.net:autovys/demo/Test.git</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111132157453.png" alt="image-20211113215727175"></p><p>è¿›å…¥ç›®å½•åæŸ¥çœ‹åˆ†æ”¯ï¼Œå¯ä»¥å‘ç°åªèƒ½çœ‹åˆ°masteråˆ†æ”¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111132201201.png" alt="image-20211113220115181"></p><p>äºŒå·æœºè¦åœ¨devåŸºç¡€ä¸Šè¿›è¡Œå¼€å‘ï¼Œå°±è¦åˆ›å»ºè¿œç¨‹<code>origin</code>çš„<code>dev</code>åˆ†æ”¯åˆ°æœ¬åœ°</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b dev origin/dev</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111132204477.png" alt="image-20211113220445123"></p><p>äºŒå·æœºåœ¨devåŸºç¡€ä¸Šä¿®æ”¹äº†æ–‡ä»¶å†…å®¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim README.md</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111132210496.png" alt="image-20211113221049407"></p><p>å¹¶ä¸”äºŒå·æœºè¿˜æ¨é€åˆ°äº†è¿œç¨‹ä»“åº“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add ./</span><br><span class="line">git commit -m&quot;edit something&quot;</span><br><span class="line">git push</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111132214127.png" alt="image-20211113221447824"></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111132216488.png" alt="image-20211113221631576"></p><p>è¿™æ—¶ä¸€å·æœºä¹Ÿè¦å¯¹åŒæ ·çš„æ–‡ä»¶ä¿®æ”¹ä¸€äº›å†…å®¹ï¼Œå¹¶å°è¯•æ¨é€åˆ°devåˆ†æ”¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git switch dev</span><br><span class="line">vim README.md</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111132236484.png" alt="image-20211113223622153"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add ./</span><br><span class="line">git commit -m &quot;add someting&quot;</span><br><span class="line">git push</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111132238492.png" alt="image-20211113223826310"></p><p>å¯ä»¥å‘ç°è¿œç¨‹æ¨é€å¤±è´¥äº†ï¼Œå› ä¸ºäºŒå·æœºçš„æœ€æ–°æäº¤å’Œæˆ‘æ¨é€çš„æäº¤æœ‰å†²çª</p><p>è¿™æ—¶å°±éœ€è¦å…ˆ<code>git pull</code>æŠŠæœ€æ–°çš„æäº¤ä»<code>origin/dev</code>æŠ“ä¸‹æ¥ï¼Œç„¶åï¼Œåœ¨æœ¬åœ°åˆå¹¶ï¼Œè§£å†³å†²çªï¼Œå†æ¨é€</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111132242133.png" alt="image-20211113224245383"></p><p>è¿™æ—¶å€™è§£å†³çš„æ–¹æ³•å’Œåˆ†æ”¯ç®¡ç†ä¸­çš„è§£å†³å†²çªå®Œå…¨ä¸€æ ·</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111132245482.png" alt="image-20211113224352026"></p><p>ç¼–è¾‘README.mdæ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim README.md</span><br></pre></td></tr></table></figure><p>åˆ é™¤ç‰¹æ®Šç¬¦å·ï¼Œä¿®æ”¹å†…å®¹</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111132246382.png" alt></p><p>ç„¶åæ­£å¸¸æäº¤åˆ°devåˆ†æ”¯å³å¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add ./</span><br><span class="line">git commit -m &quot;dev lastest&quot;</span><br><span class="line">git push</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111132248140.png" alt="image-20211113224806916"></p><h3 id="IDEAä¸­çš„Git"><a href="#IDEAä¸­çš„Git" class="headerlink" title="IDEAä¸­çš„Git"></a>IDEAä¸­çš„Git</h3><h4 id="1-åŸºæœ¬ä»£ç æäº¤æµç¨‹"><a href="#1-åŸºæœ¬ä»£ç æäº¤æµç¨‹" class="headerlink" title="1.åŸºæœ¬ä»£ç æäº¤æµç¨‹"></a>1.åŸºæœ¬ä»£ç æäº¤æµç¨‹</h4><h5 id="ï¼ˆ1ï¼‰åˆ›å»ºç©ºé¡¹ç›®"><a href="#ï¼ˆ1ï¼‰åˆ›å»ºç©ºé¡¹ç›®" class="headerlink" title="ï¼ˆ1ï¼‰åˆ›å»ºç©ºé¡¹ç›®"></a>ï¼ˆ1ï¼‰åˆ›å»ºç©ºé¡¹ç›®</h5><p>åœ¨Codingä¸Šåˆ›å»ºæ–°çš„ç©ºçš„ä»£ç ä»“åº“</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111151520287.png" alt="image-20211115152050857"></p><p>ideaå…‹éš†é¡¹ç›®åˆ°æœ¬åœ°</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111151538447.png" alt="image-20211115153822099"></p><p>å¡«å†™è¿œç¨‹ä»“åº“çš„SSHåœ°å€å’Œä¸‹è½½çš„æœ¬åœ°ä½ç½®å®Œæˆä¸‹è½½</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111151539643.png" alt="image-20211115153943646"></p><h5 id="ï¼ˆ2ï¼‰IDEAæ‰“å¼€é¡¹ç›®æ–‡ä»¶"><a href="#ï¼ˆ2ï¼‰IDEAæ‰“å¼€é¡¹ç›®æ–‡ä»¶" class="headerlink" title="ï¼ˆ2ï¼‰IDEAæ‰“å¼€é¡¹ç›®æ–‡ä»¶"></a>ï¼ˆ2ï¼‰IDEAæ‰“å¼€é¡¹ç›®æ–‡ä»¶</h5><p>IDEAæ‰“å¼€é¡¹ç›®æ–‡ä»¶åï¼Œå¯ä»¥çœ‹åˆ°IDEAè‡ªåŠ¨è¯†åˆ«äº†gitï¼Œå‡ºç°äº†ä»¥ä¸‹çš„ä¸€äº›å·¥å…·</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111151525037.png" alt="image-20211115152526919"></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111151525272.png" alt="image-20211115152549962"></p><h5 id="ï¼ˆ3ï¼‰ä»£ç æäº¤æµç¨‹"><a href="#ï¼ˆ3ï¼‰ä»£ç æäº¤æµç¨‹" class="headerlink" title="ï¼ˆ3ï¼‰ä»£ç æäº¤æµç¨‹"></a>ï¼ˆ3ï¼‰ä»£ç æäº¤æµç¨‹</h5><p>ä¿®æ”¹README.mdæ–‡ä»¶å¦‚ä¸‹ï¼Œå³åœ¨å·¥ä½œåŒºæ”¹åŠ¨äº†ä»£ç </p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111151547945.png" alt="image-20211115154732860"></p><p>å°†ä»£ç æ·»åŠ åˆ°ç¼“å†²åŒºï¼ˆ<strong>git add ./</strong>ï¼‰ï¼Œè¿™ä¸€æ­¥å¯ä»¥çœç•¥ï¼Œç›´æ¥æäº¤ideaä¼šå¸®ä½ åšè¿™ä¸€æ­¥æ“ä½œ</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111151552952.png" alt="image-20211115155242753"></p><p>æäº¤ä»£ç åˆ°æœ¬åœ°ä»“åº“ï¼Œæ³¨æ„å¡«å†™æäº¤ä¿¡æ¯ï¼ˆ<code>git commit -m &quot;message&quot;</code>ï¼‰</p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111171119189.png" alt="image-20211115155909225" style="zoom:67%;"><p>æœ€åæ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼Œå³å®Œæˆä¸€æ¬¡ä»£ç æäº¤ï¼ˆ<code>git push</code>ï¼‰</p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111171120093.png" alt="image-20211115160154599" style="zoom:67%;"><p>å…³äºæäº¤çš„ä¸€äº›ä¿¡æ¯æˆ‘ä»¬éƒ½å¯ä»¥åœ¨gitå·¥å…·æ çš„æ§åˆ¶å°è¿›è¡ŒæŸ¥çœ‹ï¼Œå¯ä»¥çœ‹åˆ°gitå·¥å…·çš„æ§åˆ¶å°å¸®æˆ‘ä»¬è¾“å…¥çš„å‘½ä»¤å†…å®¹</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111151604019.png" alt="image-20211115160454918"></p><h4 id="2-Gitç‰ˆæœ¬ç®¡ç†"><a href="#2-Gitç‰ˆæœ¬ç®¡ç†" class="headerlink" title="2.Gitç‰ˆæœ¬ç®¡ç†"></a>2.Gitç‰ˆæœ¬ç®¡ç†</h4><h5 id="ï¼ˆ1ï¼‰æ›´æ–°ç‰ˆæœ¬åˆ°1-2"><a href="#ï¼ˆ1ï¼‰æ›´æ–°ç‰ˆæœ¬åˆ°1-2" class="headerlink" title="ï¼ˆ1ï¼‰æ›´æ–°ç‰ˆæœ¬åˆ°1.2"></a>ï¼ˆ1ï¼‰æ›´æ–°ç‰ˆæœ¬åˆ°1.2</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111151607155.png" alt="image-20211115160753928"></p><h5 id="ï¼ˆ2ï¼‰æŸ¥çœ‹æäº¤æ—¥å¿—"><a href="#ï¼ˆ2ï¼‰æŸ¥çœ‹æäº¤æ—¥å¿—" class="headerlink" title="ï¼ˆ2ï¼‰æŸ¥çœ‹æäº¤æ—¥å¿—"></a>ï¼ˆ2ï¼‰æŸ¥çœ‹æäº¤æ—¥å¿—</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111151609447.png" alt="image-20211115160933261"></p><p>å¯ä»¥çœ‹åˆ°ideaä½¿ç”¨gitä¸éœ€è¦è®¾ç½®ç­¾åï¼Œè€Œæ˜¯é»˜è®¤ä½¿ç”¨äº†è¿œç¨‹ä»“åº“å¹³å°çš„æ³¨å†Œä¿¡æ¯</p><h5 id="ï¼ˆ3ï¼‰ä¿®æ”¹æœªæ·»åŠ ç¼“å†²åŒº-1"><a href="#ï¼ˆ3ï¼‰ä¿®æ”¹æœªæ·»åŠ ç¼“å†²åŒº-1" class="headerlink" title="ï¼ˆ3ï¼‰ä¿®æ”¹æœªæ·»åŠ ç¼“å†²åŒº"></a>ï¼ˆ3ï¼‰ä¿®æ”¹æœªæ·»åŠ ç¼“å†²åŒº</h5><p>ä»£ç æœªæ·»åŠ åˆ°ç¼“å†²åŒºï¼Œéœ€è¦æ¢å¤å·¥ä½œåŒºçš„å†…å®¹ï¼ˆç®€å•å‘€ï¼Œç–¯ç‹‚ctrl + Z ğŸ˜ï¼‰</p><p>å¯ä»¥ä½¿ç”¨å›æ»šï¼Œå³å¯æ¢å¤åˆ°æœ€è¿‘ä¸€æ¬¡<code>git commit</code>æˆ–<code>git add</code>æ—¶çš„çŠ¶æ€</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111151615806.png" alt="image-20211115161519696"></p><h5 id="ï¼ˆ4ï¼‰ä¿®æ”¹æ·»åŠ åˆ°ç¼“å­˜åŒº-1"><a href="#ï¼ˆ4ï¼‰ä¿®æ”¹æ·»åŠ åˆ°ç¼“å­˜åŒº-1" class="headerlink" title="ï¼ˆ4ï¼‰ä¿®æ”¹æ·»åŠ åˆ°ç¼“å­˜åŒº"></a>ï¼ˆ4ï¼‰ä¿®æ”¹æ·»åŠ åˆ°ç¼“å­˜åŒº</h5><p>ç‰ˆæœ¬1.2å·²ç»æ·»åŠ åˆ°äº†ç¼“å­˜åŒºï¼ŒåŒæ ·å¯ä»¥é€šè¿‡ä¸Šé¢çš„æ–¹æ³•æ¢å¤å·¥ä½œåŒº</p><h5 id="ï¼ˆ5ï¼‰ä¿®æ”¹æäº¤åˆ°æœ¬åœ°ä»“åº“-1"><a href="#ï¼ˆ5ï¼‰ä¿®æ”¹æäº¤åˆ°æœ¬åœ°ä»“åº“-1" class="headerlink" title="ï¼ˆ5ï¼‰ä¿®æ”¹æäº¤åˆ°æœ¬åœ°ä»“åº“"></a>ï¼ˆ5ï¼‰ä¿®æ”¹æäº¤åˆ°æœ¬åœ°ä»“åº“</h5><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111171120642.png" alt="image-20211115162500521" style="zoom:67%;"><p>è¿™æ—¶å€™å¯ä»¥çœ‹åˆ°å›æ»šçš„æŒ‰é’®å˜ç°äº†ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥æ‰“å¼€gitå·¥å…·åŒºå¯¹masteråˆ†æ”¯è¿›è¡Œæ“ä½œï¼Œideaæä¾›äº†ä¸‰ç§è¿˜åŸçš„æ–¹æ³•ï¼Œéƒ½å¯ä»¥è®©æˆ‘ä»¬æ¢å¤1.1ç‰ˆæœ¬</p><p>è¿˜åŸæäº¤ï¼Œæ˜¯å¤šåŠ ä¸€æ­¥æ’¤é”€çš„æ“ä½œï¼Œæ¢å¤å†…å®¹åˆ°æœ¬åœ°ä»“åº“ï¼Œå¯ä»¥ç›´æ¥æäº¤</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111151635193.png" alt="image-20211115163502070"></p><p>æ’¤é”€æäº¤ï¼Œæ˜¯è®©1.2ç‰ˆæœ¬æ¢å¤åˆ°ç¼“å­˜åŒºï¼Œè¿™æ—¶å€™å¯ä»¥é€šè¿‡å›æ»šæ¢å¤åˆ°1.1ç‰ˆæœ¬</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111151638218.png" alt="image-20211115163801094"></p><p>åˆ é™¤æäº¤ï¼Œç›´æ¥æ¢å¤1.1ç‰ˆæœ¬åˆ°å·¥ä½œåŒº</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111151642751.png" alt="image-20211115164217388"></p><p>æ‰€ä»¥æ¨èä½¿ç”¨<strong>è¿˜åŸæäº¤</strong>ï¼Œå¦‚æœè¦ä¸¢å¼ƒçš„ç‰ˆæœ¬å°±ä½¿ç”¨<strong>åˆ é™¤æäº¤</strong>ï¼Œå¦åˆ™ideaæ— æ³•æ¢å¤å·²<strong>æ’¤é”€</strong>æˆ–<strong>åˆ é™¤</strong>çš„æäº¤ï¼ˆå‘½ä»¤è¡Œå¯ä»¥æ¢å¤ï¼‰</p><h5 id="ï¼ˆ6ï¼‰ä¿®æ”¹æ¨é€åˆ°è¿œç¨‹ä»“åº“-1"><a href="#ï¼ˆ6ï¼‰ä¿®æ”¹æ¨é€åˆ°è¿œç¨‹ä»“åº“-1" class="headerlink" title="ï¼ˆ6ï¼‰ä¿®æ”¹æ¨é€åˆ°è¿œç¨‹ä»“åº“"></a>ï¼ˆ6ï¼‰ä¿®æ”¹æ¨é€åˆ°è¿œç¨‹ä»“åº“</h5><p>æ¨é€åˆ°è¿œç¨‹ä»“åº“åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åªå‰©ä¸‹è¿˜åŸæäº¤å¯ä»¥ä½¿ç”¨äº†ï¼Œæ•ˆæœå’Œä¸Šé¢çš„ä¸€æ ·</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111151654101.png" alt="image-20211115165440862"></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111151655427.png" alt="image-20211115165553230"></p><p>ideaè¿˜æä¾›äº†å°†<strong>å½“å‰åˆ†æ”¯é‡ç½®åˆ°æ­¤å¤„</strong>çš„åŠŸèƒ½ï¼Œå…¶ç›¸å½“äºè¿›è¡Œå¤šæ¬¡çš„<strong>åˆ é™¤æäº¤</strong>æ“ä½œã€‚åœ¨ä¿®æ”¹å·²æäº¤åˆ°æœ¬åœ°ä»“åº“çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥å¼€å§‹å›æº¯åˆ°é€‰æ‹©çš„ç‰ˆæœ¬ï¼›åœ¨ä¿®æ”¹å·²æ¨é€åˆ°è¿œç¨‹çš„æƒ…å†µä¸‹å¯èƒ½ä¼šé€ æˆ<strong>å†²çª</strong>é—®é¢˜ï¼Œæ‰€ä»¥è¯¥åŠŸèƒ½æ…é‡ä½¿ç”¨</p><p>â€‹    <img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111171119727.png" alt="image-20211115172549467">)<img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111171119566.png" alt="image-20211115173345841"></p><h5 id="ï¼ˆ7ï¼‰è¿˜åŸæäº¤çš„é—®é¢˜"><a href="#ï¼ˆ7ï¼‰è¿˜åŸæäº¤çš„é—®é¢˜" class="headerlink" title="ï¼ˆ7ï¼‰è¿˜åŸæäº¤çš„é—®é¢˜"></a>ï¼ˆ7ï¼‰è¿˜åŸæäº¤çš„é—®é¢˜</h5><p>è¿˜åŸæäº¤ä¹Ÿå¯ä»¥è¿˜åŸæ›´è¿œçš„ç‰ˆæœ¬ï¼Œä½†æ˜¯ä¼šå‡ºç°å†²çªé—®é¢˜ï¼Œ</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111152003466.png" alt="image-20211115200310949"></p><p>æ¥æ”¶ä»–ä»¬çš„åˆ™å›æ»šåˆ°å¯¹åº”ç‰ˆæœ¬ï¼Œåˆå¹¶åˆ™è§£å†³ä¸¤ä¸ªä¿®æ”¹çš„å†²çª</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111171119845.png" alt="image-20211115200355899"></p><p>åˆå¹¶çš„é¡µé¢å¦‚ä¸‹ï¼Œç‚¹å‡»ç®­å¤´å³å¯è‡ªåŠ¨ä¿®æ”¹å†²çªç‚¹</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111152005861.png" alt="image-20211115200459979"></p><h4 id="3-Gitåˆ†æ”¯ç®¡ç†"><a href="#3-Gitåˆ†æ”¯ç®¡ç†" class="headerlink" title="3.Gitåˆ†æ”¯ç®¡ç†"></a>3.Gitåˆ†æ”¯ç®¡ç†</h4><h5 id="ï¼ˆ1ï¼‰åˆ†æ”¯åŸºæœ¬æ“ä½œ"><a href="#ï¼ˆ1ï¼‰åˆ†æ”¯åŸºæœ¬æ“ä½œ" class="headerlink" title="ï¼ˆ1ï¼‰åˆ†æ”¯åŸºæœ¬æ“ä½œ"></a>ï¼ˆ1ï¼‰åˆ†æ”¯åŸºæœ¬æ“ä½œ</h5><p>åˆ›å»ºåˆ†æ”¯dev</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111152012354.png" alt="image-20211115201204089"></p><p>gitå·¥ä½œåŒºå³é”®é€‰æ‹©åˆ†æ”¯<strong>ç­¾å‡º</strong>ï¼ˆcheckout,ä»€ä¹ˆé“¸å¸ç¿»è¯‘ï¼‰å³å¯åˆ‡æ¢åˆ†æ”¯ï¼Œæ³¨æ„è®°å¾—å…ˆåˆ‡æ¢å¥½åˆ†æ”¯å†å¯¹æäº¤çš„è·¯å¾„å›¾è¿›è¡Œæ“ä½œï¼Œå¦åˆ™å®ƒæäº¤çš„åˆ°çš„æ˜¯å½“å‰çš„åˆ†æ”¯ï¼Œå³ä¾¿æ˜¯åœ¨å¦ä¸€æ¡åˆ†æ”¯ä¸Šåšçš„æ“ä½œ</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111152025323.png" alt="image-20211115202549168"></p><p>è¿™é‡Œåœ¨devä¸Šæ“ä½œçš„è¿˜åŸæäº¤ä¼šè¢«æäº¤ç»™masterï¼Œæ‰€ä»¥è¦è®°å¾—åˆ‡æ¢åˆ†æ”¯ï¼ˆè¿™ç®—ä¸ç®—ä¸€ä¸ªå°bugå‘¢ï¼Ÿï¼‰ï¼Œå¦å¤–è¦åˆ é™¤ä¸€ä¸ªåˆ†æ”¯æ—¶ä¹Ÿè¦å…ˆåˆ‡æ¢åˆ°å…¶ä»–åˆ†æ”¯</p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111171120317.png" alt="image-20211115203232293" style="zoom:67%;"><p>ä¿®æ”¹æ–‡ä»¶æäº¤åˆ°dev</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111152014852.png" alt="image-20211115201418871"></p><p>ç›´æ¥é€‰æ‹©æ¨é€ï¼Œè¿œç¨‹ä»“åº“å°±å¯ä»¥å‘ç°devåˆ†æ”¯è¢«åˆ›å»ºå¥½äº†</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111152156328.png" alt="image-20211115215649882"></p><p>åˆå¹¶masterå’Œdevåˆ†æ”¯ï¼Œå½“å‰é€‰æ‹©çš„æ˜¯masteråˆ†æ”¯ï¼Œæ‰€ä»¥é€‰æ‹©å°†<strong>å½“å‰åˆå¹¶åˆ°å·²é€‰æ‹©</strong>ï¼ˆæ¸£ç¿»ks8ï¼‰å³ä¸ºå°†devåˆå¹¶åˆ°master</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111152143774.png" alt="image-20211115214311537"></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111152145633.png" alt="image-20211115214548426"></p><h5 id="ï¼ˆ2ï¼‰åˆ†æ”¯åˆå¹¶å†²çªé—®é¢˜"><a href="#ï¼ˆ2ï¼‰åˆ†æ”¯åˆå¹¶å†²çªé—®é¢˜" class="headerlink" title="ï¼ˆ2ï¼‰åˆ†æ”¯åˆå¹¶å†²çªé—®é¢˜"></a>ï¼ˆ2ï¼‰åˆ†æ”¯åˆå¹¶å†²çªé—®é¢˜</h5><p>å…ˆåˆ é™¤åˆå¹¶çš„æäº¤æ¢å¤masterï¼Œä¿®æ”¹masterçš„æ–‡ä»¶å¹¶æäº¤</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111152148111.png" alt="image-20211115214855710"></p><p>è¿™æ—¶å€™åˆå¹¶å°±ä¼šå‡ºç°åˆå¹¶å†²çªç°è±¡</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111152151512.png" alt="image-20211115215121774"></p><p>å‰é¢ä¸¤ä¸ªæ˜¯å¯¹masterä¿®æ”¹çš„å†…å®¹ä¸devä¿®æ”¹çš„å†…å®¹åšä¸€ä¸ªé€‰æ‹©ï¼Œé€‰æ‹©åˆå¹¶åˆ™éœ€è¦æ‰‹åŠ¨ä¿®æ”¹è§£å†³å†²çª</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111152153800.png" alt="image-20211115215351531"></p><p>ç‚¹å‡»ç®­å¤´å³å¯åˆå¹¶ä¿®æ”¹</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111152154978.png" alt="image-20211115215421974"></p><h5 id="ï¼ˆ3ï¼‰åˆ†æ”¯ä¸­çš„å¤šäººåä½œ-1"><a href="#ï¼ˆ3ï¼‰åˆ†æ”¯ä¸­çš„å¤šäººåä½œ-1" class="headerlink" title="ï¼ˆ3ï¼‰åˆ†æ”¯ä¸­çš„å¤šäººåä½œ"></a>ï¼ˆ3ï¼‰åˆ†æ”¯ä¸­çš„å¤šäººåä½œ</h5><p>æ¨é€ä¸Šé¢ä¿®æ”¹çš„masteråˆ†æ”¯å’Œdevåˆ†æ”¯ï¼Œç„¶ååˆ é™¤æœ¬åœ°é¡¹ç›®æ–‡ä»¶ï¼ˆå³åˆ é™¤äº†æœ¬åœ°ä»“åº“ï¼‰ï¼Œè¿›è¡Œä¸€æ¬¡remake</p><p>é‡æ–°ä½¿ç”¨ideaå…‹éš†é¡¹ç›®åˆ°æœ¬åœ°ï¼Œå¯ä»¥çœ‹åˆ°æœ¬åœ°åªæ‹‰å–äº†masteråˆ†æ”¯</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111152204429.png" alt="image-20211115220444280"></p><p>è¿™æ—¶å€™å°±éœ€è¦å³é”®ç‚¹å‡»è¿œç¨‹çš„åˆ†æ”¯ï¼Œæ–°å»ºdevåˆ†æ”¯åˆ°æœ¬åœ°</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111152207194.png" alt="image-20211115220650353"></p><p>åœ¨Codingå¹³å°ä¸Šæ”¹åŠ¨devåˆ†æ”¯çš„æ–‡ä»¶ï¼Œæ¨¡æ‹Ÿå¦ä¸€ä¸ªå¼€å‘äººå‘˜åœ¨ååŒå¼€å‘çš„æƒ…å†µä¸‹ä¿®æ”¹äº†æ–‡ä»¶</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111152210219.png" alt="image-20211115221009031"></p><p>è¿™æ—¶å€™æˆ‘ä»¬åœ¨æœ¬åœ°ä¹Ÿä¿®æ”¹äº†devåˆ†æ”¯æ–‡ä»¶å¹¶æ¨é€</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111152212003.png" alt="image-20211115221205796"></p><p>è¿™æ—¶å€™ideaä¼šæœ‰å¼¹çª—æé†’<strong>æ¨é€è¢«æ‹’ç»</strong>ï¼Œå¹¶åœ¨æ§åˆ¶å°æé†’ä½ ç”¨<code>git pull</code></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111152213026.png" alt="image-20211115221318639"></p><p>ideaæ˜¯æœ‰git pull è¿™ä¸ªæŒ‰é’®çš„</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111152216055.png" alt="image-20211115221609871"></p><p>ä½†æ˜¯ç‚¹å‡»æ›´æ–°åˆ°devæ—¶ï¼Œä¼šæç¤ºä½ æœ¬åœ°çš„devæ²¡æœ‰è¿½è¸ªè¿œç¨‹çš„åˆ†æ”¯</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111152217453.png" alt="image-20211115221717207"></p><p>ç‚¹å‡»æç¤ºé€‰æ‹©ä¸Šæ¸¸åˆ†æ”¯åŒæ­¥è¿œç¨‹çš„devåˆ†æ”¯å³å¯</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111152218528.png" alt="image-20211115221849343"></p><p>å¦‚æœå…¶ä»–å¼€å‘è€…æ–°çš„æ›´æ–°å’Œæˆ‘æ›´æ–°çš„æœ‰å†²çªï¼Œè¿™æ—¶å€™å°±æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„å†²çªé¡µé¢å•¦</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111152219333.png" alt="image-20211115221925143"></p><p>è§£å†³å†²çªåæˆ‘ä»¬å°±å¯ä»¥æ¨é€æœ€æ–°ç‰ˆåˆ°è¿œç¨‹ä»“åº“äº†ï¼Œè¿™æ ·çš„æœºåˆ¶ä¿è¯äº†gitååŒå¼€å‘çš„å¯èƒ½æ€§</p><h3 id="GitåŸç†"><a href="#GitåŸç†" class="headerlink" title="GitåŸç†"></a>GitåŸç†</h3><p><strong>Gitæœ¬è´¨æ˜¯ä¸€ä¸ªå†…å®¹å¯»å€çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå…¶æ¬¡æ‰æ˜¯ä¸€ä¸ªç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ</strong></p><p>æ¯æ¬¡æˆ‘ä»¬è¿è¡Œ <code>git add</code> å’Œ <code>git commit</code> å‘½ä»¤æ—¶ï¼Œ Git æ‰€åšçš„å®è´¨å·¥ä½œæ˜¯å°†è¢«æ”¹å†™çš„æ–‡ä»¶ä¿å­˜ä¸º<strong>æ•°æ®å¯¹è±¡</strong>ï¼Œæ›´æ–°æš‚å­˜åŒºï¼Œè®°å½•<strong>æ ‘å¯¹è±¡</strong>ï¼Œæœ€ååˆ›å»ºä¸€ä¸ªæŒ‡æ˜äº†é¡¶å±‚æ ‘å¯¹è±¡å’Œçˆ¶æäº¤çš„<strong>æäº¤å¯¹è±¡</strong></p><p>Gitçš„æ ¸å¿ƒæ˜¯å®ƒçš„å¯¹è±¡æ•°æ®åº“ï¼ˆ<strong>.git/objects</strong>æ–‡ä»¶ï¼‰ï¼Œå…¶ä¸­ä¿å­˜ç€gitçš„å¯¹è±¡ï¼š</p><ul><li><strong>blobå¯¹è±¡</strong>ï¼šå®ç°äº†å¯¹æ–‡ä»¶å†…å®¹çš„è®°å½•</li><li><strong>treeå¯¹è±¡</strong>ï¼šå®ç°äº†å¯¹æ–‡ä»¶åã€æ–‡ä»¶ç›®å½•ç»“æ„çš„è®°å½•</li><li><strong>commitå¯¹è±¡</strong>ï¼šå®ç°äº†å¯¹ç‰ˆæœ¬æäº¤æ—¶é—´ã€ç‰ˆæœ¬ä½œè€…ã€ç‰ˆæœ¬åºåˆ—ã€ç‰ˆæœ¬è¯´æ˜ç­‰é™„åŠ ä¿¡æ¯çš„è®°å½•</li></ul><h4 id="1-Gitæ•°æ®åº“"><a href="#1-Gitæ•°æ®åº“" class="headerlink" title="1.Gitæ•°æ®åº“"></a>1.Gitæ•°æ®åº“</h4><h5 id="ï¼ˆ1ï¼‰Gitæ–‡ä»¶ç»“æ„"><a href="#ï¼ˆ1ï¼‰Gitæ–‡ä»¶ç»“æ„" class="headerlink" title="ï¼ˆ1ï¼‰Gitæ–‡ä»¶ç»“æ„"></a>ï¼ˆ1ï¼‰Gitæ–‡ä»¶ç»“æ„</h5><p>æ–°å»ºæ–‡ä»¶å¤¹å¹¶å°†å…¶åˆå§‹åŒ–ä¸ºä¸€ä¸ªç©ºçš„gitä»“åº“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir Test</span><br><span class="line">git init Test</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111161632587.png" alt="image-20211116163217085"></p><p>è¿›å…¥gitæ–‡ä»¶ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹gitä»“åº“çš„æ–‡ä»¶ç»“æ„</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd Test/.git</span><br><span class="line">tree/F</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111161634477.png" alt="image-20211116163406004"></p><ul><li><strong>config</strong>æ˜¯gitåŸºæœ¬é…ç½®æ–‡ä»¶</li><li><strong>description</strong>æ˜¯GitWebä¸“ç”¨çš„æ–‡ä»¶</li><li><strong>info</strong>æ–‡ä»¶å¤¹æ˜¯å…¨å±€æ€§æ’é™¤æ–‡ä»¶ï¼ˆä¸.gitignoreäº’è¡¥ï¼‰</li><li><strong>hooks</strong>å­˜æ”¾é’©å­è„šæœ¬</li><li><strong>HEAD</strong>è®°å½•å½“å‰checkoutçš„åˆ†æ”¯</li><li><strong>refs</strong>æäº¤å¯¹è±¡çš„æŒ‡é’ˆ</li><li><strong>objects</strong>å­˜æ”¾æ‰€æœ‰æ•°æ®ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¦æ‰¾çš„æ•°æ®åº“äº†</li></ul><h5 id="ï¼ˆ2ï¼‰Gitæ•°æ®åº“å†™å…¥æ“ä½œ"><a href="#ï¼ˆ2ï¼‰Gitæ•°æ®åº“å†™å…¥æ“ä½œ" class="headerlink" title="ï¼ˆ2ï¼‰Gitæ•°æ®åº“å†™å…¥æ“ä½œ"></a>ï¼ˆ2ï¼‰Gitæ•°æ®åº“å†™å…¥æ“ä½œ</h5><p>Gitä¼šæ ¹æ®æ–‡ä»¶å†…å®¹è®¡ç®—å‡ºä¸€ä¸ªhashå€¼ï¼Œä»¥hashå€¼ä½œä¸ºæ–‡ä»¶ç´¢å¼•å­˜å‚¨åœ¨Gitæ–‡ä»¶ç³»ç»Ÿä¸­</p><p><code>git hash-object</code>å¯ä»¥ç”¨æ¥è®¡ç®—æ–‡ä»¶å†…å®¹çš„hashå€¼ï¼Œå¹¶å°†ç”Ÿæˆçš„æ•°æ®å¯¹è±¡å­˜å‚¨åˆ°Gitæ–‡ä»¶ç³»ç»Ÿä¸­</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111161933764.png" alt="image-20211116193321631"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;version 1&quot; | git hash-object -w --stdin</span><br></pre></td></tr></table></figure><p><code>-w</code>è¡¨ç¤ºå°†æ•°æ®å¯¹è±¡å†™å…¥åˆ°Gitæ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œ<code>--stdin</code>è¡¨ç¤ºä»æ ‡å‡†è¾“å…¥ä¸­è·å–æ–‡ä»¶å†…å®¹</p><p>å‘½ä»¤æ‰§è¡Œå®Œæˆåè¿”å›ä¸€ä¸ªå“ˆå¸Œå€¼ï¼Œå®ƒå°±æ˜¯gitæ•°æ®åº“ä¸­çš„<strong>é”®å€¼ï¼ˆkeyï¼‰</strong>ï¼Œé€šè¿‡é”®å€¼æˆ‘ä»¬å¯ä»¥å†æ¬¡æ£€ç´¢åˆ°æ’å…¥æ•°æ®åº“çš„å†…å®¹<strong>ï¼ˆvalueï¼‰</strong>ï¼Œå®é™…ä¸Šgitæ•°æ®åº“å°±æ˜¯ä¸€ä¸ªç®€å•çš„<strong>é”®å€¼å¯¹</strong>æ•°æ®åº“</p><p>æŸ¥çœ‹objectæ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°æ–°ç”Ÿæˆçš„æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å­˜å‚¨ä»¥æ–°å­˜å…¥æ•°æ®<strong>å¯¹åº”hashå€¼å‰2ä½</strong>å‘½åçš„æ–‡ä»¶å¤¹å†…</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111161934272.png" alt="image-20211116193416942"></p><h5 id="ï¼ˆ3ï¼‰Gitæ•°æ®åº“æŸ¥è¯¢æ“ä½œ"><a href="#ï¼ˆ3ï¼‰Gitæ•°æ®åº“æŸ¥è¯¢æ“ä½œ" class="headerlink" title="ï¼ˆ3ï¼‰Gitæ•°æ®åº“æŸ¥è¯¢æ“ä½œ"></a>ï¼ˆ3ï¼‰Gitæ•°æ®åº“æŸ¥è¯¢æ“ä½œ</h5><p>æ—¢ç„¶æˆ‘ä»¬æ‹¿åˆ°äº†é”®å€¼ï¼Œé‚£è‚¯å®šå¯ä»¥æŸ¥è¯¢åˆ°å…¶å¯¹åº”çš„å†…å®¹ï¼Œå¤åˆ¶hashå€¼è¿›è¡ŒæŸ¥è¯¢</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git cat-file -t d73e3875a8db6b402e2ce905c4a2222603c1f090</span><br><span class="line"></span><br><span class="line">git cat-file -p d73e3875a8db6b402e2ce905c4a2222603c1f090</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111161935233.png" alt="image-20211116193551166"></p><p><code>-p</code>è¡¨ç¤ºæŸ¥çœ‹Gitå¯¹è±¡çš„å†…å®¹ï¼Œ<code>-t</code>è¡¨ç¤ºæŸ¥çœ‹Gitå¯¹è±¡çš„ç±»å‹</p><p>blobå¯¹è±¡æ˜¯gitæ•°æ®åº“ä¸­çš„<strong>æ•°æ®å¯¹è±¡</strong>ï¼Œæ­¤å¤–æ•°æ®åº“ä¸­è¿˜æœ‰<strong>æ ‘å¯¹è±¡</strong>ï¼ˆtreeï¼‰å’Œ<strong>æäº¤å¯¹è±¡</strong>ï¼ˆcommitï¼‰</p><h4 id="4-ä½¿ç”¨Gitè·Ÿè¸ªæ–‡ä»¶å˜æ›´"><a href="#4-ä½¿ç”¨Gitè·Ÿè¸ªæ–‡ä»¶å˜æ›´" class="headerlink" title="4.ä½¿ç”¨Gitè·Ÿè¸ªæ–‡ä»¶å˜æ›´"></a>4.ä½¿ç”¨Gitè·Ÿè¸ªæ–‡ä»¶å˜æ›´</h4><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°†æ¨¡æ‹Ÿä¸€æ¬¡æ–‡ä»¶å˜æ›´è¿‡ç¨‹ï¼Œçœ‹çœ‹gitçš„å¯¹è±¡æ•°æ®åº“èƒ½ä¸èƒ½å®ç°â€œè·Ÿè¸ªæ–‡ä»¶å˜æ›´â€çš„åŠŸèƒ½</p><h5 id="ï¼ˆ1ï¼‰åˆ›å»ºæ–‡ä»¶"><a href="#ï¼ˆ1ï¼‰åˆ›å»ºæ–‡ä»¶" class="headerlink" title="ï¼ˆ1ï¼‰åˆ›å»ºæ–‡ä»¶"></a>ï¼ˆ1ï¼‰åˆ›å»ºæ–‡ä»¶</h5><p>åˆ›å»ºä¸€ä¸ªtxtæ–‡ä»¶å†™å…¥å†…å®¹â€œv1.1â€ï¼Œå¹¶å†™å…¥åˆ°gitæ•°æ®åº“ä¸­</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;version 1&quot; &gt; file.txt</span><br><span class="line">git hash-object -w file.txt</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111161937621.png" alt="image-20211116193749552"></p><h5 id="ï¼ˆ2ï¼‰ä¿®æ”¹æ–‡ä»¶"><a href="#ï¼ˆ2ï¼‰ä¿®æ”¹æ–‡ä»¶" class="headerlink" title="ï¼ˆ2ï¼‰ä¿®æ”¹æ–‡ä»¶"></a>ï¼ˆ2ï¼‰ä¿®æ”¹æ–‡ä»¶</h5><p>ä¿®æ”¹file.txtçš„å†…å®¹ï¼Œå¹¶å†æ¬¡æäº¤åˆ°gitæ•°æ®åº“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;version 2&quot; &gt; file.txt</span><br><span class="line">git hash-object -w file.txt</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111161938803.png" alt="image-20211116193813071"></p><p>å¯ä»¥çœ‹åˆ°è¿™æ¬¡çš„hashå€¼å·²ç»å‘ç”Ÿæ”¹å˜äº†ï¼Œè€Œobjetcså†…ä¼šå¤šå‡ºä¸€ä¸ªæ–‡ä»¶</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111161938498.png" alt="image-20211116193846013"></p><p>æŸ¥è¯¢å®ƒä»¬å¯¹åº”çš„å†…å®¹å¦‚ä¸‹</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111161939714.png" alt="image-20211116193930700"></p><p>è¯´æ˜æˆ‘ä»¬å¯¹åŒä¸€ä¸ªæ–‡ä»¶ä¿®æ”¹åçš„å†…å®¹ä¹Ÿä¼šç»è¿‡gitæ•°æ®åº“çš„å“ˆå¸Œå¤„ç†å†æ•°æ®åº“ç”Ÿæˆæ–°çš„æ•°æ®å¯¹è±¡ï¼Œä»¥æ­¤è®°å½•æ–‡ä»¶çš„ä¸åŒç‰ˆæœ¬</p><h5 id="ï¼ˆ3ï¼‰æ¢å¤æ–‡ä»¶"><a href="#ï¼ˆ3ï¼‰æ¢å¤æ–‡ä»¶" class="headerlink" title="ï¼ˆ3ï¼‰æ¢å¤æ–‡ä»¶"></a>ï¼ˆ3ï¼‰æ¢å¤æ–‡ä»¶</h5><p>æ‰€ä»¥æˆ‘ä»¬æƒ³è¦æŠŠæ–‡ä»¶æ¢å¤åˆ°æ–‡ä»¶ä¿®æ”¹å‰ç‰ˆæœ¬ï¼Œåªéœ€è¦åœ¨æ•°æ®åº“å–å›å³å¯ï¼Œè¿™å°±æ˜¯<strong>gitç‰ˆæœ¬å›æ»šçš„å®è´¨</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cat file.txt</span><br><span class="line">git cat-file -p 83baa &gt; file.txt</span><br><span class="line">cat file.txt</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111161945593.png" alt="image-20211116194508507"></p><p>æ•°æ®å¯¹è±¡åªæ˜¯è§£å†³äº†æ–‡ä»¶å†…å®¹å­˜å‚¨çš„é—®é¢˜ï¼Œè€Œæ–‡ä»¶åçš„å­˜å‚¨åˆ™éœ€è¦é€šè¿‡æ ‘å¯¹è±¡æ¥è§£å†³</p><h4 id="5-Gitçš„æ ‘å¯¹è±¡"><a href="#5-Gitçš„æ ‘å¯¹è±¡" class="headerlink" title="5.Gitçš„æ ‘å¯¹è±¡"></a>5.Gitçš„æ ‘å¯¹è±¡</h4><p>Gité€šè¿‡æ ‘å¯¹è±¡ï¼ˆtreeï¼‰å°†æ•°æ®ï¼ˆblobï¼‰å¯¹è±¡ç»„ç»‡èµ·æ¥â€”â€”å…¶ç±»å‹äºä¸€ç§æ–‡ä»¶ç³»ç»Ÿï¼šblobå¯¹åº”æ–‡ä»¶å†…å®¹ï¼Œtreeå¯¹è±¡å¯¹åº”çš„ç›®å½•å’ŒèŠ‚ç‚¹</p><p>æœ‰äº†æ•°å¯¹è±¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†æ–‡ä»¶ç³»ç»Ÿä»»ä½•æ—¶é—´ç‚¹çš„çŠ¶æ€ä¿å­˜åœ¨gitæ•°æ®åº“ä¸­</p><h5 id="ï¼ˆ1ï¼‰åˆ›å»ºæ ‘å¯¹è±¡ï¼ˆæ–‡ä»¶å·²æäº¤æ•°æ®åº“ï¼‰"><a href="#ï¼ˆ1ï¼‰åˆ›å»ºæ ‘å¯¹è±¡ï¼ˆæ–‡ä»¶å·²æäº¤æ•°æ®åº“ï¼‰" class="headerlink" title="ï¼ˆ1ï¼‰åˆ›å»ºæ ‘å¯¹è±¡ï¼ˆæ–‡ä»¶å·²æäº¤æ•°æ®åº“ï¼‰"></a>ï¼ˆ1ï¼‰åˆ›å»ºæ ‘å¯¹è±¡ï¼ˆæ–‡ä»¶å·²æäº¤æ•°æ®åº“ï¼‰</h5><p>Gitæ ¹æ®æŸä¸€ä¸ª<strong>æš‚å­˜åŒº</strong>æ‰€è¡¨ç¤ºçš„çŠ¶æ€è®°å½•ä¸€ä¸ªå¯¹åº”çš„æ ‘å¯¹è±¡ï¼Œgitçš„æš‚å­˜åŒºæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼š<code>.git/index</code></p><p>è¿™é‡Œè¦æ³¨æ„å°†fileæ–‡ä»¶æ”¾åœ¨<code>.git</code>æ–‡ä»¶å¤–ï¼Œå¦åˆ™æ— æ³•åˆ›å»ºæš‚å­˜åŒºï¼ˆä¸Šé¢çš„æ“ä½œæˆ‘éƒ½æŠŠfile.txtæ”¾åœ¨äº†.gitå†…ğŸ¤§ï¼‰,å¤§æ¦‚é”™è¯¯å¦‚ä¸‹</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111162013837.png" alt="image-20211116201312604"></p><p>åˆ›å»ºæš‚å­˜åŒº</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git update-index --add file.txt</span><br><span class="line">cat .git\index</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111162016844.png" alt="image-20211116201640442"></p><p>æŸ¥çœ‹<strong>æš‚å­˜åŒº</strong>çš„å†…å®¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git ls-files --stage</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111162019086.png" alt="image-20211116201945864"></p><p>å°†<strong>æš‚å­˜åŒº</strong>çš„å†…å®¹å†™å…¥ä¸€ä¸ªæ ‘å¯¹è±¡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git write-tree</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111162023263.png" alt="image-20211116202313249"></p><p>è¿™æ—¶å€™å†æŸ¥çœ‹gitæ•°æ®åº“ï¼Œæ ‘å¯¹è±¡ä¹Ÿè¢«å­˜å…¥gitæ•°æ®åº“å†…äº†</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111162024659.png" alt="image-20211116202420483"></p><p>å†æŸ¥çœ‹è¯¥è®°å½•å­˜å‚¨çš„å†…å®¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git cat-file -t 79335</span><br><span class="line">git cat-file -p 79335</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111162026758.png" alt="image-20211116202635361"></p><p>å¯ä»¥çœ‹åˆ°æ ‘å¯¹è±¡ä¸­å­˜å‚¨ç€<strong>æ–‡ä»¶å</strong>ä¸<strong>æ–‡ä»¶å†…å®¹å¯¹åº”çš„å“ˆå¸Œå€¼</strong>ç­‰</p><h5 id="ï¼ˆ2ï¼‰åˆ›å»ºå¯¹è±¡ï¼ˆæ–‡ä»¶æœªæäº¤æ•°æ®åº“ï¼‰"><a href="#ï¼ˆ2ï¼‰åˆ›å»ºå¯¹è±¡ï¼ˆæ–‡ä»¶æœªæäº¤æ•°æ®åº“ï¼‰" class="headerlink" title="ï¼ˆ2ï¼‰åˆ›å»ºå¯¹è±¡ï¼ˆæ–‡ä»¶æœªæäº¤æ•°æ®åº“ï¼‰"></a>ï¼ˆ2ï¼‰åˆ›å»ºå¯¹è±¡ï¼ˆæ–‡ä»¶æœªæäº¤æ•°æ®åº“ï¼‰</h5><p>ä¸Šé¢æˆ‘ä»¬æ˜¯æ·»åŠ ä¸€ä¸ªå·²ç»å­˜åœ¨å†gitæ•°æ®åº“çš„æ–‡ä»¶åˆ°æš‚å­˜åŒºï¼Œå¦‚æœæˆ‘ä»¬æ–°å»ºä¸€ä¸ªæœªæ›¾ä¿å­˜åˆ°gitæ•°æ®åº“çš„æ–‡ä»¶åˆ°æš‚å­˜åŒºï¼Œè¿›è€Œä¿å­˜ä¸ºtreeå¯¹è±¡</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111162053546.png" alt="image-20211116205331283"></p><ul><li>æˆ‘ä»¬ä¼šå‘ç°æ–°æ–‡ä»¶æäº¤åˆ°æš‚å­˜åŒºåä¹Ÿä¼šè‡ªåŠ¨æ·»åŠ åˆ°æ•°æ®åº“</li><li>æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒºæ˜¯è¿½åŠ æ“ä½œï¼Œå˜æ›´æäº¤åï¼Œ<strong>æš‚å­˜åŒºå¹¶æ²¡æœ‰æ¸…ç©º</strong></li></ul><h5 id="ï¼ˆ3ï¼‰å­æ–‡ä»¶å¤¹ä¿å­˜åˆ°æ ‘å¯¹è±¡"><a href="#ï¼ˆ3ï¼‰å­æ–‡ä»¶å¤¹ä¿å­˜åˆ°æ ‘å¯¹è±¡" class="headerlink" title="ï¼ˆ3ï¼‰å­æ–‡ä»¶å¤¹ä¿å­˜åˆ°æ ‘å¯¹è±¡"></a>ï¼ˆ3ï¼‰å­æ–‡ä»¶å¤¹ä¿å­˜åˆ°æ ‘å¯¹è±¡</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir new_dir</span><br><span class="line">git update-index --add new_dir</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111162056889.png" alt="image-20211116205602679"></p><p>å¯ä»¥å‘ç°ï¼Œæˆ‘ä»¬æ— æ³•å°†ä¸€ä¸ªç©ºæ–‡ä»¶å¤¹æ·»åŠ åˆ°æš‚å­˜åŒºï¼Œå¹¶ä¸”æç¤ºæˆ‘ä»¬åº”è¯¥å°†æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶åŠ å…¥<strong>æš‚å­˜åŒº</strong></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±è¯•ä¸€ä¸‹å°†æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶æ·»åŠ è¿›ç¼“å­˜åŒº</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111162100367.png" alt="image-20211116210040965"></p><p>å¯ä»¥å‘ç°æ–‡ä»¶å¤¹æ˜¯ä»¥ä¸€ä¸ªtreeå¯¹è±¡æ·»åŠ è¿›æ ‘ä¸­çš„</p><p>æ‰€ä»¥gitçš„æ ‘å¯¹è±¡çš„ç»„ç»‡æ–¹å¼å¤§è‡´å¦‚ä¸‹</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111162102494.png" alt="img"></p><p>æ ‘å¯¹è±¡ç›¸å½“äºæºä»£ç çš„ä¸€æ¬¡æ¬¡å¿«ç…§ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç”¨æ ‘å¯¹è±¡ä½œä¸ºæºä»£ç ç‰ˆæœ¬ç®¡ç†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¿˜éœ€è¦è§£å†³è®°å½•è°æäº¤äº†ä»£ç ã€ä»€ä¹ˆæ—¶å€™æäº¤çš„ã€æäº¤çš„è¯´æ˜ä¿¡æ¯ç­‰çš„é—®é¢˜ï¼Œè¿™å°±éœ€è¦ç”¨åˆ°æäº¤å¯¹è±¡</p><h4 id="6-Gitçš„æäº¤å¯¹è±¡"><a href="#6-Gitçš„æäº¤å¯¹è±¡" class="headerlink" title="6.Gitçš„æäº¤å¯¹è±¡"></a>6.Gitçš„æäº¤å¯¹è±¡</h4><h5 id="ï¼ˆ1ï¼‰åˆ›å»ºæäº¤å¯¹è±¡"><a href="#ï¼ˆ1ï¼‰åˆ›å»ºæäº¤å¯¹è±¡" class="headerlink" title="ï¼ˆ1ï¼‰åˆ›å»ºæäº¤å¯¹è±¡"></a>ï¼ˆ1ï¼‰åˆ›å»ºæäº¤å¯¹è±¡</h5><p>å°†åˆ›å»ºçš„æ ‘å¯¹è±¡æäº¤ä¸ºcommitå¯¹è±¡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git write-tree</span><br><span class="line">git commit-tree 15da -m &quot;frist commit&quot;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111162235396.png" alt="image-20211116223537292"></p><p>æŸ¥çœ‹æäº¤å¯¹è±¡çš„å†…å®¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git cat-file -p dd7b6</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111162236318.png" alt="image-20211116223657063"></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªæäº¤å¯¹è±¡åŒ…å«æäº¤ç‰ˆæœ¬çš„<strong>æ ‘å¯¹è±¡hashé”®å€¼</strong>ï¼Œauthorå’Œcommiterï¼Œä»¥åŠä¿®æ”¹å’Œæäº¤æ—¶é—´ï¼Œä»¥åŠæäº¤çš„æ³¨é‡Šä¿¡æ¯</p><h5 id="ï¼ˆ2ï¼‰æäº¤æ–°ç‰ˆæœ¬"><a href="#ï¼ˆ2ï¼‰æäº¤æ–°ç‰ˆæœ¬" class="headerlink" title="ï¼ˆ2ï¼‰æäº¤æ–°ç‰ˆæœ¬"></a>ï¼ˆ2ï¼‰æäº¤æ–°ç‰ˆæœ¬</h5><p>ç”Ÿæˆæ–°çš„æ–‡ä»¶çš„å¯¹è±¡æ ‘</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;new version&quot; &gt; file.txt</span><br><span class="line">git update-index file.txt</span><br><span class="line">git write-tree</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111162248307.png" alt="image-20211116224816724"></p><p>åœ¨ä¸Šä¸€æ¬¡æäº¤çš„åŸºç¡€ä¸Šæäº¤å¯¹è±¡æ ‘ä½œä¸ºæäº¤å¯¹è±¡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git commit-tree a4098 -p dd7b6 -m &quot;second commit&quot;</span><br><span class="line">98b0754a75a763db80ac689cd16e2665ced92589</span><br></pre></td></tr></table></figure><p><code>-p</code>å¯¹åº”ä¸Šæ¬¡æäº¤å¯¹è±¡çš„hashå€¼</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111162248268.png" alt="image-20211116224828288"></p><p>æŸ¥çœ‹æäº¤å¯¹è±¡ï¼Œå¯ä»¥çœ‹åˆ°å¤šäº†ä¸€ä¸ªçˆ¶æäº¤çš„è®°å½•</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111162249974.png" alt="image-20211116224957926"></p><h5 id="ï¼ˆ3ï¼‰æäº¤å¯¹è±¡è®°å½•"><a href="#ï¼ˆ3ï¼‰æäº¤å¯¹è±¡è®°å½•" class="headerlink" title="ï¼ˆ3ï¼‰æäº¤å¯¹è±¡è®°å½•"></a>ï¼ˆ3ï¼‰æäº¤å¯¹è±¡è®°å½•</h5><p>é€šè¿‡git log æŸ¥çœ‹æäº¤å¯¹è±¡è®°å½•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log 98b0</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111162253027.png" alt="image-20211116225317939"></p><p>è‡³æ­¤æˆ‘ä»¬å¯ä»¥çœ‹åˆ°gitå¯¹è±¡ä¹‹é—´è”ç³»çš„å…¨è²Œäº†</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111162303582.png" alt="img"></p><h4 id="7-Gitçš„å¼•ç”¨"><a href="#7-Gitçš„å¼•ç”¨" class="headerlink" title="7.Gitçš„å¼•ç”¨"></a>7.Gitçš„å¼•ç”¨</h4><p>ä»¥ä¸Šçš„æ“ä½œï¼Œæˆ‘ä»¬å¯¹ç‰ˆæœ¬å’Œæ•°æ®å¯¹è±¡çš„æ“ä½œéƒ½æ˜¯åŸºäºhashé”®å€¼çš„ï¼Œä½†æ˜¯è¿™äº›å­—ç¬¦ä¸²æ˜¯æ¯«æ— æ„ä¹‰çš„ï¼Œæ‰€ä»¥gitå¼•å…¥äº†<strong>å¼•ç”¨ï¼ˆreferenceï¼‰</strong>ä½¿ç”¨æœ‰æ„ä¹‰çš„å­—ç¬¦ä¸²<strong>å¯¹åº”</strong>å“ˆå¸Œå€¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå…¶ä¸»è¦åº”ç”¨äº<strong>åˆ†æ”¯</strong></p><h5 id="ï¼ˆ1ï¼‰åˆ›å»ºå¼•ç”¨"><a href="#ï¼ˆ1ï¼‰åˆ›å»ºå¼•ç”¨" class="headerlink" title="ï¼ˆ1ï¼‰åˆ›å»ºå¼•ç”¨"></a>ï¼ˆ1ï¼‰åˆ›å»ºå¼•ç”¨</h5><p>ä¸ºæœ€æ–°çš„æäº¤å¯¹è±¡åˆ›å»ºä¸€ä¸ªå¼•ç”¨åä¸ºmaster</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git log 98b0</span><br><span class="line">git update-ref refs/heads/master 98b0</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111162328532.png" alt="image-20211116232811501"></p><h5 id="ï¼ˆ2ï¼‰æŸ¥çœ‹"><a href="#ï¼ˆ2ï¼‰æŸ¥çœ‹" class="headerlink" title="ï¼ˆ2ï¼‰æŸ¥çœ‹"></a>ï¼ˆ2ï¼‰æŸ¥çœ‹</h5><p>åˆ›å»ºæˆåŠŸåï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨masteræ¥ä»£æ›¿hashå€¼æŸ¥çœ‹æäº¤å¯¹è±¡è®°å½•</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111162329835.png" alt="image-20211116232919198"></p><p>è¿™å°±æ˜¯gitåˆ†æ”¯çš„æœ¬è´¨ï¼šä¸€ä¸ªæŒ‡å‘æŸä¸€ç³»åˆ—æäº¤ä¹‹é¦–çš„<strong>æŒ‡é’ˆ</strong></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/Autovy/Image/img/202111122115839.jpeg&quot; alt=&quot;img&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="å¼€å‘å·¥å…·" scheme="https://autovy.github.io/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="å¼€å‘å·¥å…·" scheme="https://autovy.github.io/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
      <category term="æ·±åº¦ç³»åˆ—" scheme="https://autovy.github.io/tags/%E6%B7%B1%E5%BA%A6%E7%B3%BB%E5%88%97/"/>
    
      <category term="git" scheme="https://autovy.github.io/tags/git/"/>
    
      <category term="Coding" scheme="https://autovy.github.io/tags/Coding/"/>
    
  </entry>
  
  <entry>
    <title>å¼€å‘åŸç†|TCPå¯è§†åŒ–å®éªŒ</title>
    <link href="https://autovy.github.io/2021/10/27/DevPrinciple/TCP%E5%8F%AF%E8%A7%86%E5%8C%96%E5%AE%9E%E9%AA%8C/"/>
    <id>https://autovy.github.io/2021/10/27/DevPrinciple/TCP%E5%8F%AF%E8%A7%86%E5%8C%96%E5%AE%9E%E9%AA%8C/</id>
    <published>2021-10-27T15:45:00.000Z</published>
    <updated>2021-10-27T05:48:20.870Z</updated>
    
    <content type="html"><![CDATA[<img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110271342730.webp" alt="Iâ€™m going to tell a joke | excel-memes, tcp-memes, udp-memes | ProgrammerHumor.io" style="zoom: 50%;"><p>TCPå¥½å¤æ‚ğŸ¤§ï¼Œä¸»è¦ä½¿ç”¨äº†Kali Linuxä¸Šçš„ä¸€äº›ç½‘ç»œå·¥å…·æ¥è¿›è¡Œåˆ†æï¼Œå¸Œæœ›èƒ½ç›´è§‚åœ°è§£æTCPï¼ˆå¤‡è€ƒä¸­ï¼Œæ›´æ–°ç¼“æ…¢â€¦ï¼‰</p><span id="more"></span><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://wizardforcel.gitbooks.io/network-basic/content/0.html">ç½‘ç»œåŸºæœ¬åŠŸç³»åˆ—</a></p><h4 id="1-ç¯å¢ƒå‡†å¤‡"><a href="#1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="1.ç¯å¢ƒå‡†å¤‡"></a>1.ç¯å¢ƒå‡†å¤‡</h4><h5 id="ï¼ˆ1ï¼‰Kali-Linuxè™šæ‹Ÿæœºå®‰è£…"><a href="#ï¼ˆ1ï¼‰Kali-Linuxè™šæ‹Ÿæœºå®‰è£…" class="headerlink" title="ï¼ˆ1ï¼‰Kali Linuxè™šæ‹Ÿæœºå®‰è£…"></a>ï¼ˆ1ï¼‰Kali Linuxè™šæ‹Ÿæœºå®‰è£…</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110181946991.png" alt="image-20211018194604769"></p><p>åœ¨<code>Kail Linux</code>çš„å®˜ç½‘ä¸‹è½½å¯¹åº”çš„ç³»ç»Ÿé•œåƒæ–‡ä»¶ï¼š<a href="https://www.kali.org/get-kali/">Get Kali </a>ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©ä¸­é—´è¿™ä¸ªç‰ˆæœ¬ï¼ˆ2021.3-installer-amd64ï¼‰</p><p>å…·ä½“çš„è™šæ‹Ÿæœºå®‰è£…è¿‡ç¨‹è¿™é‡Œä¸èµ˜è¿°ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯<code>VMware Workstation</code>ï¼Œå¯ä»¥å‚ç…§è¿™ç¯‡æ–‡ç« è¿›è¡Œå®‰è£…ï¼š<a href="https://blog.csdn.net/Fengfeng__y/article/details/107376064">Vmwareå®‰è£…Kali Linux2020.2</a></p><p>ä¹‹æ‰€ä»¥é€‰æ‹©<strong>Kali Linux</strong>ç³»ç»Ÿæ˜¯å› ä¸ºå…¶å†…ç½®äº†<strong>Nginx</strong>ï¼Œ<strong>tcpdump</strong>ï¼Œ<strong>Wireshark</strong>è¿™äº›æˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„å®éªŒå·¥å…·</p><h5 id="ï¼ˆ2ï¼‰VMä¸Hype-Vä¸å¯å…±å­˜"><a href="#ï¼ˆ2ï¼‰VMä¸Hype-Vä¸å¯å…±å­˜" class="headerlink" title="ï¼ˆ2ï¼‰VMä¸Hype-Vä¸å¯å…±å­˜"></a>ï¼ˆ2ï¼‰VMä¸Hype-Vä¸å¯å…±å­˜</h5><p>æˆ‘ä½¿ç”¨çš„æ˜¯VM15.5ä¼šä¸Windowsçš„Hype-Vå‘ç”Ÿå†²çªï¼Œæ‰€ä»¥éœ€è¦å…³é—­Hype-V</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110231543739.png" alt="image-20211023154303399"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bcdedit /set hypervisorlaunchtype off</span><br></pre></td></tr></table></figure><p>é‡å¯ç”µè„‘åï¼ŒVMçš„è™šæ‹Ÿæœºå¯ä»¥æ­£å¸¸è¿è¡Œï¼Œä½†æ˜¯wslå’Œdockerå°±å¯„äº†</p><p>å¦‚æœéœ€è¦æ¢å¤çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢å‘½ä»¤ç„¶åé‡å¯ç”µè„‘</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bcdedit /set hypervisorlaunchtype auto</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ3ï¼‰å‡†å¤‡å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯"><a href="#ï¼ˆ3ï¼‰å‡†å¤‡å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯" class="headerlink" title="ï¼ˆ3ï¼‰å‡†å¤‡å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯"></a>ï¼ˆ3ï¼‰å‡†å¤‡å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯</h5><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://blog.csdn.net/qq_44657899/article/details/107130729">linuxä¿®æ”¹ipåœ°å€</a></p><ul><li><p>å…‹éš†è™šæ‹Ÿæœº</p><p>æ­å»ºå¥½ä¸€ä¸ªKaliè™šæ‹Ÿæœºåï¼Œé€šè¿‡VMçš„å…‹éš†åŠŸèƒ½ç”Ÿæˆå¦ä¸€å°è™šæ‹Ÿæœºï¼Œä¸ºäº†èŠ‚çœç©ºé—´å¯ä»¥ç›´æ¥å…‹éš†ä¸ºé“¾æ¥è™šæ‹Ÿæœº</p></li></ul><p>  <img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110192052996.png" alt="image-20211019205256464"></p><ul><li><p>ä¿®æ”¹ç½‘ç»œæ¨¡å¼</p><p>å°†ä¸¤å°è™šæ‹Ÿæœºçš„ç½‘ç»œæ¨¡å¼è®¾ç½®ä¸ºNATæ¨¡å¼</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110192056463.png" alt="image-20211019205636065"></p></li></ul><ul><li>è™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨ä¿®æ”¹</li></ul><p>â€‹    </p><p>â€‹    <img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110192058546.png" alt="image-20211019205855124"></p><p>â€‹    </p><p>â€‹    ä½¿ç”¨ç®¡ç†å‘˜å¼€å§‹ä¿®æ”¹ï¼Œå¹¶å–æ¶ˆâ€œä½¿ç”¨æœ¬åœ°DHCPæœåŠ¡å°†IPåœ°å€åˆ†é…ç»™è™šæ‹Ÿæœºâ€çš„å‹¾</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110192100641.png" alt="image-20211019210009660"></p><ul><li><p>æŸ¥çœ‹å­ç½‘IPå’Œç½‘å…³IP</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110192104783.png" alt="image-20211019210418389"></p></li></ul><ul><li><p>ä¿®æ”¹å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„IPåœ°å€</p><p>åˆ†åˆ«è¿›å…¥å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨æ‰“å¼€ç»ˆç«¯</p><p>æ‰“å¼€ç½‘ç»œé…ç½®æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/network/interfaces</span><br></pre></td></tr></table></figure></li></ul><p>  ä¿®æ”¹å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ï¼Œè®¾å®šå®¢æˆ·ç«¯IPä¸º<strong>192.168.234.100</strong></p>  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">auto eth0</span><br><span class="line"><span class="comment">#é™æ€è®¾ç½®ip</span></span><br><span class="line">iface eth0 inet static</span><br><span class="line"><span class="comment">#è®¾ç½®ipåœ°å€</span></span><br><span class="line">address 192.168.234.100</span><br><span class="line"><span class="comment">#è®¾ç½®å­ç½‘æ©ç </span></span><br><span class="line">netmask 255.255.255.0</span><br><span class="line"><span class="comment">#è®¾ç½®ç½‘å…³</span></span><br><span class="line">gateway 192.168.234.2</span><br></pre></td></tr></table></figure><p>  ä¿®æ”¹æœåŠ¡ç«¯é…ç½®æ–‡ä»¶ï¼Œè®¾å®šæœåŠ¡ç«¯IPä¸º<strong>192.168.234.200</strong></p>  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">auto eth0</span><br><span class="line"><span class="comment">#é™æ€è®¾ç½®ip</span></span><br><span class="line">iface eth0 inet static</span><br><span class="line"><span class="comment">#è®¾ç½®ipåœ°å€</span></span><br><span class="line">address 192.168.234.200</span><br><span class="line"><span class="comment">#è®¾ç½®å­ç½‘æ©ç </span></span><br><span class="line">netmask 255.255.255.0</span><br><span class="line"><span class="comment">#è®¾ç½®ç½‘å…³</span></span><br><span class="line">gateway 192.168.234.2</span><br></pre></td></tr></table></figure><p>  åˆ†åˆ«é‡å¯ç½‘å¡</p>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart networking</span><br></pre></td></tr></table></figure><p>  åˆ†åˆ«æŸ¥çœ‹IPä¿¡æ¯</p>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip addr show</span><br></pre></td></tr></table></figure><p>  <img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110192244070.png" alt="image-20211019224416761"></p><p>  <img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110192245918.png" alt="image-20211019224510781"></p><h5 id="ï¼ˆ4ï¼‰æµ‹è¯•ç›¸å…³æœåŠ¡"><a href="#ï¼ˆ4ï¼‰æµ‹è¯•ç›¸å…³æœåŠ¡" class="headerlink" title="ï¼ˆ4ï¼‰æµ‹è¯•ç›¸å…³æœåŠ¡"></a>ï¼ˆ4ï¼‰æµ‹è¯•ç›¸å…³æœåŠ¡</h5><ul><li><p>æµ‹è¯•æœåŠ¡ç«¯ç«¯å£å ç”¨</p><p>æ£€æµ‹80ç«¯å£æ˜¯å¦è¢«å ç”¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsof -i:80</span><br></pre></td></tr></table></figure><p>å¦‚æœè¢«å ç”¨äº†ä½¿ç”¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill -9 PID</span><br></pre></td></tr></table></figure><p>å…³é—­å¯¹åº”çš„è¿›ç¨‹</p></li></ul><ul><li><p>ä¿®æ”¹æœåŠ¡ç«¯nginxé…ç½®æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure><p>åœ¨httpå—ä¸­æ·»åŠ serverå—</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#serverå—</span></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span>  localhost;</span><br><span class="line">   </span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="attribute">root</span>   html;</span><br><span class="line">        <span class="attribute">index</span>  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attribute">error_page</span>   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /50x.html;</span><br><span class="line">    <span class="attribute">location</span> = /50x.html &#123;</span><br><span class="line">        <span class="attribute">root</span>   html;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>å¼€å¯æœåŠ¡ç«¯nginxæœåŠ¡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start nginx</span><br></pre></td></tr></table></figure><p>é»˜è®¤åœ¨<strong>80ç«¯å£</strong>å¼€å¯</p></li></ul><ul><li><p>æŸ¥çœ‹nginxçŠ¶æ€</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status nginx</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110192303593.png" alt="image-20211019230343549"></p></li></ul><ul><li><p>å®¢æˆ·ç«¯è®¿é—®æœåŠ¡ç«¯IPï¼Œå³å¯çœ‹åˆ°éƒ¨ç½²åœ¨æœåŠ¡ç«¯çš„nginxé¡µé¢</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110192306180.png" alt="image-20211019230646780"></p></li></ul><h4 id="2-åŸºæœ¬å·¥å…·ä»‹ç»"><a href="#2-åŸºæœ¬å·¥å…·ä»‹ç»" class="headerlink" title="2.åŸºæœ¬å·¥å…·ä»‹ç»"></a>2.åŸºæœ¬å·¥å…·ä»‹ç»</h4><h5 id="ï¼ˆ1ï¼‰tcpdump"><a href="#ï¼ˆ1ï¼‰tcpdump" class="headerlink" title="ï¼ˆ1ï¼‰tcpdump"></a>ï¼ˆ1ï¼‰tcpdump</h5><p>å‚è€ƒææ–™ï¼š<a href="https://www.eet-china.com/mp/a35364.html">https://www.eet-china.com/mp/a35364.html</a></p><p>tcpdumpæ˜¯å¸¸ç”¨çš„ç½‘ç»œæŠ“åŒ…å’Œåˆ†æå·¥å…·ï¼Œå¸¸ç”¨äºåœ¨LinuxæœåŠ¡å™¨</p><ul><li><p>tcpæä¾›äº†ä»¥ä¸‹<strong>é€‰é¡¹</strong></p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9jZG4ubmxhcmsuY29tL3l1cXVlLzAvMjAyMC9wbmcvNTMxMjY1LzE1OTAwNjY0MzIwNTQtNzYwM2MzNmEtMDdhNC00MzVkLTk0NmYtMWM1MDE0YTk4OWNkLnBuZw?x-oss-process=image/format,png" alt="image.png" style="zoom: 50%;"></li></ul><ul><li><p>tcpæä¾›äº†ä»¥ä¸‹<strong>è¿‡æ»¤è¡¨è¾¾å¼</strong></p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110200830168.png" alt="image.png" style="zoom:50%;"></li></ul><ul><li><p>åœ¨å®¢æˆ·ç«¯ç»ˆç«¯è¿›è¡Œæµ‹è¯•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> -i eth0 è¡¨ç¤ºæŠ“å–eth1ç½‘å£çš„æ•°æ®åŒ…</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ip è¡¨ç¤ºæŠ“å–ipåè®®çš„æ•°æ®åŒ…</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> host è¡¨ç¤ºä¸»æœºè¿‡æ»¤ï¼ŒæŠ“å–å¯¹åº”åŸŸå/ipçš„æ•°æ®æŠ¥</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -nn è¡¨ç¤ºä¸è§£æipåœ°å€å’Œç«¯å£å·çš„åç§°</span></span><br><span class="line"></span><br><span class="line">tcpdump -i eth0 ip and host www.baidu.com  -nn</span><br></pre></td></tr></table></figure><p>é€šè¿‡curlæˆ–è€…æµè§ˆå™¨è¯·æ±‚ <a href="http://www.baidu.com">www.baidu.com</a> å³å¯è·å¾—æ•°æ®åŒ…ï¼ˆç™¾åº¦â€”â€”ç½‘ç»œæµ‹è¯•çš„ç¥ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110200850299.png" alt="image-20211020085021073"></p></li></ul><p>tcpdumpåªæ˜¯ç”¨æ¥æŠ“å–æ•°æ®åŒ…ï¼Œå¹¶ä¸ç”¨æ¥åˆ†ææ•°æ®åŒ…ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦Wiresharkå·¥å…·è¿›è¡Œæ•°æ®åŒ…åˆ†æ</p><h5 id="ï¼ˆ2ï¼‰Wireshark"><a href="#ï¼ˆ2ï¼‰Wireshark" class="headerlink" title="ï¼ˆ2ï¼‰Wireshark"></a>ï¼ˆ2ï¼‰Wireshark</h5><ul><li><p>å…ˆä½¿ç”¨tcpdumpæŠ“å–æ•°æ®ä¿å­˜ä¸ºpcapæ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump -i eth0 ip and host www.baidu.com -c 8 -w baidu.pacp</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>ç»ˆç«¯å¼€å¯Wireshark</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Wireshark</span><br></pre></td></tr></table></figure><p>æ³¨æ„å¼€å¯Wiresharkåï¼Œä¸è¦å…³é—­è¯¥ç»ˆç«¯ï¼Œè€Œæ˜¯å¼€å¯æ–°çš„ç»ˆç«¯</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110200904635.png" alt="image-20211020090446325"></p></li></ul><ul><li><p>Wiresharkåˆ†æbaidu.pacpæ–‡ä»¶</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110200906800.png" alt="image-20211020090612028"></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110200907536.png" alt="img"></p></li></ul><p>å½“ç„¶äº†Wiresharkè‡ªèº«ä¹Ÿæœ‰æŠ“åŒ…åŠŸèƒ½ï¼Œä½†æ˜¯å®ƒæœ‰è‡ªå·±çš„ä¸€å¥—è¿‡æ»¤æ–¹æ³•ï¼Œæˆ‘è¿˜æ˜¯é‡‡ç”¨tcpdumpçš„æ–¹æ³•è¿›è¡ŒæŠ“åŒ…æ“ä½œ</p><h4 id="3-è§£å¯†TCPè¿æ¥"><a href="#3-è§£å¯†TCPè¿æ¥" class="headerlink" title="3.è§£å¯†TCPè¿æ¥"></a>3.è§£å¯†TCPè¿æ¥</h4><h5 id="ï¼ˆ1ï¼‰å»ºç«‹ä¸€æ¬¡è¿æ¥"><a href="#ï¼ˆ1ï¼‰å»ºç«‹ä¸€æ¬¡è¿æ¥" class="headerlink" title="ï¼ˆ1ï¼‰å»ºç«‹ä¸€æ¬¡è¿æ¥"></a>ï¼ˆ1ï¼‰å»ºç«‹ä¸€æ¬¡è¿æ¥</h5><ul><li><p>å®¢æˆ·ç«¯æŠ“å–è¯·æ±‚æœåŠ¡ç«¯çš„åŒ…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump -i any tcp and host 192.168.234.200 and port 80 -w tcp.pcap</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>å®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡ç«¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl 192.168.234.200</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>é€€å‡ºtcpdumpæŠ“åŒ…</p><p>Ctrl+Cé€€å‡ºtcpdumpæŠ“åŒ…</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110201924467.png" alt="image-20211020192429846"></p></li></ul><h5 id="ï¼ˆ2ï¼‰Wiresharkåˆ†ætcp"><a href="#ï¼ˆ2ï¼‰Wiresharkåˆ†ætcp" class="headerlink" title="ï¼ˆ2ï¼‰Wiresharkåˆ†ætcp"></a>ï¼ˆ2ï¼‰Wiresharkåˆ†ætcp</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110202041879.png" alt="image-20211020204055955"></p><ul><li><p>ä¸€æ¬¡è¿æ¥çš„ä¼ è¾“æµç¨‹</p><ol><li>æœ€å¼€å§‹çš„3ä¸ªåŒ…å°±æ˜¯<strong>TCPä¸‰æ¬¡æ¡æ‰‹</strong>å»ºç«‹è¿æ¥çš„åŒ…</li><li>ä¸­é—´æ˜¯HTTPè¯·æ±‚å’Œå“åº”çš„åŒ…</li><li>æœ€åçš„3ä¸ªåŒ…åˆ™æ˜¯<strong>TCPä¸‰æ¬¡æŒ¥æ‰‹</strong>æ–­å¼€è¿æ¥çš„åŒ…</li></ol></li></ul><ul><li><p>æ—¶åºå›¾æ˜¾ç¤ºæ•°æ®åŒ…äº¤äº’</p><p>åœ¨Wiresharkç‚¹å‡»ç»Ÿè®¡ -&gt; æµé‡å›¾ï¼Œåœ¨æµé‡ç±»å‹é€‰æ‹©TCP Flows</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110202051934.png" alt="image-20211020205139464"></p></li></ul><ul><li><p>æ˜¾ç¤ºçœŸå®seqå€¼</p><p>äº‹å®ä¸Šä¸Šé¢çš„åºåˆ—å·seqæ˜¯ç›¸å¯¹å€¼ï¼Œå¹¶ä¸æ˜¯çœŸå®å€¼ï¼ˆå…³äºåºåˆ—å·çš„ç®—æ³•ä¸‹æ–‡ä¼šä»‹ç»ï¼‰</p><p>åœ¨<strong>åè®®é¦–é€‰é¡¹</strong>å–æ¶ˆ<strong>Relative Seq</strong>å³å¯çœ‹åˆ°çœŸå®å€¼</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110201953144.png" alt="img"></p></li></ul><p>å†æ¬¡æŸ¥çœ‹æµé‡å›¾ï¼Œå¯ä»¥çœ‹åˆ°çœŸå®çš„seqå€¼</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110201957208.png" alt="image-20211020195708923"></p><h5 id="ï¼ˆ3ï¼‰TCPè¿æ¥æµç¨‹åˆ†æ"><a href="#ï¼ˆ3ï¼‰TCPè¿æ¥æµç¨‹åˆ†æ" class="headerlink" title="ï¼ˆ3ï¼‰TCPè¿æ¥æµç¨‹åˆ†æ"></a>ï¼ˆ3ï¼‰TCPè¿æ¥æµç¨‹åˆ†æ</h5><ul><li>TCPè¿æ¥å®Œæ•´æµç¨‹</li></ul><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110202003394.jpeg" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°" style="zoom: 67%;"><ul><li><p>ä¸‰æ¬¡æ¡æ‰‹</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110202105763.png" alt="image-20211020210505247"></p></li></ul><ul><li><p>ä¼ è¾“æ•°æ®</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110202105540.png" alt="image-20211020210523657"></p></li></ul><ul><li><p>å››æ¬¡æŒ¥æ‰‹</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110202105988.png" alt="image-20211020210546911"></p><p>è¿™é‡Œåªæœ‰ä¸‰æ¬¡æ˜¯å› ä¸ºæœåŠ¡å™¨ç«¯æ”¶åˆ°å®¢æˆ·ç«¯çš„ <code>FIN</code> åï¼ŒæœåŠ¡å™¨ç«¯åŒæ—¶ä¹Ÿè¦å…³é—­è¿æ¥ï¼Œè¿™æ ·å°±å¯     ä»¥æŠŠ <code>ACK</code> å’Œ <code>FIN</code> åˆå¹¶åˆ°ä¸€èµ·å‘é€ï¼ŒèŠ‚çœäº†ä¸€ä¸ªåŒ…ï¼Œå˜æˆäº†â€œä¸‰æ¬¡æŒ¥æ‰‹â€</p><p>æœåŠ¡å™¨ç«¯æ”¶åˆ°å®¢æˆ·ç«¯çš„ <code>FIN</code> åï¼Œå¾ˆå¯èƒ½è¿˜æ²¡å‘é€å®Œæ•°æ®ï¼Œæ‰€ä»¥å°±ä¼šå…ˆå›å¤å®¢æˆ·ç«¯ä¸€ä¸ª      <code>ACK</code> åŒ…ï¼Œç¨ç­‰ä¸€ä¼šå„¿ï¼Œå®Œæˆæ‰€æœ‰æ•°æ®åŒ…çš„å‘é€åï¼Œæ‰ä¼šå‘é€ <code>FIN</code> åŒ…ï¼Œè¿™ä¹Ÿå°±æ˜¯å››æ¬¡æŒ¥æ‰‹äº†</p></li></ul><h4 id="4-TCPè¿æ¥å¼‚å¸¸æƒ…å†µåˆ†æ"><a href="#4-TCPè¿æ¥å¼‚å¸¸æƒ…å†µåˆ†æ" class="headerlink" title="4.TCPè¿æ¥å¼‚å¸¸æƒ…å†µåˆ†æ"></a>4.TCPè¿æ¥å¼‚å¸¸æƒ…å†µåˆ†æ</h4><p>å‚è€ƒèµ„æ–™ï¼š</p><p><a href="http://blog.51yip.com/linux/1404.html">iptables æ·»åŠ ï¼Œåˆ é™¤ï¼ŒæŸ¥çœ‹ï¼Œä¿®æ”¹</a></p><p><a href="https://juejin.cn/post/6844904181795389454">TCPä¸‰æ¬¡æ¡æ‰‹ä¸¢åŒ…å®éªŒè®°å½•</a></p><h5 id="ï¼ˆ1ï¼‰TCPç¬¬ä¸€æ¬¡æ¡æ‰‹SYNä¸¢åŒ…"><a href="#ï¼ˆ1ï¼‰TCPç¬¬ä¸€æ¬¡æ¡æ‰‹SYNä¸¢åŒ…" class="headerlink" title="ï¼ˆ1ï¼‰TCPç¬¬ä¸€æ¬¡æ¡æ‰‹SYNä¸¢åŒ…"></a>ï¼ˆ1ï¼‰TCPç¬¬ä¸€æ¬¡æ¡æ‰‹SYNä¸¢åŒ…</h5><p>å‘ä¸€ä¸ªä¸å­˜åœ¨çš„ä¸»æœºåœ°å€å‘èµ·è¿æ¥å³å¯æ¨¡æ‹ŸTCPç¬¬ä¸€æ¬¡æ¡æ‰‹SYNä¸¢åŒ…çš„çŠ¶å†µ</p><ul><li><p>å¼€å¯tcpdumpç›‘æ§47.48.49.50ï¼ˆä¸å­˜åœ¨çš„åœ°å€ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump -i any tcp and host 47.48.49.50  and port 80 -w tcp_sys_timeout.pcap</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>å‘èµ·å¯¹47.48.49.50çš„è¯·æ±‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">date;curl 47.48.49.50;date</span><br></pre></td></tr></table></figure><p><strong>date</strong>æ˜¾ç¤ºå½“å‰æ—¶é—´ç”¨äºè®°å½•tcpç”¨æ—¶</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110210916070.png" alt="image-20211021091606451"></p></li></ul><ul><li><p>å¼€å¯wiresharkåˆ†ætcp_sys_timeout.pcap</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110231551164.png" alt="image-20211023155134728"></p></li></ul><p>â€‹        </p><ul><li><p>åˆ†æTCPé‡ä¼ è¿‡ç¨‹</p><p>å½“å®¢æˆ·ç«¯å‘èµ·TCPç¬¬ä¸€æ¬¡æ¡æ‰‹SYNåŒ…ï¼Œåœ¨è¶…æ—¶é—´æ²¡æœ‰æ”¶åˆ°ACKå°±ä¼šé‡ä¼ SYNæ•°æ®åŒ…ï¼Œè€Œä¸”æ—¶é—´ä¼šé€æ¸ç¿»å€ï¼Œ</p><img src="https://mmbiz.qpic.cn/mmbiz_png/J0g14CUwaZciat6yMSZJ2QYWIldpAXY6VA5Y8s7UWYLIjx7TsaNBNX46H5BQSGVBzX8clDJLvz4X5IhEX9O4tNg/640?wx_fmt=png" alt="img" style="zoom:67%;"></li></ul><p>kali Liunxè¿™é‡Œé‡ä¼ äº†4æ¬¡SYNåï¼ŒæœåŠ¡ç«¯å°±ä¼šå‘é€<strong>RSTå¤ä½æŠ¥æ–‡</strong>ç»™å®¢æˆ·ç«¯è¡¨ç¤ºç»ˆæ­¢è¿™ä¸ªæ¡æ‰‹è¿‡ç¨‹å’Œè¿™ä¸ªè¿æ¥</p><ul><li><p>ç›¸å…³å‚æ•°è°ƒæ•´</p><p>é‡ä¼ çš„æ¬¡æ•°ä¸tcp_syn_retrieså‚æ•°æœ‰å…³</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/sys/net/ipv4/tcp_syn_retries</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110231617350.png" alt="image-20211023161746849"></p></li></ul><p>  å¯ä»¥çœ‹åˆ°kali linuxéœ€è¦é‡ä¼ 6æ¬¡ï¼ˆæ‰€ä»¥ä¸ºä»€ä¹ˆè¿™é‡Œåªé‡ä¼ äº†4æ¬¡ï¼ŸğŸ§ï¼Œæˆ‘ä¹Ÿå¦¹å¼€tcp_abort_on_overflowå‘€ï¼Œä¸æ˜¯é˜Ÿåˆ—æ»¡çš„é—®é¢˜å§ï¼‰</p><p>  æˆ‘ä»¬å¯ä»¥è°ƒå°tcp_syn_retriesé‡æ–°æµ‹è¯•</p>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo 2 &gt; /proc/sys/net/ipv4/tcp_syn_retries</span><br></pre></td></tr></table></figure><p>  <img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110231627059.png" alt="image-20211023162734954"></p><p>â€‹    <img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110231632601.png" alt="image-20211023163211916"></p><p>å¯ä»¥çœ‹åˆ°SYNé‡ä¼ äº†2æ¬¡</p><h5 id="ï¼ˆ2ï¼‰TCPç¬¬äºŒæ¬¡æ¡æ‰‹SYNã€ACKä¸¢åŒ…"><a href="#ï¼ˆ2ï¼‰TCPç¬¬äºŒæ¬¡æ¡æ‰‹SYNã€ACKä¸¢åŒ…" class="headerlink" title="ï¼ˆ2ï¼‰TCPç¬¬äºŒæ¬¡æ¡æ‰‹SYNã€ACKä¸¢åŒ…"></a>ï¼ˆ2ï¼‰TCPç¬¬äºŒæ¬¡æ¡æ‰‹SYNã€ACKä¸¢åŒ…</h5><ul><li><p>å®¢æˆ·ç«¯æ·»åŠ é˜²ç«å¢™</p><p>æ¨¡æ‹Ÿå®¢æˆ·ç«¯æ¥æ”¶ä¸åˆ°æœåŠ¡ç«¯çš„å“åº”ï¼Œå¯ä»¥åœ¨å®¢æˆ·ç«¯æ·»åŠ é˜²ç«å¢™è®¾ç½®ï¼ŒæŠŠ<code>192.168.234.200</code>æœåŠ¡å™¨banæ‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -I INPUT -s 192.168.234.200 -j DROP</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>å¯ä»¥æŸ¥çœ‹æ¸…å•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -L</span><br></pre></td></tr></table></figure></li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110231652438.png" alt="image-20211023165234228"></p><ul><li><p>å®¢æˆ·ç«¯å¼€å¯tcpdumpç›‘æ§192.168.234.200</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump -i any tcp and host 192.168.234.200 and port 80 -w tcp_two.pcap</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>å‘èµ·å¯¹192.168.234.200çš„è¯·æ±‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl 192.168.234.200</span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œkali linuxå°±ä¼šå¡ä½äº†ï¼Œå»ºè®®ç›´æ¥æ‰‹åŠ¨å…³é—­è¯¥å‘½ä»¤</p></li></ul><ul><li><p>wiresharkåˆ†ææ•°æ®åŒ…</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110231718787.png" alt="image-20211023171847580"></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110231720057.png" alt="image-20211023172006864"></p><p>â€‹        å®¢æˆ·ç«¯è§†è§’ï¼šå®¢æˆ·ç«¯å‘èµ·SYNè¯·æ±‚åï¼Œç”±äºé˜²ç«å¢™å±è”½äº†æœåŠ¡å™¨æ‰€æœ‰çš„æ•°æ®åŒ…ï¼Œæ‰€æœ‰æ— æ³•æ¥å—åˆ°SYNï¼ŒACKåŒ…ï¼Œæ‰€ä»¥å’Œä¸Šä¸€ç§æƒ…        å†µä¸€æ ·è¦é‡å‘SYNåŒ…</p><p>â€‹            </p><p>â€‹        æœåŠ¡å™¨è§’åº¦ï¼šæœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·çš„SYNåŒ…åï¼Œå°±ä¼šå›SYNã€ACKåŒ…ï¼Œä½†æ˜¯å®¢æˆ·ç«¯ä¸€ç›´æ²¡æœ‰å›ACKï¼ŒæœåŠ¡ç«¯åœ¨è¶…æ—¶åï¼Œé‡ä¼ äº†  SYNã€        ACK åŒ…ï¼Œæ¥ç€ä¸€ä¼šï¼Œå®¢æˆ·ç«¯è¶…æ—¶é‡ä¼ çš„SYNåŒ…åˆæŠµè¾¾äº†æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°åï¼Œ<strong>è¶…æ—¶å®šæ—¶å™¨å°±é‡æ–°è®¡æ—¶</strong>ï¼Œç„¶åå›SYNã€ACKåŒ…</p></li></ul><p>  â€‹        å½“ç¬¬äºŒæ¬¡æ¡æ‰‹çš„SYNã€ACKä¸¢åŒ…æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šè¶…æ—¶é‡å‘SYNåŒ…ï¼ŒæœåŠ¡ç«¯ä¹Ÿä¼šè¶…æ—¶é‡ä¼ SYNã€ACKåŒ…</p><ul><li><p>ç›¸å…³å‚æ•°</p><p><code>tcp_syn_retries</code>ï¼šå®¢æˆ·ç«¯SYNé‡ä¼ æ¬¡æ•°</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/sys/net/ipv4/tcp_syn_retries</span><br></pre></td></tr></table></figure></li></ul><p>  <code>tcp_synack_retries</code>ï¼šæœåŠ¡ç«¯é‡ä¼ ACKï¼ŒSYNæ¬¡æ•°</p>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/sys/net/ipv4/tcp_synack_retries</span><br></pre></td></tr></table></figure><p>  æ›´æ”¹æ¬¡æ•°</p>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> è®¾ç½®SYNé‡ä¼ æ¬¡æ•°ä¸º1</span></span><br><span class="line">echo 1 &gt;  /proc/sys/net/ipv4/tcp_syn_retries</span><br><span class="line"><span class="meta">#</span><span class="bash"> è®¾ç½®ACK,SYNé‡ä¼ æ¬¡æ•°ä¸º2</span></span><br><span class="line">echo 2 &gt;  /proc/sys/net/ipv4/tcp_synack_retries</span><br></pre></td></tr></table></figure><p>   â€‹é‡æ–°æŠ“åŒ…åˆ†æ</p><p>  <img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110232038388.png" alt="image-20211023203803972"></p><ul><li><p>ç§»é™¤é˜²ç«å¢™è§„åˆ™</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -D INPUT 1</span><br></pre></td></tr></table></figure></li></ul><h5 id="ï¼ˆ3ï¼‰TCPç¬¬ä¸‰æ¬¡æ¡æ‰‹ACKä¸¢åŒ…"><a href="#ï¼ˆ3ï¼‰TCPç¬¬ä¸‰æ¬¡æ¡æ‰‹ACKä¸¢åŒ…" class="headerlink" title="ï¼ˆ3ï¼‰TCPç¬¬ä¸‰æ¬¡æ¡æ‰‹ACKä¸¢åŒ…"></a>ï¼ˆ3ï¼‰TCPç¬¬ä¸‰æ¬¡æ¡æ‰‹ACKä¸¢åŒ…</h5><ul><li><p>æœåŠ¡å™¨æ·»åŠ é˜²ç«å¢™å±è”½æ¥è‡ªå®¢æˆ·ç«¯çš„ACKåŒ…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -I INPUT -s 192.168.234.100 -p tcp --tcp-flag ACK ACK -j DROP</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>å®¢æˆ·ç«¯å¼€å¯tcpdumpç›‘æ§192.168.234.200</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump -i any tcp and host 192.168.234.200 and port 80 -w tcp_ack_timeout.pcap</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘èµ·telnet</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">telnet 192.168.234.200</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110232049340.png" alt="image-20211023204935552"></p><p>ç­‰å¾…å¾ˆé•¿ä¸€æ®µæ—¶é—´å®¢æˆ·ç«¯çš„telentæ‰æ–­å¼€è¿æ¥â€¦..</p><p>â€‹    </p></li><li><p>æŸ¥çœ‹å®¢æˆ·ç«¯æœåŠ¡ç«¯çŠ¶æ€</p><p>å®¢æˆ·ç«¯å·²å®ŒæˆTCPè¿æ¥å»ºç«‹å¤„äºå¤„äº <code>ESTABLISHED</code> çŠ¶æ€</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -napt | grep 192.168.234.100</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110232112825.png" alt="image-20211023211201535"></p></li></ul><p>  æœåŠ¡å™¨æ”¶ä¸åˆ°ç¬¬ä¸‰æ¬¡æ¡æ‰‹çš„ACKåŒ…ï¼Œæ‰€ä»¥ä¸€å¼€å§‹å¤„äº<code>SYN_RECV</code> çŠ¶æ€</p>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -napt | grep 192.168.234.200</span><br></pre></td></tr></table></figure><p>  <img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110232117706.png" alt="image-20211023211703628"></p><p>  â€‹    </p><p>  è¿‡äº†ä¸€æ®µæ—¶é—´ååœ¨æŸ¥è¯¢æœåŠ¡ç«¯çŠ¶æ€ï¼Œtcpè¿æ¥å°±æ¶ˆå¤±äº†</p><p>  <img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110232117422.png" alt="image-20211023211752357"></p><p>â€‹        è€Œå®¢æˆ·ç«¯è¿˜æ˜¯å¤„äº <code>ESTABLISHED</code> çŠ¶æ€ï¼ˆåœ¨ä¸ä¼ è¾“æ•°æ®çš„æƒ…å†µä¸‹ä¼šæŒç»­å¤§æ¦‚ä¸¤ä¸ªå°æ—¶ğŸ˜°ï¼‰</p><ul><li><p>åœ¨å®¢æˆ·ç«¯å»ºç«‹çš„telnetä¼šè¯ï¼Œè¾“å…¥å­—ç¬¦æ¶ˆæ¯è¿›è¡Œå‘é€</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110232121444.png" alt="image-20211023212138121"></p></li></ul><p>  â€‹    è¿™é‡Œè¦æŒç»­å¾ˆé•¿ä¸€æ®µæ—¶é—´å®¢æˆ·ç«¯telnetæ‰æ–­å¼€è¿æ¥</p><ul><li><p>Wiresharkåˆ†ææ•°æ®åŒ…</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110232128604.png" alt="image-20211023212430427"></p></li></ul><p>â€‹        <img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110232128478.png" alt="image-20211023212818747"></p><ul><li>å®¢æˆ·ç«¯å‘é€ SYN åŒ…ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°åï¼Œå›äº†ä¸ª SYNã€ACK åŒ…ç»™å®¢æˆ·ç«¯ï¼Œæ­¤æ—¶æœåŠ¡ç«¯çš„ TCP è¿æ¥å¤„äº <code>SYN_RECV</code> çŠ¶æ€ï¼›</li><li>å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯çš„  SYNã€ACK åŒ…åï¼Œç»™æœåŠ¡ç«¯å›äº†ä¸ª ACK åŒ…ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯çš„ TCP è¿æ¥å¤„äº <code>ESTABLISHED</code> çŠ¶æ€</li><li>æœåŠ¡ç«¯é…ç½®é˜²ç«å¢™å±è”½äº†å®¢æˆ·ç«¯çš„ACKåŒ…ï¼Œä»¥æœåŠ¡ç«¯ä¼šæœ‰ä¸€æ®µæ—¶é—´å¤„äº <code>SYN_RECV</code> çŠ¶æ€ï¼Œæ²¡æœ‰è¿›å…¥  <code>ESTABLISHED</code> çŠ¶æ€</li><li>æ¥ç€ï¼ŒæœåŠ¡ç«¯è¶…æ—¶é‡ä¼ äº† SYNã€ACK åŒ…ï¼Œé‡ä¼ äº† 5 æ¬¡åï¼Œä¹Ÿå°±æ˜¯<strong>è¶…è¿‡ tcp_synack_retries çš„å€¼ï¼Œç„¶åå°±æ²¡æœ‰ç»§ç»­é‡ä¼ äº†ï¼Œæ­¤æ—¶æœåŠ¡ç«¯çš„ TCP è¿æ¥ä¸»åŠ¨ä¸­æ­¢äº†ï¼Œæ‰€ä»¥åˆšæ‰å¤„äº SYN_RECV çŠ¶æ€çš„ TCP è¿æ¥æ–­å¼€äº†</strong>ï¼Œè€Œå®¢æˆ·ç«¯ä¾ç„¶å¤„äº<code>ESTABLISHED</code> çŠ¶æ€</li><li>å®¢æˆ·ç«¯ä¾ç„¶å¤„äº<code>ESTABLISHED</code> çŠ¶æ€ï¼Œäºæ˜¯å°±åœ¨å®¢æˆ·ç«¯çš„ telnet ä¼šè¯è¾“å…¥äº† 123456 å­—ç¬¦</li><li>ç”±äºæœåŠ¡ç«¯å·²ç»æ–­å¼€è¿æ¥ï¼Œ<strong>å®¢æˆ·ç«¯å‘é€çš„æ•°æ®æŠ¥æ–‡ï¼Œä¸€ç›´åœ¨è¶…æ—¶é‡ä¼ ï¼Œæ¯ä¸€æ¬¡é‡ä¼ ï¼ŒRTO çš„å€¼æ˜¯æŒ‡æ•°å¢é•¿çš„ï¼Œæ‰€ä»¥æŒç»­äº†å¥½é•¿ä¸€æ®µæ—¶é—´ï¼Œå®¢æˆ·ç«¯çš„ telnet æ‰æŠ¥é”™é€€å‡ºäº†ï¼Œæ­¤æ—¶ä¼šé‡ä¼ äº† 15 æ¬¡</strong></li></ul><ul><li><p>ç›¸å…³å‚æ•°</p><p>TCP å»ºç«‹è¿æ¥åçš„æ•°æ®åŒ…ä¼ è¾“ï¼Œå®¢æˆ·ç«¯å‘é€æ•°æ®æŠ¥æ–‡æœ€å¤§è¶…æ—¶é‡ä¼ æ¬¡æ•°æ˜¯ç”± <code>tcp_retries2</code> æŒ‡å®šï¼Œé»˜è®¤å€¼æ˜¯ 15 æ¬¡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/sys/net/ipv4/tcp_retries2</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110232136629.png" alt="image-20211023213656516"></p><p>æŒ‰ç…§æ—¶é—´å€å¢åŸç†é‡ä¼ äº†15æ¬¡åç»ˆäºæ˜¯ç»“æŸäº†</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110232137394.png" alt="image-20211023213751365"></p><p> å¦‚æœè¿™ç§æƒ…å†µä¸‹å®¢æˆ·ç«¯ä¸å‘é€æ•°æ®ï¼Œå®¢æˆ·ç«¯ä»€ä¹ˆæ—¶å€™æ‰ä¼šæ–­å¼€å¤„äº ESTABLISHED çŠ¶æ€çš„è¿æ¥è¿™é‡Œéœ€è¦æåˆ°TCPçš„<strong>ä¿æ´»æœºåˆ¶</strong>ï¼Œåœ¨ä¸€ä¸ª<strong>è§„å®šçš„æ—¶é—´æ®µ</strong>ï¼ˆtcp_keepalive_timeï¼šä¿æ´»æ—¶é—´ï¼‰å†…ï¼Œå¦‚æœæ²¡æœ‰ä»»ä½•è¿æ¥ç›¸å…³çš„æ´»åŠ¨ï¼ŒTCP ä¿æ´»æœºåˆ¶ä¼šå¼€å§‹ä½œç”¨ï¼Œ<strong>æ¯éš”ä¸€ä¸ªæ—¶é—´é—´éš”</strong>ï¼ˆtcp_keepalive_intvlï¼šæ¯æ¬¡æ£€æµ‹é—´éš”ï¼‰ï¼Œå‘é€ä¸€ä¸ªã€Œæ¢æµ‹æŠ¥æ–‡ã€ï¼Œè¯¥æ¢æµ‹æŠ¥æ–‡åŒ…å«çš„æ•°æ®éå¸¸å°‘ï¼Œå¦‚æœ<strong>è¿ç»­å‡ ä¸ªæ¢æµ‹æŠ¥æ–‡</strong>ï¼ˆtcp_keepalive_probesï¼šæ£€æµ‹æ¬¡æ•°ï¼‰éƒ½æ²¡æœ‰å¾—åˆ°å“åº”ï¼Œåˆ™è®¤ä¸ºå½“å‰çš„ TCP è¿æ¥å·²ç»æ­»äº¡ï¼Œç³»ç»Ÿå†…æ ¸å°†é”™è¯¯ä¿¡æ¯é€šçŸ¥ç»™ä¸Šå±‚åº”ç”¨ç¨‹åº</p><p>  ç›¸å…³å‚æ•°å¦‚ä¸‹ï¼š</p>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/sys/net/ipv4/tcp_keepalive_time</span><br><span class="line">cat /proc/sys/net/ipv4/tcp_keepalive_intvl</span><br><span class="line">cat /proc/sys/net/ipv4/tcp_keepalive_probes</span><br></pre></td></tr></table></figure><p>  <img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110271337578.png" alt="image-20211023214647732">    </p><p>æŒ‰ç…§ç³»ç»Ÿé»˜è®¤çš„è®¾ç½®æ¥è®¡ç®—åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œæœ€å°‘éœ€è¦ç»è¿‡ 2 å°æ—¶ 11 åˆ† 15 ç§’æ‰å¯ä»¥å‘ç°ä¸€ä¸ªã€Œæ­»äº¡ã€è¿æ¥</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110232154413.png" alt="img"></p><h4 id="5-è§£å¯†TCPå¿«é€Ÿå»ºç«‹è¿æ¥"><a href="#5-è§£å¯†TCPå¿«é€Ÿå»ºç«‹è¿æ¥" class="headerlink" title="5.è§£å¯†TCPå¿«é€Ÿå»ºç«‹è¿æ¥"></a>5.è§£å¯†TCPå¿«é€Ÿå»ºç«‹è¿æ¥</h4><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://juejin.cn/post/6951378103000268836">tcp fast openåˆ†æ</a>ï¼ˆé‡Œé¢æœ‰è¯¦ç»†çš„å®éªŒè¿‡ç¨‹ï¼‰</p><h5 id="ï¼ˆ1ï¼‰æ™®é€šè¿æ¥ä¸å¿«é€Ÿè¿æ¥çš„å·®åˆ«"><a href="#ï¼ˆ1ï¼‰æ™®é€šè¿æ¥ä¸å¿«é€Ÿè¿æ¥çš„å·®åˆ«" class="headerlink" title="ï¼ˆ1ï¼‰æ™®é€šè¿æ¥ä¸å¿«é€Ÿè¿æ¥çš„å·®åˆ«"></a>ï¼ˆ1ï¼‰æ™®é€šè¿æ¥ä¸å¿«é€Ÿè¿æ¥çš„å·®åˆ«</h5><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110242022723.png" alt="img" style="zoom:67%;"><p>RTTå³ä¸€ä¸ªæ•°æ®åŒ…å¾€è¿”çš„æ—¶é—´ï¼Œæ‰€æœ‰ä¸€ä¸ªæ¡æ‰‹è¿‡ç¨‹ä¸º0.5RTTï¼ˆç¬¬ä¸‰æ¬¡æ¡æ‰‹æ˜¯å¯ä»¥æºå¸¦æ•°æ®çš„ï¼Œæ‰€ä»¥ACKå’ŒHTTPè¯·æ±‚ä¸€èµ·å‘é€ï¼‰</p><p><strong>æ™®é€šè¿æ¥</strong>æ¯æ¬¡å‘èµ·HTTPè¯·æ±‚éƒ½è¦é‡æ–°è¿›è¡Œä¸Šæ¬¡æ¡æ‰‹è¿‡ç¨‹ï¼Œç»å†çš„RTTéƒ½æ˜¯ä¸€æ ·çš„</p><p><strong>å¿«é€Ÿè¿æ¥</strong>ç¬¬ä¸€æ¬¡å»ºç«‹è¿æ¥æ—¶ï¼Œç¬¬äºŒæ¬¡æ¡æ‰‹ä¼šäº§ç”Ÿä¸€ä¸ª<strong>Cookie</strong>ï¼ˆå…¶ä¸­ç»´æŠ¤ç€TCPç›¸å…³ä¿¡æ¯ï¼‰å‘ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å°±ä¼šç¼“å­˜ç€è¿™ä¸ª<strong>Cookie</strong>ï¼›ä¸‹æ¬¡è¯·æ±‚æ—¶ï¼Œå®¢æˆ·ç«¯åœ¨SYNåŒ…å¸¦ä¸Š<strong>Cookie</strong>ï¼ŒæœåŠ¡ç«¯å¯ä»¥ç›´æ¥é€šè¿‡<strong>Cookie</strong>è·å¾—TCPç›¸å…³ä¿¡æ¯ï¼Œä»è€Œè·³è¿‡ä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹</p><h5 id="ï¼ˆ2ï¼‰Fast-Openç›¸å…³å‚æ•°"><a href="#ï¼ˆ2ï¼‰Fast-Openç›¸å…³å‚æ•°" class="headerlink" title="ï¼ˆ2ï¼‰Fast Openç›¸å…³å‚æ•°"></a>ï¼ˆ2ï¼‰Fast Openç›¸å…³å‚æ•°</h5><p>tcp_fastopnå‚æ•°å¯ä»¥è®¾ç½®Fast Opençš„æ¨¡å¼ï¼š</p><ol><li>0 å…³é—­</li><li>1 ä½œä¸ºå®¢æˆ·ç«¯ä½¿ç”¨ Fast Open åŠŸèƒ½</li><li>2 ä½œä¸ºæœåŠ¡ç«¯ä½¿ç”¨ Fast Open åŠŸèƒ½</li><li>3 æ— è®ºä½œä¸ºå®¢æˆ·ç«¯è¿˜æ˜¯æœåŠ¡å™¨ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ Fast Open åŠŸèƒ½</li></ol><p>æŸ¥çœ‹kali linuxçš„tcp_fastopnï¼Œå¯ä»¥çœ‹åˆ°kaliå·²é»˜è®¤å¼€å¯ä½œä¸ºå®¢æˆ·ç«¯ä½¿ç”¨ Fast Open åŠŸèƒ½</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/sys/net/ipv4/tcp_fastopen</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110242042576.png" alt="image-20211024204230242"></p><h5 id="ï¼ˆ3ï¼‰wiresharkåˆ†ææ•°æ®åŒ…"><a href="#ï¼ˆ3ï¼‰wiresharkåˆ†ææ•°æ®åŒ…" class="headerlink" title="ï¼ˆ3ï¼‰wiresharkåˆ†ææ•°æ®åŒ…"></a>ï¼ˆ3ï¼‰wiresharkåˆ†ææ•°æ®åŒ…</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110242145575.png" alt="img"></p><h4 id="6-è§£å¯†TCPé‡å¤ç¡®è®¤å’Œå¿«é€Ÿé‡ä¼ "><a href="#6-è§£å¯†TCPé‡å¤ç¡®è®¤å’Œå¿«é€Ÿé‡ä¼ " class="headerlink" title="6.è§£å¯†TCPé‡å¤ç¡®è®¤å’Œå¿«é€Ÿé‡ä¼ "></a>6.è§£å¯†TCPé‡å¤ç¡®è®¤å’Œå¿«é€Ÿé‡ä¼ </h4><h5 id="ï¼ˆ1ï¼‰TCPä¹±åºæ•°æ®åŒ…å¤„ç†æ–¹å¼"><a href="#ï¼ˆ1ï¼‰TCPä¹±åºæ•°æ®åŒ…å¤„ç†æ–¹å¼" class="headerlink" title="ï¼ˆ1ï¼‰TCPä¹±åºæ•°æ®åŒ…å¤„ç†æ–¹å¼"></a>ï¼ˆ1ï¼‰TCPä¹±åºæ•°æ®åŒ…å¤„ç†æ–¹å¼</h5><p>â€‹    ä½†æ¥æ”¶æ–¹æ”¶åˆ°<strong>ä¹±åºæ•°æ®åŒ…</strong>æ—¶ï¼Œä¼šå‘é€<strong>é‡å¤çš„ACK</strong>ï¼Œä»¥å‘ŠçŸ¥å‘é€æ–¹è¦é‡å‘è¯¥æ•°æ®åŒ…ï¼Œå½“å‘é€æ–¹æ”¶åˆ°3ä¸ªé‡å¤ACKæ—¶å°±ä¼šè§¦å‘<strong>å¿«é€Ÿé‡ä¼ </strong>ï¼Œç«‹å³<strong>é‡å‘ä¸¢å¤±çš„æ•°æ®åŒ…</strong></p><p>â€‹    <img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110251519335.png" alt="img"></p><h5 id="ï¼ˆ2ï¼‰wiresharkåˆ†ææ•°æ®åŒ…"><a href="#ï¼ˆ2ï¼‰wiresharkåˆ†ææ•°æ®åŒ…" class="headerlink" title="ï¼ˆ2ï¼‰wiresharkåˆ†ææ•°æ®åŒ…"></a>ï¼ˆ2ï¼‰wiresharkåˆ†ææ•°æ®åŒ…</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110251521249.png" alt="img"></p><ul><li>æ•°æ®åŒ…1æœŸæœ›ä¸‹ä¸€ä¸ªè¿”å›çš„çš„æ•°æ®åŒ…seqä¸º1ï¼Œä½†æ˜¯è¿”å›çš„æ•°æ®åŒ…2çš„seqä¸º10945ï¼Œè¯´æ˜æ”¶åˆ°äº†ä¹±åºæ•°æ®åŒ…</li><li>æ•°æ®åŒ…3é‡å‘seq = 1ï¼Œ ack=1ï¼Œè¡¨æ˜è¿™æ˜¯é‡å¤çš„ACK</li><li>æ•°æ®åŒ…4ï¼Œ6è¿”å›çš„ä»ç„¶æ˜¯ä¹±åºçš„æ•°æ®åŒ…ï¼Œäºæ˜¯5ï¼Œ7è¿˜æ˜¯é‡å‘seq = 1ï¼Œ ack=1çš„é‡å¤ACK</li><li>å½“å¯¹æ–¹æ”¶åˆ°ä¸‰æ¬¡é‡å¤çš„ACKåï¼Œå¿«é€Ÿé‡ä¼ seq=1ï¼Œlen=168çš„æ•°æ®åŒ…8</li><li>å½“æ”¶åˆ°é‡ä¼ çš„æ•°æ®åŒ…åï¼Œå‘ç°seq=1æ˜¯æœŸæœ›çš„æ•°æ®åŒ…ï¼Œé¢„è®¾å‘é€ç¡®è®¤æŠ¥æ–‡ACK</li></ul><h5 id="ï¼ˆ3ï¼‰ç›¸å…³å‚æ•°"><a href="#ï¼ˆ3ï¼‰ç›¸å…³å‚æ•°" class="headerlink" title="ï¼ˆ3ï¼‰ç›¸å…³å‚æ•°"></a>ï¼ˆ3ï¼‰ç›¸å…³å‚æ•°</h5><p><strong>tcp_sack</strong>å‚æ•°å¯ä»¥å¼€å¯<strong>é€‰æ‹©æ€§SACK</strong>ï¼Œä¸€æ—¦æ•°æ®åŒ…ä¸¢å¤±å¹¶æ”¶åˆ°é‡å¤ACKï¼Œå³ä½¿åœ¨ä¸¢å¤±æ•°æ®åŒ…ä¹‹åè¿˜æˆåŠŸæ¥æ”¶äº†å…¶ä»–æ•°æ®åŒ…ï¼Œä¹Ÿåªéœ€è¦é‡    ä¼ ä¸¢å¤±çš„æ•°æ®åŒ…ï¼ˆç®€å•æ¥è¯´ï¼Œå¦‚æœä¸å¼€å¯SACKï¼Œä¸¢å¤±åŒ…ä¹‹åçš„æ¯ä¸ªæ•°æ®åŒ…éƒ½è¦è¿›è¡Œé‡ä¼ ï¼‰</p><p>æŸ¥çœ‹kali linuxçš„tcp_sackå‚æ•°</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/sys/net/ipv4/tcp_sack</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110251547408.png" alt="image-20211025154717887"></p><h4 id="7-è§£å¯†TCPæµé‡æ§åˆ¶"><a href="#7-è§£å¯†TCPæµé‡æ§åˆ¶" class="headerlink" title="7.è§£å¯†TCPæµé‡æ§åˆ¶"></a>7.è§£å¯†TCPæµé‡æ§åˆ¶</h4><h5 id="ï¼ˆ1ï¼‰TCPæ»‘åŠ¨çª—å£æœºåˆ¶"><a href="#ï¼ˆ1ï¼‰TCPæ»‘åŠ¨çª—å£æœºåˆ¶" class="headerlink" title="ï¼ˆ1ï¼‰TCPæ»‘åŠ¨çª—å£æœºåˆ¶"></a>ï¼ˆ1ï¼‰TCPæ»‘åŠ¨çª—å£æœºåˆ¶</h5><p>â€‹    TCPæœ‰ä¸¤å¤§å…³é”®åŠŸèƒ½ï¼š</p><p>â€‹    <strong>å¯é ä¼ è¾“</strong>ï¼šä¿è¯æ•°æ®ç¡®å®åˆ°è¾¾ç›®çš„åœ°ï¼Œå¦‚æœæœªåˆ°è¾¾ï¼Œèƒ½å¤Ÿå‘ç°å¹¶é‡ä¼ </p><p>â€‹    <strong>æ•°æ®æµæ§</strong>ï¼šç®¡ç†æ•°æ®çš„å‘é€é€Ÿç‡ï¼Œä»¥ä½¿æ¥æ”¶è®¾å¤‡ä¸è‡´äºè¿‡è½½</p><p>â€‹    TCPæ•°æ®æµæ§çš„å…³é”®æ˜¯æ»‘åŠ¨çª—å£æœºåˆ¶ï¼Œå®ƒåˆ©ç”¨æ¥æ”¶æ–¹çš„<strong>æ¥æ”¶çª—å£</strong>æ§åˆ¶å‘é€æ–¹è¦å‘é€æ•°æ®é‡ï¼Œå‘é€æ–¹çš„<strong>æ¥æ”¶çª—å£</strong>å¯ä»¥å‘Šè¯‰å‘é€æ–¹è‡ªå·±TCP    ç¼“å†²ç©ºé—´åŒºå¤§å°</p><p>â€‹    åœ¨å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨çš„è¿æ¥ä¸­ï¼Œå®¢æˆ·ç«¯å‘ŠçŸ¥æœåŠ¡å™¨å®ƒä¸€æ¬¡å¸Œæœ›ä»æœåŠ¡å™¨æ¥æ”¶å¤šå°‘å­—èŠ‚æ•°æ®ï¼Œè¿™æ˜¯å®¢æˆ·ç«¯çš„<strong>æ¥æ”¶çª—å£</strong>ï¼Œå³æœåŠ¡å™¨çš„<strong>å‘é€çª—å£</strong></p><ul><li>ç†æƒ³æƒ…å†µä¸‹çš„çª—å£å¤§å°    </li></ul><p>â€‹    å‡å¦‚åº”ç”¨å±‚å¾ˆå¿«åœ°ä»ç¼“å†²åŒºè¯»å–äº†æ•°æ®ï¼Œé‚£ä¹ˆçª—å£å¤§å°ä¼šä¸€ç›´ä¿æŒä¸å˜</p><p>â€‹    <img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110251617330.png" alt="img"></p><p>â€‹    </p><ul><li>ç°å®æƒ…å†µä¸‹çš„çª—å£å¤§å°</li></ul><p>ç°å®ä¸­æœåŠ¡å™¨ä¼šå‡ºç°ç¹å¿™çš„æƒ…å†µï¼Œå½“åº”ç”¨ç¨‹åºè¯»å–é€Ÿåº¦æ…¢æ—¶ï¼Œé‚£ä¹ˆç¼“å­˜ç©ºé—´ä¼šæ…¢æ…¢è¢«å æ»¡ï¼Œè¿™æ—¶æœåŠ¡å™¨ä¼šè°ƒæ•´<strong>çª—å£å¤§å°</strong>çš„å€¼ï¼Œé€šè¿‡ACK    æŠ¥æ–‡é€šçŸ¥å¯¹æ–¹</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110251620324.png" alt="img">    </p><h5 id="ï¼ˆ2ï¼‰é›¶çª—å£é€šçŸ¥ä¸çª—å£æ¢æµ‹"><a href="#ï¼ˆ2ï¼‰é›¶çª—å£é€šçŸ¥ä¸çª—å£æ¢æµ‹" class="headerlink" title="ï¼ˆ2ï¼‰é›¶çª—å£é€šçŸ¥ä¸çª—å£æ¢æµ‹"></a>ï¼ˆ2ï¼‰é›¶çª—å£é€šçŸ¥ä¸çª—å£æ¢æµ‹</h5><ul><li><strong>é›¶çª—å£</strong>ï¼šå½“æ¥æ”¶æ–¹çš„ç¼“å­˜è¢«å æ»¡åï¼Œä¼šå‘é€å€¼ä¸º0çš„æ¥æ”¶çª—å£ï¼Œå½“å‘é€æ–¹æ¥æ”¶åˆ°<strong>é›¶çª—å£é€šçŸ¥</strong>æ—¶ï¼Œå°±ä¼šåœæ­¢å‘é€æ•°æ®</li></ul><p>  <img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110251623436.png" alt="img"></p><ul><li><p><strong>çª—å£æ¢æµ‹</strong>ï¼šå‘é€æ–¹æ¥æ”¶åˆ°<strong>é›¶çª—å£é€šçŸ¥</strong>åï¼Œä¼šå®šæ—¶å‘é€<strong>çª—å£å¤§å°æ¢æµ‹æŠ¥æ–‡</strong>ï¼Œä»¥ä¾¿çŸ¥é“æ¥æ”¶æ–¹çª—å£å¤§å°å˜åŒ–</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110251630822.png" alt="img"></p><p>å‘é€<strong>çª—å£å¤§å°æ¢æµ‹æŠ¥æ–‡</strong>çš„æ—¶é—´é—´éš”ä¸TCPçš„æŠ¥æ–‡é‡ä¼ æœºåˆ¶ä¸€æ ·éƒ½æ˜¯<strong>ç¿»å€é€’å¢</strong>çš„</p></li></ul><h5 id="ï¼ˆ3ï¼‰å‘é€çª—å£çš„åˆ†æ"><a href="#ï¼ˆ3ï¼‰å‘é€çª—å£çš„åˆ†æ" class="headerlink" title="ï¼ˆ3ï¼‰å‘é€çª—å£çš„åˆ†æ"></a>ï¼ˆ3ï¼‰å‘é€çª—å£çš„åˆ†æ</h5><p>æŠ¥æ–‡<code>win</code>å­—æ®µè¡¨æ˜çš„æ˜¯è‡ªå·±çš„<strong>æ¥æ”¶çª—å£</strong>ï¼Œè€Œä¸æ˜¯<strong>å‘é€çª—å£</strong></p><p>å¯ä»¥é€šè¿‡æŸ¥çœ‹æŠ¥æ–‡å­—æ®µï¼šWindos size value å’Œ Window size scaling factor ç¡®è®¤å‘é€çª—å£çš„å€¼ï¼Œè®¡ç®—å…¬å¼å¦‚ä¸‹</p><p><code>ã€ŒWindow size valueã€ * ã€ŒWindow size scaling factorã€ = ã€ŒCaculated window size ã€</code></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110251655116.png" alt="img"></p><p><strong>å‘é€çª—å£</strong>è™½ç„¶æ˜¯ç”±<strong>æ¥æ”¶çª—å£</strong>å†³å®šçš„ï¼Œä½†æ˜¯å®ƒæ˜¯å¯ä»¥è¢«ç½‘ç»œå› ç´ å½±å“çš„ï¼Œæ‰€ä»¥å®é™…ä¸Šå‘é€çª—å£çš„å€¼æ˜¯<code>min(æ‹¥å¡çª—å£, æ¥æ”¶çª—å£)</code></p><p>TCP æœ‰<strong>ç´¯è®¡ç¡®è®¤æœºåˆ¶</strong>ï¼Œæ‰€ä»¥å½“æ”¶åˆ°å¤šä¸ªæ•°æ®åŒ…æ—¶ï¼Œåªéœ€è¦åº”ç­”<strong>æœ€åä¸€ä¸ªæ•°æ®åŒ…</strong>çš„ ACK æŠ¥æ–‡å°±å¯ä»¥äº†</p><h4 id="8-TCPå‡å°‘å°æŠ¥æ–‡ä¼ è¾“"><a href="#8-TCPå‡å°‘å°æŠ¥æ–‡ä¼ è¾“" class="headerlink" title="8.TCPå‡å°‘å°æŠ¥æ–‡ä¼ è¾“"></a>8.TCPå‡å°‘å°æŠ¥æ–‡ä¼ è¾“</h4><p>å½“TCPæŠ¥æ–‡æ‰¿è½½çš„æ•°æ®éå¸¸å°çš„æ—¶å€™ï¼Œæ•´ä¸ªç½‘ç»œæ•ˆç‡å°±ä¼šå¾ˆä½ï¼ˆä¾‹å¦‚ä¸€ä¸ªæŠ¥æ–‡TCPå¤´éƒ¨ä¸º20å­—èŠ‚ï¼ŒIPå¤´éƒ¨ä¹Ÿæ˜¯20ä¸ªå­—èŠ‚ï¼Œä½†æ•°æ®åªæœ‰2å­—èŠ‚ï¼Œå°±ç›¸å½“äºç”¨å¤§è´§è½¦è¿ä¸€ä¸ªå°åŒ…è£¹ï¼‰</p><p>TCPä½¿ç”¨ä¸¤ç§ç­–ç•¥æ¥å‡å°‘å°æŠ¥æ–‡çš„ä¼ è¾“ï¼š</p><ul><li><p>Nagleç®—æ³•</p></li><li><p>å»¶è¿Ÿç¡®è®¤</p></li></ul><h5 id="ï¼ˆ1ï¼‰Nagleç®—æ³•"><a href="#ï¼ˆ1ï¼‰Nagleç®—æ³•" class="headerlink" title="ï¼ˆ1ï¼‰Nagleç®—æ³•"></a>ï¼ˆ1ï¼‰Nagleç®—æ³•</h5><p>Nagleç®—æ³•æ•°æ®å‘é€ç­–ç•¥ï¼š</p><ul><li><strong>æ²¡æœ‰å·²å‘é€æœªç¡®è®¤æŠ¥æ–‡</strong>æ—¶ï¼Œç«‹åˆ»å‘é€æ•°æ®</li><li>å­˜åœ¨æœªç¡®è®¤æŠ¥æ–‡æ—¶ï¼Œç›´åˆ°<strong>æ²¡æœ‰å·²å‘é€æœªç¡®è®¤æŠ¥æ–‡</strong>æˆ–<strong>æ•°æ®é•¿åº¦è¾¾åˆ°MSSå¤§å°</strong>ï¼Œå†å‘é€æ•°æ®</li></ul><p>å¦‚æœä¸æ»¡è¶³ä»»æ„ä¸€æ¡ï¼Œå‘é€æ–¹ä¼šä¸€ç›´<strong>å›¤ç§¯æ•°æ®</strong>ï¼Œç›´åˆ°æ»¡è¶³å‘é€æ¡ä»¶</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110251730068.png" alt="img"></p><ul><li>ä¸€å¼€å§‹æ²¡æœ‰<strong>å·²å‘é€æœªç¡®è®¤</strong>çš„æŠ¥æ–‡ï¼ŒHå­—ç¬¦å°±ä¼šç«‹å³å‘å‡º</li><li>åœ¨æ²¡æœ‰æ”¶åˆ°å¯¹Hå­—ç¬¦çš„ç¡®è®¤æŠ¥æ–‡æ—¶ï¼Œå‘é€æ–¹ä¸€ç›´å›¤ç§¯æ•°æ®ï¼Œç›´åˆ°æ”¶åˆ°ç¡®è®¤æŠ¥æ–‡ï¼Œæ­¤æ—¶å°±æ²¡æœ‰å·²å‘é€æœªç¡®è®¤çš„æŠ¥æ–‡ï¼Œäºæ˜¯å°±æŠŠå›¤ç§¯åçš„ ELL å­—ç¬¦ä¸€èµ·å‘ç»™äº†æ¥æ”¶æ–¹</li><li>å¾…æ”¶åˆ°ELLå­—ç¬¦çš„ç¡®è®¤æŠ¥æ–‡åï¼Œå°±æŠŠæœ€åä¸€ä¸ªä¹‹åOå‘å‡º</li></ul><p>Nagleç®—æ³•é»˜è®¤æ˜¯æ‰“å¼€çš„ï¼Œå¦‚æœå¯¹äºä¸€äº›éœ€è¦å°æ•°æ®åŒ…äº¤äº’çš„åœºæ™¯çš„ç¨‹åºï¼Œæ¯”å¦‚ï¼Œtelnet æˆ– ssh è¿™æ ·çš„äº¤äº’æ€§æ¯”è¾ƒå¼ºçš„ç¨‹åºï¼Œåˆ™éœ€è¦å…³é—­ Nagle ç®—æ³•</p><p>å…³é—­ Nagle ç®—æ³•æ²¡æœ‰å…¨å±€å‚æ•°ï¼Œéœ€è¦æ ¹æ®æ¯ä¸ªåº”ç”¨è‡ªå·±çš„ç‰¹ç‚¹æ¥å…³é—­ï¼Œå¦‚ Socketå¯ä»¥é€šè¿‡è®¾ç½® <code>TCP_NODELAY</code> é€‰é¡¹æ¥å…³é—­è¿™ä¸ªç®—æ³•</p><h5 id="ï¼ˆ2ï¼‰å»¶è¿Ÿç¡®è®¤"><a href="#ï¼ˆ2ï¼‰å»¶è¿Ÿç¡®è®¤" class="headerlink" title="ï¼ˆ2ï¼‰å»¶è¿Ÿç¡®è®¤"></a>ï¼ˆ2ï¼‰å»¶è¿Ÿç¡®è®¤</h5><p>å»¶è¿Ÿç¡®è®¤æ•°æ®å‘é€ç­–ç•¥ï¼š</p><ul><li>å½“æœ‰å“åº”æ•°æ®è¦å‘é€æ—¶ï¼ŒACKä¼šè·Ÿç€ä¸€èµ·å‘é€ç»™å¯¹æ–¹</li><li>å½“æ²¡æœ‰å“åº”æ•°æ®è¦å‘é€æ—¶ï¼ŒACKå°†å»¶è¿Ÿä¸€æ®µæ—¶é—´ï¼Œä»¥ç­‰å¾…æ˜¯å¦æœ‰å“åº”æ•°æ®ä¸€èµ·å‘é€</li><li>å¦‚æœåœ¨ACKå»¶è¿Ÿç­‰å¾…å‘é€æœŸé—´ï¼Œå¯¹æ–¹ç¬¬äºŒä¸ªæ•°æ®æŠ¥æ–‡åˆ°è¾¾äº†ï¼Œè¿™æ—¶å°±ç«‹å³å‘é€ACK</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110251746044.png" alt="img"></p><p>å»¶è¿Ÿç­‰å¾…çš„æ—¶é—´åœ¨Linuxå†…æ ¸ä¸­å®šä¹‰çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æŸ¥çœ‹HZï¼ˆç³»ç»Ÿæ—¶é’Ÿé¢‘ç‡ï¼‰æ¥ç¡®è®¤</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110251754102.png" alt="image-20211025175433959"></p><p>è¿™é‡Œæ³¨æ„ä¸åŒå†…æ ¸çš„é…ç½®æ–‡ä»¶åç§°ä¸åŒï¼Œæˆ‘çš„å°±æ˜¯<code>config-5.10.0-kali9-amd64</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /boot/config-5.10.0-kali9-amd64 | grep &#x27;CONFIG_HZ=&#x27; </span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110251752591.png" alt="image-20211025175239492"></p><p>æˆ‘çš„è¿™å°æœºå™¨çš„HZ=250ï¼Œæ‰€ä»¥æœ€å¤§å»¶è¿Ÿç¡®è®¤æ—¶é—´ä¸º50msï¼Œæœ€å°å»¶è¿Ÿç¡®è®¤æ—¶é—´ä¸º10ms</p><p>å…³é—­å»¶è¿Ÿç¡®è®¤ä¹Ÿæ²¡æœ‰å…¨å±€å‚æ•°ï¼Œéœ€è¦æ ¹æ®æ¯ä¸ªåº”ç”¨è‡ªå·±çš„ç‰¹ç‚¹æ¥å…³é—­ï¼Œå¦‚TCP å»¶è¿Ÿç¡®è®¤å¯ä»¥åœ¨ Socket è®¾ç½® <code>TCP_QUICKACK</code> é€‰é¡¹æ¥å…³é—­è¿™ä¸ªç®—æ³•</p><h4 id="9-TCPå…¨è¿æ¥é˜Ÿåˆ—"><a href="#9-TCPå…¨è¿æ¥é˜Ÿåˆ—" class="headerlink" title="9.TCPå…¨è¿æ¥é˜Ÿåˆ—"></a>9.TCPå…¨è¿æ¥é˜Ÿåˆ—</h4><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://segmentfault.com/a/1190000022792489">TCP åŠè¿æ¥é˜Ÿåˆ—å’Œå…¨è¿æ¥é˜Ÿåˆ—æ»¡äº†ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿåˆè¯¥å¦‚ä½•åº”å¯¹ï¼Ÿ</a></p><h5 id="ï¼ˆ1ï¼‰TCPåŠè¿æ¥é˜Ÿåˆ—ä¸å…¨è¿æ¥é˜Ÿåˆ—"><a href="#ï¼ˆ1ï¼‰TCPåŠè¿æ¥é˜Ÿåˆ—ä¸å…¨è¿æ¥é˜Ÿåˆ—" class="headerlink" title="ï¼ˆ1ï¼‰TCPåŠè¿æ¥é˜Ÿåˆ—ä¸å…¨è¿æ¥é˜Ÿåˆ—"></a>ï¼ˆ1ï¼‰TCPåŠè¿æ¥é˜Ÿåˆ—ä¸å…¨è¿æ¥é˜Ÿåˆ—</h5><p>â€‹    åœ¨TCPä¸‰æ¬¡æ¡æ‰‹ä¸­ï¼Œæˆ‘ä»¬å¦‚ä½•åˆ†è¾¨ï¼šå“ªäº›è¿æ¥æ˜¯åŠè¿æ¥ï¼Œå“ªäº›è¿æ¥æ˜¯å…¨è¿æ¥å‘¢ï¼Ÿ</p><p>â€‹    Linuxé€šè¿‡ç»´æŠ¤ä¸¤ä¸ªé˜Ÿåˆ—æ¥è§£å†³é—®é¢˜ï¼š</p><ul><li>åŠè¿æ¥é˜Ÿåˆ—ï¼ˆSYNé˜Ÿåˆ—ï¼‰</li><li>å…¨è¿æ¥é˜Ÿåˆ—ï¼ˆaccepeté˜Ÿåˆ—ï¼‰</li></ul><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110261926809.png" alt="img" style="zoom:80%;"><ul><li>æœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯å‘èµ·çš„<strong>SYN</strong>åï¼Œå†…æ ¸ä¼šå°†è¿æ¥å­˜å‚¨åˆ°<strong>åŠè¿æ¥é˜Ÿåˆ—</strong></li><li>æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å‘é€<strong>SYN+ACK</strong></li><li>å®¢æˆ·ç«¯æ”¶åˆ°<strong>SYN+ACK</strong>åï¼Œå‘é€<strong>ACK</strong>åˆ°æœåŠ¡ç«¯</li><li>æœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯çš„<strong>ACK</strong>åï¼Œå†…æ ¸ä¼šæŠŠè¿æ¥ä»<strong>åŠè¿æ¥é˜Ÿåˆ—</strong>ç§»é™¤ï¼Œå°†å…¶æ·»åŠ åˆ°<strong>å…¨è¿æ¥é˜Ÿåˆ—</strong>ï¼Œç­‰å¾…è¿›ç¨‹è°ƒç”¨<strong>acceptå‡½æ•°</strong>æ—¶æŠŠè¿æ¥å–å‡ºæ¥</li><li>ä¸ç®¡æ˜¯åŠè¿æ¥é˜Ÿåˆ—è¿˜æ˜¯å…¨è¿æ¥é˜Ÿåˆ—ï¼Œéƒ½æœ‰æœ€å¤§é•¿åº¦é™åˆ¶ï¼Œè¶…è¿‡é™åˆ¶æ—¶ï¼Œå†…æ ¸ä¼šç›´æ¥<strong>ä¸¢å¼ƒ</strong>ï¼Œæˆ–<strong>è¿”å› RST åŒ…</strong></li></ul><h5 id="ï¼ˆ2ï¼‰å…¨è¿æ¥é˜Ÿåˆ—çŠ¶æ€æŸ¥è¯¢"><a href="#ï¼ˆ2ï¼‰å…¨è¿æ¥é˜Ÿåˆ—çŠ¶æ€æŸ¥è¯¢" class="headerlink" title="ï¼ˆ2ï¼‰å…¨è¿æ¥é˜Ÿåˆ—çŠ¶æ€æŸ¥è¯¢"></a>ï¼ˆ2ï¼‰å…¨è¿æ¥é˜Ÿåˆ—çŠ¶æ€æŸ¥è¯¢</h5><p>åœ¨æœåŠ¡ç«¯ï¼ˆ192.168.234.200ï¼‰æŸ¥çœ‹å…¨è¿æ¥é˜Ÿåˆ—çŠ¶å†µ</p><p>æŸ¥çœ‹<strong>LISTEN çŠ¶æ€</strong>çš„è¿æ¥ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> -l æ˜¾ç¤ºçŠ¶æ€ä¸ºlistençš„socket</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -n ä¸è§£ææœåŠ¡åç§°</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -t åªæ˜¾ç¤ºtcp socket</span></span><br><span class="line">ss -lnt</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110261944427.png" alt="image-20211026194430102"></p><ul><li>Recv-Qï¼šå½“å‰<strong>å…¨è¿æ¥é˜Ÿåˆ—çš„å¤§å°</strong>ï¼Œä¹Ÿå°±æ˜¯å½“å‰å·²å®Œæˆä¸‰æ¬¡æ¡æ‰‹å¹¶ç­‰å¾…æœåŠ¡ç«¯ <code>accept()</code> çš„ TCP è¿æ¥ä¸ªæ•°ï¼›</li><li>Send-Qï¼šå½“å‰<strong>å…¨è¿æ¥æœ€å¤§é˜Ÿåˆ—é•¿åº¦</strong>ï¼Œä¸Šé¢çš„è¾“å‡ºç»“æœè¯´æ˜ç›‘å¬ 80 ç«¯å£çš„ TCP æœåŠ¡è¿›ç¨‹ï¼Œ<strong>æœ€å¤§å…¨è¿æ¥é•¿åº¦ä¸º 511</strong></li></ul><p>æŸ¥çœ‹<strong>é LISTEN çŠ¶æ€</strong>çš„è¿æ¥ï¼š</p><p>å…ˆåœ¨å®¢æˆ·ç«¯å¯¹æœåŠ¡ç«¯å‘èµ·è¯·æ±‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">telnet 192.168.234.200 80</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å¯ä»¥åœ¨æœåŠ¡ç«¯æŸ¥çœ‹<strong>é LISTEN çŠ¶æ€</strong>çš„è¿æ¥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> -n ä¸è§£ææœåŠ¡åç§°</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -t åªæ˜¾ç¤ºtcp socket</span></span><br><span class="line">ss -nt</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110261953764.png" alt="image-20211026195348911"></p><p>è¿™æ—¶<code>Recv-Q/Send-Q</code> è¡¨ç¤ºçš„å«ä¹‰ä¸<strong>LISTEN çŠ¶æ€</strong>çš„ä¸åŒ</p><ul><li>Recv-Qï¼šå·²æ”¶åˆ°ä½†æœªè¢«åº”ç”¨è¿›ç¨‹è¯»å–çš„å­—èŠ‚æ•°ï¼›</li><li>Send-Qï¼šå·²å‘é€ä½†æœªæ”¶åˆ°ç¡®è®¤çš„å­—èŠ‚æ•°ï¼›</li></ul><h5 id="ï¼ˆ3ï¼‰å…¨è¿æ¥é˜Ÿåˆ—æº¢å‡º"><a href="#ï¼ˆ3ï¼‰å…¨è¿æ¥é˜Ÿåˆ—æº¢å‡º" class="headerlink" title="ï¼ˆ3ï¼‰å…¨è¿æ¥é˜Ÿåˆ—æº¢å‡º"></a>ï¼ˆ3ï¼‰å…¨è¿æ¥é˜Ÿåˆ—æº¢å‡º</h5><p>æœ¬æ¬¡æ¨¡æ‹Ÿå®éªŒï¼Œå®¢æˆ·ç«¯ï¼ˆ192.168.234.100ï¼‰ä½¿ç”¨<strong>wrkå·¥å…·</strong>ï¼ˆHTTP å‹æµ‹å·¥å…·ï¼Œå®ƒèƒ½å¤Ÿåœ¨å•æœºå¤šæ ¸ CPU çš„æ¡ä»¶ä¸‹ï¼Œä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„é«˜æ€§èƒ½ I/O æœºåˆ¶ï¼Œé€šè¿‡å¤šçº¿ç¨‹å’Œäº‹ä»¶æ¨¡å¼ï¼Œå¯¹ç›®æ ‡æœºå™¨äº§ç”Ÿå¤§é‡çš„è´Ÿè½½ï¼‰å¯¹æœåŠ¡ç«¯ï¼ˆ192.168.234.100ï¼‰å‘èµ·å¤§é‡è¯·æ±‚ï¼Œä»¥æ­¤æ¨¡æ‹ŸTCP<strong>å…¨è¿æ¥é˜Ÿåˆ—æº¢å‡º</strong>çš„çŠ¶æ€</p><ul><li><p>å®¢æˆ·ç«¯å®‰è£…wrkå·¥å…·</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install wrk</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>å®¢æˆ·ç«¯å¯¹æœåŠ¡ç«¯è¿›è¡ŒæŠ—å‹æµ‹è¯•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> -t 6 è¡¨ç¤º6ä¸ªçº¿ç¨‹</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -c 30000 è¡¨ç¤º3ä¸‡ä¸ªè¿æ¥</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -d 60s è¡¨ç¤ºæŒç»­å‹æµ‹60ç§’</span></span><br><span class="line">wrk -t 6 -c 30000 -d 60s http://192.168.234.200</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110262014446.png" alt="image-20211026201412323"></p></li></ul><ul><li><p>æœåŠ¡ç«¯å¤šæ¬¡æ‰§è¡Œsså‘½ä»¤æŸ¥çœ‹å…¨è¿æ¥é˜Ÿåˆ—çš„æƒ…å†µ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ss -lnt</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110262021751.png" alt="image-20211026202152288"></p><p>å¯ä»¥çœ‹åˆ°TCPå…¨é“¾æ¥é˜Ÿåˆ—é€æ¸ä¸Šå‡åˆ°<strong>æœ€å¤§å…¨è¿æ¥é•¿åº¦ä¸º511</strong>ï¼Œå½“å…¨è¿æ¥é˜Ÿåˆ—ä¸º<strong>512</strong>æ—¶å³ä¸º<strong>å…¨è¿æ¥é˜Ÿåˆ—æº¢å‡º</strong>ï¼Œ<strong>å½“è¶…è¿‡äº† TCP æœ€å¤§å…¨è¿æ¥é˜Ÿåˆ—ï¼ŒæœåŠ¡ç«¯åˆ™ä¼šä¸¢æ‰åç»­è¿›æ¥çš„ TCP è¿æ¥</strong>ï¼Œæ‰€ä»¥ä¸‹ä¸€ä¸ªçŠ¶æ€<strong>å…¨è¿æ¥é˜Ÿåˆ—</strong>åˆæ¢å¤äº†<strong>511</strong></p></li></ul><ul><li><p>æŸ¥çœ‹è¢«ä¸¢å¼ƒçš„è¿æ¥ä¸ªæ•°</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -s | grep overflowed</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110262031051.png" alt="image-20211026203156762"></p></li></ul><ul><li><p>ç»“è®º</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110262034104.png" alt="å…¨è¿æ¥é˜Ÿåˆ—æº¢å‡º"></p></li></ul><p>å½“æœåŠ¡ç«¯å¹¶å‘å¤„ç†å¤§é‡è¯·æ±‚æ—¶ï¼Œå¦‚æœ TCP å…¨è¿æ¥é˜Ÿåˆ—è¿‡å°ï¼Œå°±å®¹æ˜“æº¢å‡ºã€‚å‘ç”Ÿ TCP å…¨è¿æ¥é˜Ÿæº¢å‡ºçš„æ—¶å€™ï¼Œåç»­çš„è¯·æ±‚å°±ä¼šè¢«ä¸¢å¼ƒï¼Œè¿™æ ·å°±ä¼šå‡ºç°æœåŠ¡ç«¯è¯·æ±‚æ•°é‡ä¸Šä¸å»çš„ç°è±¡</p><h5 id="ï¼ˆ4ï¼‰å…¨è¿æ¥é˜Ÿåˆ—æº¢å‡ºç­–ç•¥"><a href="#ï¼ˆ4ï¼‰å…¨è¿æ¥é˜Ÿåˆ—æº¢å‡ºç­–ç•¥" class="headerlink" title="ï¼ˆ4ï¼‰å…¨è¿æ¥é˜Ÿåˆ—æº¢å‡ºç­–ç•¥"></a>ï¼ˆ4ï¼‰å…¨è¿æ¥é˜Ÿåˆ—æº¢å‡ºç­–ç•¥</h5><ul><li><p>åº”å¯¹å…¨è¿æ¥é˜Ÿåˆ—æº¢å‡ºæœ‰ä»¥ä¸‹ä¸¤ç§åº”å¯¹ç­–ç•¥ï¼š</p><ol><li>é˜Ÿåˆ—æ»¡äº†ä»¥åä¸¢å¼ƒåç»­è¿æ¥ï¼ˆLiunxé»˜è®¤ç­–ç•¥ï¼‰</li><li>å‘å®¢æˆ·ç«¯å‘é€RSTå¤ä½æŠ¥æ–‡ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯è¿æ¥å·²ç»å»ºç«‹å¤±è´¥</li></ol></li></ul><ul><li><p>æŸ¥çœ‹æœåŠ¡ç«¯<code>tcp_abort_on_overflow</code>å‚æ•°</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/sys/net/ipv4/tcp_abort_on_overflow</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110262047259.png" alt="image-20211026204705056"></p><ol><li>tcp_abort_on_overflowä¸º0ï¼šå¦‚æœå…¨è¿æ¥é˜Ÿåˆ—æ»¡äº†ï¼Œé‚£ä¹ˆ server æ‰”æ‰ client å‘è¿‡æ¥çš„ ack</li><li>å¦‚æœå…¨è¿æ¥é˜Ÿåˆ—æ»¡äº†ï¼Œserver å‘é€ä¸€ä¸ª <code>reset</code> åŒ…ç»™ clientï¼Œè¡¨ç¤ºåºŸæ‰è¿™ä¸ªæ¡æ‰‹è¿‡ç¨‹å’Œè¿™ä¸ªè¿æ¥</li></ol></li></ul><ul><li><p>å°†æœåŠ¡ç«¯çš„<code>tcp_abort_on_overflow</code>è®¾ä¸º1è¿›è¡Œæµ‹è¯•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo 1 &gt; /proc/sys/net/ipv4/tcp_abort_on_overflow</span><br></pre></td></tr></table></figure></li></ul><p>  å®¢æˆ·ç«¯å†æ¬¡å¯¹æœåŠ¡ç«¯è¿›è¡ŒæŠ—å‹æµ‹è¯•</p>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> -t 6 è¡¨ç¤º6ä¸ªçº¿ç¨‹</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -c 30000 è¡¨ç¤º3ä¸‡ä¸ªè¿æ¥</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -d 60s è¡¨ç¤ºæŒç»­å‹æµ‹60ç§’</span></span><br><span class="line">wrk -t 6 -c 30000 -d 60s http://192.168.234.200</span><br></pre></td></tr></table></figure><p>â€‹    å®¢æˆ·ç«¯å¼‚å¸¸ä¸­ä¼šæŸ¥çœ‹åˆ°å¾ˆå¤šçš„<code>connection reset by peer</code>é”™è¯¯</p><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œåº”å½“æŠŠ <code>tcp_abort_on_overflow</code> è®¾ç½®ä¸º 0ï¼Œå› ä¸ºè¿™æ ·æ›´æœ‰åˆ©äºåº”å¯¹çªå‘æµé‡</p><h5 id="ï¼ˆ5ï¼‰å¢å¤§å…¨è¿æ¥é˜Ÿåˆ—"><a href="#ï¼ˆ5ï¼‰å¢å¤§å…¨è¿æ¥é˜Ÿåˆ—" class="headerlink" title="ï¼ˆ5ï¼‰å¢å¤§å…¨è¿æ¥é˜Ÿåˆ—"></a>ï¼ˆ5ï¼‰å¢å¤§å…¨è¿æ¥é˜Ÿåˆ—</h5><p>TCPå…¨è¿æ¥é˜Ÿåˆ—æœ€å¤§å€¼å–å†³äº<strong>somaxconn</strong>ï¼ˆLinuxå†…æ ¸å‚æ•°ï¼‰å’Œ<strong>backlog</strong>ï¼ˆNginxä¸­é…ç½®ï¼‰ä¹‹é—´çš„æœ€å°å€¼</p><ul><li><p>æŸ¥çœ‹æœåŠ¡ç«¯<strong>somaxconn</strong>çš„å€¼</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/sys/net/core/somaxconn</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110262132994.png" alt="image-20211026213244511"></p></li></ul><ul><li><p>ä¿®æ”¹<strong>backlog</strong>çš„é»˜è®¤å€¼</p><p>nginxçš„backlogé»˜è®¤å€¼ä¸º511ï¼ˆé…ç½®æ–‡ä»¶å¯ä»¥ä¸å†™å‡ºï¼‰ï¼Œç°åœ¨ä¿®æ”¹ä¸º4000</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure><p>åœ¨listenç«¯å£åé¢åŠ ä¸Š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">backlog=4000</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110262301329.png" alt="image-20211026230115019"></p></li></ul><p>  é‡å¯nginxæœåŠ¡</p>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl reload  nginx</span><br></pre></td></tr></table></figure><p>  æœåŠ¡ç«¯å†æ¬¡æ‰§è¡Œsså‘½ä»¤ï¼ŒæŸ¥çœ‹TCPå…¨è¿æ¥é˜Ÿåˆ—å¤§å°</p><p>  <img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110262304069.png" alt="image-20211026230418393"></p><ul><li><p>å†æ¬¡è¿›è¡Œæµ‹å‹</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110262308892.png" alt="image-20211026230850636"></p></li></ul><p>å¦‚æœçœ‹åˆ°æº¢å‡ºçš„æ¬¡æ•°ä¸å†å¢åŠ ï¼Œè¯´æ˜TCPå…¨è¿æ¥é˜Ÿåˆ—æœ€å¤§å€¼ä¸º4000æ—¶å¯ä»¥æŠ—ä½3ä¸‡è¿æ¥çš„å¹¶å‘è¯·æ±‚</p><h4 id="10-TCPåŠè¿æ¥é˜Ÿåˆ—"><a href="#10-TCPåŠè¿æ¥é˜Ÿåˆ—" class="headerlink" title="10.TCPåŠè¿æ¥é˜Ÿåˆ—"></a>10.TCPåŠè¿æ¥é˜Ÿåˆ—</h4><h5 id="ï¼ˆ1ï¼‰æŸ¥çœ‹TCPåŠè¿æ¥é˜Ÿåˆ—é•¿åº¦"><a href="#ï¼ˆ1ï¼‰æŸ¥çœ‹TCPåŠè¿æ¥é˜Ÿåˆ—é•¿åº¦" class="headerlink" title="ï¼ˆ1ï¼‰æŸ¥çœ‹TCPåŠè¿æ¥é˜Ÿåˆ—é•¿åº¦"></a>ï¼ˆ1ï¼‰æŸ¥çœ‹TCPåŠè¿æ¥é˜Ÿåˆ—é•¿åº¦</h5><p>å®¢æˆ·ç«¯è¿è¡Œwrkè¯·æ±‚æœåŠ¡ç«¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wrk -t 6 -c 30000 -d 60s http://192.168.234.200</span><br></pre></td></tr></table></figure><p>æœåŠ¡ç«¯è¿è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å½“å‰TCPåŠè¿æ¥é˜Ÿåˆ—é•¿åº¦</p><p>ï¼ˆpsï¼šæ³¨æ„è¦å°†nginxçš„backlogè°ƒæ•´å›é»˜è®¤å€¼ï¼Œå¦åˆ™åŠè¿æ¥é˜Ÿåˆ—ä¼šå¤„ç†å¤ªå¿«ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -natp | grep SYN_RECV | wc -l</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110270815566.png" alt="image-20211027081537300"></p><h5 id="ï¼ˆ2ï¼‰åŠè¿æ¥é˜Ÿåˆ—æº¢å‡º"><a href="#ï¼ˆ2ï¼‰åŠè¿æ¥é˜Ÿåˆ—æº¢å‡º" class="headerlink" title="ï¼ˆ2ï¼‰åŠè¿æ¥é˜Ÿåˆ—æº¢å‡º"></a>ï¼ˆ2ï¼‰åŠè¿æ¥é˜Ÿåˆ—æº¢å‡º</h5><p>æ¨¡æ‹ŸTCPåŠè¿æ¥æº¢å‡ºçš„åœºæ™¯ï¼Œå®é™…ä¸Šå°±æ˜¯å¯¹æœåŠ¡ç«¯ä¸€ç›´å‘é€SYNåŒ…ï¼Œä½†æ˜¯ä¸å›ç¬¬ä¸‰æ¬¡æ¡æ‰‹ACKï¼Œè¿™æ ·ä¼šä½¿æœåŠ¡ç«¯æœ‰å¤§é‡çš„å¤„äº <code>SYN_RECV</code> çŠ¶æ€çš„ TCP è¿æ¥ï¼ˆå³åŠè¿æ¥çŠ¶æ€ï¼‰ï¼Œè¿™ä¹Ÿå°±æ˜¯æ‰€è°“çš„ SYN æ´ªæ³›ã€SYN æ”»å‡»ã€DDos æ”»å‡»</p><ul><li><p>é¦–å…ˆè¦å…ˆå…³é—­æœåŠ¡ç«¯çš„<strong>tcp_syncookies</strong>ï¼Œtcp_syncookies æ˜¯Linuxç¼“è§£ SYN æ”»å‡»å…¶ä¸­ä¸€ä¸ªæ‰‹æ®µ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo 0 &gt;  &#x2F;proc&#x2F;sys&#x2F;net&#x2F;ipv4&#x2F;tcp_syncookies</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>å®¢æˆ·ç«¯ä½¿ç”¨hping3å·¥å…·æ¨¡æ‹ŸSYNæ”»å‡»</p><p>kali linuxå·²å†…ç½®å®‰è£…äº†hping3æ— é¡»å†æ¬¡å®‰è£…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> -S æŒ‡å®šTCPåŒ…çš„æ ‡å¿—ä½SYN</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -p 80 æŒ‡å®šæ¢æµ‹çš„ç›®çš„ç«¯å£</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ---flood ä»¥æ³›æ´ªçš„æ–¹å¼æ”»å‡»</span></span><br><span class="line">hping3 -S -p 80 --flood 192.168.234.200</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>æœåŠ¡ç«¯å¾ªç¯æŸ¥çœ‹å½“å‰TCPåŠè¿æ¥é˜Ÿåˆ—å¤§å°</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">while true; </span><br><span class="line">do </span><br><span class="line">sleep 0.5; </span><br><span class="line">echo &quot;å½“å‰åŠè¿æ¥é˜Ÿåˆ—æ•°ï¼š&quot;;</span><br><span class="line">    netstat -natp | grep SYN_RECV | wc -l;</span><br><span class="line">    echo &quot; &quot;;</span><br><span class="line">done;</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>æœåŠ¡ç«¯å¾ªç¯ä½¿ç”¨ <code>netstat -s</code> æŸ¥çœ‹åŠè¿æ¥é˜Ÿåˆ—æº¢å‡ºæƒ…å†µ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">while true; </span><br><span class="line">do </span><br><span class="line">sleep 1; </span><br><span class="line">echo &quot;åŠè¿æ¥é˜Ÿåˆ—æº¢å‡ºæ•°&quot;;</span><br><span class="line">    netstat -s | grep &quot;SYNs to LISTEN&quot;;</span><br><span class="line">    echo &quot; &quot;;</span><br><span class="line">done;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110270909570.png" alt="image-20211027090955138"></p><p>ä¸Šé¢çš„æ•°å€¼æ˜¯<strong>ç´¯è®¡å€¼</strong>ï¼Œå¦‚æœæœ‰ä¸Šå‡çš„è¶‹åŠ¿ï¼Œè¯´æ˜å½“å‰å­˜åœ¨åŠè¿æ¥é˜Ÿåˆ—æº¢å‡ºçš„ç°è±¡</p></li></ul><h5 id="ï¼ˆ3ï¼‰å¢å¤§åŠè¿æ¥é˜Ÿåˆ—"><a href="#ï¼ˆ3ï¼‰å¢å¤§åŠè¿æ¥é˜Ÿåˆ—" class="headerlink" title="ï¼ˆ3ï¼‰å¢å¤§åŠè¿æ¥é˜Ÿåˆ—"></a>ï¼ˆ3ï¼‰å¢å¤§åŠè¿æ¥é˜Ÿåˆ—</h5><p>åŠè¿æ¥é˜Ÿåˆ—æœ€å¤§å€¼ï¼ˆmax_qlen_logï¼‰ä¸æ˜¯å•å•ç”± max_syn_backlog å†³å®šï¼Œè¿˜è·Ÿ somaxconn å’Œ backlog æœ‰å…³ç³»</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110271303894.png" alt="img"></p><ul><li>å½“ max_syn_backlog &gt; min(somaxconn, backlog) æ—¶ï¼Œ åŠè¿æ¥é˜Ÿåˆ—æœ€å¤§å€¼ max_qlen_log = min(somaxconn, backlog) * 2;</li><li>å½“ max_syn_backlog &lt; min(somaxconn, backlog) æ—¶ï¼Œ åŠè¿æ¥é˜Ÿåˆ—æœ€å¤§å€¼ max_qlen_log = max_syn_backlog * 2;</li><li>å³ max_syn_backlogï¼Œsomaxconnï¼Œbacklogæœ€å°çš„ä¸€ä¸ªæ•°ä¹˜ä»¥2ä¸ºåŠè¿æ¥é˜Ÿåˆ—æœ€å¤§å€¼</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110271322835.png" alt="image-20211027132147887"></p><p>å› ä¸ºnginxçš„backlogé»˜è®¤ä¸º511ï¼Œæ‰€ä»¥è¯¥ç³»ç»Ÿmax_qlen_logçš„å€¼ä¸º256</p><p>max_qlen_log æ˜¯<strong>ç†è®º</strong>åŠè¿æ¥é˜Ÿåˆ—æœ€å¤§å€¼ï¼Œå¹¶ä¸ä¸€å®šä»£è¡¨æœåŠ¡ç«¯å¤„äº SYN_REVC çŠ¶æ€çš„æœ€å¤§ä¸ªæ•°</p><h5 id="ï¼ˆ4ï¼‰åŠè¿æ¥é˜Ÿåˆ—æº¢å‡ºç­–ç•¥"><a href="#ï¼ˆ4ï¼‰åŠè¿æ¥é˜Ÿåˆ—æº¢å‡ºç­–ç•¥" class="headerlink" title="ï¼ˆ4ï¼‰åŠè¿æ¥é˜Ÿåˆ—æº¢å‡ºç­–ç•¥"></a>ï¼ˆ4ï¼‰åŠè¿æ¥é˜Ÿåˆ—æº¢å‡ºç­–ç•¥</h5><p>åŠè¿æ¥é˜Ÿåˆ—æº¢å‡ºæœ‰ä¸¤ç§åº”å¯¹ç­–ç•¥ï¼š</p><ul><li>å½“syncookies=0æ—¶ï¼ŒTCPä¼šä¸¢å¼ƒè¿æ¥</li><li>å½“syncookies=1æ—¶ï¼ŒæœåŠ¡ç«¯å¼€å¯ syncookies åŠŸèƒ½ï¼Œå…¶å¯ä»¥åœ¨ä¸ä½¿ç”¨ SYN åŠè¿æ¥é˜Ÿåˆ—çš„æƒ…å†µä¸‹æˆåŠŸå»ºç«‹è¿æ¥ï¼ˆé»˜è®¤é…ç½®ï¼‰</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110271326186.png" alt="img"></p><p>syncookiesçš„è¿è¡ŒåŸç†ï¼šæœåŠ¡å™¨æ ¹æ®å½“å‰çŠ¶æ€è®¡ç®—å‡ºä¸€ä¸ªå€¼ï¼Œæ”¾åœ¨å·±æ–¹å‘å‡ºçš„ SYN+ACK æŠ¥æ–‡ä¸­å‘å‡ºï¼Œå½“å®¢æˆ·ç«¯è¿”å› ACK æŠ¥æ–‡æ—¶ï¼Œå–å‡ºè¯¥å€¼éªŒè¯ï¼Œå¦‚æœåˆæ³•ï¼Œå°±è®¤ä¸ºè¿æ¥å»ºç«‹æˆåŠŸ</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹ç³»ç»Ÿsyncookiesçš„å€¼</p><p>ä¸ºäº†åº”å¯¹SYNæ”»å‡»ï¼Œå…¶é»˜è®¤ä¸º1ï¼ˆä¸Šé¢çš„å®éªŒæˆ‘ä»¬æ”¹ä¸ºäº†0ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/sys/net/ipv4/tcp_syncookies</span><br></pre></td></tr></table></figure><p>syncookies å‚æ•°ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ä¸ªå€¼ï¼š</p><ul><li>0 å€¼ï¼Œè¡¨ç¤ºå…³é—­è¯¥åŠŸèƒ½</li><li>1 å€¼ï¼Œè¡¨ç¤ºä»…å½“ SYN åŠè¿æ¥é˜Ÿåˆ—æ”¾ä¸ä¸‹æ—¶ï¼Œå†å¯ç”¨å®ƒ</li><li>2 å€¼ï¼Œè¡¨ç¤ºæ— æ¡ä»¶å¼€å¯åŠŸèƒ½</li></ul><h5 id="ï¼ˆ5ï¼‰SYNæ”»å‡»åº”å¯¹æ–¹æ³•"><a href="#ï¼ˆ5ï¼‰SYNæ”»å‡»åº”å¯¹æ–¹æ³•" class="headerlink" title="ï¼ˆ5ï¼‰SYNæ”»å‡»åº”å¯¹æ–¹æ³•"></a>ï¼ˆ5ï¼‰SYNæ”»å‡»åº”å¯¹æ–¹æ³•</h5><ul><li>å¢å¤§åŠè¿æ¥é˜Ÿåˆ—</li></ul><p>è¦æ³¨æ„éœ€è¦åŒæ—¶å¢å¤§<strong>tcp_max_syn_backlog</strong> ï¼Œ<strong>somaxconn</strong> å’Œ <strong>backlog</strong>ï¼Œå…¶ä¸­æœ€å°å€¼çš„ä¸¤å€å³ä¸º<strong>åŠè¿æ¥é˜Ÿåˆ—</strong>çš„æœ€å¤§å€¼ï¼ŒåŒæ—¶somaxconn å’Œ backlogçš„æœ€å°å€¼ä¸º<strong>å…¨è¿æ¥é˜Ÿåˆ—</strong>çš„æœ€å¤§å€¼</p><ul><li>å¼€å¯ tcp_syncookies åŠŸèƒ½ï¼ˆä¸€èˆ¬é»˜è®¤å¼€å¯ï¼‰</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo 1 &gt; /proc/sys/net/ipv4/tcp_syncookies</span><br></pre></td></tr></table></figure><ul><li>å‡å°‘ SYN+ACK é‡ä¼ æ¬¡æ•°</li></ul><p>å½“æœåŠ¡ç«¯å—åˆ° SYN æ”»å‡»æ—¶ï¼Œå°±ä¼šæœ‰å¤§é‡å¤„äº SYN_REVC çŠ¶æ€çš„ TCP è¿æ¥ï¼Œå¤„äºè¿™ä¸ªçŠ¶æ€çš„ TCP ä¼šé‡ä¼  SYN+ACK ï¼Œå½“é‡ä¼ è¶…è¿‡æ¬¡æ•°è¾¾åˆ°ä¸Šé™åï¼Œå°±ä¼šæ–­å¼€è¿æ¥</p><p>æ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥å‡å°‘SYN+ACKçš„é‡ä¼ æ¬¡æ•°ï¼Œä»¥åŠ å¿«SYN_REVCçŠ¶æ€çš„TCPè¿æ¥ç«¯å£</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> è®¾ç½®ACK,SYNé‡ä¼ æ¬¡æ•°ä¸º1</span></span><br><span class="line">echo 1 &gt;  /proc/sys/net/ipv4/tcp_synack_retries</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;img src=&quot;https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110271342730.webp&quot; alt=&quot;Iâ€™m going to tell a joke | excel-memes, tcp-memes, udp-memes | ProgrammerHumor.io&quot; style=&quot;zoom: 50%;&quot;&gt;



&lt;p&gt;TCPå¥½å¤æ‚ğŸ¤§ï¼Œä¸»è¦ä½¿ç”¨äº†Kali Linuxä¸Šçš„ä¸€äº›ç½‘ç»œå·¥å…·æ¥è¿›è¡Œåˆ†æï¼Œå¸Œæœ›èƒ½ç›´è§‚åœ°è§£æTCPï¼ˆå¤‡è€ƒä¸­ï¼Œæ›´æ–°ç¼“æ…¢â€¦ï¼‰&lt;/p&gt;
    
    </summary>
    
    
      <category term="å¼€å‘åŸç†" scheme="https://autovy.github.io/categories/%E5%BC%80%E5%8F%91%E5%8E%9F%E7%90%86/"/>
    
    
      <category term="å¼€å‘åŸç†" scheme="https://autovy.github.io/tags/%E5%BC%80%E5%8F%91%E5%8E%9F%E7%90%86/"/>
    
      <category term="æ·±åº¦ç³»åˆ—" scheme="https://autovy.github.io/tags/%E6%B7%B1%E5%BA%A6%E7%B3%BB%E5%88%97/"/>
    
      <category term="è®¡ç®—æœºç½‘ç»œ" scheme="https://autovy.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
      <category term="TCP" scheme="https://autovy.github.io/tags/TCP/"/>
    
  </entry>
  
  <entry>
    <title>å¼€å‘åŸç†|HTTPä¸HTTPS</title>
    <link href="https://autovy.github.io/2021/10/17/DevPrinciple/HTTP%E4%B8%8EHTTPS/"/>
    <id>https://autovy.github.io/2021/10/17/DevPrinciple/HTTP%E4%B8%8EHTTPS/</id>
    <published>2021-10-17T15:45:00.000Z</published>
    <updated>2021-10-17T12:21:58.314Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110172010735.webp" alt="Oh the fun of HTTP-based applications"></p><p>åŸºäºHTTPåº”ç”¨ç¨‹åºçš„ä¹è¶£ï¼Œbutâ€¦</p> <img src="https://img.devrant.com/devrant/rant/r_54040_zGEQB.jpg" style="zoom:20%;"><span id="more"></span><h3 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h3><h4 id="1-HTTPåŸºæœ¬æ¦‚å¿µ"><a href="#1-HTTPåŸºæœ¬æ¦‚å¿µ" class="headerlink" title="1.HTTPåŸºæœ¬æ¦‚å¿µ"></a>1.HTTPåŸºæœ¬æ¦‚å¿µ</h4><h5 id="ï¼ˆ1ï¼‰è¶…æ–‡æœ¬ä¼ è¾“åè®®"><a href="#ï¼ˆ1ï¼‰è¶…æ–‡æœ¬ä¼ è¾“åè®®" class="headerlink" title="ï¼ˆ1ï¼‰è¶…æ–‡æœ¬ä¼ è¾“åè®®"></a>ï¼ˆ1ï¼‰è¶…æ–‡æœ¬ä¼ è¾“åè®®</h5><p>HTTPæ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆ<strong>H</strong>yperText <strong>T</strong>ransfer <strong>P</strong>rotocolï¼‰ï¼Œå‡†ç¡®çš„å®šä¹‰ä¸º<strong>HTTP æ˜¯ä¸€ä¸ªåœ¨è®¡ç®—æœºä¸–ç•Œé‡Œä¸“é—¨åœ¨ä¸¤ç‚¹ä¹‹é—´ä¼ è¾“æ–‡å­—ã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰è¶…æ–‡æœ¬æ•°æ®çš„çº¦å®šå’Œè§„èŒƒ</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110140812679.png" alt="img"></p><ul><li>åè®®ï¼šHTTPç¡®è®¤äº†ä¸€ç§è®¡ç®—æœºä¹‹é—´äº¤æµ<strong>é€šä¿¡è§„èŒƒ</strong>ï¼Œä»¥åŠå„ç§ç›¸å…³çš„å„ç§æ§åˆ¶å’Œé”™è¯¯å¤„ç†æ–¹å¼ï¼ˆ<strong>è¡Œä¸ºçº¦å®šå’Œè§„èŒƒ</strong>ï¼‰</li><li>ä¼ è¾“ï¼šHTTPæ˜¯ä¸€ä¸ª<strong>åŒå‘åè®®</strong>ï¼Œä¼ è¾“å°±æ˜¯æ•°æ®éœ€è¦ç»è¿‡ä¸€ç³»åˆ—çš„ç‰©ç†ä»‹è´¨ä»ä¸€ä¸ªç«¯ç³»ç»Ÿä¼ é€åˆ°å¦å¤–ä¸€ä¸ªç«¯ç³»ç»Ÿçš„è¿‡ç¨‹ï¼ˆ<strong>è¯·æ±‚æ–¹-åº”ç­”æ–¹</strong>ï¼‰</li><li>è¶…æ–‡æœ¬ï¼šè¶…æ–‡æœ¬é¡¾åæ€ä¹‰å°±æ˜¯è¶…è¶Šäº†æ™®é€šæ–‡æœ¬çš„æ–‡æœ¬ï¼Œæœ€å¸¸ç”¨çš„è¶…æ–‡æœ¬æ˜¯<strong>HTML</strong>ï¼Œæ˜¯æ–‡ç« ã€å›¾ç‰‡ã€è§†é¢‘ä»¥åŠå¯ä»¥è·³è½¬åˆ°å…¶ä»–è¶…æ–‡æœ¬ç­‰çš„<strong>æ··åˆä½“</strong></li></ul><h5 id="ï¼ˆ2ï¼‰HTTPçŠ¶æ€ç "><a href="#ï¼ˆ2ï¼‰HTTPçŠ¶æ€ç " class="headerlink" title="ï¼ˆ2ï¼‰HTTPçŠ¶æ€ç "></a>ï¼ˆ2ï¼‰HTTPçŠ¶æ€ç </h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110140831637.webp" alt="Quick guide to HTTP Status codes"></p><p>å¥½åƒæ²¡æ¯›ç—…ğŸ˜‚ï¼Œæ›´åŠ å…·ä½“çš„è¯´æ˜å¦‚ä¸‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110140836668.png" alt="img"></p><ul><li>1xxï¼š<strong>æç¤ºä¿¡æ¯</strong>ï¼Œæ˜¯åè®®å¤„ç†ä¸­çš„<strong>ä¸­é—´çŠ¶æ€</strong>ï¼Œå®é™…ç”¨åˆ°æ¯”è¾ƒå°‘</li><li>2xxï¼šæœåŠ¡å™¨<strong>æˆåŠŸ</strong>å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚<ol><li>200 ï¼ˆ<strong>OK</strong>ï¼‰ï¼šæœ€å¸¸è§çš„<strong>æˆåŠŸ</strong>çŠ¶æ€ç ï¼Œè¡¨ç¤ºä¸€åˆ‡æ­£å¸¸ï¼ŒéHEADè¯·æ±‚ï¼ŒæœåŠ¡å™¨è¿”å›çš„å“åº”å¤´éƒ½ä¼š<strong>æœ‰body</strong>æ•°æ®</li><li>204ï¼ˆ<strong>No Content</strong>ï¼‰ï¼šä¸200åŸºæœ¬ç›¸åŒï¼Œä½†æ˜¯å“åº”å¤´<strong>æ²¡æœ‰body</strong>æ•°æ®</li><li>206ï¼ˆ<strong>Partial Content</strong>ï¼‰ï¼šåº”ç”¨äºHTTP<strong>åˆ†å—ä¸‹è½½</strong>æˆ–<strong>æ–­ç”µç»­ä¼ </strong>ï¼Œè¡¨ç¤ºå“åº”è¿”å›çš„bodyæ•°æ®å¹¶ä¸æ˜¯èµ„æºçš„å…¨éƒ¨</li></ol></li><li>3xxï¼šå®¢æˆ·ç«¯è¯·æ±‚çš„èµ„æºå‘ç”Ÿäº†å˜åŠ¨ï¼Œéœ€è¦è¿›è¡Œ<strong>é‡å®šå‘</strong>ï¼ˆåœ¨å“åº”å¤´é‡Œä½¿ç”¨å­—æ®µ <code>Location</code>ï¼ŒæŒ‡æ˜åç»­è¦è·³è½¬çš„ URLï¼‰<ol><li>301ï¼ˆ<strong>Moved Permanently</strong>ï¼‰ï¼šè¡¨ç¤ºæ°¸ä¹…é‡å®šå‘ï¼Œè¯´æ˜è¯·æ±‚çš„èµ„æºå·²ç»<strong>ä¸å­˜åœ¨</strong>ï¼Œéœ€è¦æ”¹ç”¨æ–°çš„URLå†æ¬¡è®¿é—®</li><li>302ï¼ˆ<strong>Moved Permanently</strong>ï¼‰ï¼šè¡¨ç¤ºä¸´æ—¶é‡å®šå‘ï¼Œè¯´æ˜è¯·æ±‚çš„èµ„æº<strong>è¿˜åœ¨</strong>ï¼Œä½†æš‚æ—¶éœ€è¦ç”¨å¦ä¸€ä¸ªURLæ¥è®¿é—®</li><li>304ï¼ˆ<strong>Not Modified</strong>ï¼‰ï¼šç¼“å†²é‡å®šå‘ï¼Œç”¨äºç¼“å­˜æ§åˆ¶ï¼Œè¡¨ç¤ºèµ„æºæœªä¿®æ”¹ï¼Œé‡å®šå‘åˆ°å·²å­˜åœ¨çš„ç¼“å†²æ–‡ä»¶</li></ol></li><li>4xxï¼šå®¢æˆ·ç«¯å‘é€çš„æŠ¥æ–‡æœ‰è¯¯ï¼ŒæœåŠ¡å™¨æ— æ³•å¤„ç†<ol><li>400ï¼ˆ<strong>Bad Request</strong>ï¼‰ï¼šè¡¨ç¤ºå®¢æˆ·ç«¯è¯·æ±‚çš„æŠ¥æ–‡æœ‰è¯¯ï¼Œä½†æ˜¯æ˜¯ä¸ª<strong>ç¬¼ç»Ÿ</strong>çš„é”™è¯¯</li><li>403ï¼ˆ<strong>Forbidden</strong>ï¼‰ï¼šè¡¨ç¤ºæœåŠ¡å™¨<strong>ç¦æ­¢è®¿é—®</strong>èµ„æºï¼Œå¹¶ä¸æ˜¯å®¢æˆ·ç«¯è¯·æ±‚å‡ºé”™</li><li>404ï¼ˆ<strong>Not Found</strong>ï¼‰ï¼šè¡¨ç¤ºè¯·æ±‚çš„èµ„æºåœ¨æœåŠ¡å™¨ä¸Š<strong>ä¸å­˜åœ¨</strong>æˆ–<strong>æœªæ‰¾åˆ°</strong>ï¼Œæ‰€ä»¥æ— æ³•æä¾›ç»™å®¢æˆ·ç«¯</li></ol></li><li>5xxï¼šæœåŠ¡å™¨å¤„ç†æ—¶å†…éƒ¨å‘ç”Ÿäº†é”™è¯¯<ol><li>500ï¼ˆ<strong>Internal Server Error</strong>ï¼‰ï¼šä¸€ä¸ª<strong>ç¬¼ç»Ÿ</strong>é€šç”¨çš„é”™è¯¯ï¼šæ˜¯çš„ï¼ŒæœåŠ¡å™¨å‘ç”Ÿé”™è¯¯äº†ï¼Œæˆ‘ä»¬ä¹Ÿä¸åˆ°ä»€ä¹ˆé”™è¯¯</li><li>501ï¼ˆ<strong>Not Implemented</strong>ï¼‰ï¼šå®¢æˆ·ç«¯è¯·æ±‚çš„åŠŸèƒ½æš‚ä¸æ”¯æŒï¼ˆæ•¬è¯·æœŸå¾…ï¼‰</li><li>502ï¼ˆBad Gatewayï¼‰ï¼šæœåŠ¡å™¨è‡ªèº«å·¥ä½œæ­£å¸¸ï¼Œè®¿é—®åç«¯æœåŠ¡å™¨æ—¶å‘ç”Ÿäº†é”™è¯¯ï¼ˆé€šå¸¸æ—¶ç”¨ä½œç½‘å…³æˆ–ä»£ç†æ—¶çš„é”™è¯¯ç ï¼‰</li><li>503ï¼ˆ<strong>Service Unavailable</strong>ï¼‰ï¼šæœåŠ¡å™¨å½“å‰æ­£å¿™ï¼Œæš‚æ—¶æ— æ³•å“åº”</li></ol></li></ul><h5 id="ï¼ˆ3ï¼‰HTTPå¸¸è§å­—æ®µ"><a href="#ï¼ˆ3ï¼‰HTTPå¸¸è§å­—æ®µ" class="headerlink" title="ï¼ˆ3ï¼‰HTTPå¸¸è§å­—æ®µ"></a>ï¼ˆ3ï¼‰HTTPå¸¸è§å­—æ®µ</h5><p><strong>é€šç”¨æ ‡å¤´ï¼š</strong>é€šç”¨æ ‡å¤´å¯ä»¥å‡ºç°åœ¨è¯·æ±‚æ ‡å¤´å’Œå“åº”æ ‡å¤´</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110141947390.png" alt="image-20211014194734284"></p><ul><li><p>Dateï¼šè¡¨ç¤ºåˆ›å»ºæŠ¥æ–‡æ—¶é—´ï¼ˆæ ¼æ—å¨æ²»æ ‡å‡†æ—¶é—´ï¼‰</p><p><code>Date: Wed, 21 Oct 2015 07:28:00 GMT</code> </p></li></ul><ul><li><p>Cache-Controlï¼šå¯ä»¥è¡¨ç¤º<strong>å¯ç¼“å­˜æ€§</strong>ã€é˜ˆå€¼æ€§ã€ é‡æ–°éªŒè¯å¹¶é‡æ–°åŠ è½½å’Œå…¶ä»–ç‰¹æ€§</p><p><code>Cache-control: no-cache</code></p></li></ul><ul><li><p>Connectionï¼šå†³å®šå½“å‰äº‹åŠ¡ï¼ˆä¸€æ¬¡ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹ï¼‰å®Œæˆåï¼Œæ˜¯å¦å…³é—­ç½‘ç»œè¿æ¥ï¼ˆå³æ˜¯å¦å¤ç”¨TCPè¿æ¥ï¼‰</p><p><code>Connection: keep-alive</code>ï¼š<strong>æŒä¹…æ€§</strong>è¿æ¥ï¼Œä¸€æ¬¡äº‹åŠ¡å®Œæˆå<strong>ä¸å…³é—­</strong>ç½‘ç»œè¿æ¥</p><p><code>Connection: close</code>ï¼š<strong>éæŒä¹…åŒ–</strong>è¿æ¥ï¼Œä¸€æ¬¡äº‹åŠ¡å®Œæˆå<strong>å…³é—­</strong>ç½‘ç»œè¿æ¥</p></li></ul><p><strong>å®ä½“æ ‡å¤´ï¼š</strong>å®ä½“æ ‡å¤´æ˜¯æè¿°æ¶ˆæ¯æ­£æ–‡å†…å®¹çš„ HTTP æ ‡å¤´</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110141955891.png" alt="image-20211014195508646"></p><ul><li>Content-Lengthï¼šæŒ‡ç¤ºå®ä½“ä¸»ä½“çš„å¤§å°ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ï¼Œå‘é€åˆ°æ¥æ”¶æ–¹</li></ul><p>  <img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110142001859.jpeg" alt="img"></p><ul><li>Content-Typeï¼šç”¨äºæè¿°æ•°æ®ç±»å‹ï¼ˆæ ¼å¼ï¼‰ï¼Œä¸Accepté…å¥—</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110142006988.jpeg" alt="img"></p><ul><li><p>Content-Encodingï¼šç”¨æ¥è¯´æ˜æè¿°çš„å‹ç¼©æ–¹æ³•å’Œç¼–ç ç±»å‹ï¼Œä¸Accept-Encodingé…å¥—</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110142003250.jpeg" alt="img"></p></li></ul><ul><li>Content-Languageï¼šæè¿°äº†å®¢æˆ·ç«¯æˆ–è€…æœåŠ¡ç«¯èƒ½å¤Ÿæ¥å—çš„è¯­è¨€ï¼Œä¸Accept-Languageé…å¥—</li></ul><p><strong>è¯·æ±‚æ ‡å¤´ï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110142011873.png" alt="image-20211014201122463"></p><ul><li><p>Hostï¼šæŒ‡æ˜æœåŠ¡å™¨åŸŸåä¸TCPç«¯å£å·ï¼ˆä¹Ÿæœ‰å†™ä½œauthorityï¼‰</p><p><code>Host: autovy.github.io</code></p></li></ul><ul><li><p>Refererï¼šå‘Šè¯‰æœåŠ¡å™¨è¯¥ç½‘é¡µæ˜¯ä»å“ªä¸ªé¡µé¢é“¾æ¥è·³è½¬è¿‡æ¥çš„</p><p><code>Referer: https://autovy.github.io/</code></p></li></ul><ul><li><p>If-None-Matchï¼šä½¿è¯·æ±‚æ ‡å¤´æˆä¸º<strong>æ¡ä»¶è¯·æ±‚</strong>ï¼Œå½“ä¸ç»™å®šèµ„æº<strong>ETag</strong>ä¸åŒ¹é…æ—¶æ‰ä¼šå¤„ç†è¯·æ±‚</p><p><code>if-none-match: W/&quot;61665f52-7ba7&quot;</code></p></li></ul><ul><li><p>If-Modified-Sinceï¼šIf-Modified-Since é€šå¸¸ä¼šä¸ If-None-Match æ­é…ä½¿ç”¨ï¼Œç”¨äºç¡®è®¤ä»£ç†æˆ–å®¢æˆ·ç«¯æ‹¥æœ‰çš„æœ¬åœ°èµ„æºçš„<strong>æœ‰æ•ˆæ€§</strong>ï¼ˆåœ¨ <code>Last-Modified</code> ä¹‹åæ›´æ–°äº†æœåŠ¡å™¨èµ„æºï¼Œé‚£ä¹ˆæœåŠ¡å™¨ä¼šå“åº” 200ï¼Œå¦‚æœåœ¨ <code>Last-Modified</code> ä¹‹åæ²¡æœ‰æ›´æ–°è¿‡èµ„æºï¼Œåˆ™è¿”å› 304ï¼‰</p><p><code>If-Modified-Since: Sat, 09 Oct 2021 01:58:35 GMT</code></p></li></ul><ul><li><p>Acceptï¼šå‘ŠçŸ¥æœåŠ¡å™¨å®¢æˆ·ç«¯èƒ½å¤Ÿç†è§£çš„<strong>MIMEç±»å‹</strong>ï¼Œä¸Content-Typeé…å¥—</p><p><code>accept:text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9</code></p></li></ul><ul><li>Accept-Charsetï¼šè§„å®šæœåŠ¡å™¨å¤„ç†è¡¨å•æ•°æ®æ‰€æ¥å—çš„<strong>å­—ç¬¦é›†</strong></li></ul><ul><li><p>Accept-Language ï¼šç”¨æ¥å‘ŠçŸ¥æœåŠ¡å™¨å®¢æˆ·ç«¯èƒ½å¤Ÿå¤„ç†çš„<strong>è‡ªç„¶è¯­è¨€é›†</strong></p><p><code>accept-language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6</code></p></li></ul><p><strong>å“åº”æ ‡å¤´ï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110141925192.png" alt="img"></p><ul><li>Access-Control-Allow-Originï¼š æŒ‡å®šä¸€ä¸ªæ¥æºï¼Œå®ƒå‘Šè¯‰æµè§ˆå™¨å…è®¸è¯¥æ¥æºè¿›è¡Œèµ„æºè®¿é—®</li></ul><ul><li><p>Keep-Aliveï¼šè¡¨ç¤ºçš„æ˜¯ Connection éæŒç»­è¿æ¥çš„å­˜æ´»æ—¶é—´ï¼Œå¯ä»¥è¿›è¡ŒæŒ‡å®šï¼Œä¸Connectioné…å¥—</p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/J0g14CUwaZfXG1113Sjm0iaOXfoOv0tlUlhrVicZt4iaLPPibcD8KQV4z9vqwAaAjdtkjUo5fGlKOsTaicbtEDO4u1Q/640?wx_fmt=jpeg" alt="img"></p></li></ul><ul><li>Serverï¼šæœåŠ¡å™¨æ ‡å¤´åŒ…å«æœ‰å…³<strong>åŸå§‹æœåŠ¡å™¨</strong>ç”¨æ¥å¤„ç†è¯·æ±‚çš„è½¯ä»¶çš„ä¿¡æ¯</li></ul><ul><li>Set-Cookieï¼šç”¨äºæœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€ <strong>sessionID</strong></li></ul><ul><li>Transfer-Encodingï¼šè§„å®šäº†ä¼ è¾“æŠ¥æ–‡ä¸»ä½“æ—¶é‡‡ç”¨çš„<strong>ç¼–ç æ–¹å¼</strong></li></ul><ul><li>X-Frame-Optionsï¼šç”¨äºæ§åˆ¶ç½‘ç«™å†…å®¹åœ¨å…¶ä»– Web ç½‘ç«™çš„ <strong>Frame æ ‡ç­¾</strong>å†…çš„æ˜¾ç¤ºé—®é¢˜ï¼Œå…¶ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†é˜²æ­¢ç‚¹å‡»<strong>åŠ«æŒæ”»å‡»</strong></li></ul><h5 id="ï¼ˆ4ï¼‰HTTPæ— çŠ¶æ€åˆ†æ"><a href="#ï¼ˆ4ï¼‰HTTPæ— çŠ¶æ€åˆ†æ" class="headerlink" title="ï¼ˆ4ï¼‰HTTPæ— çŠ¶æ€åˆ†æ"></a>ï¼ˆ4ï¼‰HTTPæ— çŠ¶æ€åˆ†æ</h5><p><strong>æ— çŠ¶æ€åè®®</strong>æŒ‡æµè§ˆå™¨å¯¹äºäº‹åŠ¡çš„å¤„ç†æ²¡æœ‰<strong>è®°å¿†èƒ½åŠ›</strong>ï¼ŒHTTPè¿æ¥ä¹‹é—´å½¼æ­¤ç‹¬ç«‹ï¼Œä¸ä¼šå¯¹è¯·æ±‚å’Œå“åº”ä¹‹é—´çš„é€šä¿¡è¿›è¡Œä¿å­˜</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110161444685.png" alt="img"></p><p>è€Œ<strong>Cookie</strong>æŠ€æœ¯å¯ä»¥é€šè¿‡åœ¨è¯·æ±‚å’Œå“åº”æŠ¥æ–‡ä¸­å†™å…¥Cookieä¿¡æ¯æ¥æ§åˆ¶å®¢æˆ·ç«¯çš„çŠ¶æ€</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110161446059.png" alt="img"></p><ul><li>å®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡å‘æœåŠ¡ç«¯å‘èµ·è¯·æ±‚</li><li>æœåŠ¡ç«¯å¼€è¾Ÿä¸€å—<strong>Sessionç©ºé—´</strong>ï¼ŒåŒæ—¶ç”Ÿæˆä¸€ä¸ª<strong>sessionId</strong>ï¼Œé€šè¿‡å“åº”å¤´çš„<strong>Set-Cookie</strong>å‘½ä»¤è¦æ±‚å®¢æˆ·ç«¯è®¾ç½®<strong>Cookie</strong></li><li>å®¢æˆ·ç«¯æ”¶åˆ°å“åº”åï¼Œåœ¨æœ¬åœ°è®¾ç½®<strong>JSESSIONID</strong>çš„<strong>Cookie</strong>ä¿¡æ¯ï¼Œé»˜è®¤è¿‡æœŸæ—¶é—´ä¸ºæµè§ˆå™¨ä¼šè¯ç»“æŸï¼›æ¥ä¸‹æ¥å®¢æˆ·ç«¯å‘åŒä¸€ä¸ªå®Œæ•´å‘é€è¯·æ±‚æ—¶éƒ½ä¼šæºå¸¦è¯¥<strong>Cookie</strong>ä¿¡æ¯</li><li>æœåŠ¡ç«¯é€šè¿‡è¯»å–è¯·æ±‚å¤´çš„<strong>Cookie</strong>ä¿¡æ¯ï¼Œè·å–<strong>JSESSIONID</strong>çš„å€¼ï¼Œä¸å­˜å‚¨çš„<strong>Session</strong>å†…çš„<strong>seesionId</strong>åŒ¹é…</li></ul><p>æ­¤å¤–è¿˜æœ‰ä¸€ç§è®©æµè§ˆå™¨æœ‰è®°å¿†èƒ½åŠ›çš„æœºåˆ¶â€”â€”<strong>JWTæœºåˆ¶</strong>ï¼ˆJSON WEB TOKENï¼‰ï¼Œä¸Cookieä¸åŒï¼ŒJWTæ˜¯ä¿å­˜åœ¨å®¢æˆ·ç«¯çš„ä¿¡æ¯ï¼Œå¹¿æ³›ç”¨äº<strong>å•ç‚¹ç™»å½•</strong>ï¼Œè¿™é‡Œå…ˆæŒ–ä¸ªå‘ä»¥åä¼šè¯¦ç»†å‡ºä¸€ç¯‡è®²å•ç‚¹ç™»å½•çš„æ–‡ç« </p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110161506705.webp" alt="img"></p><p>JWTæ˜¯åŸºäºtokençš„é‰´æƒæœºåˆ¶ï¼Œä¸éœ€è¦æœåŠ¡ç«¯å»ä¿ç•™ç”¨æˆ·çš„è®¤è¯ä¿¡æ¯æˆ–è€…ä¼šè¯ä¿¡æ¯</p><ul><li>ç”¨æˆ·ä½¿ç”¨ç”¨æˆ·åå¯†ç æ¥è¯·æ±‚æœåŠ¡å™¨</li><li>æœåŠ¡å™¨è¿›è¡ŒéªŒè¯ç”¨æˆ·çš„ä¿¡æ¯</li><li>æœåŠ¡å™¨é€šè¿‡éªŒè¯å‘é€ç»™ç”¨æˆ·ä¸€ä¸ªtokenï¼ˆä»¤ç‰Œï¼‰</li><li>å®¢æˆ·ç«¯å­˜å‚¨tokenï¼Œå¹¶åœ¨æ¯æ¬¡è¯·æ±‚æ—¶é™„é€ä¸Šè¿™ä¸ªtokenå€¼</li><li>æœåŠ¡ç«¯éªŒè¯tokenå€¼ï¼Œå¹¶è¿”å›æ•°æ®ï¼ˆtokenä¸€èˆ¬å­˜åœ¨æ•°æ®åº“ä¸­ï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨å†…å­˜ä¸­ï¼‰</li></ul><h4 id="2-GETä¸POST"><a href="#2-GETä¸POST" class="headerlink" title="2.GETä¸POST"></a>2.GETä¸POST</h4><h5 id="ï¼ˆ1ï¼‰GETä¸POSTåŒºåˆ«"><a href="#ï¼ˆ1ï¼‰GETä¸POSTåŒºåˆ«" class="headerlink" title="ï¼ˆ1ï¼‰GETä¸POSTåŒºåˆ«"></a>ï¼ˆ1ï¼‰GETä¸POSTåŒºåˆ«</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110161530468.jpeg" alt="img"></p><p>GETè¯·æ±‚æŠ¥æ–‡ï¼š</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GET</span> <span class="string">/home.html</span> <span class="meta">HTTP/1.1</span></span><br><span class="line"><span class="attribute">User-Agent</span><span class="punctuation">: </span>Mozilla/4.0 (compatible; MSIE5.01; Windows NT)</span><br><span class="line"><span class="attribute">Host</span><span class="punctuation">: </span>www.java67.blogspot.com</span><br><span class="line"><span class="attribute">Accept-Language</span><span class="punctuation">: </span>en-us</span><br><span class="line"><span class="attribute">Accept-Encoding</span><span class="punctuation">: </span>gzip, deflate</span><br><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>Keep-Alive</span><br></pre></td></tr></table></figure><p>POSTè¯·æ±‚æŠ¥æ–‡:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">POST</span> <span class="string">/</span> <span class="meta">HTTP/1.1</span></span><br><span class="line">content-type:application/x-www-form-urlencoded;charset=utf-8</span><br><span class="line">host: https://importexport.amazonaws.com</span><br><span class="line">content-length:207</span><br><span class="line"></span><br><span class="line">Action=GetStatus&amp;SignatureMethod=HmacSHA256&amp;JobId=JOBID&amp;SignatureVersion=2</span><br><span class="line">&amp;Version=2010-06-03&amp;Signature=%2FVfkltRBOoSUi1sWxRzN8rw%3D</span><br><span class="line">&amp;Timestamp=2011-06-20T22%3A30%3A59.556Z</span><br></pre></td></tr></table></figure><ul><li><strong>GET</strong>æ–¹æ³•çš„å«ä¹‰æ˜¯ä»æœåŠ¡å™¨è·å–<strong>èµ„æº</strong>ï¼Œå‘é€çš„å†…å®¹æ·»åŠ åœ¨urlå</li><li><strong>POST</strong>æ–¹æ³•å…ˆ<strong>URI</strong>æŒ‡å®šèµ„æºæäº¤æ•°æ®ï¼Œè¿™äº›æ•°æ®æ”¾åœ¨æŠ¥æ–‡bodyä¸­</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110161540496.png" alt="img"></p><h5 id="ï¼ˆ2ï¼‰å®‰å…¨ä¸å¹‚ç­‰"><a href="#ï¼ˆ2ï¼‰å®‰å…¨ä¸å¹‚ç­‰" class="headerlink" title="ï¼ˆ2ï¼‰å®‰å…¨ä¸å¹‚ç­‰"></a>ï¼ˆ2ï¼‰å®‰å…¨ä¸å¹‚ç­‰</h5><ul><li><p>å®‰å…¨ï¼šåœ¨HTTPåè®®ä¸­ï¼Œ<strong>å®‰å…¨</strong>å³è¯·æ±‚æ–¹æ³•ä¸å…¨ä¸ä¼š<strong>ç ´å</strong>æœåŠ¡å™¨çš„èµ„æº</p></li><li><p>å¹‚ç­‰ï¼šå¤šæ¬¡æ‰§è¡Œç›¸åŒæ“ä½œï¼Œç»“æœ<strong>ç›¸åŒ</strong>å³ä¸€æ¬¡è¯·æ±‚å’Œé‡å¤çš„å¤šæ¬¡è¯·æ±‚å¯¹ç³»ç»Ÿèµ„æºçš„å½±å“æ˜¯ä¸€è‡´çš„ï¼Œå¹‚ç­‰æ€æƒ³åœ¨å¼€å‘ä¸­æœ‰å¤šå¤„åº”ç”¨ï¼Œå¯å‚è€ƒæ–‡ç« <a href="https://os.51cto.com/art/202012/633886.htm">å¹‚ç­‰æœ¬è´¨</a>äº†è§£æ›´å¤š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110161549945.png" alt="img"></p></li></ul><ul><li><p>GETï¼š GETæ–¹æ³•æ˜¯<strong>å®‰å…¨ä¸”å¹‚ç­‰</strong>çš„ï¼Œå®ƒæ˜¯<strong>åªè¯»</strong>æ“ä½œï¼ŒæœåŠ¡å™¨ä¸Šæ•°æ®å®‰å…¨ä¸”æ¯æ¬¡ç»“æœ<strong>ç›¸åŒ</strong></p></li><li><p>POSTï¼šPOSTæ–¹æ³•æ˜¯<strong>ä¸å®‰å…¨ä¸”ä¸å¹‚ç­‰</strong>ï¼Œå®ƒæ˜¯<strong>æ–°å¢æˆ–æäº¤æ•°æ®</strong>æ“ä½œä¼šä¿®æ”¹æœåŠ¡å™¨ä¸Šçš„èµ„æºï¼Œæ‰€ä»¥<strong>ä¸å®‰å…¨</strong>ï¼›å¤šæ¬¡æäº¤æ•°æ®å°±ä¼šåˆ›å»ºå¤šä¸ªèµ„æºï¼Œæ‰€ä»¥ä¸æ˜¯<strong>å¹‚ç­‰</strong>çš„</p></li></ul><h4 id="3-HTTPç‰¹æ€§"><a href="#3-HTTPç‰¹æ€§" class="headerlink" title="3.HTTPç‰¹æ€§"></a>3.HTTPç‰¹æ€§</h4><h5 id="ï¼ˆ1ï¼‰HTTPçš„ä¼˜ç‚¹"><a href="#ï¼ˆ1ï¼‰HTTPçš„ä¼˜ç‚¹" class="headerlink" title="ï¼ˆ1ï¼‰HTTPçš„ä¼˜ç‚¹"></a>ï¼ˆ1ï¼‰HTTPçš„ä¼˜ç‚¹</h5><ul><li>ç®€å•ï¼šHTTP åŸºæœ¬çš„æŠ¥æ–‡æ ¼å¼å°±æ˜¯ <code>header + body</code>ï¼Œå¤´éƒ¨ä¿¡æ¯ä¹Ÿæ˜¯ <code>key-value</code> ç®€å•æ–‡æœ¬çš„å½¢å¼ï¼Œ<strong>æ˜“äºç†è§£</strong></li><li>çµæ´»å’Œæ˜“äºæ‰©å±•ï¼šHTTPåè®®ä¸­çš„å„ç±»è¯·æ±‚æ–¹æ³•ã€URI/URLã€çŠ¶æ€ç ã€å¤´å­—æ®µç­‰æ¯ä¸ªç»„æˆè¦æ±‚éƒ½å…è®¸å¼€å‘äººå‘˜<strong>è‡ªå®šä¹‰å’Œæ‰©å……</strong>ï¼Œå¹¶ä¸”HTTPå·¥ä½œåœ¨åº”ç”¨å±‚ï¼Œå…¶ä¸‹å±‚å¯ä»¥éšæ„å˜åŒ–</li><li>åº”ç”¨å¹¿æ³›å’Œè·¨å¹³å°ï¼šHTTPçš„åº”ç”¨èŒƒå›´å¹¿æ³›ï¼Œè€Œä¸”å¯ä»¥è·¨å¹³å°ä½¿ç”¨</li></ul><h5 id="ï¼ˆ2ï¼‰HTTPçš„ç¼ºç‚¹"><a href="#ï¼ˆ2ï¼‰HTTPçš„ç¼ºç‚¹" class="headerlink" title="ï¼ˆ2ï¼‰HTTPçš„ç¼ºç‚¹"></a>ï¼ˆ2ï¼‰HTTPçš„ç¼ºç‚¹</h5><ul><li><p>æ— çŠ¶æ€åŒåˆƒå‰‘</p><ol><li>æ— çŠ¶æ€çš„å¥½å¤„ï¼šæœåŠ¡å™¨ä¸éœ€è¦è®°å¿†HTTPçŠ¶æ€ï¼Œä¸éœ€è¦é¢å¤–èµ„æºè®°å½•çŠ¶æ€ä¿¡æ¯ï¼Œå‡è½»æœåŠ¡å™¨è´Ÿæ‹…</li><li>æ— çŠ¶æ€çš„åå¤„ï¼šæœåŠ¡å™¨åœ¨éœ€è¦è¿›è¡Œå…³è”æ“ä½œæ—¶ä¼šéå¸¸éº»çƒ¦</li><li>æ— çŠ¶æ€çš„é—®é¢˜å¯ä»¥é…åˆCookieæˆ–Tokenè¿›è¡Œè§£å†³</li></ol></li></ul><ul><li><p>æ˜æ–‡ä¼ è¾“åŒåˆƒå‰‘</p><ol><li>æ˜æ–‡ä¼ è¾“å¥½å¤„ï¼šæ–¹ä¾¿é˜…è¯»ï¼Œä¸º<strong>è°ƒè¯•</strong>æä¾›æå¤§çš„ä¾¿åˆ©æ€§</li><li>æ˜æ–‡ä¼ è¾“åå¤„ï¼šä½ èƒ½çœ‹åˆ°çš„ä¿¡æ¯åˆ«äººä¹Ÿèƒ½çœ‹åˆ°ï¼Œæ•æ„Ÿä¿¡æ¯ç›´æ¥å°±<strong>è£¸å¥”</strong>äº†</li></ol></li></ul><ul><li>ä¸å®‰å…¨<ol><li>é€šä¿¡ç”¨æ˜æ–‡ï¼Œå†…å®¹å®¹æ˜“è¢«çªƒå¬</li><li>ä¸éªŒè¯é€šä¿¡æ–¹çš„èº«ä»½ï¼Œå¯èƒ½é­é‡ä¼ªè£…</li><li>æ— æ³•éªŒè¯æŠ¥æ–‡çš„å®Œæ•´æ€§ï¼Œå¯ä»¥ä¼šè¢«ç¯¡æ”¹</li></ol></li></ul><h5 id="ï¼ˆ3ï¼‰HTTPæ€§èƒ½"><a href="#ï¼ˆ3ï¼‰HTTPæ€§èƒ½" class="headerlink" title="ï¼ˆ3ï¼‰HTTPæ€§èƒ½"></a>ï¼ˆ3ï¼‰HTTPæ€§èƒ½</h5><p>ä¸»è¦é’ˆå¯¹ç›®å‰åº”ç”¨å¹¿æ³›çš„HTTP/1.1è¿›è¡Œè¯„æµ‹</p><ul><li><p>é•¿è¿æ¥ï¼šæä¾›æŒä¹…è¿æ¥ï¼Œå‡å°‘TCPè¿æ¥çš„é‡å¤å»ºç«‹å’Œæ–­å¼€æ‰€é€ æˆçš„é¢å¤–å¼€é”€</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110162038444.jpeg" alt="img"></p></li></ul><ul><li><p>ç®¡é“ç½‘ç»œä¼ è¾“ï¼šå®¢æˆ·ç«¯å‘èµ·å¤šä¸ªè¯·æ±‚ï¼Œå‘èµ·äº†ä¸€ä¸ªè¯·æ±‚åä¸å¿…ç­‰å¾…å“åº”ï¼Œè€Œæ˜¯ç»§ç»­å‘é€ä¸‹ä¸€ä¸ªè¯·æ±‚ï¼Œä»è€Œå‡å°‘æ•´ä½“çš„å“åº”æ—¶é—´</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110162042091.jpeg" alt="img"></p></li></ul><ul><li><p>é˜Ÿå¤´é˜»å¡ï¼šå½“é¡ºåºå‘é€æ—¶ï¼Œè¯·æ±‚åºåˆ—ä¸­çš„ä¸€ä¸ªè¯·æ±‚è¢«é˜»å¡äº†ï¼Œåœ¨åé¢æ’é˜Ÿçš„æ‰€æœ‰è¯·æ±‚è¢«é˜»å¡äº†</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110162044395.jpeg" alt="img"></p></li></ul><h4 id="4-HTTPç‰ˆæœ¬æ¯”è¾ƒ"><a href="#4-HTTPç‰ˆæœ¬æ¯”è¾ƒ" class="headerlink" title="4.HTTPç‰ˆæœ¬æ¯”è¾ƒ"></a>4.HTTPç‰ˆæœ¬æ¯”è¾ƒ</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110162046556.jpeg" alt="img"></p><h5 id="ï¼ˆ1ï¼‰HTTP-1-1"><a href="#ï¼ˆ1ï¼‰HTTP-1-1" class="headerlink" title="ï¼ˆ1ï¼‰HTTP/1.1"></a>ï¼ˆ1ï¼‰HTTP/1.1</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110162105544.png" alt="image-20211016210504151"></p><p>HTTP/1.1çš„æ€§èƒ½æ”¹è¿›ï¼š</p><ul><li>ä½¿ç”¨<strong>é•¿è¿æ¥</strong>æ”¹å–„çŸ­é“¾æ¥é€ æˆçš„æ€§èƒ½å¼€é”€</li><li>æ”¯æŒ<strong>ç®¡é“ç½‘ç»œä¼ è¾“</strong>ï¼Œåªè¦ç¬¬ä¸€ä¸ªè¯·æ±‚å‘å‡ºå»äº†ï¼Œä¸å¿…ç­‰å…¶å›æ¥ï¼Œå°±å¯ä»¥å‘ç¬¬äºŒä¸ªè¯·æ±‚å‡ºå»ï¼Œå¯ä»¥å‡å°‘æ•´ä½“çš„å“åº”æ—¶é—´</li></ul><p>HTTP/1.1 æ€§èƒ½ç“¶é¢ˆï¼š</p><ul><li>è¯·æ±‚/å“åº”<strong>å¤´éƒ¨æœªç»å‹ç¼©</strong>å°±å‘é€ï¼Œåªå‹ç¼©äº†Bodyéƒ¨åˆ†ï¼Œé¦–éƒ¨ä¿¡æ¯è¶Šå¤šå»¶è¿Ÿè¶Šå¤§</li><li>å‘é€<strong>å†—é•¿çš„é¦–éƒ¨</strong>ï¼Œæ¯æ¬¡äº’ç›¸å‘é€ç›¸åŒçš„é¦–éƒ¨é€ æˆæµªè´¹è¾ƒå¤š</li><li>é˜Ÿå¤´é˜»å¡</li><li>æ²¡æœ‰è¯·æ±‚ä¼˜å…ˆçº§æ§åˆ¶</li><li>è¯·æ±‚åªèƒ½ä»å®¢æˆ·ç«¯å¼€å§‹ï¼ŒæœåŠ¡å™¨åªèƒ½è¢«åŠ¨å“åº”</li></ul><h5 id="ï¼ˆ2ï¼‰HTTP-2"><a href="#ï¼ˆ2ï¼‰HTTP-2" class="headerlink" title="ï¼ˆ2ï¼‰HTTP/2"></a>ï¼ˆ2ï¼‰HTTP/2</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110162104685.png" alt="image-20211016210448418"></p><p>HTTP/2çš„æ€§èƒ½æ”¹è¿›ï¼š</p><ul><li><p>å¤´éƒ¨å‹ç¼©</p><p>åˆ©ç”¨<strong>HPACKç®—æ³•</strong>å‹ç¼©å¤´éƒ¨ï¼Œå¦‚æœåŒæ—¶å‘å‡ºå¤šä¸ªè¯·æ±‚ï¼Œå¯ä»¥æ¶ˆé™¤é‡å¤çš„éƒ¨åˆ†ï¼ˆåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åŒæ—¶ç»´æŠ¤ä¸€å¼ å¤´ä¿¡æ¯è¡¨ï¼Œæ‰€æœ‰å­—æ®µéƒ½ä¼šå­˜å…¥è¿™ä¸ªè¡¨ï¼Œç”Ÿæˆä¸€ä¸ªç´¢å¼•å·ï¼Œä»¥åå°±ä¸å‘é€åŒæ ·å­—æ®µäº†ï¼Œåªå‘é€ç´¢å¼•å·ï¼‰</p></li></ul><ul><li><p>äºŒè¿›åˆ¶æ ¼å¼</p><p>æŠ¥æ–‡é‡‡ç”¨<strong>äºŒè¿›åˆ¶æ ¼å¼</strong>è€Œä¸æ˜¯çº¯æ–‡æœ¬çš„å½¢å¼ï¼Œå¤´ä¿¡æ¯å’Œæ•°æ®ä½“éƒ½æ˜¯äºŒè¿›åˆ¶ç»Ÿç§°ä¸ºå¸§ï¼Œå¢åŠ æ•°æ®ä¼ è¾“çš„æ•ˆç‡</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110162058061.png" alt="img"></p></li></ul><ul><li><p>æ•°æ®æµ</p><p>æ•°æ®åŒ…ä¸æ˜¯æŒ‰é¡ºåºå‘é€ï¼ŒåŒä¸€ä¸ªè¿æ¥é‡Œé¢è¿ç»­çš„æ•°æ®åŒ…ï¼Œå¯èƒ½å±äºä¸åŒçš„å›åº”</p><p>å› æ­¤è¦å¯¹æ•°æ®åŒ…åšæ ‡è®°ï¼Œæ¯ä¸ªè¯·æ±‚æˆ–å›åº”çš„æ‰€æœ‰æ•°æ®åŒ…ï¼Œç§°ä¸ºä¸€ä¸ª<strong>æ•°æ®æµ</strong>ï¼ˆ<code>Stream</code>ï¼‰</p><p>æ¯ä¸ªæ•°æ®æµéƒ½æ ‡è®°ç€ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„ç¼–å·ï¼Œå…¶ä¸­è§„å®šå®¢æˆ·ç«¯å‘å‡ºçš„æ•°æ®æµç¼–å·ä¸ºå¥‡æ•°ï¼Œ æœåŠ¡å™¨å‘å‡ºçš„æ•°æ®æµç¼–å·ä¸ºå¶æ•°</p><p>å®¢æˆ·ç«¯è¿˜å¯ä»¥<strong>æŒ‡å®šæ•°æ®æµçš„ä¼˜å…ˆçº§</strong>ï¼Œä¼˜å…ˆçº§é«˜çš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨å°±å…ˆå“åº”è¯¥è¯·æ±‚</p></li></ul><ul><li><p>å¤šè·¯å¤ç”¨</p><p>åœ¨<strong>ä¸€ä¸ªè¿æ¥ä¸­å¹¶å‘å¤šä¸ªè¯·æ±‚æˆ–å›åº”ï¼Œè€Œä¸ç”¨æŒ‰ç…§é¡ºåºä¸€ä¸€å¯¹åº”</strong>ï¼Œä¸éœ€è¦æ’é˜Ÿç­‰å¾…ï¼Œä¹Ÿå°±ä¸ä¼šå†å‡ºç°ã€Œé˜Ÿå¤´é˜»å¡ã€é—®é¢˜ï¼Œ<strong>é™ä½äº†å»¶è¿Ÿï¼Œå¤§å¹…åº¦æé«˜äº†è¿æ¥çš„åˆ©ç”¨ç‡</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110162107565.jpeg" alt="img"></p></li></ul><ul><li><p>æœåŠ¡å™¨æ¨é€</p><p>æœåŠ¡ä¸å†æ˜¯è¢«åŠ¨åœ°å“åº”ï¼Œä¹Ÿå¯ä»¥<strong>ä¸»åŠ¨</strong>å‘å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯</p><p>åœ¨æµè§ˆå™¨åˆšè¯·æ±‚ HTML çš„æ—¶å€™ï¼Œå°±æå‰æŠŠå¯èƒ½ä¼šç”¨åˆ°çš„ JSã€CSS æ–‡ä»¶ç­‰é™æ€èµ„æºä¸»åŠ¨å‘ç»™å®¢æˆ·ç«¯ï¼Œ<strong>å‡å°‘å»¶æ—¶çš„ç­‰å¾…</strong>ï¼Œä¹Ÿå°±æ˜¯<strong>æœåŠ¡å™¨æ¨é€</strong></p></li></ul><p>HTTP/2 æ€§èƒ½ç“¶é¢ˆï¼š</p><ul><li>å¤šä¸ªHTTPè¯·æ±‚å¤ç”¨ä¸€ä¸ªTCPè¿æ¥ï¼Œä¸‹å±‚çš„ TCP åè®®æ˜¯ä¸çŸ¥é“æœ‰å¤šå°‘ä¸ª HTTP è¯·æ±‚</li><li>ä¸€æ—¦å‘ç”Ÿä¸¢åŒ…ç°è±¡ï¼Œå°±ä¼šè§¦å‘<strong>é‡ä¼ æœºåˆ¶</strong>ï¼Œè¿™æ ·åœ¨ä¸€ä¸ª TCP è¿æ¥ä¸­çš„<strong>æ‰€æœ‰çš„ HTTP è¯·æ±‚éƒ½å¿…é¡»ç­‰å¾…è¿™ä¸ªä¸¢äº†çš„åŒ…è¢«é‡ä¼ å›æ¥</strong></li><li>è¿™äº›éƒ½æ˜¯åŸºäºTCPä¼ è¾“å±‚çš„é—®é¢˜ï¼Œæ‰€ä»¥ <strong>HTTP/3 æŠŠ HTTP ä¸‹å±‚çš„ TCP åè®®æ”¹æˆäº† UDP</strong></li></ul><h5 id="ï¼ˆ3ï¼‰HTTP-3"><a href="#ï¼ˆ3ï¼‰HTTP-3" class="headerlink" title="ï¼ˆ3ï¼‰HTTP/3"></a>ï¼ˆ3ï¼‰HTTP/3</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110162114689.png" alt="image-20211016211442384"></p><p>HTTP/3çš„æ€§èƒ½æ”¹è¿›ï¼š</p><ul><li><p><strong>HTTP/3 æŠŠ HTTP ä¸‹å±‚çš„ TCP åè®®æ”¹æˆäº† UDP</strong>ï¼ŒUDP å‘ç”Ÿæ˜¯ä¸ç®¡é¡ºåºï¼Œä¹Ÿä¸ç®¡ä¸¢åŒ…çš„ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç° HTTP/1.1 çš„é˜Ÿå¤´é˜»å¡ å’Œ HTTP/2 çš„ä¸€ä¸ªä¸¢åŒ…å…¨éƒ¨é‡ä¼ é—®é¢˜</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110131208230.webp" alt="TCP/UDPæ¯”è¾ƒ"></p></li></ul><ul><li><p>UDPæ˜¯ä¸å¯é çš„ä¼ è¾“ï¼Œæ‰€ä»¥HTTP/3ä½¿ç”¨çš„æ˜¯åŸºäº UDP çš„ <strong>QUIC åè®®</strong> å¯ä»¥å®ç°ç±»ä¼¼ TCP çš„å¯é æ€§ä¼ è¾“</p><ol><li><p>QUICåè®®å½“æŸä¸ªæµå‘ç”Ÿä¸¢åŒ…æ—¶ï¼Œåªä¼šé˜»å¡è¿™ä¸ªæµï¼Œå…¶ä»–æµä¸ä¼šå—åˆ°å½±å“</p></li><li><p>TL3 å‡çº§æˆäº†æœ€æ–°çš„ <code>1.3</code> ç‰ˆæœ¬ï¼Œå¤´éƒ¨å‹ç¼©ç®—æ³•ä¹Ÿå‡çº§æˆäº† <code>QPack</code></p></li><li><p>HTTPS è¦å»ºç«‹ä¸€ä¸ªè¿æ¥ï¼Œè¦èŠ±è´¹ 6 æ¬¡äº¤äº’ï¼Œå…ˆæ˜¯å»ºç«‹ä¸‰æ¬¡æ¡æ‰‹ï¼Œç„¶åæ˜¯ <code>TLS/1.3</code> çš„ä¸‰æ¬¡æ¡æ‰‹ã€‚QUIC ç›´æ¥æŠŠä»¥å¾€çš„ TCP å’Œ <code>TLS/1.3</code> çš„ 6 æ¬¡äº¤äº’<strong>åˆå¹¶æˆäº† 3 æ¬¡ï¼Œå‡å°‘äº†äº¤äº’æ¬¡æ•°</strong></p></li><li><p>QUIC æ˜¯ä¸€ä¸ªåœ¨ UDP ä¹‹ä¸Šçš„<strong>ä¼ª</strong> TCP + TLS + HTTP/2 çš„å¤šè·¯å¤ç”¨çš„åè®®</p></li></ol></li></ul><pre><code>![img](https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110162120028.jpeg)</code></pre><p>HTTP/3 æ€§èƒ½ç“¶é¢ˆï¼š</p><p>QUIC æ˜¯æ–°åè®®ï¼Œå¯¹äºå¾ˆå¤šç½‘ç»œè®¾å¤‡ï¼Œæ ¹æœ¬ä¸çŸ¥é“ä»€ä¹ˆæ˜¯ QUICï¼Œåªä¼šå½“åš UDPï¼Œæ™®åŠçš„è¿›åº¦éå¸¸çš„ç¼“æ…¢</p><h3 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h3><h4 id="1-HTTPSåŸºæœ¬æ¦‚å¿µ"><a href="#1-HTTPSåŸºæœ¬æ¦‚å¿µ" class="headerlink" title="1.HTTPSåŸºæœ¬æ¦‚å¿µ"></a>1.HTTPSåŸºæœ¬æ¦‚å¿µ</h4><h5 id="ï¼ˆ1ï¼‰HTTPSå®šä¹‰"><a href="#ï¼ˆ1ï¼‰HTTPSå®šä¹‰" class="headerlink" title="ï¼ˆ1ï¼‰HTTPSå®šä¹‰"></a>ï¼ˆ1ï¼‰HTTPSå®šä¹‰</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110170930547.png" alt="img"></p><p>HTTPSï¼ˆHyperText Transfer Protocol Secureï¼‰è¶…æ–‡æœ¬ä¼ è¾“å®‰å…¨åè®®ï¼Œæ•°æ®é€šä¿¡ä»ç„¶æ˜¯HTTPï¼Œä½†åˆ©ç”¨<strong>SSL/TLSåŠ å¯†æ•°æ®åŒ…</strong></p><h5 id="ï¼ˆ2ï¼‰HTTPçš„å®‰å…¨é—®é¢˜"><a href="#ï¼ˆ2ï¼‰HTTPçš„å®‰å…¨é—®é¢˜" class="headerlink" title="ï¼ˆ2ï¼‰HTTPçš„å®‰å…¨é—®é¢˜"></a>ï¼ˆ2ï¼‰HTTPçš„å®‰å…¨é—®é¢˜</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110171058237.svg" alt="202110170933070 (1)"></p><p>HTTPçš„<strong>æ˜æ–‡ä¼ è¾“</strong>æ˜¯ä¸€ä¸ªè‡´å‘½ç¼ºé™·ï¼Œæ²¡æœ‰ç»è¿‡ä»»ä½•åŠ å¯†ï¼Œè€Œè¿™äº›æ˜æ–‡æ•°æ®ä¼šç»è¿‡<strong>WiFiã€è·¯ç”±å™¨ã€è¿è¥å•†ã€æœºæˆ¿</strong>ç­‰å¤šä¸ªç‰©ç†è®¾å¤‡èŠ‚ç‚¹ï¼Œå¦‚æœåœ¨è¿™ä¸­é—´ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹è¢«ç›‘å¬ï¼Œä¼ è¾“çš„å†…å®¹å°±ä¼šå®Œå…¨æš´éœ²ï¼Œï¼Œè¿™ä¸€æ”»å‡»æ‰‹æ³•å«åšMITMï¼ˆMan In The Middleï¼‰<strong>ä¸­é—´äºº</strong>æ”»å‡»</p><h4 id="2-HTTPSå®ç°åŸç†"><a href="#2-HTTPSå®ç°åŸç†" class="headerlink" title="2.HTTPSå®ç°åŸç†"></a>2.HTTPSå®ç°åŸç†</h4><h5 id="ï¼ˆ1ï¼‰å¯¹ç§°åŠ å¯†"><a href="#ï¼ˆ1ï¼‰å¯¹ç§°åŠ å¯†" class="headerlink" title="ï¼ˆ1ï¼‰å¯¹ç§°åŠ å¯†"></a>ï¼ˆ1ï¼‰å¯¹ç§°åŠ å¯†</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110170959993.png" alt="img"></p><p>å¯¹ç§°åŠ å¯†ç®—æ³•ä½¿ç”¨<strong>åŒä¸€ä¸ªå¯†é’¥</strong>è¿›è¡ŒåŠ å¯†å’Œè§£å¯†</p><ul><li>ä¼˜ç‚¹ï¼šé€Ÿåº¦å¿«ï¼Œé€‚åˆæ•°æ®é‡æ¯”è¾ƒå¤§çš„æ•°æ®è¿›è¡ŒåŠ å¯†</li><li>ç¼ºç‚¹ï¼šåœ¨HTTPSçš„ä¼ è¾“åœºæ™¯ä¸‹ï¼ŒæœåŠ¡ç«¯äº‹å…ˆå¹¶ä¸çŸ¥é“å®¢æˆ·ç«¯æ˜¯è°ï¼Œå¿…ç„¶éœ€è¦ä¸€ä¸ª<strong>å¯†é’¥ä¼ è¾“</strong>è¿‡ç¨‹ï¼Œè¿™æ„å‘³ç€è¯¥å¯†é’¥å¿…å®šä¼š<strong>æ³„éœ²</strong>ï¼Œåç»­çš„åŠ å¯†å°±ä¸èµ·ä½œç”¨äº†</li></ul><h5 id="ï¼ˆ2ï¼‰éå¯¹ç§°åŠ å¯†ï¼šä¸€ç»„å…¬ç§é’¥"><a href="#ï¼ˆ2ï¼‰éå¯¹ç§°åŠ å¯†ï¼šä¸€ç»„å…¬ç§é’¥" class="headerlink" title="ï¼ˆ2ï¼‰éå¯¹ç§°åŠ å¯†ï¼šä¸€ç»„å…¬ç§é’¥"></a>ï¼ˆ2ï¼‰éå¯¹ç§°åŠ å¯†ï¼šä¸€ç»„å…¬ç§é’¥</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110170959312.png" alt="img"></p><p>éå¯¹ç§°åŠ å¯†éœ€è¦ä¸¤ä¸ªå¯†é’¥ï¼Œä¸€ä¸ª<strong>å…¬å¼€å¯†é’¥ï¼ˆPublic Keyï¼‰</strong>,ä¸€ä¸ª<strong>ç§æœ‰å¯†é’¥ï¼ˆPrivate Keyï¼‰</strong>ã€‚å…¬é’¥å’Œç§é’¥æ˜¯ä¸€å¯¹ï¼Œå¦‚æœä½¿ç”¨å…¬é’¥è¿›è¡ŒåŠ å¯†çš„æ•°æ®ï¼Œåªæœ‰å¯¹åº”çš„ç§é’¥æ‰èƒ½è§£å¯†ã€‚ç›¸å¯¹çš„ï¼Œå¦‚æœæ˜¯ä½¿ç”¨ç§é’¥åŠ å¯†çš„æ•°æ®ï¼Œåªæœ‰å¯¹åº”çš„å…¬é’¥æ‰èƒ½è§£å¯†</p><ul><li>ä¼˜ç‚¹ï¼šå½“å®¢æˆ·ç«¯å‘èµ·è¿æ¥è¯·æ±‚ï¼ŒæœåŠ¡ç«¯å°†å…¬é’¥ä¼ è¾“è¿‡å»ï¼Œå®¢æˆ·ç«¯åˆ©ç”¨<strong>å…¬é’¥åŠ å¯†</strong>å¥½ä¿¡æ¯ï¼Œå†å°†å¯†æ–‡å‘é€ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯é‡Œç”¨<strong>ç§é’¥è§£å¯†</strong>ï¼Œä»è€ŒåŸºæœ¬ä¿è¯äº†å®¢æˆ·ç«¯å‘é€ä¿¡æ¯æ˜¯å®‰å…¨çš„ï¼ˆåªæœ‰æœåŠ¡å™¨çš„ç§é’¥å¯è§£ï¼‰</li><li>ç¼ºç‚¹ï¼šæœåŠ¡å™¨æ— æ³•è¿”å›åŠ å¯†å®‰å…¨çš„æ•°æ®ï¼ŒæœåŠ¡å™¨æœ‰<strong>å…¬é’¥å’Œç§é’¥</strong>ï¼Œå®¢æˆ·ç«¯åªæœ‰<strong>å…¬é’¥</strong>ã€‚å¦‚æœæœåŠ¡å™¨ç”¨å…¬é’¥åŠ å¯†ï¼Œå®¢æˆ·ç«¯ä¹Ÿæ²¡æœ‰ç§é’¥å¯ä»¥è§£å¯†ï¼›å¦‚æœæœåŠ¡å™¨ç”¨ç§é’¥åŠ å¯†ï¼Œä½†æ˜¯å…¬é’¥ç›¸å½“äºå…¬å¼€çš„ï¼Œè¿™æ ·æ•°æ®å°±ä¸å®‰å…¨äº†</li></ul><p>ä¸¥æ ¼æ¥è¯´ï¼Œç§é’¥å¹¶ä¸èƒ½ç”¨æ¥åŠ å¯†ï¼Œè€Œä¸€èˆ¬ç”¨ä½œ<strong>ç­¾å</strong>ä½¿ç”¨ï¼Œç­¾åçš„åŠŸèƒ½ä¹Ÿä¼šåº”ç”¨åœ¨HTTPSä¸­ï¼Œåé¢å†ç»†å—¦</p><h5 id="ï¼ˆ3ï¼‰éå¯¹ç§°åŠ å¯†ï¼šä¸¤ç»„å…¬ç§é’¥"><a href="#ï¼ˆ3ï¼‰éå¯¹ç§°åŠ å¯†ï¼šä¸¤ç»„å…¬ç§é’¥" class="headerlink" title="ï¼ˆ3ï¼‰éå¯¹ç§°åŠ å¯†ï¼šä¸¤ç»„å…¬ç§é’¥"></a>ï¼ˆ3ï¼‰éå¯¹ç§°åŠ å¯†ï¼šä¸¤ç»„å…¬ç§é’¥</h5><p>ä¸€ç»„å…¬é’¥ç§é’¥åªèƒ½ä¿è¯å®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯çš„<strong>å•ç¨‹åŠ è§£å¯†</strong>ï¼Œç†è®ºä¸Šä½¿ç”¨ä¸¤ç»„å…¬é’¥ç§é’¥æ˜¯å¯ä»¥ä¿è¯<strong>å¾€è¿”åŠ è§£å¯†</strong></p><ul><li>æœåŠ¡ç«¯æœ‰éå¯¹ç§°åŠ å¯†çš„å…¬é’¥A1ï¼Œç§é’¥A2</li><li>å®¢æˆ·ç«¯æœ‰éå¯¹ç§°åŠ å¯†çš„å…¬é’¥B1ï¼Œç§é’¥B2</li><li>å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡ç«¯å°†<strong>å…¬é’¥A1</strong>è¿”å›ç»™å®¢æˆ·ç«¯</li><li>æµè§ˆå™¨æ”¶åˆ°å…¬é’¥A1ï¼Œå°†è‡ªå·±ä¿å­˜çš„<strong>å…¬é’¥B1</strong>å‘é€ç»™æœåŠ¡ç«¯</li><li>ä¹‹åæµè§ˆå™¨æ‰€æœ‰å‘å®¢æˆ·ç«¯å‘é€çš„æ•°æ®ï¼Œä½¿ç”¨å…¬é’¥B1åŠ å¯†ï¼Œå®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨ç§é’¥B2è§£å¯†</li><li>å®¢æˆ·ç«¯æ‰€æœ‰å‘æœåŠ¡ç«¯å‘é€çš„æ•°æ®ï¼Œä½¿ç”¨å…¬é’¥A1åŠ å¯†ï¼ŒæœåŠ¡ç«¯å¯ä»¥ä½¿ç”¨ç§é’¥A2è§£å¯†</li></ul><p>è™½ç„¶éå¯¹ç§°åŠ å¯†ä¸¤ç»„å…¬ç§é’¥å¯ä»¥è®©ä¸¤æ¡ä¼ è¾“æ–¹å‘éƒ½ç»è¿‡éå¯¹ç§°åŠ å¯†ï¼Œéƒ½èƒ½ä¿è¯å®‰å…¨æ€§ï¼Œä½†æ˜¯<strong>éå¯¹ç§°åŠ å¯†è€—æ—¶è¿œå¤§äºå¯¹ç§°åŠ å¯†</strong>ï¼Œå¯¹æ€§èƒ½æœ‰å¾ˆå¤§çš„æŸè€—</p><h5 id="ï¼ˆ4ï¼‰æ··åˆåŠ å¯†"><a href="#ï¼ˆ4ï¼‰æ··åˆåŠ å¯†" class="headerlink" title="ï¼ˆ4ï¼‰æ··åˆåŠ å¯†"></a>ï¼ˆ4ï¼‰æ··åˆåŠ å¯†</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110171015628.jpeg" alt="img"></p><p>æ··åˆåŠ å¯†æ˜¯å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†çš„ç»“åˆä½“ï¼Œå³<strong>ä¼ è¾“å¯†é’¥</strong>æ—¶ï¼ˆä¸€èˆ¬ä¼ è¾“å…±äº«çš„<strong>å¯¹ç§°å¯†é’¥</strong>ï¼‰ä½¿ç”¨<strong>éå¯¹ç§°åŠ å¯†</strong>çš„å…¬é’¥åŠ å¯†ï¼Œ<strong>ä¼ è¾“æ•°æ®</strong>æ—¶ä½¿ç”¨<strong>å…±äº«å¯¹ç§°å¯†é’¥</strong>åŠ å¯†</p><ul><li><strong>éå¯¹ç§°åŠ å¯†</strong>äº¤æ¢<strong>å¯¹ç§°åŠ å¯†</strong>çš„<strong>ä¼šè¯å¯†é’¥</strong></li><li><strong>å¯¹ç§°åŠ å¯†</strong>ä½¿ç”¨<strong>ä¼šè¯å¯†é’¥</strong>åŠ å¯†å¹¶äº¤æ¢æ•°æ®</li></ul><p>å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li>æœåŠ¡ç«¯æœ‰éå¯¹ç§°åŠ å¯†çš„å…¬é’¥A1ï¼Œç§é’¥A2</li><li>å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡ç«¯å°†å…¬é’¥A1è¿”å›ç»™å®¢æˆ·ç«¯</li><li>å®¢æˆ·ç«¯éšæœºç”Ÿæˆä¸€ä¸ªå¯¹ç§°åŠ å¯†çš„å¯†é’¥Kï¼Œç”¨å…¬é’¥A1åŠ å¯†åå‘é€ç»™æœåŠ¡ç«¯</li><li>æœåŠ¡ç«¯æ”¶åˆ°å¯†æ–‡åç”¨è‡ªå·±çš„ç§é’¥A2è§£å¯†ï¼Œå¾—åˆ°å¯¹ç§°å¯†é’¥Kï¼Œæ­¤æ—¶å®Œæˆäº†<strong>å®‰å…¨çš„å¯¹ç§°å¯†é’¥äº¤æ¢</strong>ï¼Œè§£å†³äº†å¯¹ç§°åŠ å¯†æ—¶å¯†é’¥ä¼ è¾“è¢«äººçªƒå–çš„é—®é¢˜</li><li>ä¹‹ååŒæ–¹é€šä¿¡éƒ½ä½¿ç”¨<strong>å¯†é’¥Kè¿›è¡Œå¯¹ç§°åŠ è§£å¯†</strong></li></ul><h5 id="ï¼ˆ5ï¼‰CAä¸æ•°å­—è¯ä¹¦"><a href="#ï¼ˆ5ï¼‰CAä¸æ•°å­—è¯ä¹¦" class="headerlink" title="ï¼ˆ5ï¼‰CAä¸æ•°å­—è¯ä¹¦"></a>ï¼ˆ5ï¼‰CAä¸æ•°å­—è¯ä¹¦</h5><p>æ··åˆåŠ å¯†å…¼é¡¾äº†å®‰å…¨æ€§ï¼Œä½†æ˜¯ä»ç„¶æ— æ³•ä¿è¯å®‰å…¨ï¼Œ<strong>éå¯¹ç§°åŠ å¯†çš„ç®—æ³•</strong>æ˜¯<strong>å…¬å¼€</strong>çš„ï¼Œæ‰€æœ‰äººéƒ½å¯ä»¥ç”Ÿæˆä¸€å¯¹å…¬é’¥ç§é’¥ï¼Œæˆ‘ä»¬ä»éœ€è¦è€ƒè™‘<strong>ä¸­é—´äººæ”»å‡»</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110171034059.png" alt="img"></p><ul><li>æœåŠ¡ç«¯è¿”å›å…¬é’¥A1çš„è¿‡ç¨‹ä¸­ï¼Œä¸­é—´äºº<strong>æ›¿æ¢</strong>æˆè‡ªå·±å‡†å¤‡å¥½çš„çš„å…¬é’¥B1ä¼ é€ç»™å®¢æˆ·ç«¯</li><li>å®¢æˆ·ç«¯å¯¹ç¯¡æ”¹è¡Œä¸ºä¸€æ— æ‰€çŸ¥ï¼Œå‚»å‚»åœ°ä½¿ç”¨å…¬é’¥B1åŠ å¯†äº†å¯¹ç§°åŠ å¯†ä½¿ç”¨çš„<strong>ä¼šè¯å¯†é’¥K</strong></li><li>ä¸­é—´äººæˆªè·å…¬é’¥B1åŠ å¯†çš„<strong>ä¼šè¯å¯†é’¥K</strong>ï¼Œåˆ©ç”¨è‡ªå·±çš„ç§é’¥B2ç®€ç®€å•å•è§£ä¸ªå¯†ï¼Œ<strong>ä¼šè¯å¯†é’¥K</strong>å°±æš´éœ²äº†ï¼Œå†ä½¿ç”¨æœåŠ¡ç«¯çš„å…¬é’¥A1åŠ å¯†Kä¼ é€ç»™æœåŠ¡ç«¯ï¼ŒæˆåŠŸæ¬ºéª—æœåŠ¡ç«¯ï¼Œå®Œæˆäº†é€šä¿¡é“¾è·¯ã€‚æ­¤åçš„çš„é€šä¿¡æ•°æ®å’Œæ˜æ–‡ä¼ è¾“æ— å¼‚</li></ul><p>è¿™ä¸€é—®é¢˜çš„æ ¸å¿ƒæ˜¯ï¼šå®¢æˆ·ç«¯<strong>æ— æ³•ç¡®è®¤</strong>æ”¶åˆ°çš„å…¬é’¥æ˜¯ä¸æ˜¯çœŸçš„æ¥æºäºæœåŠ¡ç«¯ï¼Œæ— æ³•ä¿è¯å…¬é’¥ä¸è¢«<strong>ç¯¡æ”¹</strong>å’Œå…¶<strong>ä¿¡ä»»åº¦</strong>ï¼Œè¿™æ—¶å°±éœ€è¦ç¬¬ä¸‰æ–¹æƒå¨æœºæ„<strong>CA</strong>ï¼ˆæ•°å­—è¯ä¹¦è®¤è¯æœºæ„ï¼‰å°†<strong>æœåŠ¡å™¨å…¬é’¥æ”¾åœ¨æ•°å­—è¯ä¹¦</strong>ä¸­ï¼Œåªè¦è¯ä¹¦å¯ä¿¡ï¼Œå…¬é’¥å°±å¯ä¿¡</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110171059315.jpeg" alt="img"></p><p><strong>æ‘˜è¦ç®—æ³•ï¼ˆå“ˆå¸Œå¤„ç†ï¼‰</strong>ä¿è¯è¯ä¹¦ä¸è¢«ç¯¡æ”¹çš„åŸç†ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110171635097.jpeg" alt="img"></p><ul><li><p>æœåŠ¡å™¨çš„å…¬é’¥è¦äº‹å…ˆæäº¤åˆ°<strong>CA</strong>è¿›è¡Œæ³¨å†Œï¼Œç”³è¯·ä¸€ä»½<strong>æ•°å­—è¯ä¹¦</strong>ï¼ˆæ•°å­—è¯ä¹¦åŒ…å«è¯ä¹¦æŒæœ‰è€…ï¼Œè¯ä¹¦æœ‰æ•ˆæœŸï¼ŒæœåŠ¡å™¨å…¬é’¥ï¼Œå“ˆå¸Œç®—æ³•ç­‰ï¼‰</p></li><li><p><strong>CA</strong>åœ¨é¢å‘<strong>æ•°å­—è¯ä¹¦</strong>å‰å¯¹è¯ä¹¦æ˜æ–‡ä¿¡æ¯è¿›è¡Œå“ˆå¸Œå¤„ç†ï¼ˆä¿¡æ¯æ‘˜è¦è®¡ç®—ï¼‰ï¼Œå¹¶å¯¹å“ˆå¸Œå€¼ç”¨CAçš„<strong>ç§é’¥</strong>å¤„ç†å¾—åˆ°<strong>æ•°å­—ç­¾å</strong>å¯¹æ•°å­—è¯ä¹¦è¿›è¡Œ<strong>åŠ ç­¾</strong></p></li><li><p>CAçš„å…¬é’¥ä¼š<strong>å†…ç½®</strong>åœ¨æµè§ˆå™¨æˆ–æ“ä½œç³»ç»Ÿä¸­ï¼Œä¸éœ€è¦é¢å¤–çš„ç½‘ç»œä¼ è¾“</p></li><li><p>å®¢æˆ·ç«¯å‘é€è¯·æ±‚æ—¶ï¼ŒæœåŠ¡ç«¯é€šè¿‡å‘é€<strong>æ•°å­—è¯ä¹¦</strong>ä¼ è¾“æœåŠ¡å™¨çš„å…¬é’¥</p></li><li><p>å®¢æˆ·ç«¯å¾—åˆ°è¯ä¹¦ï¼Œåˆ†è§£ä¸º<strong>æ˜æ–‡éƒ¨åˆ†Text</strong>å’Œ<strong>æ•°å­—ç­¾åSig1</strong>ï¼Œä½¿ç”¨CAæœºæ„çš„å…¬é’¥è¿›è¡Œ<strong>è§£ç­¾</strong>å¾—åˆ°Sig2ï¼Œç”¨è¯ä¹¦å£°æ˜çš„å“ˆå¸Œç®—æ³•å¯¹æ˜æ–‡éƒ¨åˆ†Textè¿›è¡Œ<strong>å“ˆå¸Œå¤„ç†</strong>ï¼Œå†ä¸Sig2å¯¹æ¯”ï¼Œå¦‚æœåŒ¹é…æˆåŠŸè¡¨ç¤ºè¯ä¹¦å¯ä¿¡å³è¡¨ç¤ºå…¬é’¥å¯ä¿¡</p></li></ul><h4 id="3-HTTPSå·¥ä½œæµç¨‹"><a href="#3-HTTPSå·¥ä½œæµç¨‹" class="headerlink" title="3.HTTPSå·¥ä½œæµç¨‹"></a>3.HTTPSå·¥ä½œæµç¨‹</h4><p>å‚è€ƒèµ„æ–™ï¼šï¼ˆå†™çš„æ¯”æˆ‘å¥½ğŸ˜‡ï¼‰</p><p><a href="https://segmentfault.com/a/1190000021494676">HTTPS è¯¦è§£ä¸€ï¼šé™„å¸¦æœ€ç²¾ç¾è¯¦å°½çš„ HTTPS åŸç†å›¾</a></p><p><a href="https://segmentfault.com/a/1190000021559557">HTTPSè¯¦è§£äºŒï¼šSSL / TLS å·¥ä½œåŸç†å’Œè¯¦ç»†æ¡æ‰‹è¿‡ç¨‹</a></p><p><a href="https://razeencheng.com/post/ssl-handshake-detail.html">HTTPSç¯‡ä¹‹SSLæ¡æ‰‹è¿‡ç¨‹è¯¦è§£</a></p><h5 id="ï¼ˆ1ï¼‰HTTPSåŠ è§£å¯†æµç¨‹"><a href="#ï¼ˆ1ï¼‰HTTPSåŠ è§£å¯†æµç¨‹" class="headerlink" title="ï¼ˆ1ï¼‰HTTPSåŠ è§£å¯†æµç¨‹"></a>ï¼ˆ1ï¼‰HTTPSåŠ è§£å¯†æµç¨‹</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110171621895.png" alt="preview"></p><ul><li>å®¢æˆ·ç«¯å‘èµ·HTTPSè¯·æ±‚ï¼Œé»˜è®¤ä½¿ç”¨æœåŠ¡å™¨ç«¯çš„<strong>443ç«¯å£</strong>è¿›è¡Œè¿æ¥</li><li>æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œè¿”å›é…å¥½çš„åŒ…å«<strong>å…¬é’¥Pub</strong>çš„è¯ä¹¦ç»™å®¢æˆ·ç«¯ï¼ˆå¯¹åº”çš„<strong>ç§é’¥Private</strong>ä¿å­˜åœ¨æœåŠ¡å™¨ä¸å…¬å¼€ï¼‰</li><li>å®¢æˆ·ç«¯æ”¶åˆ°è¯ä¹¦ï¼Œæ ¡éªŒ<strong>è¯ä¹¦çš„åˆæ³•æ€§</strong>ï¼ˆåŒ…æ‹¬è¯ä¹¦çš„æœ‰æ•ˆæœŸï¼Œè¯ä¹¦åŸŸåï¼Œè¯·æ±‚åŸŸåï¼Œæ•°å­—ç­¾åç­‰ï¼‰ï¼Œä¿è¯è¯ä¹¦æ²¡æœ‰è¢«ç¯¡æ”¹</li><li>å®¢æˆ·ç«¯ç”Ÿæˆä¸€ä¸ªç”¨äºå¯¹ç§°åŠ å¯†çš„<strong>éšæœºkey</strong>ï¼Œå¹¶ç”¨è¯ä¹¦å†…çš„<strong>å…¬é’¥Pub</strong>è¿›è¡Œè§£å¯†ï¼Œå‘é€ç»™æœåŠ¡ç«¯</li><li>æœåŠ¡ç«¯æ”¶åˆ°<strong>éšæœºkey</strong>çš„å¯†æ–‡ï¼Œä½¿ç”¨<strong>å…¬é’¥Pub</strong>å¯¹åº”çš„<strong>ç§é’¥Private</strong>è§£å¯†å¾—åˆ°å®¢æˆ·ç«¯å‘é€çš„<strong>éšæœºkey</strong></li><li>æœåŠ¡ç«¯ä½¿ç”¨å®¢æˆ·ç«¯å‘é€çš„<strong>éšæœºkey</strong>å¯¹éœ€è¦ä¼ è¾“çš„HTTPæ•°æ®è¿›è¡Œå¯¹ç§°åŠ å¯†ï¼Œå°†å¯†æ–‡è¿”å›å®¢æˆ·ç«¯</li><li>å®¢æˆ·ç«¯ä½¿ç”¨<strong>éšæœºkey</strong>å¯¹ç§°è§£å¯†å¯†æ–‡ï¼Œå¾—åˆ°HTTPæ•°æ®æ˜æ–‡</li><li>åç»­çš„HTTPS<strong>ä¼ è¾“æ•°æ®</strong>éƒ½ä½¿ç”¨äº¤æ¢å¥½çš„<strong>éšæœºkey</strong>è¿›è¡Œå¯¹ç§°åŠ è§£å¯†ä¿è¯äº†æ•°æ®çš„å®‰å…¨</li></ul><h5 id="ï¼ˆ2ï¼‰HTTPSé€šä¿¡æµç¨‹å›¾"><a href="#ï¼ˆ2ï¼‰HTTPSé€šä¿¡æµç¨‹å›¾" class="headerlink" title="ï¼ˆ2ï¼‰HTTPSé€šä¿¡æµç¨‹å›¾"></a>ï¼ˆ2ï¼‰HTTPSé€šä¿¡æµç¨‹å›¾</h5><p>HTTPSæ¡æ‰‹è¿‡ç¨‹å³TCPä¸‰æ¬¡æ¡æ‰‹ + TLSæ¡æ‰‹</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110171537560.png" alt="img"></p><p>è¯¦ç»†çš„TLSæ¡æ‰‹æµç¨‹å¦‚ä¸‹ï¼Œå…¶ä¸<strong>HTTPSåŠ è§£å¯†çš„æµç¨‹</strong>å¤§è‡´<strong>å¯¹åº”</strong>ï¼Œä½†æ›´ä¾§é‡äºTLSæ¡æ‰‹çš„æ¦‚å¿µ</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110171621720.png" alt="preview"></p><ul><li><p>å®¢æˆ·ç«¯å‘é€<strong>clienthello</strong>æ¶ˆæ¯ï¼šå®¢æˆ·ç«¯å‘é€<strong>clienthello</strong>æ¶ˆæ¯å‘èµ·æ¡æ‰‹è¯·æ±‚ï¼Œè¯¥æ¶ˆæ¯åŒ…å«äº†å®¢æˆ·ç«¯æ”¯æŒçš„<strong>TLSç‰ˆæœ¬å·</strong>å’Œ<strong>å¯†ç ç»„åˆ</strong>ä»¥åŠä¸€ä¸ª<strong>client random</strong>éšæœºå­—ç¬¦ä¸²ï¼Œéœ€è¦çº¦å®šçš„å¯†ç ç»„åˆå¦‚ä¸‹</p><ol><li>æ¡æ‰‹æœŸé—´æ‰€ä½¿ç”¨çš„çš„å¯†é’¥äº¤æ¢å’Œè®¤è¯ç®—æ³• (æœ€å¸¸ç”¨çš„æ˜¯ RSA ç®—æ³•)</li><li>åŠ å¯†ç®—æ³• (ç”¨äºæ¡æ‰‹å®Œæˆåçš„å¯¹ç§°åŠ å¯†ï¼Œå¸¸ç”¨çš„æœ‰ AESã€3DESç­‰)</li><li>ä¿¡æ¯æ‘˜è¦ç®—æ³• (å¸¸ç”¨çš„æœ‰ SHA-256ã€SHA-1 å’Œ MD5 ç­‰)</li></ol></li><li><p>æœåŠ¡ç«¯å‘é€<strong>serverhello</strong>æ¶ˆæ¯ï¼šæœåŠ¡å™¨å‘é€<strong>serverhello</strong>æ¶ˆæ¯å¯¹å®¢æˆ·ç«¯è¿›è¡Œå›åº”ï¼Œè¯¥æ¶ˆæ¯åŒ…å«<strong>æ•°å­—è¯ä¹¦</strong>ï¼ŒæœåŠ¡å™¨é€‰æ‹©çš„<strong>å¯†ç ç»„åˆ</strong>å’Œ<strong>server random</strong>éšæœºå­—ç¬¦ä¸²</p></li><li><p>å®¢æˆ·ç«¯éªŒè¯<strong>æ•°å­—è¯ä¹¦</strong>ï¼šå®¢æˆ·ç«¯å¯¹æœåŠ¡å™¨å‘æ¥çš„è¯ä¹¦è¿›è¡ŒéªŒè¯ï¼Œç¡®ä¿å¯¹æ–¹çš„åˆæ³•èº«ä»½</p><ol><li><p>æ£€æŸ¥æ•°å­—ç­¾åï¼ˆå‰é¢æœ‰è¯¦ç»†çš„è®²è§£ï¼Œ<strong>æ•°å­—ç­¾å</strong>å³æœåŠ¡å™¨å¯¹è¯ä¹¦å†…å®¹è¿›è¡Œ<strong>ä¿¡æ¯æ‘˜è¦è®¡ç®—</strong>åå†ç”¨<strong>ç§é’¥</strong>åŠ å¯†çš„ç»“æœï¼‰</p></li><li><p>éªŒè¯è¯ä¹¦é“¾ï¼ˆ<strong>è¯ä¹¦é“¾</strong>ä¹Ÿç§°ä¸ºè¯ä¹¦è·¯å¾„ï¼Œç”¨äºè®¤è¯å®ä½“åˆæ³•èº«ä»½çš„è¯ä¹¦åˆ—è¡¨ï¼Œå¯ä»¥éªŒè¯æœåŠ¡å™¨çš„åˆæ³•èº«ä»½ï¼Œä¹Ÿå¯ä»¥ä¿è¯æ ¹è¯ä¹¦çš„å®‰å…¨ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110171645010.png" alt="image-20211017164519690"></p></li><li><p>æ£€æŸ¥è¯ä¹¦çš„æœ‰æ•ˆæœŸ</p></li><li><p>æ£€æŸ¥è¯ä¹¦çš„æ’¤å›çŠ¶æ€ (æ’¤å›ä»£è¡¨è¯ä¹¦å·²å¤±æ•ˆ)</p></li></ol></li><li><p>å®¢æˆ·ç«¯å‘é€<strong>premaster secretå­—ç¬¦ä¸²</strong>å¯†æ–‡ï¼šå®¢æˆ·ç«¯ç”Ÿæˆéšæœºå­—ç¬¦ä¸²<strong>premaster secret</strong>ï¼ˆé¢„ä¸»å¯†é’¥ï¼‰ï¼Œå¹¶ç”¨<strong>å…¬é’¥</strong>è¿›è¡ŒåŠ å¯†å‘é€ç»™æœåŠ¡å™¨ï¼Œåªæœ‰æœåŠ¡å™¨çš„ç§é’¥å¯ä»¥è§£å¼€</p></li><li><p>æœåŠ¡å™¨è§£å¯†<strong>premaster secret</strong>ï¼šæœåŠ¡å™¨ä½¿ç”¨ç§é’¥è§£å¯†<strong>premaster secretå­—ç¬¦ä¸²</strong></p></li><li><p>å®¢æˆ·ç«¯æœåŠ¡ç«¯ç”Ÿæˆ<strong>å…±äº«å¯†é’¥</strong>ï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å‡ä½¿ç”¨ <strong>client random</strong>ï¼Œ<strong>server random</strong> å’Œ <strong>premaster secret</strong>ï¼Œå¹¶é€šè¿‡ç›¸åŒçš„ç®—æ³•ç”Ÿæˆç›¸åŒçš„å…±äº«å¯†é’¥ <strong>KEY</strong></p></li><li><p>å®¢æˆ·ç«¯å°±ç»ªï¼šå®¢æˆ·ç«¯å‘é€ç»è¿‡<strong>å…±äº«å¯†é’¥KEY</strong>åŠ å¯†è¿‡çš„<strong>finished</strong>ä¿¡å·</p></li><li><p>æœåŠ¡ç«¯å°±ç»ªï¼šæœåŠ¡ç«¯å‘é€ç»è¿‡<strong>å…±äº«å¯†é’¥KEY</strong>åŠ å¯†è¿‡çš„<strong>finished</strong>ä¿¡å·</p></li><li><p>è¾¾æˆå®‰å…¨é€šä¿¡ï¼šæ¡æ‰‹å®Œæˆï¼ŒåŒæ–¹ä½¿ç”¨<strong>å…±äº«å¯†é’¥KEY</strong>å¯¹ç§°åŠ å¯†è¿›è¡Œå®‰å…¨é€šä¿¡</p></li></ul><h3 id="HTTP-ä¸-HTTPSå¯¹æ¯”"><a href="#HTTP-ä¸-HTTPSå¯¹æ¯”" class="headerlink" title="HTTP ä¸ HTTPSå¯¹æ¯”"></a>HTTP ä¸ HTTPSå¯¹æ¯”</h3><h4 id="1-HTTPSä¸HTTPåŸºæœ¬åŒºåˆ«"><a href="#1-HTTPSä¸HTTPåŸºæœ¬åŒºåˆ«" class="headerlink" title="1.HTTPSä¸HTTPåŸºæœ¬åŒºåˆ«"></a>1.HTTPSä¸HTTPåŸºæœ¬åŒºåˆ«</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110171931223.png!large" alt="img"></p><ul><li>HTTP æ˜¯<strong>è¶…æ–‡æœ¬ä¼ è¾“åè®®</strong>ï¼Œä¿¡æ¯æ˜¯æ˜æ–‡ä¼ è¾“ï¼Œå­˜åœ¨å®‰å…¨é£é™©çš„é—®é¢˜ã€‚HTTPS åˆ™è§£å†³ HTTP ä¸å®‰å…¨çš„ç¼ºé™·ï¼Œåœ¨ TCP å’Œ HTTP ç½‘ç»œå±‚ä¹‹é—´åŠ å…¥äº† <strong>SSL/TLS å®‰å…¨åè®®</strong>ï¼Œä½¿å¾—æŠ¥æ–‡èƒ½å¤ŸåŠ å¯†ä¼ è¾“</li><li>HTTP è¿æ¥å»ºç«‹ç›¸å¯¹ç®€å•ï¼Œ <strong>TCP ä¸‰æ¬¡æ¡æ‰‹</strong>ä¹‹åä¾¿å¯è¿›è¡Œ HTTP çš„æŠ¥æ–‡ä¼ è¾“ã€‚è€Œ HTTPS åœ¨ <strong>TCP ä¸‰æ¬¡æ¡æ‰‹</strong>ä¹‹åï¼Œè¿˜éœ€è¿›è¡Œ <strong>SSL/TLS çš„æ¡æ‰‹è¿‡ç¨‹</strong>ï¼Œæ‰å¯è¿›å…¥åŠ å¯†æŠ¥æ–‡ä¼ è¾“</li><li>HTTP çš„ç«¯å£å·æ˜¯ <strong>80</strong>ï¼ŒHTTPS çš„ç«¯å£å·æ˜¯ <strong>443</strong></li><li>HTTPS åè®®éœ€è¦å‘ CAï¼ˆè¯ä¹¦æƒå¨æœºæ„ï¼‰<strong>ç”³è¯·æ•°å­—è¯ä¹¦</strong>ï¼Œæ¥ä¿è¯æœåŠ¡å™¨çš„èº«ä»½æ˜¯å¯ä¿¡çš„</li></ul><h4 id="2-HTTPä¸HTTPSç½‘ç»œæ¨¡å‹"><a href="#2-HTTPä¸HTTPSç½‘ç»œæ¨¡å‹" class="headerlink" title="2.HTTPä¸HTTPSç½‘ç»œæ¨¡å‹"></a>2.HTTPä¸HTTPSç½‘ç»œæ¨¡å‹</h4><h5 id="ï¼ˆ1ï¼‰OSI-ä¸ƒå±‚ç½‘ç»œæ¨¡å‹"><a href="#ï¼ˆ1ï¼‰OSI-ä¸ƒå±‚ç½‘ç»œæ¨¡å‹" class="headerlink" title="ï¼ˆ1ï¼‰OSI ä¸ƒå±‚ç½‘ç»œæ¨¡å‹"></a>ï¼ˆ1ï¼‰OSI ä¸ƒå±‚ç½‘ç»œæ¨¡å‹</h5><img src="https://images2015.cnblogs.com/blog/705728/201604/705728-20160424234824085-667046040.png" alt="img" style="zoom: 80%;"><h5 id="ï¼ˆ2ï¼‰TCP-IPäº”å±‚ç½‘ç»œæ¨¡å‹"><a href="#ï¼ˆ2ï¼‰TCP-IPäº”å±‚ç½‘ç»œæ¨¡å‹" class="headerlink" title="ï¼ˆ2ï¼‰TCP/IPäº”å±‚ç½‘ç»œæ¨¡å‹"></a>ï¼ˆ2ï¼‰TCP/IPäº”å±‚ç½‘ç»œæ¨¡å‹</h5><img src="https://images2015.cnblogs.com/blog/705728/201604/705728-20160424234825491-384470376.png" alt="img" style="zoom:80%;"><p>TCP/IPç½‘ç»œæ¨¡å‹ç€çœ¼äº<strong>ä¼ è¾“è¿‡ç¨‹</strong>ï¼Œäºæ˜¯å°†åº”ç”¨å±‚ï¼Œè¡¨ç¤ºå±‚ï¼Œä¼šè¯å±‚è§†ä¸º<strong>åº”ç”¨å±‚</strong></p><p>ä¹Ÿæœ‰åˆ†ä¸ºå››å±‚çš„TCP/IPç½‘ç»œæ¨¡å‹ï¼Œå°†<strong>æ•°æ®é“¾è·¯å±‚å’Œç‰©ç†å±‚éƒ½è¡¨ç¤ºä¸ºç½‘ç»œæ¥å£å±‚</strong></p><h5 id="ï¼ˆ3ï¼‰OSIä¸ƒå±‚æ¨¡å‹ä¸TCP-IPäº”å±‚æ¨¡å‹å¯¹æ¯”"><a href="#ï¼ˆ3ï¼‰OSIä¸ƒå±‚æ¨¡å‹ä¸TCP-IPäº”å±‚æ¨¡å‹å¯¹æ¯”" class="headerlink" title="ï¼ˆ3ï¼‰OSIä¸ƒå±‚æ¨¡å‹ä¸TCP/IPäº”å±‚æ¨¡å‹å¯¹æ¯”"></a>ï¼ˆ3ï¼‰OSIä¸ƒå±‚æ¨¡å‹ä¸TCP/IPäº”å±‚æ¨¡å‹å¯¹æ¯”</h5><p>å„å±‚è®¾å¤‡ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110171945314.png" alt="img"></p><p>å„å±‚åè®®ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110171945281.png" alt="img"></p><h5 id="ï¼ˆ4ï¼‰HTTPä¸HTTPSç½‘ç»œæ¨¡å‹"><a href="#ï¼ˆ4ï¼‰HTTPä¸HTTPSç½‘ç»œæ¨¡å‹" class="headerlink" title="ï¼ˆ4ï¼‰HTTPä¸HTTPSç½‘ç»œæ¨¡å‹"></a>ï¼ˆ4ï¼‰HTTPä¸HTTPSç½‘ç»œæ¨¡å‹</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110171950558.png" alt="image-20211017195034373"></p><h4 id="3-HTTPSç›¸æ¯”HTTPçš„å‡çº§"><a href="#3-HTTPSç›¸æ¯”HTTPçš„å‡çº§" class="headerlink" title="3.HTTPSç›¸æ¯”HTTPçš„å‡çº§"></a>3.HTTPSç›¸æ¯”HTTPçš„å‡çº§</h4><img src="https://jzhmcoo1-1258918430.cos.ap-shanghai.myqcloud.com/markdown/20210613103539-https-essence.png" alt="image.png" style="zoom: 50%;"><h5 id="ï¼ˆ1ï¼‰HTTPçš„å®‰å…¨é£é™©"><a href="#ï¼ˆ1ï¼‰HTTPçš„å®‰å…¨é£é™©" class="headerlink" title="ï¼ˆ1ï¼‰HTTPçš„å®‰å…¨é£é™©"></a>ï¼ˆ1ï¼‰HTTPçš„å®‰å…¨é£é™©</h5><p>HTTP ç”±äºæ˜¯æ˜æ–‡ä¼ è¾“ï¼Œæ‰€ä»¥å®‰å…¨ä¸Šå­˜åœ¨ä»¥ä¸‹ä¸‰ä¸ªé£é™©ï¼š</p><ul><li><strong>çªƒå¬é£é™©</strong>ï¼Œæ¯”å¦‚é€šä¿¡é“¾è·¯ä¸Šå¯ä»¥è·å–é€šä¿¡å†…å®¹</li><li><strong>ç¯¡æ”¹é£é™©</strong>ï¼Œæ¯”å¦‚å¼ºåˆ¶å…¥åƒåœ¾å¹¿å‘Šï¼Œè§†è§‰æ±¡æŸ“</li><li><strong>å†’å……é£é™©</strong>ï¼Œæ¯”å¦‚ä¸€äº›ä»¿çœŸçš„é’“é±¼ç½‘ç«™</li></ul><h5 id="ï¼ˆ2ï¼‰HTTPSè§£å†³æ–¹æ¡ˆ"><a href="#ï¼ˆ2ï¼‰HTTPSè§£å†³æ–¹æ¡ˆ" class="headerlink" title="ï¼ˆ2ï¼‰HTTPSè§£å†³æ–¹æ¡ˆ"></a>ï¼ˆ2ï¼‰HTTPSè§£å†³æ–¹æ¡ˆ</h5><ul><li><strong>æ··åˆåŠ å¯†</strong>çš„æ–¹å¼å®ç°ä¿¡æ¯çš„<strong>æœºå¯†æ€§</strong>ï¼Œè§£å†³äº†çªƒå¬çš„é£é™©</li><li><strong>æ‘˜è¦ç®—æ³•</strong>çš„æ–¹å¼æ¥å®ç°<strong>å®Œæ•´æ€§</strong>ï¼Œå®ƒèƒ½å¤Ÿä¸ºæ•°æ®ç”Ÿæˆç‹¬ä¸€æ— äºŒçš„<strong>ã€ŒæŒ‡çº¹ã€</strong>ï¼ŒæŒ‡çº¹ç”¨äºæ ¡éªŒæ•°æ®çš„å®Œæ•´æ€§ï¼Œè§£å†³äº†ç¯¡æ”¹çš„é£é™©</li><li>å°†æœåŠ¡å™¨å…¬é’¥æ”¾å…¥åˆ°<strong>æ•°å­—è¯ä¹¦</strong>ä¸­ï¼Œè§£å†³äº†å†’å……çš„é£é™©</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110172010735.webp&quot; alt=&quot;Oh the fun of HTTP-based applications&quot;&gt;&lt;/p&gt;
&lt;p&gt;åŸºäºHTTPåº”ç”¨ç¨‹åºçš„ä¹è¶£ï¼Œbutâ€¦&lt;/p&gt;
 &lt;img src=&quot;https://img.devrant.com/devrant/rant/r_54040_zGEQB.jpg&quot; style=&quot;zoom:20%;&quot;&gt;
    
    </summary>
    
    
      <category term="å¼€å‘åŸç†" scheme="https://autovy.github.io/categories/%E5%BC%80%E5%8F%91%E5%8E%9F%E7%90%86/"/>
    
    
      <category term="åç«¯" scheme="https://autovy.github.io/tags/%E5%90%8E%E7%AB%AF/"/>
    
      <category term="å¼€å‘åŸç†" scheme="https://autovy.github.io/tags/%E5%BC%80%E5%8F%91%E5%8E%9F%E7%90%86/"/>
    
      <category term="æ·±åº¦ç³»åˆ—" scheme="https://autovy.github.io/tags/%E6%B7%B1%E5%BA%A6%E7%B3%BB%E5%88%97/"/>
    
      <category term="è®¡ç®—æœºç½‘ç»œ" scheme="https://autovy.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
  </entry>
  
  <entry>
    <title>å¼€å‘åŸç†|ä¸€ä¸ªæ•°æ®åŒ…çš„ç½‘ç»œä¹‹æ—…</title>
    <link href="https://autovy.github.io/2021/10/13/DevPrinciple/%E4%B8%80%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%8C%85%E7%9A%84%E7%BD%91%E7%BB%9C%E4%B9%8B%E6%97%85/"/>
    <id>https://autovy.github.io/2021/10/13/DevPrinciple/%E4%B8%80%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%8C%85%E7%9A%84%E7%BD%91%E7%BB%9C%E4%B9%8B%E6%97%85/</id>
    <published>2021-10-13T15:45:00.000Z</published>
    <updated>2021-10-17T12:23:27.386Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110131214746.webp" alt="When the internet stops working! "></p><p>æœ¬æ–‡ç´§æ¥ä¸Šæ–‡ï¼Œèšç„¦äº<strong>ç½‘ç»œçº¿ç¨‹</strong>è¿æ¥å¹¶è¯·æ±‚ä¸»æœºç›´è‡³è·å¾—<strong>å“åº”æŠ¥æ–‡</strong>è¿™ä¸ªè¿‡ç¨‹ï¼Œä¸»è¦ç ”ç©¶ä¸€ä¸ª<strong>æ•°æ®åŒ…</strong>çš„ç½‘ç»œä¹‹æ—…</p><span id="more"></span><p>æ•´ä¸ªè¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110130822302.png" alt="image-20211013082245766"></p><p>å‚è€ƒèµ„æ–™ï¼šæˆ·æ ¹å‹¤ã€Šç½‘ç»œæ˜¯æ€ä¹ˆè¿æ¥çš„ã€‹</p><h3 id="æµè§ˆå™¨ç”Ÿæˆæ¶ˆæ¯"><a href="#æµè§ˆå™¨ç”Ÿæˆæ¶ˆæ¯" class="headerlink" title="æµè§ˆå™¨ç”Ÿæˆæ¶ˆæ¯"></a>æµè§ˆå™¨ç”Ÿæˆæ¶ˆæ¯</h3><h4 id="1-ç”ŸæˆHTTPè¯·æ±‚æ¶ˆæ¯"><a href="#1-ç”ŸæˆHTTPè¯·æ±‚æ¶ˆæ¯" class="headerlink" title="1.ç”ŸæˆHTTPè¯·æ±‚æ¶ˆæ¯"></a>1.ç”ŸæˆHTTPè¯·æ±‚æ¶ˆæ¯</h4><p>æµè§ˆå™¨çš„ç¬¬ä¸€æ­¥å·¥ä½œå°±æ˜¯è¦å¯¹URLè¿›è¡Œè§£æï¼Œå¹¶ç”Ÿæˆå‘é€WEBæœåŠ¡å™¨çš„è¯·æ±‚ä¿¡æ¯</p><h5 id="ï¼ˆ1ï¼‰URLè§£æ"><a href="#ï¼ˆ1ï¼‰URLè§£æ" class="headerlink" title="ï¼ˆ1ï¼‰URLè§£æ"></a>ï¼ˆ1ï¼‰URLè§£æ</h5><ul><li>URLå„ä¸ªéƒ¨åˆ†çš„å«ä¹‰ï¼š</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110082014448.png" alt="image-20211008201443231"></p><ul><li>å¯¹URLè¿›è¡Œè§£æä»è€Œå®šä½åˆ°WebæœåŠ¡å™¨ä¸‹å¯¹åº”çš„ç›®å½•ï¼š</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110082017786.png" alt="image-20211008201702549"></p><p>æˆ‘ä»¬å¸¸è§çš„urlä¸­å¾ˆå¤šéƒ½æ˜¯æ²¡æœ‰æ–‡ä»¶åçš„ï¼Œä¾‹å¦‚<a href="https://www.baidu.comï¼Œè¿™ç§æƒ…å†µå¾€å¾€æ˜¯å¯¹æ–‡ä»¶åè¿›è¡Œäº†çœç•¥ï¼ŒwebæœåŠ¡å™¨æœ‰é»˜è®¤æŒ‡å‘çš„æ–‡ä»¶å¦‚index.htmlç­‰ï¼Œä¾‹å¦‚https://www.baidu.com/index.html">https://www.baidu.comï¼Œè¿™ç§æƒ…å†µå¾€å¾€æ˜¯å¯¹æ–‡ä»¶åè¿›è¡Œäº†çœç•¥ï¼ŒwebæœåŠ¡å™¨æœ‰é»˜è®¤æŒ‡å‘çš„æ–‡ä»¶å¦‚index.htmlç­‰ï¼Œä¾‹å¦‚https://www.baidu.com/index.html</a></p><h5 id="ï¼ˆ2ï¼‰HTTPè¯·æ±‚æ¶ˆæ¯ç”Ÿæˆ"><a href="#ï¼ˆ2ï¼‰HTTPè¯·æ±‚æ¶ˆæ¯ç”Ÿæˆ" class="headerlink" title="ï¼ˆ2ï¼‰HTTPè¯·æ±‚æ¶ˆæ¯ç”Ÿæˆ"></a>ï¼ˆ2ï¼‰HTTPè¯·æ±‚æ¶ˆæ¯ç”Ÿæˆ</h5><p>å¯¹URLè¿›è¡Œè§£æåï¼Œæµè§ˆå™¨ç¡®å®šäº†WebæœåŠ¡å™¨å’Œæ–‡ä»¶åï¼Œç„¶åæ ¹æ®è¿™äº›ä¿¡æ¯ç”ŸæˆHTTPè¯·æ±‚æ¶ˆæ¯</p><ul><li>HTTPè¯·æ±‚åŸºæœ¬ç»“æ„ï¼š</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110082026183.png" alt="image-20211008202601682"></p><ul><li>è¯·æ±‚æ–¹æ³•ï¼š</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110082038757.png" alt="img"></p><ul><li>è¯·æ±‚æŠ¥æ–‡ï¼š</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110082034679.png" alt="image-20211008203440385"></p><ul><li><p>HTTPçŠ¶æ€ç ï¼š</p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110172023742.png" alt="image-20211008203622266" style="zoom:80%;"></li></ul><ul><li>å“åº”æŠ¥æ–‡ï¼š</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110082035607.png" alt="image-20211008203518461"></p><h4 id="2-DNSåŸŸåè§£æ"><a href="#2-DNSåŸŸåè§£æ" class="headerlink" title="2.DNSåŸŸåè§£æ"></a>2.DNSåŸŸåè§£æ</h4><p>é€šè¿‡æµè§ˆå™¨è§£æURLå¹¶ç”ŸæˆHTTPæ¶ˆæ¯åï¼Œè¿˜éœ€è¦æŸ¥è¯¢æœåŠ¡å™¨<strong>åŸŸå</strong>å¯¹åº”çš„<strong>IP</strong>åœ°å€ï¼Œæ‰èƒ½æ‰¾åˆ°æ¶ˆæ¯å‘é€å¯¹è±¡çš„åœ°å€ä½ç½®</p><p><strong>DNSæœåŠ¡å™¨</strong>å°±æ˜¯ä¸“é—¨ç”¨æ¥ä¿å­˜WEBæœåŠ¡å™¨åŸŸåä¸IPå¯¹åº”å…³ç³»çš„æœåŠ¡å™¨</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110082113224.png" alt="image-20211008211346869"></p><h5 id="ï¼ˆ1ï¼‰IPåœ°å€çŸ¥è¯†"><a href="#ï¼ˆ1ï¼‰IPåœ°å€çŸ¥è¯†" class="headerlink" title="ï¼ˆ1ï¼‰IPåœ°å€çŸ¥è¯†"></a>ï¼ˆ1ï¼‰IPåœ°å€çŸ¥è¯†</h5><ul><li>IPåœ°å€ç»“æ„</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110082053217.png" alt="image-20211008205323963"></p><p>å­ç½‘æ©ç è¡¨ç¤ºIPåœ°å€ä¸­ç½‘ç»œå·ä¸ä¸»æœºå·çš„åˆ†ç•Œï¼Œå­ç½‘æ©ç ä¸º1çš„éƒ¨åˆ†ä¸º<strong>ç½‘ç»œå·</strong>ï¼Œå­ç½‘æ©ç ä¸º0çš„éƒ¨åˆ†ä¸º<strong>ä¸»æœºå·</strong></p><p>å½“ä¸»æœºå·éƒ¨åˆ†çš„æ¯”ç‰¹å…¨ä¸º0æ—¶è¡¨ç¤ºæ•´ä¸ªå­ç½‘ï¼ˆè€Œä¸æ˜¯æŸå°è®¾å¤‡ï¼‰å…¨ä¸º1è¡¨ç¤ºå‘å­ç½‘æ‰€ä»¥è®¾å¤‡å‘é€</p><ul><li>IPåœ°å€è¡¨ç¤ºæ–¹æ³•</li></ul><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110172023054.png" alt="image-20211008205140338" style="zoom: 80%;"><h5 id="ï¼ˆ2ï¼‰åŸŸåå±‚çº§å…³ç³»"><a href="#ï¼ˆ2ï¼‰åŸŸåå±‚çº§å…³ç³»" class="headerlink" title="ï¼ˆ2ï¼‰åŸŸåå±‚çº§å…³ç³»"></a>ï¼ˆ2ï¼‰åŸŸåå±‚çº§å…³ç³»</h5><p>åœ¨åŸŸåä¸­ï¼Œ<strong>è¶Šé å³</strong>çš„ä½ç½®è¡¨ç¤ºå…¶å±‚çº§<strong>è¶Šé«˜</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110082116997.png" alt="img"></p><p>ä¾‹å¦‚<a href="http://www.google.cnï¼ˆä¸Šé¦™ï¼‰ï¼š">www.google.cnï¼ˆä¸Šé¦™ï¼‰ï¼š</a></p><ul><li>æ ¹ DNS æœåŠ¡å™¨</li><li>é¡¶çº§åŸŸ DNS æœåŠ¡å™¨ï¼ˆcnï¼‰</li><li>æƒå¨ DNS æœåŠ¡å™¨ï¼ˆgoogle.cnï¼‰</li><li>è€Œ<code>www</code> æ˜¯ä¸»æœºå éšæ„å¡«å†™ åŸŸåè§£æçš„æ—¶å€™å¡«å†™<strong>ä¸»æœºè®°å½•</strong>å’Œ<strong>è®°å½•å€¼</strong> </li></ul><h5 id="ï¼ˆ3ï¼‰åŸŸåè§£æå·¥ä½œæµç¨‹"><a href="#ï¼ˆ3ï¼‰åŸŸåè§£æå·¥ä½œæµç¨‹" class="headerlink" title="ï¼ˆ3ï¼‰åŸŸåè§£æå·¥ä½œæµç¨‹"></a>ï¼ˆ3ï¼‰åŸŸåè§£æå·¥ä½œæµç¨‹</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110082129029.png" alt="image-20211008212953361"></p><ul><li>æœ¬åœ°DNSæœåŠ¡å™¨ï¼ˆç¦»å®¢æˆ·ç«¯æœ€è¿‘çš„DNSæœåŠ¡å™¨ï¼‰è¿è¡Œçš„æ˜¯<strong>é€’å½’æŸ¥è¯¢</strong>ï¼šå¯¹å®¢æˆ·ç«¯è´Ÿè´£åˆ°åº•ï¼Œä¸æ–­å»è¯¢é—®æŸ¥æ‰¾å¯ä»¥è§£æåŸŸåçš„æœåŠ¡å™¨</li><li>å…¶ä»–DNSæœåŠ¡å™¨è¿è¡Œçš„æ˜¯<strong>è¿­ä»£æŸ¥è¯¢</strong>ï¼šå¥‰è¡Œè¸¢çš®çƒåŸåˆ™ï¼Œä¸ä¸»åŠ¨è¯¢é—®å…¶ä»–æœåŠ¡å™¨ï¼Œè€Œæ˜¯æŠŠçŸ¥é“åŸŸåå¯¹åº”å…³ç³»çš„æœåŠ¡å™¨ä¿¡æ¯å‘Šè¯‰ç»™æœ¬åœ°åŸŸåæœåŠ¡å™¨</li></ul><h5 id="ï¼ˆ4ï¼‰åŸŸåè§£æå†…éƒ¨åŸç†"><a href="#ï¼ˆ4ï¼‰åŸŸåè§£æå†…éƒ¨åŸç†" class="headerlink" title="ï¼ˆ4ï¼‰åŸŸåè§£æå†…éƒ¨åŸç†"></a>ï¼ˆ4ï¼‰åŸŸåè§£æå†…éƒ¨åŸç†</h5><p>åŸŸåè§£æè¯·æ±‚DNSæœåŠ¡å™¨ï¼Œä¸æµè§ˆå™¨è¯·æ±‚è¿œç¨‹webæœåŠ¡å™¨æœ‰ç±»ä¼¼çš„åœ°æ–¹ï¼Œåé¢å«ä¹‰å†è¯¦ç»†è®²Sockeråº“å’Œåè®®æ ˆ</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110082104351.png" alt="image-20211008210454836"></p><h3 id="ç”¨ç”µä¿¡å·ä¼ è¾“TCP-IPæ•°æ®"><a href="#ç”¨ç”µä¿¡å·ä¼ è¾“TCP-IPæ•°æ®" class="headerlink" title="ç”¨ç”µä¿¡å·ä¼ è¾“TCP/IPæ•°æ®"></a>ç”¨ç”µä¿¡å·ä¼ è¾“TCP/IPæ•°æ®</h3><p>åè®®åˆ†å±‚æ¨¡å‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110090830845.jpeg" alt="OSIåè®®æ¨¡å‹ã€TCP/IPåè®®æ¨¡å‹"></p><p>TCP/IPæ•°æ®åŒ…å°è£…ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110090853102.png" alt="TCP/IPæ•°æ®åŒ…çš„å°è£…"></p><p>ä¸åŒçš„åè®®å±‚å¯¹æ•°æ®åŒ…æœ‰ä¸åŒçš„ç§°è°“ï¼Œåœ¨ä¼ è¾“å±‚å«åšæ®µï¼ˆsegmentï¼‰ï¼Œåœ¨ç½‘ç»œå±‚å«åšæ•°æ®æŠ¥ï¼ˆdatagramï¼‰ï¼Œåœ¨é“¾è·¯å±‚å«åšå¸§ï¼ˆframeï¼‰</p><p>é€šä¿¡æ“ä½œä¸­ä½¿ç”¨çš„æ§åˆ¶ä¿¡æ¯åˆ†ä¸ºä¸¤ç±»ï¼š</p><ul><li>å¤´éƒ¨ä¸­è®°å½•çš„ä¿¡æ¯ï¼ˆå³åŠ è½½æ•°æ®åŒ…å‰çš„æ§åˆ¶ä¿¡æ¯ï¼‰</li><li>å¥—æ¥å­—ï¼ˆåè®®æ ˆä¸­çš„å†…å­˜ç©ºé—´ï¼‰ä¸­è®°å½•çš„ä¿¡æ¯</li></ul><h4 id="1-å§”æ‰˜åè®®æ ˆå‘é€æ¶ˆæ¯"><a href="#1-å§”æ‰˜åè®®æ ˆå‘é€æ¶ˆæ¯" class="headerlink" title="1.å§”æ‰˜åè®®æ ˆå‘é€æ¶ˆæ¯"></a>1.å§”æ‰˜åè®®æ ˆå‘é€æ¶ˆæ¯</h4><p>é€šè¿‡DNSè·å–IPåï¼Œå°±å¯ä»¥æŠŠHTTPçš„ä¼ è¾“å·¥ä½œäº¤ç»™<strong>æ“ä½œç³»ç»Ÿ</strong>ä¸­çš„<strong>åè®®æ ˆ</strong></p><p>å§”æ‰˜çš„ç»“æœæ˜¯ï¼š<strong>åè®®æ ˆ</strong>ä¹‹é—´è¿æ¥äº†ä¸€æ¡æ•°æ®é€šé“ï¼Œæ•°æ®åŒ…èƒ½æ²¿ç€è¿™æ¡é€šé“æµåŠ¨ï¼ˆ<strong>å¥—æ¥å­—</strong>åˆ™å¯ä»¥è§†ä¸ºç®¡é“çš„å‡ºå…¥å£ï¼Œ<strong>å¥—æ¥å­—</strong>çš„å®ä½“å°±æ˜¯é€šä¿¡æ§åˆ¶ä¿¡æ¯ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110090819495.png" alt="image-20211009081901393"></p><h5 id="ï¼ˆ1ï¼‰å¥—æ¥å­—ç»“æ„"><a href="#ï¼ˆ1ï¼‰å¥—æ¥å­—ç»“æ„" class="headerlink" title="ï¼ˆ1ï¼‰å¥—æ¥å­—ç»“æ„"></a>ï¼ˆ1ï¼‰å¥—æ¥å­—ç»“æ„</h5><p>åœ¨åè®®æ ˆå†…éƒ¨æœ‰ä¸€å—ç”¨äºå­˜æ”¾æ§åˆ¶ä¿¡æ¯çš„å†…å­˜ç©ºé—´ï¼Œè¿™é‡Œè®°å½•äº†ç”¨äº<strong>æ§åˆ¶é€šä¿¡æ“ä½œçš„æ§åˆ¶ä¿¡æ¯</strong>ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºè¿™äº›æ§åˆ¶ä¿¡æ¯å°±æ˜¯å¥—æ¥å­—çš„å®ä½“</p><p>å¥—æ¥å­—ä¸­è®°å½•äº†ç”¨äºæ§åˆ¶é€šä¿¡æ“ä½œçš„å„ç§æ§åˆ¶ä¿¡æ¯ï¼Œåè®®æ ˆåˆ™éœ€è¦æ ¹æ®è¿™äº›ä¿¡æ¯åˆ¤æ–­ä¸‹ä¸€æ­¥çš„è¡ŒåŠ¨ï¼Œè¿™å°±æ˜¯å¥—æ¥å­—çš„ä½œç”¨ï¼ˆåè®®æ ˆæ˜¯æ ¹æ®å¥—æ¥å­—ä¸­è®°å½•çš„æ§åˆ¶ä¿¡æ¯æ¥å·¥ä½œçš„ï¼‰</p><p>å¥—æ¥å­—å†…å®¹æŸ¥çœ‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110090911172.png" alt="image-20211009091135737"></p><h5 id="ï¼ˆ2ï¼‰TCP-IP-è½¯ä»¶åˆ†å±‚ç»“æ„"><a href="#ï¼ˆ2ï¼‰TCP-IP-è½¯ä»¶åˆ†å±‚ç»“æ„" class="headerlink" title="ï¼ˆ2ï¼‰TCP/IP è½¯ä»¶åˆ†å±‚ç»“æ„"></a>ï¼ˆ2ï¼‰TCP/IP è½¯ä»¶åˆ†å±‚ç»“æ„</h5><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110090805877.png" alt="image-20211009080517915" style="zoom:80%;"><h5 id="ï¼ˆ3ï¼‰Socketåº“"><a href="#ï¼ˆ3ï¼‰Socketåº“" class="headerlink" title="ï¼ˆ3ï¼‰Socketåº“"></a>ï¼ˆ3ï¼‰Socketåº“</h5><p>æµè§ˆå™¨é€šè¿‡è°ƒç”¨<strong>Socket</strong>åº“ï¼Œå§”æ‰˜åè®®æ ˆæ¥å·¥ä½œ</p><p>å‘æ“ä½œç³»ç»Ÿå†…éƒ¨çš„åè®®æ ˆå‘å‡ºå§”æ‰˜æ—¶ï¼Œéœ€è¦æŒ‰ç…§æŒ‡å®šçš„é¡ºåºæ¥è°ƒç”¨Socket åº“ä¸­çš„ç¨‹åºç»„ä»¶ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110090811908.png" alt="image-20211009081135594"></p><ul><li>åˆ›å»ºå¥—æ¥å­—ï¼ˆåˆ›å»ºå¥—æ¥å­—é˜¶æ®µï¼‰</li><li>å°†ç®¡é“è¿æ¥åˆ°æœåŠ¡å™¨ç«¯çš„å¥—æ¥å­—ä¸Šï¼ˆè¿æ¥é˜¶æ®µï¼‰</li><li>æ”¶å‘æ•°æ®ï¼ˆé€šä¿¡é˜¶æ®µï¼‰</li><li>æ–­å¼€ç®¡é“å¹¶åˆ é™¤å¥—æ¥å­—ï¼ˆæ–­å¼€é˜¶æ®µï¼‰</li></ul><h5 id="ï¼ˆ4ï¼‰TCPä¸UDPåè®®"><a href="#ï¼ˆ4ï¼‰TCPä¸UDPåè®®" class="headerlink" title="ï¼ˆ4ï¼‰TCPä¸UDPåè®®"></a>ï¼ˆ4ï¼‰TCPä¸UDPåè®®</h5><p>TCPå’ŒUDPåè®®ï¼Œæ¥æ”¶åº”ç”¨å±‚çš„å§”æ‰˜æŒ‡å‘æ”¶å‘æ•°æ®çš„æ“ä½œ</p><ul><li>TCPå’ŒUDPåè®®çš„è¿ç”¨ï¼š</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110090832758.jpeg" alt="TCP/UDPå¸¸è§åº”ç”¨"></p><ul><li>TCP/UDPæ¯”è¾ƒï¼š</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110131208230.webp" alt="TCP/UDPæ¯”è¾ƒ"></p><p>å’³å’³ï¼Œæ­£ç»è¯¦ç»†çš„æ¯”è¾ƒå¦‚ä¸‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110131209573.png" alt="image-20211013120922107"></p><ul><li>TCP/UDPç¼–ç¨‹æ¨¡å‹</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110090836254.jpeg" alt="TCP/UDPç¼–ç¨‹æ¨¡å‹"></p><h5 id="ï¼ˆ5ï¼‰IPåè®®"><a href="#ï¼ˆ5ï¼‰IPåè®®" class="headerlink" title="ï¼ˆ5ï¼‰IPåè®®"></a>ï¼ˆ5ï¼‰IPåè®®</h5><p>åœ¨äº’è”ç½‘ä¸Šä¼ æ•°æ®æ—¶ï¼Œæ•°æ®åˆ½è¢«åˆ‡åˆ†æˆä¸€å—å—çš„ç½‘ç»œåŒ…ï¼Œè€Œå°†ç½‘ç»œåŒ…å‘é€ç»™å¯¹æ–¹çš„æ“ä½œå°±æ˜¯ç”± IP è´Ÿè´£çš„</p><p>æ­¤å¤– IP ä¸­è¿˜åŒ…æ‹¬ <code>ICMP</code> åè®®å’Œ <code>ARP</code> åè®®ï¼š</p><ul><li><code>ICMP</code> ç”¨äºå‘ŠçŸ¥ç½‘ç»œåŒ…ä¼ é€è¿‡ç¨‹ä¸­äº§ç”Ÿçš„é”™è¯¯ä»¥åŠå„ç§æ§åˆ¶ä¿¡æ¯</li><li><code>ARP</code> ç”¨äºæ ¹æ® IP åœ°å€æŸ¥è¯¢ç›¸åº”çš„ä»¥å¤ªç½‘ MAC åœ°å€</li></ul><p>IP ä¸‹é¢çš„ç½‘å¡é©±åŠ¨ç¨‹åºè´Ÿè´£æ§åˆ¶ç½‘å¡ç¡¬ä»¶ï¼Œè€Œæœ€ä¸‹é¢çš„ç½‘å¡åˆ™è´Ÿè´£å®Œæˆå®é™…çš„æ”¶å‘æ“ä½œï¼Œä¹Ÿå°±æ˜¯å¯¹ç½‘çº¿ä¸­çš„ä¿¡å·æ‰§è¡Œå‘é€å’Œæ¥æ”¶çš„æ“ä½œ</p><h4 id="2-TCPå¯é ä¼ è¾“"><a href="#2-TCPå¯é ä¼ è¾“" class="headerlink" title="2.TCPå¯é ä¼ è¾“"></a>2.TCPå¯é ä¼ è¾“</h4><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.eet-china.com/mp/a44399.html">TCPä¸‰æ¬¡æ¡æ‰‹</a></p><h5 id="ï¼ˆ1ï¼‰TCPåŒ…å¤´æ ¼å¼"><a href="#ï¼ˆ1ï¼‰TCPåŒ…å¤´æ ¼å¼" class="headerlink" title="ï¼ˆ1ï¼‰TCPåŒ…å¤´æ ¼å¼"></a>ï¼ˆ1ï¼‰TCPåŒ…å¤´æ ¼å¼</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110091935607.png" alt="img"></p><ul><li><p>æºç«¯å£å·ï¼šå‘é€ç½‘ç»œåŒ…çš„ç¨‹åºçš„ç«¯å£å·</p></li><li><p>ç›®æ ‡ç«¯å£å·ï¼š ç½‘ç»œåŒ…çš„æ¥æ”¶æ–¹ç¨‹åºçš„ç«¯å£å·</p></li><li><p>åºå·ï¼š<strong>å‘é€æ–¹å‘ŠçŸ¥æ¥æ”¶æ–¹</strong>ï¼Œè¯¥ç½‘ç»œåŒ…å‘é€çš„æ•°æ®ç›¸å½“äºæ‰€æœ‰å‘é€æ•°æ®çš„ç¬¬å‡ ä¸ªå­—èŠ‚</p></li><li><p>ACK å·ï¼ˆç¡®è®¤å·ï¼‰ï¼š<strong>æ¥æ”¶æ–¹å‘ŠçŸ¥å‘é€æ–¹</strong>ï¼Œæ¥æ”¶æ–¹å·²ç»æ”¶åˆ°äº†æ‰€æœ‰æ•°æ®çš„ç¬¬å‡ ä¸ªå­—èŠ‚</p></li><li><p>æ•°æ®åç§»é‡ï¼ˆé¦–éƒ¨é•¿åº¦ï¼‰ï¼š è¡¨ç¤ºæ•°æ®éƒ¨åˆ†çš„èµ·å§‹ä½ç½®ï¼Œä¹Ÿå¯ä»¥è®¤ä¸ºè¡¨ç¤ºå¤´éƒ¨çš„é•¿åº¦</p></li><li><p>ä¿ç•™ï¼šè¯¥å­—æ®µä¸ºä¿ç•™ï¼Œç°åœ¨æœªä½¿ç”¨</p></li><li><p>æ§åˆ¶ä½ï¼ˆçŠ¶æ€ä½ï¼‰ï¼šè¯¥å­—æ®µä¸­çš„æ¯ä¸ªæ¯”ç‰¹åˆ†åˆ«è¡¨ç¤ºä»¥ä¸‹é€šä¿¡æ§åˆ¶å«ä¹‰</p><ul><li>URGï¼šè¡¨ç¤ºç´§æ€¥æŒ‡é’ˆå­—æ®µæœ‰æ•ˆ</li><li>ACKï¼šè¡¨ç¤ºæ¥æ”¶æ•°æ®åºå·å­—æ®µæœ‰æ•ˆï¼Œä¸€èˆ¬è¡¨ç¤ºæ•°æ®å·²è¢«æ¥æ”¶æ–¹<strong>æ”¶åˆ°</strong></li><li>PSHï¼šè¡¨ç¤ºé€šè¿‡flush æ“ä½œå‘é€çš„æ•°æ®</li><li>RSTï¼š<strong>å¼ºåˆ¶æ–­å¼€</strong>è¿æ¥ï¼Œç”¨äºå¼‚å¸¸ä¸­æ–­çš„æƒ…å†µ</li><li>SYNï¼šå‘é€æ–¹å’Œæ¥æ”¶æ–¹ç›¸äº’ç¡®è®¤åºå·ï¼Œè¡¨ç¤º<strong>è¿æ¥</strong>æ“ä½œ</li><li>FINï¼šè¡¨ç¤º<strong>æ–­å¼€</strong>è¿æ¥</li></ul></li><li><p>çª—å£å¤§å°ï¼šæ¥æ”¶æ–¹å‘ŠçŸ¥å‘é€æ–¹çª—å£å¤§å°ï¼ˆçª—å£å¤§å°å³ç¼“å­˜å¤§å°ï¼Œæ ‡è¯†å½“å‰å¤„ç†èƒ½åŠ›ï¼Œç”¨äº<strong>æµé‡æ§åˆ¶</strong>ï¼Œ<strong>æ‹¥å¡æ§åˆ¶</strong>ï¼‰</p></li><li><p>æ ¡éªŒå’Œï¼šç”¨æ¥æ£€æŸ¥æ˜¯å¦å‡ºç°é”™è¯¯</p></li><li><p>ç´§æ€¥æŒ‡é’ˆï¼šè¡¨ç¤ºåº”ç´§æ€¥å¤„ç†çš„æ•°æ®ä½ç½®</p></li><li><p>å¯é€‰å­—æ®µï¼šé™¤äº†ä¸Šé¢çš„å›ºå®šå¤´éƒ¨å­—æ®µä¹‹å¤–ï¼Œè¿˜å¯ä»¥æ·»åŠ å¯é€‰å­—æ®µï¼Œä½†é™¤äº†è¿æ¥æ“ä½œä¹‹å¤–ï¼Œå¾ˆå°‘ä½¿ç”¨å¯é€‰å­—æ®µ</p></li></ul><h5 id="ï¼ˆ2ï¼‰TCPä¸‰æ¬¡æ¡æ‰‹"><a href="#ï¼ˆ2ï¼‰TCPä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="ï¼ˆ2ï¼‰TCPä¸‰æ¬¡æ¡æ‰‹"></a>ï¼ˆ2ï¼‰TCPä¸‰æ¬¡æ¡æ‰‹</h5><p>TCPä¸‰æ¬¡æ¡æ‰‹å…¶å®å°±æ˜¯<strong>å»ºç«‹ä¸€ä¸ªTCPè¿æ¥</strong>ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´éœ€è¦<strong>3ä¸ªæ•°æ®åŒ…</strong>ï¼Œæ¡æ‰‹çš„ä¸»è¦ä½œç”¨å°±æ˜¯ä¸ºäº†ç¡®è®¤åŒæ–¹çš„æ¥æ”¶å’Œå‘é€èƒ½åŠ›æ˜¯å¦æ­£å¸¸ï¼Œåˆå§‹åºåˆ—å·ï¼Œäº¤æ¢çª—å£å¤§å°ä»¥åŠ MSS ç­‰ä¿¡æ¯</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110091957945.png" alt="img"></p><p>SYNï¼šå‘é€æ–¹å’Œæ¥æ”¶æ–¹ç›¸äº’ç¡®è®¤åºå·ï¼Œè¡¨ç¤º<strong>è¿æ¥</strong>æ“ä½œï¼›    ACKï¼šè¡¨ç¤ºæ¥æ”¶æ•°æ®åºå·å­—æ®µæœ‰æ•ˆï¼Œä¸€èˆ¬è¡¨ç¤ºæ•°æ®å·²è¢«æ¥æ”¶æ–¹<strong>æ”¶åˆ°</strong></p><ul><li>åˆå§‹çŠ¶æ€ä¸‹ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½å¤„åœ¨<strong>CLOSED</strong>çŠ¶æ€ï¼Œå…ˆæ˜¯æœåŠ¡ç«¯ä¸»åŠ¨ç›‘å¬æŸä¸ªç«¯å£ï¼Œå¤„äº<strong>LISTEN</strong>çŠ¶æ€</li><li>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯å‘é€<strong>SYN</strong>æŠ¥æ–‡ï¼Œå¹¶è¿›å…¥<strong>SYN-SENT</strong>çŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨ç¡®è®¤</li><li>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡å™¨æ”¶åˆ°<strong>SYN</strong>æŠ¥æ–‡åï¼Œéœ€è¦å‘å®¢æˆ·ç«¯å‘é€<strong>ACK</strong>ç¡®è®¤<strong>æ”¶åˆ°</strong>çš„æŠ¥æ–‡ï¼›åŒæ—¶æœåŠ¡ç«¯ä¹Ÿå‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ª<strong>SYNæŠ¥æ–‡</strong>ï¼ˆä¹Ÿå°±æ˜¯è¯´æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å‘é€äº†<strong>SYN+ACK</strong>æŠ¥æ–‡ï¼‰ï¼Œç„¶åæœåŠ¡ç«¯è¿›å…¥<strong>SYN_RCVD</strong>çŠ¶æ€</li><li>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ°<strong>SYN+ACK</strong>æŠ¥æ–‡åï¼Œå‘æœåŠ¡ç«¯å‘é€<strong>ACK</strong>ç¡®è®¤<strong>æ”¶åˆ°</strong>çš„æŠ¥æ–‡ï¼Œå®¢æˆ·ç«¯è¿›å…¥<strong>ESTABLISHED</strong>çŠ¶æ€ï¼› æœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯çš„<strong>ACK</strong>åŒ…åä¹Ÿä¼šè¿›å…¥<strong>ESTABLISHED</strong>çŠ¶æ€ï¼Œå®Œæˆä¸‰æ¬¡æ¡æ‰‹</li></ul><p>ä¸‰æ¬¡æ¡æ‰‹çš„æœ¬è´¨æ˜¯â€”â€”å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨é€šè¿‡<strong>ä¸¤å¯¹SYN-ACKæŠ¥æ–‡</strong>äº’ç›¸ç¡®è®¤èƒ½åŠ›æ­£ä¸æ­£å¸¸</p><p>æ¯æ¬¡SYNå‘é€ä¸€ä¸ªéšæœºæ•°<strong>n</strong>ï¼ˆseq=nï¼‰ï¼Œåˆ™ACKéœ€è¦è¿”å›<strong>n+1</strong>ï¼ˆack=n+1ï¼‰</p><h5 id="ï¼ˆ3ï¼‰TCPè¿æ¥çŠ¶æ€æŸ¥çœ‹"><a href="#ï¼ˆ3ï¼‰TCPè¿æ¥çŠ¶æ€æŸ¥çœ‹" class="headerlink" title="ï¼ˆ3ï¼‰TCPè¿æ¥çŠ¶æ€æŸ¥çœ‹"></a>ï¼ˆ3ï¼‰TCPè¿æ¥çŠ¶æ€æŸ¥çœ‹</h5><p>åœ¨Linuxç³»ç»Ÿå¯ä»¥é€šè¿‡<code>netstat -napt</code>å‘½ä»¤æŸ¥çœ‹TCPè¿æ¥çŠ¶æ€</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110092029731.png" alt="img"></p><h5 id="ï¼ˆ4ï¼‰TCPåˆ†å‰²æ•°æ®"><a href="#ï¼ˆ4ï¼‰TCPåˆ†å‰²æ•°æ®" class="headerlink" title="ï¼ˆ4ï¼‰TCPåˆ†å‰²æ•°æ®"></a>ï¼ˆ4ï¼‰TCPåˆ†å‰²æ•°æ®</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110092031256.png" alt="image-20211009203103835"></p><ul><li><code>MTU</code>ï¼šä¸€ä¸ªç½‘ç»œåŒ…çš„æœ€å¤§é•¿åº¦ï¼Œä»¥å¤ªç½‘ä¸­ä¸€èˆ¬ä¸º <code>1500</code> å­—èŠ‚ã€‚</li><li><code>MSS</code>ï¼šé™¤å» IP å’Œ TCP å¤´éƒ¨ä¹‹åï¼Œä¸€ä¸ªç½‘ç»œåŒ…æ‰€èƒ½å®¹çº³çš„ TCP æ•°æ®çš„æœ€å¤§é•¿åº¦</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110092036185.png" alt="image-20211009203651137"></p><p>HTTPè¯·æ±‚æ¶ˆæ¯æ¯”è¾ƒé•¿ï¼Œè¶…è¿‡MSSé•¿åº¦ï¼ŒTCPå°±ä¼šæŠŠHTTPæ¶ˆæ¯çš„æ•°æ®æ‹†è§£æˆä¸€å—å—çš„æ•°æ®å‘é€ï¼Œæ•°æ®ä¼šè¢«ä»¥ <code>MSS</code> çš„é•¿åº¦ä¸ºå•ä½è¿›è¡Œæ‹†åˆ†ï¼Œæ‹†åˆ†å‡ºæ¥çš„æ¯ä¸€å—æ•°æ®éƒ½ä¼šè¢«æ”¾è¿›å•ç‹¬çš„ç½‘ç»œåŒ…ä¸­</p><h5 id="ï¼ˆ5ï¼‰TCPæŠ¥æ–‡ç”Ÿæˆ"><a href="#ï¼ˆ5ï¼‰TCPæŠ¥æ–‡ç”Ÿæˆ" class="headerlink" title="ï¼ˆ5ï¼‰TCPæŠ¥æ–‡ç”Ÿæˆ"></a>ï¼ˆ5ï¼‰TCPæŠ¥æ–‡ç”Ÿæˆ</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110092037127.jpeg" alt="img"></p><p>TCP åè®®é‡Œé¢çš„ä¸¤ä¸ªç«¯å£ï¼Œä¸€ä¸ªæ˜¯æµè§ˆå™¨ç›‘å¬çš„ç«¯å£ï¼ˆé€šå¸¸æ˜¯éšæœºç”Ÿæˆçš„ï¼‰ï¼Œä¸€ä¸ªæ˜¯ Web æœåŠ¡å™¨ç›‘å¬çš„ç«¯å£ï¼ˆHTTP é»˜è®¤ç«¯å£å·æ˜¯ <code>80</code>ï¼Œ HTTPS é»˜è®¤ç«¯å£å·æ˜¯ <code>443</code>ï¼‰</p><p>TCPæŠ¥æ–‡å³ä¸ºTCPå¤´éƒ¨+HTTPå¤´éƒ¨+æ•°æ®ï¼Œç»„è£…å¥½åäº¤ç»™ä¸‹é¢çš„ç½‘ç»œå±‚ï¼ˆIPï¼‰å¤„ç†</p><h5 id="ï¼ˆ6ï¼‰TCPå››æ¬¡æŒ¥æ‰‹"><a href="#ï¼ˆ6ï¼‰TCPå››æ¬¡æŒ¥æ‰‹" class="headerlink" title="ï¼ˆ6ï¼‰TCPå››æ¬¡æŒ¥æ‰‹"></a>ï¼ˆ6ï¼‰TCPå››æ¬¡æŒ¥æ‰‹</h5><p>å½“æˆ‘ä»¬çš„åº”ç”¨ä¸å†éœ€è¦æ•°æ®é€šä¿¡ï¼Œå°±ä¼šå‘èµ·æ–­å¼€TCPè¿æ¥ï¼Œå»ºç«‹ä¸€ä¸ªè¿æ¥éœ€è¦<strong>ä¸‰æ¬¡æ¡æ‰‹</strong>ï¼Œè€Œç»ˆæ­¢ä¸€ä¸ªè¿æ¥éœ€è¦ç»è¿‡<strong>å››æ¬¡æŒ¥æ‰‹</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110111551532.png" alt="img"></p><p>SYNï¼šå‘é€æ–¹å’Œæ¥æ”¶æ–¹ç›¸äº’ç¡®è®¤åºå·ï¼Œè¡¨ç¤º<strong>è¿æ¥</strong>æ“ä½œï¼›    ACKï¼šè¡¨ç¤ºæ¥æ”¶æ•°æ®åºå·å­—æ®µæœ‰æ•ˆï¼Œä¸€èˆ¬è¡¨ç¤ºæ•°æ®å·²è¢«æ¥æ”¶æ–¹<strong>æ”¶åˆ°</strong>ï¼›    FINï¼šè¡¨ç¤º<strong>æ–­å¼€</strong>è¿æ¥</p><ul><li>ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·ç«¯å‘èµ·<strong>FIN</strong>åŒ…ï¼Œå®¢æˆ·ç«¯è¿›å…¥<strong>FIN_WAIT_1</strong>çŠ¶æ€ï¼ˆè™½ç„¶FINåŒ…ä¸æºå¸¦æ•°æ®ï¼Œä¹Ÿéœ€è¦æ¶ˆè€—ä¸€ä¸ªåºå·uï¼‰</li><li>ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼šæœåŠ¡ç«¯æ”¶åˆ°<strong>FIN</strong>åŒ…ï¼Œå‘å‡ºç¡®è®¤åŒ…<strong>ACK</strong>ï¼ˆack=u+1ï¼‰ï¼Œå¹¶å¸¦ä¸Šè‡ªå·±çš„åºå·seq=vï¼ŒæœåŠ¡ç«¯è¿›å…¥<strong>CLOSE_WAIT</strong>çŠ¶æ€ï¼ˆè¿™ä¸ªæ—¶å€™å®¢æˆ·ç«¯ä»éœ€è¦æ¥æ”¶æœåŠ¡å™¨å‘é€çš„æ•°æ®ï¼‰ï¼›å®¢æˆ·ç«¯æ¥æ”¶åˆ°æœåŠ¡ç«¯å‘é€çš„<strong>ACK</strong>åï¼Œè¿›å…¥<strong>FIN_WAIT_2</strong>çŠ¶æ€</li><li>ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼šæœåŠ¡ç«¯æ•°æ®å‘é€å®Œæ¯•åï¼Œå‘å®¢æˆ·ç«¯å‘é€<strong>FIN</strong>åŒ…ï¼ˆseq=wï¼Œack=u+1ï¼‰ï¼Œ<strong>åŠè¿æ¥çŠ¶æ€</strong>ä¸‹æœåŠ¡å™¨å¯èƒ½åˆå‘é€ä¸€äº›æ•°æ®ï¼ŒæœåŠ¡ç«¯æ­¤æ—¶è¿›å…¥<strong>LAST_ACK</strong>çŠ¶æ€</li><li>ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯çš„<strong>FIN</strong>åŒ…åï¼Œå‘å‡ºç¡®è®¤åŒ…ACKï¼ˆACK=1ï¼Œ ack=w+1ï¼‰ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯è¿›å…¥<strong>TIME_WAIT</strong>çŠ¶æ€ï¼›æœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯ç¡®è®¤åŒ…åè¿›å…¥<strong>CLOSED</strong>çŠ¶æ€ï¼Œè€Œå®¢æˆ·ç«¯éœ€è¦ç­‰å¾…2MSLåæ‰è¿›å…¥<strong>CLOSED</strong>çŠ¶æ€</li></ul><p>å››æ¬¡æŒ¥æ‰‹çš„æœ¬è´¨æ˜¯â€”â€”å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨é€šè¿‡<strong>ä¸¤å¯¹FIN-ACKæŠ¥æ–‡</strong>é€šçŸ¥å¯¹æ–¹è‡ªå·±è¦å…³é—­äº†</p><p>ä¸‰æ¬¡æ¡æ‰‹ä¸­ï¼Œåœ¨ç¬¬äºŒæ¬¡æ¡æ‰‹æ—¶ï¼Œæ¥æ”¶ç«¯å°†ä¸€ä¸ª<strong>ACK</strong>åŒ…å’Œä¸€ä¸ª<strong>SYN</strong>åŒ…åˆå¹¶ä¸€èµ·å‘é€ï¼Œæ‰€ä»¥å‡å°‘äº†ä¸€æ¬¡åŒ…çš„å‘é€</p><p>å››æ¬¡æŒ¥æ‰‹ä¸­ï¼Œåœ¨ä¸»åŠ¨å…³é—­æ–¹ï¼ˆå®¢æˆ·ç«¯ï¼‰å‘é€FINåŒ…åï¼Œæ¥æ”¶æ–¹ï¼ˆæœåŠ¡ç«¯ï¼‰å¯èƒ½è¿˜è¦å‘é€æ•°æ®ï¼Œä¸èƒ½ç«‹å³å…³é—­æ•°æ®é€šé“ï¼Œæ‰€ä»¥æœåŠ¡ç«¯è¦å…ˆç¡®è®¤ACKï¼Œç„¶åç­‰åˆ°è‡ªå·±æŠŠæ•°æ®å‘æ— å¯å‘åå†å‘é€<strong>FIN</strong>åŒ…</p><h4 id="3-IPè¿œç¨‹å®šä½"><a href="#3-IPè¿œç¨‹å®šä½" class="headerlink" title="3.IPè¿œç¨‹å®šä½"></a>3.IPè¿œç¨‹å®šä½</h4><p>TCP æ¨¡å—åœ¨æ‰§è¡Œè¿æ¥ã€æ”¶å‘ã€æ–­å¼€ç­‰å„é˜¶æ®µæ“ä½œæ—¶ï¼Œéƒ½éœ€è¦å§”æ‰˜ IP æ¨¡å—å°†æ•°æ®å°è£…æˆ<strong>ç½‘ç»œåŒ…</strong>å‘é€ç»™é€šä¿¡å¯¹è±¡</p><h5 id="ï¼ˆ1ï¼‰IPåŒ…å¤´æ ¼å¼"><a href="#ï¼ˆ1ï¼‰IPåŒ…å¤´æ ¼å¼" class="headerlink" title="ï¼ˆ1ï¼‰IPåŒ…å¤´æ ¼å¼"></a>ï¼ˆ1ï¼‰IPåŒ…å¤´æ ¼å¼</h5><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.malaoshi.top/show_1EF2boBn83hd.html">IPæŠ¥å¤´æ ¼å¼</a></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110111650792.png" alt="img"></p><ul><li>ç‰ˆæœ¬å·ï¼ˆVersionï¼‰ï¼šæ ‡æ˜äº†<strong>IP åè®®çš„ç‰ˆæœ¬å·</strong>ï¼Œç›®å‰çš„åè®®ç‰ˆæœ¬å·ä¸º4ï¼Œä¸‹ä¸€ä»£IP åè®®çš„ç‰ˆæœ¬å·ä¸º6</li><li>é¦–éƒ¨é•¿åº¦ï¼šæŒ‡ <strong>IP åŒ…å¤´éƒ¨é•¿åº¦</strong>ï¼Œå 4 ä½</li><li>åŒºåˆ†ç±»å‹ï¼ˆæœåŠ¡ç±»å‹ï¼‰ï¼šåŒ…æ‹¬ä¸€ä¸ª3 ä½çš„ä¼˜å…ˆæƒå­—æ®µï¼ˆ<strong>COS</strong>ï¼ŒClass of Serviceï¼‰ï¼Œ4 ä½<strong>TOS</strong> å­—æ®µå’Œ1 ä½æœªç”¨ä½ã€‚4 ä½TOS åˆ†åˆ«ä»£è¡¨æœ€å°æ—¶å»¶ã€æœ€å¤§ååé‡ã€æœ€é«˜å¯é æ€§å’Œæœ€å°è´¹ç”¨</li><li>æ€»é•¿åº¦ï¼šæ˜¯æ•´ä¸ª<strong>IP æ•°æ®æŠ¥é•¿åº¦</strong>ï¼ŒåŒ…æ‹¬æ•°æ®éƒ¨åˆ†</li><li>æ ‡è¯†ï¼šå”¯ä¸€çš„æ ‡è¯†ä¸»æœºå‘é€çš„æ¯ä¸€ä»½æ•°æ®æŠ¥ï¼Œé€šå¸¸æ¯å‘é€ä¸€ä»½æŠ¥æ–‡å®ƒçš„å€¼å°±ä¼šåŠ 1</li><li>Flagï¼š3bite å®ƒæ˜¯ç”¨æ¥<strong>æ ‡å¿—æ•°æ®åŒ…æ˜¯å¦åˆ†æ®µ</strong>ï¼Œå…¶ä¸­åŒ…å«<strong>DFï¼ˆdo not fragmentï¼‰</strong>å’Œ<strong>MF(more fragment)</strong>ï¼Œå½“DFçš„å€¼ä¸º1æ—¶ï¼Œåˆ™MFçš„å€¼å¿…ä¸º0ï¼ŒDFä¸º1ï¼Œåˆ™è¯´æ˜æ•°æ®åŒ…æœ‰åˆ†æ®µã€‚åŒæ ·å¯ä»¥çŸ¥é“å½“MFä¸º1æ—¶ï¼Œåˆ™DFä¸º0ï¼Œè¿™è¡¨ç¤ºçš„æ˜¯æ•°æ®åŒ…æ²¡æœ‰åˆ†æ®µã€‚å½“ç„¶ä¹Ÿæœ‰å¯èƒ½MFå’ŒDFéƒ½ä¸º0çš„</li><li>Frag offsetï¼š<strong>æ®µåç§»</strong> 15bite ç”¨äº<strong>æè¿°æ­¤åˆ†æ®µåœ¨æ•°æ®åŒ…ä¸­çš„ä½ç½®</strong></li><li>ç”Ÿå­˜æ—¶é—´ï¼šTime To Liveï¼ˆTTLï¼‰ï¼Œè®¾ç½®äº†æ•°æ®åŒ…å¯ä»¥ç»è¿‡çš„ <strong>è·¯ç”±å™¨æ•°ç›®</strong>ã€‚ä¸€æ—¦ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨ï¼ŒTTL å€¼å°±ä¼šå‡1ï¼Œå½“è¯¥å­—æ®µå€¼ä¸º0 æ—¶ï¼Œæ•°æ®åŒ…å°†è¢«ä¸¢å¼ƒ</li><li>åè®®ï¼šæŒ‡ç¤ºåº”å½“æŠŠè¿™ä¸ªæ•°æ®åŒ…å‘å¾€æ›´é«˜å±‚çš„åè®®ï¼Œ<strong>TCP</strong> åè®®çš„åè®®å·ä¸º <strong>6</strong>ï¼Œ<strong>UDP</strong> åè®®çš„åè®®å·ä¸º<strong>17</strong></li><li>æŠ¥å¤´æ ¡éªŒå’Œï¼šè®¡ç®—IP å¤´éƒ¨çš„æ ¡éªŒå’Œï¼Œ<strong>æ£€æŸ¥æŠ¥æ–‡å¤´éƒ¨çš„å®Œæ•´æ€§</strong></li><li>æºIP åœ°å€ï¼šæ ‡è¯†æ•°æ®åŒ…çš„<strong>æºç«¯è®¾å¤‡</strong>ï¼ˆå³å®¢æˆ·ç«¯è¾“å‡ºçš„IPåœ°å€ï¼‰</li><li>ç›®çš„IP åœ°å€ï¼šæ ‡è¯†æ•°æ®åŒ…çš„<strong>ç›®çš„ç«¯è®¾å¤‡</strong>ï¼ˆå³é€šè¿‡DNSåŸŸåè§£æå¾—åˆ°çš„WEBæœåŠ¡å™¨IPï¼‰</li><li>IPé€‰é¡¹ï¼šä¸€èˆ¬æ ¼å¼ä¸º1ä¸ªå­—èŠ‚çš„ä»£ç ï¼Œ1ä¸ªå­—èŠ‚çš„é•¿åº¦ï¼Œ1ä¸ªå­—èŠ‚çš„æŒ‡é’ˆï¼ŒæŒ‡é’ˆçš„å€¼ä»1å¼€å§‹è®¡æ•°ï¼ŒæŒ‡å‘IPé€‰é¡¹çš„å†…å®¹ï¼Œä¸€èˆ¬å…¶å€¼ä¸º4(è·³è¿‡äº†å‰é¢çš„ä»£ç &amp;é•¿åº¦&amp;æŒ‡é’ˆçš„ä¸‰ä¸ªå­—èŠ‚)ï¼Œé•¿åº¦åŒ…æ‹¬å‰é¢3ä¸ªå­—èŠ‚åœ¨å†…çš„æ•´ä¸ªIPé€‰é¡¹ï¼Œæœ€å¤§å€¼ä¸º40</li></ul><h5 id="ï¼ˆ2ï¼‰IPåœ°å€é€‰æ‹©"><a href="#ï¼ˆ2ï¼‰IPåœ°å€é€‰æ‹©" class="headerlink" title="ï¼ˆ2ï¼‰IPåœ°å€é€‰æ‹©"></a>ï¼ˆ2ï¼‰IPåœ°å€é€‰æ‹©</h5><p>å®¢æˆ·ç«¯æœ‰å¤šä¸ªç½‘å¡æ—¶ï¼Œåœ¨å¡«å†™æºåœ°å€IPæ—¶å°±è¦æ ¹æ®<strong>è·¯ç”±è¡¨</strong>è§„åˆ™æ¥åˆ¤å®šåº”è¯¥ä½¿ç”¨å“ªä¸€å—ç½‘å¡æ¥å‘é€åŒ…</p><p>åœ¨lInuxç³»ç»Ÿï¼Œæˆ‘ä»¬ä½¿ç”¨<code>route -n</code>ï¼Œåœ¨windowsç³»ç»Ÿåˆ™ç”¨ <code>route print</code>æŸ¥çœ‹è·¯ç”±è¡¨</p><p>åˆ©ç”¨å­ç½‘æ©ç ä¸è·¯ç”±è¡¨åˆ¤æ–­æºåœ°å€ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110111928914.jpeg" alt="img"></p><p>å‡è®¾ç›®çš„IP åœ°å€ï¼ˆwebæœåŠ¡å™¨ï¼‰æ˜¯<strong>192.168.10.200</strong>ï¼Œä¸å„æ¡ç›®çš„<strong>å­ç½‘æ©ç </strong>åš<strong>ä¸è¿ç®—</strong>ï¼Œè®¡ç®—å‡ºIPå’Œæ¡ç›®çš„<strong>ç½‘ç»œç›®æ ‡IP</strong>ï¼ˆdestinationï¼‰åŒ¹é…ï¼Œåˆ™é€‰æ‹©è¯¥æ¡ç›®çš„ç½‘å¡ä½œä¸ºIPåŒ…å¤´çš„æºåœ°å€</p><p>ç¬¬ä¸‰æ¡ç›®çš„ç›®æ ‡åœ°å€å’Œå­ç½‘æ©ç éƒ½æ˜¯ <code>0.0.0.0</code>ï¼Œè¿™è¡¨ç¤º<strong>é»˜è®¤ç½‘å…³</strong>ï¼Œå¦‚æœå…¶ä»–æ‰€æœ‰æ¡ç›®éƒ½æ— æ³•åŒ¹é…ï¼Œå°±ä¼šè‡ªåŠ¨åŒ¹é…è¿™ä¸€è¡Œã€‚å¹¶ä¸”åç»­å°±æŠŠåŒ…å‘ç»™è·¯ç”±å™¨ï¼ˆGatewayå³è·¯ç”±å™¨çš„IPï¼‰</p><h5 id="ï¼ˆ3ï¼‰IPæŠ¥æ–‡ç”Ÿæˆ"><a href="#ï¼ˆ3ï¼‰IPæŠ¥æ–‡ç”Ÿæˆ" class="headerlink" title="ï¼ˆ3ï¼‰IPæŠ¥æ–‡ç”Ÿæˆ"></a>ï¼ˆ3ï¼‰IPæŠ¥æ–‡ç”Ÿæˆ</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110111945739.jpeg" alt="img"></p><p>IPæŠ¥æ–‡å³ä¸ºIPå¤´éƒ¨+TCPå¤´éƒ¨+HTTPå¤´éƒ¨+æ•°æ®ï¼Œç»„è£…å¥½åIPæ¨¡å—è¿˜è¦è¿›ä¸€æ­¥å¤„ç†</p><h4 id="4-MACä¼ è¾“"><a href="#4-MACä¼ è¾“" class="headerlink" title="4.MACä¼ è¾“"></a>4.MACä¼ è¾“</h4><p>ç”Ÿæˆäº† IP å¤´éƒ¨ä¹‹åï¼Œæ¥ä¸‹æ¥ç½‘ç»œåŒ…è¿˜éœ€è¦åœ¨ IP å¤´éƒ¨çš„å‰é¢åŠ ä¸Š <strong>MAC å¤´éƒ¨</strong></p><h5 id="ï¼ˆ1ï¼‰MACåŒ…å¤´æ ¼å¼"><a href="#ï¼ˆ1ï¼‰MACåŒ…å¤´æ ¼å¼" class="headerlink" title="ï¼ˆ1ï¼‰MACåŒ…å¤´æ ¼å¼"></a>ï¼ˆ1ï¼‰MACåŒ…å¤´æ ¼å¼</h5><p>MAC å¤´éƒ¨æ˜¯ä»¥å¤ªç½‘ä½¿ç”¨çš„å¤´éƒ¨ï¼Œå®ƒåŒ…å«äº†æ¥æ”¶æ–¹å’Œå‘é€æ–¹çš„MAC åœ°å€ç­‰ä¿¡æ¯</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110111958982.png" alt="img"></p><ul><li>æ¥æ”¶æ–¹MAC åœ°å€ï¼šç½‘ç»œåŒ…æ¥æ”¶æ–¹çš„MAC åœ°å€ï¼Œåœ¨<strong>å±€åŸŸç½‘</strong>ä¸­ä½¿ç”¨è¿™ä¸€åœ°å€æ¥ä¼ è¾“ç½‘ç»œåŒ…</li><li>å‘é€æ–¹MAC åœ°å€ï¼šç½‘ç»œåŒ…å‘é€æ–¹çš„MAC åœ°å€ï¼Œæ¥æ”¶æ–¹é€šè¿‡å®ƒæ¥åˆ¤æ–­æ˜¯è°å‘é€äº†è¿™ä¸ªåŒ…</li><li>ä»¥å¤ªç±»å‹ï¼šä½¿ç”¨çš„<strong>åè®®ç±»å‹</strong>ï¼Œä¸‹é¢æ˜¯ä¸€äº›å¸¸è§çš„ç±»å‹ï¼Œä¸€èˆ¬åœ¨TCP/IP é€šä¿¡ä¸­åªä½¿ç”¨0800 å’Œ0806è¿™ä¸¤ç§<ol><li>0000-05DCï¼šIEEE 802.3</li><li>0800ã€€ã€€ ï¼šIP åè®®</li><li>0806ã€€ ï¼šARP åè®®</li><li>86DDã€€ã€€ã€€ IPv6</li></ol></li></ul><h5 id="ï¼ˆ2ï¼‰MACåœ°å€ç¡®è®¤"><a href="#ï¼ˆ2ï¼‰MACåœ°å€ç¡®è®¤" class="headerlink" title="ï¼ˆ2ï¼‰MACåœ°å€ç¡®è®¤"></a>ï¼ˆ2ï¼‰MACåœ°å€ç¡®è®¤</h5><p><strong>å‘é€æ–¹</strong>ï¼š</p><p>å‘é€æ–¹çš„MACåœ°å€è·å–æ¯”è¾ƒç®€å•ï¼ŒMACåœ°å€åœ¨ç½‘å¡ç”Ÿäº§æ—¶å†™å…¥<strong>ROM</strong>ä¸­çš„ï¼Œåªéœ€å°†å…¶è¯»å–å‡ºæ¥æ”¾åˆ°MACå¤´éƒ¨å³å¯</p><p><strong>æ¥æ”¶æ–¹</strong>ï¼š</p><p>å‘é€IPç½‘ç»œåŒ…éœ€è¦å‘Šè¯‰ä»¥å¤ªç½‘å¯¹æ–¹çš„MACåœ°å€ï¼ŒIP æ¨¡å—æ ¹<strong>æ®è·¯ç”±è¡¨Gateway</strong> æ çš„å†…å®¹åˆ¤æ–­åº”è¯¥æŠŠåŒ…å‘é€ç»™è°ï¼Œç„¶ååœ¨åˆ©ç”¨<code>ARP</code> åè®®é€šè¿‡<strong>å¹¿æ’­</strong>çš„æ–¹æ³•å¸®æˆ‘ä»¬æ‰¾åˆ°è·¯ç”±å™¨ï¼ˆç›®æ ‡è®¾å¤‡ä¸å‘é€æ–¹åœ¨åŒä¸€å­ç½‘ä¸­ï¼‰çš„ MAC åœ°å€</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110112024487.png" alt="image-20211011202440537"></p><p>åç»­æ“ä½œç³»ç»Ÿä¼šå°†ARPçš„æŸ¥è¯¢ç»“æœç¼“å­˜åœ¨<strong>ARPç¼“å­˜</strong>çš„å†…å­˜ç©ºé—´å†…ï¼Œå¯ä»¥é€šè¿‡<code>arp -a</code>å‘½ä»¤è¿›è¡ŒæŸ¥çœ‹</p><h5 id="ï¼ˆ3ï¼‰MACæŠ¥æ–‡ç”Ÿæˆ"><a href="#ï¼ˆ3ï¼‰MACæŠ¥æ–‡ç”Ÿæˆ" class="headerlink" title="ï¼ˆ3ï¼‰MACæŠ¥æ–‡ç”Ÿæˆ"></a>ï¼ˆ3ï¼‰MACæŠ¥æ–‡ç”Ÿæˆ</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110112029433.jpeg" alt="img"></p><p>MACæŠ¥æ–‡å³ä¸ºMACå¤´éƒ¨+IPå¤´éƒ¨+TCPå¤´éƒ¨+HTTPå¤´éƒ¨+æ•°æ®ï¼Œè‡³æ­¤ç½‘ç»œåŒ…ç»ˆäºå®Œæ•´äº†ï¼Œå¯ä»¥ä»æœ¬è®¾å¤‡çš„å¤§é—¨ï¼ˆç½‘å¡ï¼‰èµ°å‡ºå»å¼€å§‹çœŸæ­£çš„ç½‘ç»œä¹‹æ—…</p><h4 id="5-ç½‘å¡å‡ºå£"><a href="#5-ç½‘å¡å‡ºå£" class="headerlink" title="5.ç½‘å¡å‡ºå£"></a>5.ç½‘å¡å‡ºå£</h4><h5 id="ï¼ˆ1ï¼‰ç½‘å¡å¤„ç†IPç½‘ç»œåŒ…"><a href="#ï¼ˆ1ï¼‰ç½‘å¡å¤„ç†IPç½‘ç»œåŒ…" class="headerlink" title="ï¼ˆ1ï¼‰ç½‘å¡å¤„ç†IPç½‘ç»œåŒ…"></a>ï¼ˆ1ï¼‰ç½‘å¡å¤„ç†IPç½‘ç»œåŒ…</h5><p>IPç”Ÿæˆçš„<strong>ç½‘ç»œåŒ…</strong>åªæ˜¯æ”¾åœ¨å†…å­˜ä¸­çš„ä¸€ä¸²äºŒè¿›åˆ¶æ•°å­—ä¿¡æ¯ï¼Œæ‰€ä»¥åœ¨å…¶å¼€å§‹ç½‘ç»œæ—…ç¨‹ä¹‹å‰è¿˜è¦ç»è¿‡<strong>ç½‘å¡</strong>å°†<strong>æ•°å­—ä¿¡æ¯è½¬æ¢ä¸ºç”µä¿¡å·</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110112051633.png" alt="img"></p><p>ç½‘å¡é©±åŠ¨ä» IP æ¨¡å—è·å–åˆ°åŒ…ä¹‹åï¼Œä¼šå°†å…¶<strong>å¤åˆ¶</strong>åˆ°ç½‘å¡å†…çš„ç¼“å­˜åŒºä¸­ï¼Œæ¥ç€ä¼šå…¶<strong>å¼€å¤´åŠ ä¸ŠæŠ¥å¤´å’Œèµ·å§‹å¸§åˆ†ç•Œç¬¦ï¼Œåœ¨æœ«å°¾åŠ ä¸Šç”¨äºæ£€æµ‹é”™è¯¯çš„å¸§æ ¡éªŒåºåˆ—</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110112054908.png" alt="image-20211011205426437"></p><ul><li>èµ·å§‹å¸§åˆ†ç•Œç¬¦æ˜¯ä¸€ä¸ªç”¨æ¥è¡¨ç¤ºåŒ…èµ·å§‹ä½ç½®çš„æ ‡è®°</li><li>æœ«å°¾çš„ <code>FCS</code>ï¼ˆå¸§æ ¡éªŒåºåˆ—ï¼‰ç”¨æ¥æ£€æŸ¥åŒ…ä¼ è¾“è¿‡ç¨‹æ˜¯å¦æœ‰æŸå</li></ul><p>æœ€åç½‘å¡å°†ç½‘ç»œåŒ…è½¬æ¢ä¸ºç”µä¿¡å·ï¼Œé€šè¿‡ç½‘çº¿å‘é€å‡ºå»</p><h5 id="ï¼ˆ2ï¼‰ä»¥å¤ªç½‘"><a href="#ï¼ˆ2ï¼‰ä»¥å¤ªç½‘" class="headerlink" title="ï¼ˆ2ï¼‰ä»¥å¤ªç½‘"></a>ï¼ˆ2ï¼‰ä»¥å¤ªç½‘</h5><p>ä»¥å¤ªç½‘æ˜¯ä¸€ç§ä¸ºå¤šå°è®¡ç®—æœºèƒ½å¤Ÿå½¼æ­¤è‡ªç”±å’Œå»‰ä»·åœ°ç›¸äº’é€šä¿¡è€Œè®¾è®¡çš„é€šä¿¡æŠ€æœ¯ï¼Œå®ƒå¯ä»¥è®©ä¿¡å·é€šè¿‡ç½‘çº¿æµè¿‡æ•´ä¸ªç½‘ç»œï¼Œæœ€ç»ˆåˆ°è¾¾æ‰€æœ‰çš„è®¾å¤‡</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110121936474.png" alt="image-20211012193540441"></p><p>ä»¥å¤ªç½‘çš„ä¸‰ä¸ªæ€§è´¨ï¼š</p><ul><li>åŒ…å‘é€åˆ°MAC å¤´éƒ¨çš„æ¥æ”¶æ–¹MAC åœ°å€ä»£è¡¨çš„ç›®çš„åœ°</li><li>ç”¨å‘é€æ–¹MACåœ°å€è¯†åˆ«å‘é€æ–¹</li><li>ç”¨ä»¥å¤ªç±»å‹è¯†åˆ«åŒ…çš„å†…å®¹</li></ul><h5 id="ï¼ˆ3ï¼‰ç½‘ç»œåŒ…ä¼ è¾“"><a href="#ï¼ˆ3ï¼‰ç½‘ç»œåŒ…ä¼ è¾“" class="headerlink" title="ï¼ˆ3ï¼‰ç½‘ç»œåŒ…ä¼ è¾“"></a>ï¼ˆ3ï¼‰ç½‘ç»œåŒ…ä¼ è¾“</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110111956850.png" alt="image-20211011195613299"></p><p>ç»è¿‡ç½‘å¡å¤„ç†åçš„ç½‘ç»œåŒ…ä¼šå‘å¾€<strong>æœ€è¿‘çš„ç½‘ç»œè½¬æ¢è®¾å¤‡</strong>ï¼Œå½“åˆ°è¾¾æœ€è¿‘çš„è½¬å‘è®¾å¤‡ä¹‹åï¼Œè½¬å‘è®¾å¤‡ä¼šæ ¹æ®å¤´éƒ¨ä¸­çš„ä¿¡æ¯åˆ¤æ–­æ¥ä¸‹æ¥åº”è¯¥å‘å¾€å“ªé‡Œ</p><p>è¿™ä¸ªè¿‡ç¨‹éœ€è¦ç”¨åˆ°ä¸€å¼ è¡¨ï¼Œè¿™å¼ è¡¨é‡Œé¢è®°å½•äº†æ¯ä¸€ä¸ªåœ°å€å¯¹åº”çš„å‘é€æ–¹å‘ï¼Œä¹Ÿå°±æ˜¯æŒ‰ç…§å¤´éƒ¨é‡Œè®°å½•çš„ç›®çš„åœ°å€åœ¨è¡¨é‡Œè¿›è¡ŒæŸ¥è¯¢ï¼Œå¹¶æ ¹æ®æŸ¥åˆ°çš„ä¿¡æ¯åˆ¤æ–­æ¥ä¸‹æ¥åº”è¯¥å‘å¾€å“ªä¸ªæ–¹å‘</p><p>ç½‘ç»œä¸­æœ‰<strong>è·¯ç”±å™¨</strong>å’Œ<strong>é›†çº¿å™¨</strong>ä¸¤ç§ä¸åŒçš„è½¬å‘è®¾å¤‡ï¼Œå®ƒä»¬åœ¨ä¼ è¾“ç½‘ç»œåŒ…æ—¶æœ‰ç€å„è‡ªçš„åˆ†å·¥</p><p>ï¼ˆ1ï¼‰è·¯ç”±å™¨æ ¹æ®ç›®æ ‡åœ°å€åˆ¤æ–­ä¸‹ä¸€ä¸ªè·¯ç”±å™¨çš„ä½ç½®ï¼ˆåŸºäºIPè§„åˆ™ï¼‰</p><p>ï¼ˆ2ï¼‰é›†çº¿å™¨åœ¨å­ç½‘ä¸­å°†ç½‘ç»œåŒ…ä¼ è¾“åˆ°ä¸‹ä¸€ä¸ªè·¯ç”±ï¼ˆä»¥å¤ªç½‘è§„åˆ™ï¼‰</p><h3 id="ä»ç½‘çº¿åˆ°ç½‘ç»œè®¾å¤‡"><a href="#ä»ç½‘çº¿åˆ°ç½‘ç»œè®¾å¤‡" class="headerlink" title="ä»ç½‘çº¿åˆ°ç½‘ç»œè®¾å¤‡"></a>ä»ç½‘çº¿åˆ°ç½‘ç»œè®¾å¤‡</h3><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.bilibili.com/video/BV1yt411d7Rd/">é›†çº¿å™¨ï¼Œäº¤æ¢æœºï¼Œè·¯ç”±å™¨çš„åŒºåˆ«</a></p><p>ç½‘ç»œæ•°æ®åŒ…çš„ç½‘ç»œä¹‹æ—…ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110121910213.png" alt="image-20211012191019888"></p><p>å„è®¾å¤‡å¤„ç†æ•°æ®åŒ…çš„æ–¹å¼ï¼š</p><ul><li><p>é›†çº¿å™¨ï¼šæ„å»ºå±€åŸŸç½‘çš„è®¾å¤‡ï¼Œå®ƒä¼šå°†ä¿¡å·å¤åˆ¶å¹¶å‘å‘è¿æ¥åŒä¸€ä¸ªé›†çº¿å™¨ï¼ˆå³åŒä¸€å±€åŸŸç½‘ï¼‰çš„å…¨éƒ¨ç«¯å£ï¼ˆå¹¿æ’­ï¼‰</p></li><li><p>äº¤æ¢æœºï¼šæ„å»ºå±€åŸŸç½‘çš„è®¾å¤‡ï¼Œè¿è¡Œåœ¨MACå±‚ï¼Œå®ƒä¼šå°†ä¿¡å·å‘å‘æŒ‡å®šMACçš„ç«¯å£</p></li><li><p>è·¯ç”±å™¨ï¼šå°†å±€åŸŸç½‘è¿æ¥ä¸Šäº’è”ç½‘çš„è®¾å¤‡ï¼Œè¿è¡Œåœ¨IPå±‚ï¼Œè·¯ç”±å™¨å¯ä»¥åˆ†æç½‘ç»œåŒ…çš„ç›®æ ‡åœ°å€IPï¼Œå¦‚æœè¯¥IPåœ¨è‡ªå·±è´Ÿè´£çš„ç½‘ç»œå†…åˆ™æ¥æ”¶ï¼Œå¦‚æœä¸åœ¨çš„è¯å°±å‘å‘å…¶ä»–ç½‘ç»œï¼ˆæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç½‘ç»œç½‘å…³ï¼‰</p></li></ul><h4 id="1-é›†çº¿å™¨ä¼ è¾“"><a href="#1-é›†çº¿å™¨ä¼ è¾“" class="headerlink" title="1.é›†çº¿å™¨ä¼ è¾“"></a>1.é›†çº¿å™¨ä¼ è¾“</h4><p>é›†çº¿å™¨ï¼ˆHubï¼‰æ˜¯æŒ‡å°†å¤šæ¡ä»¥å¤ªç½‘åŒç»çº¿æˆ–å…‰çº¤é›†åˆè¿æ¥åœ¨åŒä¸€æ®µç‰©ç†ä»‹è´¨ä¸‹çš„è®¾å¤‡</p><h5 id="ï¼ˆ1ï¼‰ç½‘å¡ä¸é›†çº¿å™¨çš„åŒç»çº¿è¿æ¥"><a href="#ï¼ˆ1ï¼‰ç½‘å¡ä¸é›†çº¿å™¨çš„åŒç»çº¿è¿æ¥" class="headerlink" title="ï¼ˆ1ï¼‰ç½‘å¡ä¸é›†çº¿å™¨çš„åŒç»çº¿è¿æ¥"></a>ï¼ˆ1ï¼‰ç½‘å¡ä¸é›†çº¿å™¨çš„åŒç»çº¿è¿æ¥</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110121922490.png" alt="img"></p><p>ç½‘çº¿å‘¨å›´çš„ç”µç£æ³¢ä¼šäº§ç”Ÿ<strong>å™ªå£°</strong>æ··æ·†<strong>ä¿¡å·</strong>å¯¼è‡´ä¿¡å·çš„æ³¢å½¢å‘ç”Ÿ<strong>å¤±çœŸ</strong>ï¼Œæ‰€ä»¥ç”¨<strong>åŒç»çº¿</strong>ç§»æ¤å™ªå£°</p><h5 id="ï¼ˆ2ï¼‰é›†çº¿å™¨å°†ä¿¡å·å‘å¾€æ‰€æœ‰çº¿è·¯"><a href="#ï¼ˆ2ï¼‰é›†çº¿å™¨å°†ä¿¡å·å‘å¾€æ‰€æœ‰çº¿è·¯" class="headerlink" title="ï¼ˆ2ï¼‰é›†çº¿å™¨å°†ä¿¡å·å‘å¾€æ‰€æœ‰çº¿è·¯"></a>ï¼ˆ2ï¼‰é›†çº¿å™¨å°†ä¿¡å·å‘å¾€æ‰€æœ‰çº¿è·¯</h5><p>å½“ç”µä¿¡å·ï¼ˆç½‘ç»œåŒ…ç»è¿‡ç½‘å¡è½¬æ¢åçš„å½¢æ€ï¼‰åˆ°è¾¾é›†çº¿å™¨åï¼Œ<strong>é›†çº¿å™¨å°†ä¿¡å·å‘é€ç»™æ‰€æœ‰è¿æ¥åœ¨å®ƒä¸Šé¢çš„çº¿è·¯</strong>ï¼Œä¼šè¢«å¹¿æ’­åˆ°æ•´ä¸ªç½‘ç»œä¸­</p><p><strong>é›†çº¿å™¨</strong>å°†åŒ…å‘åˆ°æ‰€æœ‰çš„è®¾å¤‡ï¼Œç„¶åç”±è®¾å¤‡æ ¹æ®æ¥æ”¶æ–¹MAC åœ°å€æ¥åˆ¤æ–­åº”è¯¥æ¥æ”¶å“ªäº›åŒ…</p><h4 id="2-äº¤æ¢æœºåŒ…è½¬å‘"><a href="#2-äº¤æ¢æœºåŒ…è½¬å‘" class="headerlink" title="2.äº¤æ¢æœºåŒ…è½¬å‘"></a>2.äº¤æ¢æœºåŒ…è½¬å‘</h4><p>äº¤æ¢æœºæ„ä¸ºâ€œå¼€å…³â€ï¼Œæ˜¯ä¸€ç§ç”¨äºç”µï¼ˆå…‰ï¼‰ä¿¡å·è½¬å‘çš„ç½‘ç»œè®¾å¤‡ã€‚å®ƒå¯ä»¥ä¸ºæ¥å…¥äº¤æ¢æœºçš„ä»»æ„ä¸¤ä¸ªç½‘ç»œèŠ‚ç‚¹æä¾›ç‹¬äº«çš„ç”µä¿¡å·é€šè·¯</p><p>äº¤æ¢æœºå·¥ä½œåœ¨<strong>MACå±‚</strong>ï¼Œä¹Ÿç§°ä¸º<strong>äºŒå±‚ç½‘ç»œè®¾å¤‡</strong></p><h5 id="ï¼ˆ1ï¼‰äº¤æ¢æœºåŒ…æ¥æ”¶æ“ä½œ"><a href="#ï¼ˆ1ï¼‰äº¤æ¢æœºåŒ…æ¥æ”¶æ“ä½œ" class="headerlink" title="ï¼ˆ1ï¼‰äº¤æ¢æœºåŒ…æ¥æ”¶æ“ä½œ"></a>ï¼ˆ1ï¼‰äº¤æ¢æœºåŒ…æ¥æ”¶æ“ä½œ</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110122048818.png" alt="image-20211012204847117"></p><ul><li>ç”µä¿¡å·è¿›å…¥äº¤æ¢å™¨æ¨¡å—åï¼Œ<strong>ç”µä¿¡å·</strong>è½¬æ¢ä¸º<strong>æ•°å­—ä¿¡å·</strong></li><li>é€šè¿‡åŒ…æœ«å°¾çš„<strong>FCS</strong>æ ¡éªŒé”™è¯¯ï¼Œæ— è¯¯åä¿¡å·æ”¾å…¥ç¼“å†²åŒº</li><li>äº¤æ¢æœºçš„ç«¯å£<strong>ä¸å…·æœ‰MACåœ°å€</strong>ï¼Œæ‰€ä»¥ä¼šå°†æ¥æ”¶åˆ°æ‰€æœ‰çš„åŒ…å­˜æ”¾å†ç¼“å†²åŒºä¸­</li></ul><h5 id="ï¼ˆ2ï¼‰äº¤æ¢æœºMACåœ°å€æŸ¥æ‰¾"><a href="#ï¼ˆ2ï¼‰äº¤æ¢æœºMACåœ°å€æŸ¥æ‰¾" class="headerlink" title="ï¼ˆ2ï¼‰äº¤æ¢æœºMACåœ°å€æŸ¥æ‰¾"></a>ï¼ˆ2ï¼‰äº¤æ¢æœºMACåœ°å€æŸ¥æ‰¾</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110122049533.png" alt="image-20211012204902267"></p><ul><li>åŒ…å­˜å…¥çš„ç¼“å†²åŒºåï¼Œå°±éœ€è¦æŸ¥è¯¢<strong>MACåœ°å€è¡¨</strong>æ‰¾åˆ°åŒ…çš„æ¥æ”¶å‘<strong>MACåœ°å€</strong>å¯¹åº”çš„<strong>ç«¯å£</strong>ï¼Œä»è€Œå‡†ç¡®å‘é€åˆ°è¿æ¥è¯¥ç«¯å£çš„è®¾å¤‡</li><li>å¦‚æœåœ°å€è¡¨æ‰¾ä¸åˆ°æŒ‡å®šçš„MACåœ°å€ï¼ˆå¯èƒ½æ˜¯è¯¥åœ°å€æ²¡æœ‰å‘äº¤æ¢æœºå‘é€è¿‡åŒ…ï¼Œæˆ–è€…è¿™ä¸ªè®¾å¤‡ä¸€æ®µæ—¶é—´æ²¡æœ‰å·¥ä½œå¯¼è‡´åœ°å€ä»åœ°å€è¡¨åˆ é™¤äº†ï¼‰ï¼Œå°±å°†åŒ…å¤åˆ¶å¹¶å‘å‘å…¶ä»–æ‰€æœ‰çš„ç«¯å£ï¼ˆå’Œé›†çº¿å™¨åŒæ ·çš„è½¬å‘æ–¹æ³•ï¼‰ï¼Œç„¶å<strong>åªæœ‰ç›¸åº”çš„æ¥æ”¶è€…æ‰æ¥æ”¶åŒ…ï¼Œå…¶ä»–è®¾å¤‡ä¼šå¿½ç•¥è¿™ä¸ªåŒ…</strong></li><li>å¦‚æœæ¥å—æ–¹MACåœ°å€æ˜¯ä¸€ä¸ª<strong>å¹¿æ’­åœ°å€</strong>ï¼Œäº¤æ¢æœºä¹Ÿä¼šå°†åŒ…å¤åˆ¶å¹¶å‘å‘å…¶ä»–æ‰€æœ‰çš„ç«¯å£</li></ul><h4 id="3-è·¯ç”±å™¨åŒ…è½¬å‘"><a href="#3-è·¯ç”±å™¨åŒ…è½¬å‘" class="headerlink" title="3.è·¯ç”±å™¨åŒ…è½¬å‘"></a>3.è·¯ç”±å™¨åŒ…è½¬å‘</h4><p>ç»è¿‡äº¤æ¢æœºåï¼Œç½‘ç»œåŒ…ç»ˆäºèµ°å‡ºäº†å­ç½‘ï¼Œå†ç»è¿‡è·¯ç”±å™¨è¿™ä¸ªå…³å£æ­£å¼è¿›å…¥äº’è”ç½‘</p><p>è·¯ç”±å™¨ï¼Œæ˜¯è¿æ¥å› ç‰¹ç½‘ä¸­å„å±€åŸŸç½‘ã€å¹¿åŸŸç½‘çš„è®¾å¤‡</p><h5 id="ï¼ˆ1ï¼‰äº¤æ¢æœºä¸è·¯ç”±å™¨"><a href="#ï¼ˆ1ï¼‰äº¤æ¢æœºä¸è·¯ç”±å™¨" class="headerlink" title="ï¼ˆ1ï¼‰äº¤æ¢æœºä¸è·¯ç”±å™¨"></a>ï¼ˆ1ï¼‰äº¤æ¢æœºä¸è·¯ç”±å™¨</h5><ul><li>å› ä¸º<strong>è·¯ç”±å™¨</strong>æ˜¯åŸºäº IP è®¾è®¡çš„ï¼Œä¿—ç§°<strong>ä¸‰å±‚</strong>ç½‘ç»œè®¾å¤‡ï¼Œè·¯ç”±å™¨çš„å„ä¸ªç«¯å£éƒ½å…·æœ‰ MAC åœ°å€å’Œ IP åœ°å€</li><li>è€Œ<strong>äº¤æ¢æœº</strong>æ˜¯åŸºäºä»¥å¤ªç½‘è®¾è®¡çš„ï¼Œä¿—ç§°<strong>äºŒå±‚</strong>ç½‘ç»œè®¾å¤‡ï¼Œäº¤æ¢æœºçš„ç«¯å£ä¸å…·æœ‰ MAC åœ°å€</li></ul><h5 id="ï¼ˆ2ï¼‰è·¯ç”±å™¨åŸºæœ¬åŸç†"><a href="#ï¼ˆ2ï¼‰è·¯ç”±å™¨åŸºæœ¬åŸç†" class="headerlink" title="ï¼ˆ2ï¼‰è·¯ç”±å™¨åŸºæœ¬åŸç†"></a>ï¼ˆ2ï¼‰è·¯ç”±å™¨åŸºæœ¬åŸç†</h5><p>è·¯ç”±å™¨çš„ç«¯å£å…·æœ‰MACåœ°å€ï¼Œå› æ­¤å®ƒå¯ä»¥æˆä¸ºä»¥å¤ªç½‘çš„å‘é€æ–¹å’Œæ¥æ”¶æ–¹ï¼›åŒæ—¶è¿˜å…·æœ‰IPåœ°å€ï¼Œä»è¿™ä¸ªæ„ä¹‰ä¸Šè¯´ï¼Œå®ƒå’Œè®¡ç®—æœºçš„ç½‘å¡æ˜¯ä¸€æ ·çš„</p><p>å½“è½¬å‘åŒ…æ—¶ï¼Œé¦–å…ˆè·¯ç”±å™¨ç«¯å£ä¼šæ¥æ”¶å‘ç»™è‡ªå·±çš„ä»¥å¤ªç½‘åŒ…ï¼Œç„¶å<strong>è·¯ç”±è¡¨</strong>æŸ¥è¯¢è½¬å‘ç›®æ ‡ï¼Œå†ç”±ç›¸åº”çš„<strong>ç«¯å£</strong>ä½œä¸ºå‘é€æ–¹å°†ä»¥å¤ªç½‘åŒ…å‘é€å‡ºå»</p><h5 id="ï¼ˆ3ï¼‰è·¯ç”±å™¨åŒ…æ¥æ”¶æ“ä½œ"><a href="#ï¼ˆ3ï¼‰è·¯ç”±å™¨åŒ…æ¥æ”¶æ“ä½œ" class="headerlink" title="ï¼ˆ3ï¼‰è·¯ç”±å™¨åŒ…æ¥æ”¶æ“ä½œ"></a>ï¼ˆ3ï¼‰è·¯ç”±å™¨åŒ…æ¥æ”¶æ“ä½œ</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110122126261.png" alt="image-20211012212606988"></p><ul><li>ç”µä¿¡å·åˆ°è¾¾ç½‘çº¿æ¥å£éƒ¨åˆ†ï¼Œè·¯ç”±å™¨æ¨¡å—ä¼šå°†<strong>ç”µä¿¡å·è½¬æˆæ•°å­—ä¿¡å·</strong></li><li>é€šè¿‡åŒ…æœ«å°¾çš„<strong>FCS</strong>è¿›è¡Œé”™è¯¯æ ¡éªŒ</li><li>æ£€æŸ¥MACå¤´éƒ¨<strong>æ¥æ”¶æ–¹MACåœ°å€</strong>ï¼Œå¦‚æœæ˜¯å‘ç»™è‡ªå·±çš„å°±æ”¾åˆ°<strong>æ¥æ”¶ç¼“å†²åŒº</strong>ä¸­ï¼Œå¦åˆ™å°±ä¸¢å¼ƒè¿™ä¸ªåŒ…</li><li>è·¯ç”±å™¨çš„ç«¯å£éƒ½å…·æœ‰ MAC åœ°å€ï¼Œåªæ¥æ”¶ä¸è‡ªèº«åœ°å€åŒ¹é…çš„åŒ…ï¼Œé‡åˆ°ä¸åŒ¹é…çš„åŒ…åˆ™ç›´æ¥ä¸¢å¼ƒ</li></ul><h5 id="ï¼ˆ4ï¼‰è·¯ç”±è¡¨æŸ¥è¯¢ç¡®è®¤è¾“å‡ºç«¯å£"><a href="#ï¼ˆ4ï¼‰è·¯ç”±è¡¨æŸ¥è¯¢ç¡®è®¤è¾“å‡ºç«¯å£" class="headerlink" title="ï¼ˆ4ï¼‰è·¯ç”±è¡¨æŸ¥è¯¢ç¡®è®¤è¾“å‡ºç«¯å£"></a>ï¼ˆ4ï¼‰è·¯ç”±è¡¨æŸ¥è¯¢ç¡®è®¤è¾“å‡ºç«¯å£</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110122136962.jpeg" alt="img"></p><p>å®ŒæˆåŒ…æ¥æ”¶æ“ä½œåï¼Œè·¯ç”±å™¨å°±ä¼š<strong>å»æ‰</strong>MACå¤´éƒ¨ï¼ˆMACå¤´éƒ¨çš„ä½œç”¨å°±æ˜¯å°†åŒ…é€è¾¾è·¯ç”±å™¨ï¼Œæ¥æ”¶æ–¹ MAC åœ°å€å°±æ˜¯è·¯ç”±å™¨ç«¯å£çš„ MAC åœ°å€ï¼‰</p><p> ç„¶åæŸ¥è¯¢<strong>è·¯ç”±è¡¨</strong>åˆ¤æ–­è½¬å‘ç›®æ ‡ï¼Œå¦‚å›¾<code>10.10.1.101</code> çš„è®¡ç®—æœºè¦å‘åœ°å€ä¸º <code>192.168.1.100</code> çš„æœåŠ¡å™¨å‘é€ä¸€ä¸ªåŒ…ï¼Œè¿™é‡Œçš„<strong>è·¯ç”±åŒ¹é…</strong>ä¸ä¹‹å‰è®²çš„<strong>IPåœ°å€çš„é€‰æ‹©</strong>ä¸€æ ·ï¼Œå³ç”¨ç›®æ ‡IPä¸å„æ¡ç›®çš„<strong>å­ç½‘æ©ç </strong>åš<strong>ä¸è¿ç®—</strong>ï¼Œç›´åˆ°æ‰¾åˆ°è®¡ç®—å‡ºIPå’Œæ¡ç›®çš„<strong>ç½‘ç»œç›®æ ‡IP</strong>ï¼ˆdestinationï¼‰åŒ¹é…ï¼Œåˆ™è¯¥æ¡ç›®çš„è®°å½•ä½œä¸ºè½¬å‘ç›®æ ‡</p><p>å®åœ¨æ‰¾ä¸åˆ°åŒ¹é…è·¯ç”±æ—¶ï¼Œå°±ä¼šé€‰æ‹©<strong>é»˜è®¤è·¯ç”±</strong>ï¼Œè·¯ç”±è¡¨ä¸­å­ç½‘æ©ç ä¸º <code>0.0.0.0</code> çš„è®°å½•è¡¨ç¤ºã€Œé»˜è®¤è·¯ç”±ã€</p><h5 id="ï¼ˆ5ï¼‰è·¯ç”±å™¨åŒ…å‘é€æ“ä½œ"><a href="#ï¼ˆ5ï¼‰è·¯ç”±å™¨åŒ…å‘é€æ“ä½œ" class="headerlink" title="ï¼ˆ5ï¼‰è·¯ç”±å™¨åŒ…å‘é€æ“ä½œ"></a>ï¼ˆ5ï¼‰è·¯ç”±å™¨åŒ…å‘é€æ“ä½œ</h5><ul><li><p>è·¯ç”±å™¨åŒ…å‘é€æ“ä½œéœ€è¦æ ¹æ®<strong>è·¯ç”±è¡¨</strong>çš„<strong>ç½‘å…³åˆ—</strong>æ¥åˆ¤æ–­ï¼š</p><ol><li>å¦‚æœç½‘å…³æ˜¯ä¸€ä¸ª IP åœ°å€ï¼Œåˆ™è¿™ä¸ªIP åœ°å€å°±æ˜¯æˆ‘ä»¬è¦è½¬å‘åˆ°çš„ç›®æ ‡åœ°å€ï¼Œ<strong>è¿˜æœªæŠµè¾¾ç»ˆç‚¹</strong>ï¼Œè¿˜éœ€ç»§ç»­éœ€è¦è·¯ç”±å™¨è½¬å‘ã€‚</li><li>å¦‚æœç½‘å…³ä¸ºç©ºï¼Œåˆ™ IP å¤´éƒ¨ä¸­çš„æ¥æ”¶æ–¹ IP åœ°å€å°±æ˜¯è¦è½¬å‘åˆ°çš„ç›®æ ‡åœ°å€ï¼Œä¹Ÿæ˜¯å°±ç»ˆäºæ‰¾åˆ° IP åŒ…å¤´é‡Œçš„ç›®æ ‡åœ°å€äº†ï¼Œè¯´æ˜<strong>å·²æŠµè¾¾ç»ˆç‚¹</strong>ã€‚</li></ol></li><li><p>çŸ¥é“å¯¹æ–¹çš„ IP åœ°å€ä¹‹åï¼Œæ¥ä¸‹æ¥éœ€è¦é€šè¿‡ <code>ARP</code> åè®®æ ¹æ® IP åœ°å€æŸ¥è¯¢ MAC åœ°å€ï¼Œå¹¶å°†æŸ¥è¯¢çš„ç»“æœä½œä¸ºæ¥æ”¶æ–¹ MAC åœ°å€</p></li><li><p>å‘é€æ–¹ MAC åœ°å€å­—æ®µï¼Œå¡«å†™è¾“å‡ºç«¯å£çš„ MAC åœ°å€</p></li><li><p>ç½‘ç»œåŒ…å®Œæˆåï¼Œæ¥ä¸‹æ¥ä¼šå°†å…¶è½¬æ¢æˆç”µä¿¡å·å¹¶é€šè¿‡ç«¯å£å‘é€å‡ºå»ï¼ˆä¸è®¡ç®—æœºçš„ç½‘å¡çš„æ“ä½œæ˜¯ä¸€è‡´çš„ï¼‰</p></li><li><p>ç»è¿‡å¤šä¸ªè·¯ç”±å™¨çš„å¤§æ¥åŠ›ï¼Œå±‚å±‚è½¬å‘æœ€ç»ˆåˆ°è¾¾ç›®çš„åœ°</p></li></ul><p>åœ¨ç½‘ç»œåŒ…ä¼ è¾“çš„è¿‡ç¨‹ä¸­ï¼Œæº IP å’Œç›®æ ‡ IP å§‹ç»ˆä¸å˜ï¼Œä¸€ç›´å˜åŒ–çš„æ˜¯ MAC åœ°å€ï¼Œå› ä¸ºéœ€è¦ MAC åœ°å€åœ¨ä»¥å¤ªç½‘å†…è¿›è¡Œä¸¤ä¸ªè®¾å¤‡ä¹‹é—´çš„åŒ…ä¼ è¾“</p><h3 id="é€šè¿‡æ¥å…¥ç½‘è¿›å…¥äº’è”ç½‘å†…éƒ¨"><a href="#é€šè¿‡æ¥å…¥ç½‘è¿›å…¥äº’è”ç½‘å†…éƒ¨" class="headerlink" title="é€šè¿‡æ¥å…¥ç½‘è¿›å…¥äº’è”ç½‘å†…éƒ¨*"></a>é€šè¿‡æ¥å…¥ç½‘è¿›å…¥äº’è”ç½‘å†…éƒ¨*</h3><p>ï¼ˆå¯¹äºè¿™éƒ¨åˆ†æˆ‘åªåšç®€å•ä»‹ç»ï¼Œè¯¦ç»†èµ„æ–™å¯å‚è€ƒ<a href="https://www.tuhd.top/2017/07/12/2017-07-12-4network/">æ¥å…¥ç½‘è¿›å…¥äº’è”ç½‘å†…éƒ¨â€”â€”æ¢ç´¢æ¥å…¥ç½‘å’Œç½‘ç»œè¿è¥å•† </a>ï¼‰</p><p>ç½‘ç»œåŒ…å‡ºäº†å±€åŸŸç½‘åé€šè¿‡æ¥å…¥ç½‘è¿›å…¥äº’è”ç½‘ã€‚å’Œå±€åŸŸç½‘ä¸€æ ·ï¼Œäº’è”ç½‘ä¹Ÿæ˜¯é€šè¿‡è·¯ç”±å™¨æ¥è½¬å‘åŒ…çš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†äº’è”ç½‘è§†ä¸ºå±€åŸŸç½‘ç»œçš„æ”¾å¤§ç‰ˆ</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110130828926.png" alt="image-20211013082847731"></p><h4 id="1-ADSLæ¥å…¥ç½‘"><a href="#1-ADSLæ¥å…¥ç½‘" class="headerlink" title="1.ADSLæ¥å…¥ç½‘"></a>1.ADSLæ¥å…¥ç½‘</h4><p>è¿æ¥ç”¨æˆ·ä¸äº’è”ç½‘çš„æ¥å…¥ç½‘ï¼Œæ‰€è°“æ¥å…¥ç½‘ï¼Œå°±æ˜¯æŒ‡è¿æ¥äº’è”ç½‘ä¸å®¶åº­ã€å…¬å¸ç½‘ç»œçš„é€šä¿¡çº¿è·¯</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110130833348.png" alt="image-20211013083304491"></p><h4 id="2-å…‰çº¤æ¥å…¥ç½‘"><a href="#2-å…‰çº¤æ¥å…¥ç½‘" class="headerlink" title="2.å…‰çº¤æ¥å…¥ç½‘"></a>2.å…‰çº¤æ¥å…¥ç½‘</h4><p>å¦å¤–ä¸€ç§æ¥å…¥ç½‘æŠ€æœ¯å…‰çº¤æ¥å…¥ç½‘ï¼ˆFTTHï¼‰ï¼Œé€šè¿‡å…‰çº¤åˆ†è·¯æ¥é™ä½ä¼ è¾“æˆæœ¬</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110130840845.png" alt="image-20211013084030599"></p><p>ç”¨æˆ·å‘é€çš„ç½‘ç»œåŒ…ä¼šé€šè¿‡ADSL å’ŒFTTH ç­‰æ¥å…¥ç½‘åˆ°è¾¾è¿è¥å•†çš„BASï¼Œé€šè¿‡ADSL æ¥å…¥ç½‘å’ŒBAS ä¹‹åï¼Œç½‘ç»œåŒ…å°±åˆ°è¾¾äº†äº’è”ç½‘å†…éƒ¨</p><h4 id="3-æ¥å…¥ç½‘ä¸­ä½¿ç”¨çš„PPPå’Œéš§é“"><a href="#3-æ¥å…¥ç½‘ä¸­ä½¿ç”¨çš„PPPå’Œéš§é“" class="headerlink" title="3.æ¥å…¥ç½‘ä¸­ä½¿ç”¨çš„PPPå’Œéš§é“"></a>3.æ¥å…¥ç½‘ä¸­ä½¿ç”¨çš„PPPå’Œéš§é“</h4><p>ADSLå’ŒFTTHæ¥å…¥ç½‘ä¸­ï¼Œéƒ½éœ€è¦å…ˆè¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œè€ŒBASå°±æ˜¯ç™»å½•æ“ä½œçš„çª—å£ï¼Œè€Œ<strong>BAS</strong>ä½¿ç”¨<strong>PPPoE</strong>ï¼ˆä»¥å¤ªç½‘ç‚¹å¯¹ç‚¹åè®®ï¼Œæ˜¯å°†PPP æ¶ˆæ¯è£…å…¥ä»¥å¤ªç½‘åŒ…è¿›è¡Œä¼ è¾“çš„æ–¹å¼ï¼‰æ¥å®ç°è¿™ä¸ªåŠŸèƒ½</p><h5 id="ï¼ˆ1ï¼‰PPPEåè®®"><a href="#ï¼ˆ1ï¼‰PPPEåè®®" class="headerlink" title="ï¼ˆ1ï¼‰PPPEåè®®"></a>ï¼ˆ1ï¼‰PPPEåè®®</h5><p>æ‹¨å·ä¸Šç½‘ä¸­çš„PPPï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110130849163.png" alt="image-20211013084900996"></p><p>ASDLä¸­çš„PPPï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110130849724.png" alt="image-20211013084922601"></p><p>FTTHä¸­çš„PPPï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110130849315.png" alt="image-20211013084954950"></p><h5 id="ï¼ˆ2ï¼‰éš§é“"><a href="#ï¼ˆ2ï¼‰éš§é“" class="headerlink" title="ï¼ˆ2ï¼‰éš§é“"></a>ï¼ˆ2ï¼‰éš§é“</h5><p><strong>BAS</strong> é™¤äº†ä½œä¸ºç”¨æˆ·è®¤è¯çš„çª—å£ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨<strong>éš§é“</strong>æ–¹å¼æ¥ä¼ è¾“ç½‘ç»œ<br>åŒ…ï¼Œé€šè¿‡éš§é“ç½‘ç»œåŒ…è¢«å‘å‘è¿è¥å•†</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110130854580.png" alt="image-20211013085445301"></p><h4 id="4-ç½‘ç»œè¿è¥å•†å†…éƒ¨"><a href="#4-ç½‘ç»œè¿è¥å•†å†…éƒ¨" class="headerlink" title="4.ç½‘ç»œè¿è¥å•†å†…éƒ¨"></a>4.ç½‘ç»œè¿è¥å•†å†…éƒ¨</h4><p>ç½‘ç»œåŒ…é€šè¿‡æ¥å…¥ç½‘ä¹‹åï¼Œåˆ°è¾¾è¿è¥å•†POPï¼ˆPoint of Presenseï¼Œæ¥å…¥ç‚¹ï¼‰çš„è·¯ç”±å™¨</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110130859348.png" alt="image-20211013085913670"></p><p>NOCæ˜¯è¿è¥å•†çš„æ ¸å¿ƒè®¾å¤‡ï¼Œä»POP ä¼ æ¥çš„ç½‘ç»œåŒ…éƒ½ä¼šé›†ä¸­åˆ°è¿™é‡Œï¼Œ<br>å¹¶ä»è¿™é‡Œè¢«è½¬å‘åˆ°ç¦»ç›®çš„åœ°æ›´è¿‘çš„POPï¼Œæˆ–è€…æ˜¯è½¬å‘åˆ°å…¶ä»–çš„è¿è¥å•†</p><h4 id="5-è·¨è¶Šè¿è¥å•†çš„ç½‘ç»œåŒ…"><a href="#5-è·¨è¶Šè¿è¥å•†çš„ç½‘ç»œåŒ…" class="headerlink" title="5.è·¨è¶Šè¿è¥å•†çš„ç½‘ç»œåŒ…"></a>5.è·¨è¶Šè¿è¥å•†çš„ç½‘ç»œåŒ…</h4><p>æ— è®ºæœ€ç»ˆç›®çš„åœ°æ˜¯å¦å±äºåŒä¸€å®¶è¿è¥å•†ï¼Œéƒ½å¯ä»¥ä»è·¯ç”±è¡¨ä¸­æŸ¥åˆ°ï¼Œå› æ­¤åªè¦ä¸€æ¬¡æ¥ä¸€æ¬¡æŒ‰ç…§è·¯ç”±è¡¨ä¸­çš„ç›®æ ‡åœ°å€æ¥è½¬å‘åŒ…ï¼Œæœ€ç»ˆä¸€å®šå¯ä»¥åˆ°è¾¾WebæœåŠ¡å™¨æ‰€åœ¨çš„POP</p><p>è¿è¥å•†ä¹‹é—´çš„è·¯ç”±ä¿¡æ¯äº¤æ¢ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110130902623.png" alt="image-20211013090254375"></p><p>é€šè¿‡è¿æ¥åˆ°ä¸­å¿ƒè®¾å¤‡IXçš„æ–¹å¼æ¥å‡å°‘çº¿è·¯æ•°é‡ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110130904552.png" alt="image-20211013090415545"></p><h3 id="è¿›å…¥æœåŠ¡ç«¯"><a href="#è¿›å…¥æœåŠ¡ç«¯" class="headerlink" title="è¿›å…¥æœåŠ¡ç«¯"></a>è¿›å…¥æœåŠ¡ç«¯</h3><p>é€šè¿‡äº’è”ç½‘ï¼Œæˆ‘ä»¬å¯ä»¥åˆ°è¾¾æ—…é€”ç»ˆç‚¹çš„å¤§é—¨å‰ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æœåŠ¡å™¨å°±åœ¨è¿™ä¸ªå±€åŸŸç½‘ä¸­</p><h5 id="1-æœåŠ¡ç«¯æ‰€åœ¨åœ°"><a href="#1-æœåŠ¡ç«¯æ‰€åœ¨åœ°" class="headerlink" title="1.æœåŠ¡ç«¯æ‰€åœ¨åœ°"></a>1.æœåŠ¡ç«¯æ‰€åœ¨åœ°</h5><p>ä¸€èˆ¬éƒ½æ˜¯ï¼ˆbï¼‰è¿™ç§ç»“æ„ï¼Œç»è¿‡æ¥å…¥ç½‘è¿˜è¦é€šè¿‡<strong>é˜²ç«å¢™</strong>çš„<strong>å®¡æŸ¥</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110130909533.png" alt="img"></p><h5 id="2-æœåŠ¡ç«¯å¤„ç†æ•°æ®åŒ…"><a href="#2-æœåŠ¡ç«¯å¤„ç†æ•°æ®åŒ…" class="headerlink" title="2.æœåŠ¡ç«¯å¤„ç†æ•°æ®åŒ…"></a>2.æœåŠ¡ç«¯å¤„ç†æ•°æ®åŒ…</h5><p>è¯·æ±‚ç»ˆäºåˆ°è¾¾äº†Web æœåŠ¡å™¨ï¼ŒçŸ­çŸ­å‡ ç§’çš„â€œæ¼«é•¿æ—…ç¨‹â€è¿æ¥ç»ˆç‚¹</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110130916831.jpeg" alt="img"></p><p>æœ€åæœåŠ¡ç«¯ä¸€å±‚ä¸€å±‚å‰¥å¼€æ•°æ®åŒ…è·å¾—HTTPè¯·æ±‚ï¼Œä¹Ÿæ´¾å‡ºäº†ä»–çš„ä½¿èŠ‚ï¼ˆ<strong>å“åº”æ¶ˆæ¯</strong>ï¼‰èµ¶å¾€å®¢æˆ·ç«¯â€¦â€¦</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110131159356.jpg" alt="img"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110131214746.webp&quot; alt=&quot;When the internet stops working! &quot;&gt;&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç´§æ¥ä¸Šæ–‡ï¼Œèšç„¦äº&lt;strong&gt;ç½‘ç»œçº¿ç¨‹&lt;/strong&gt;è¿æ¥å¹¶è¯·æ±‚ä¸»æœºç›´è‡³è·å¾—&lt;strong&gt;å“åº”æŠ¥æ–‡&lt;/strong&gt;è¿™ä¸ªè¿‡ç¨‹ï¼Œä¸»è¦ç ”ç©¶ä¸€ä¸ª&lt;strong&gt;æ•°æ®åŒ…&lt;/strong&gt;çš„ç½‘ç»œä¹‹æ—…&lt;/p&gt;
    
    </summary>
    
    
      <category term="å¼€å‘åŸç†" scheme="https://autovy.github.io/categories/%E5%BC%80%E5%8F%91%E5%8E%9F%E7%90%86/"/>
    
    
      <category term="åç«¯" scheme="https://autovy.github.io/tags/%E5%90%8E%E7%AB%AF/"/>
    
      <category term="å¼€å‘åŸç†" scheme="https://autovy.github.io/tags/%E5%BC%80%E5%8F%91%E5%8E%9F%E7%90%86/"/>
    
      <category term="æ·±åº¦ç³»åˆ—" scheme="https://autovy.github.io/tags/%E6%B7%B1%E5%BA%A6%E7%B3%BB%E5%88%97/"/>
    
      <category term="è®¡ç®—æœºç½‘ç»œ" scheme="https://autovy.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
  </entry>
  
  <entry>
    <title>å¼€å‘åŸç†|æ·±å…¥ç†è§£æµè§ˆå™¨å·¥ä½œåŸç†</title>
    <link href="https://autovy.github.io/2021/10/07/DevPrinciple/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E6%B5%8F%E8%A7%88%E5%99%A8/"/>
    <id>https://autovy.github.io/2021/10/07/DevPrinciple/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E6%B5%8F%E8%A7%88%E5%99%A8/</id>
    <published>2021-10-07T15:45:00.000Z</published>
    <updated>2021-10-13T04:22:27.725Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110131222149.webp" alt="Internet Explorer"></p><p>æµè§ˆå™¨ç¬‘è¯90%éƒ½å’ŒIEæœ‰å…³ï¼Œæ²¡äº†IEçš„æµè§ˆå™¨ä¸–ç•Œæ€»å½’æ˜¯å°‘å¾ˆå¤šä¹è¶£ğŸ˜­</p><span id="more"></span><h3 id="æµè§ˆå™¨æ¶æ„"><a href="#æµè§ˆå™¨æ¶æ„" class="headerlink" title="æµè§ˆå™¨æ¶æ„"></a>æµè§ˆå™¨æ¶æ„</h3><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/#disqus_thread">ç°ä»£ç½‘ç»œæµè§ˆå™¨å¹•åæ­ç§˜</a></p><h4 id="1-æµè§ˆå™¨åˆ†å±‚ç»“æ„"><a href="#1-æµè§ˆå™¨åˆ†å±‚ç»“æ„" class="headerlink" title="1.æµè§ˆå™¨åˆ†å±‚ç»“æ„"></a>1.æµè§ˆå™¨åˆ†å±‚ç»“æ„</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110061003492.png" alt="image-20211006094545491"></p><ul><li>User Interfaceï¼ˆç”¨æˆ·ç•Œé¢ï¼‰ï¼šåŒ…æ‹¬å·¥å…·æ ï¼Œåœ°å€æ ï¼Œå‰è¿›åé€€æŒ‰é’®ï¼Œä¹¦ç­¾ç­‰ï¼ˆç”¨æˆ·ç•Œé¢è¿˜å¯ä»¥ä¸æ¡Œé¢ç¯å¢ƒé›†æˆï¼Œä»¥æä¾›æµè§ˆå™¨ä¼šè¯ç®¡ç†æˆ–ä¸å…¶ä»–æ¡Œé¢åº”ç”¨ç¨‹åºçš„é€šä¿¡ï¼‰</li><li>Brower Engineï¼ˆæµè§ˆå™¨å¼•æ“ï¼‰ï¼šåœ¨ç”¨æˆ·ç•Œé¢å’Œæ¸²æŸ“å¼•æ“ä¹‹é—´ä¼ é€æŒ‡ä»¤</li><li>Rendering Engineï¼ˆæ¸²æŸ“å¼•æ“ï¼‰ï¼šè´Ÿè´£æ˜¾ç¤ºè¯·æ±‚çš„å†…å®¹ï¼ˆè§£æHTMLå’ŒCSSæ¸²æŸ“åœ¨é¡µé¢ä¸Šï¼‰</li><li>Networkingï¼ˆç½‘ç»œï¼‰ï¼šç”¨äºç½‘ç»œè°ƒç”¨å¦‚HTTPè¯·æ±‚ï¼ˆå…¶æ¥å£ä¸å¹³å°æ— å…³ï¼Œå¹¶ä¸ºæ‰€æœ‰å¹³å°æä¾›åº•å±‚å®ç°ï¼‰</li><li>JavaScript Interpreterï¼ˆJavaScriptè§£é‡Šå™¨ï¼‰ï¼šç”¨äºæ¥è§£é‡Šå’Œæ‰§è¡ŒJavaScriptä»£ç </li><li>XML Parserï¼ˆXML è§£æå™¨ï¼‰ï¼šå°†XMLæ–‡æ¡£è§£ææˆæ–‡æ¡£å¯¹è±¡æ¨¡å‹æ ‘ï¼ˆDOMï¼‰</li><li>Display Backendï¼ˆç”¨æˆ·ç•Œé¢åç«¯ï¼‰ï¼šç”¨äºç»˜åˆ¶åŸºæœ¬çš„çª—å£å°éƒ¨ä»¶ï¼Œæ¯”å¦‚ç»„åˆæ¡†å’Œçª—å£ï¼ˆå…¶æ¥å£ä¸å¹³å°æ— å…³ï¼Œåº•å±‚ä½¿ç”¨äº†æ“ä½œç³»ç»Ÿçš„ç”¨æˆ·ç•Œé¢æ–¹æ³•ï¼‰</li><li>Data Persistenceï¼ˆæ•°æ®æŒä¹…åŒ–ï¼‰ï¼šæµè§ˆå™¨å†…æ•°æ®åº“ï¼Œå°†å„ç§æ•°æ®ä¿å­˜åœ¨ç¡¬ç›˜ä¸Šï¼ˆå¦‚ä¹¦ç­¾ï¼Œå·¥å…·æ ï¼ŒCookieï¼Œç¼“å­˜ç­‰ï¼‰</li></ul><h4 id="2-æµè§ˆå™¨è¿›ç¨‹æ¶æ„"><a href="#2-æµè§ˆå™¨è¿›ç¨‹æ¶æ„" class="headerlink" title="2.æµè§ˆå™¨è¿›ç¨‹æ¶æ„"></a>2.æµè§ˆå™¨è¿›ç¨‹æ¶æ„</h4><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://segmentfault.com/a/1190000022633988">æµè§ˆå™¨å·¥ä½œåŸç†</a></p><h5 id="ï¼ˆ1ï¼‰æµè§ˆå™¨å¤šè¿›ç¨‹"><a href="#ï¼ˆ1ï¼‰æµè§ˆå™¨å¤šè¿›ç¨‹" class="headerlink" title="ï¼ˆ1ï¼‰æµè§ˆå™¨å¤šè¿›ç¨‹"></a>ï¼ˆ1ï¼‰æµè§ˆå™¨å¤šè¿›ç¨‹</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110061103852.png" alt="image-20211006110300456"></p><p>å•è¿›ç¨‹çš„æµè§ˆå™¨éœ€è¦å¤„ç†çš„äº‹æƒ…è¿‡å¤šï¼Œæåº¦ä¸ç¨³å®šå’Œå®‰å…¨â€”â€”å¦‚æœå¤šä¸ªé¡µé¢å…±äº«ä¸€ä¸ªè¿›ç¨‹ï¼Œå•æŸä¸ªtabé¡µå´©æºƒï¼Œå°†å¯¼è‡´åŒè¿›ç¨‹ä¸­çš„å…¶ä»–é¡µé¢ä¹Ÿä¼šå´©æºƒï¼Œå½±å“ç”¨æˆ·ä½“éªŒ</p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110061104938.png" alt="image-20211006110439788" style="zoom:67%;"><p>ç°ä»£æµè§ˆå™¨æ›´å¤šé‡‡ç”¨å¤šè¿›ç¨‹æ¶æ„ï¼Œè¿›ç¨‹ä¹‹é—´ä¸ä¼šå…±äº«èµ„æºå’Œåœ°å€ç©ºé—´ï¼Œæ‰€ä»¥ä¸ä¼šå­˜åœ¨å¤ªå¤šå®‰å…¨é—®é¢˜ï¼Œå½“ç„¶ï¼Œå¤šè¿›ç¨‹ç›¸å¯¹äºå•è¿›ç¨‹è€Œè¨€ï¼Œå†…å­˜ç­‰èµ„æºçš„æ¶ˆè€—æ›´å¤§</p><h5 id="ï¼ˆ2ï¼‰æµè§ˆå™¨ä¸»è¦è¿›ç¨‹"><a href="#ï¼ˆ2ï¼‰æµè§ˆå™¨ä¸»è¦è¿›ç¨‹" class="headerlink" title="ï¼ˆ2ï¼‰æµè§ˆå™¨ä¸»è¦è¿›ç¨‹"></a>ï¼ˆ2ï¼‰æµè§ˆå™¨ä¸»è¦è¿›ç¨‹</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110061035469.png" alt="img"></p><ul><li>æµè§ˆå™¨è¿›ç¨‹ (Browser Process)ï¼šæµè§ˆå™¨ä¸»è¿›ç¨‹ï¼ˆæ— è®ºæ‰“å¼€å‡ ä¸ªtabï¼Œå‡ ä¸ªå¼¹çª—æµè§ˆå™¨è¿›ç¨‹åªæœ‰ä¸€ä¸ªï¼‰ï¼Œè´Ÿè´£æµè§ˆå™¨çš„TABçš„å‰è¿›ã€åé€€ã€åœ°å€æ ã€ä¹¦ç­¾æ çš„å·¥ä½œå’Œå¤„ç†æµè§ˆå™¨çš„ä¸€äº›ä¸å¯è§çš„åº•å±‚æ“ä½œï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚å’Œæ–‡ä»¶è®¿é—®</li><li>æ¸²æŸ“è¿›ç¨‹ (Renderer Process)ï¼šæµè§ˆå™¨æ¸²æŸ“è¿›ç¨‹ï¼ˆRender è¿›ç¨‹ï¼‰ï¼Œå³é€šå¸¸è¯´çš„æµè§ˆå™¨å†…æ ¸ï¼Œè´Ÿè´£ä¸€ä¸ªTabå†…çš„æ˜¾ç¤ºç›¸å…³çš„å·¥ä½œï¼ˆé¡µé¢æ¸²æŸ“ã€è„šæœ¬æ‰§è¡Œã€äº‹ä»¶å¤„ç†ï¼‰ï¼Œæ¯ä¸ª tab é¡µçš„æ‰“å¼€éƒ½ä¼šåˆ›å»ºä¸€ä¸ª Render è¿›ç¨‹ï¼Œå¹¶ä¸”äº’ä¸å½±å“</li><li>æ’ä»¶è¿›ç¨‹ (Plugin Process)ï¼šè´Ÿè´£æ§åˆ¶ç½‘é¡µä½¿ç”¨åˆ°çš„æ’ä»¶ï¼ˆæ¯ç§ç±»å‹çš„æ’ä»¶å¯¹åº”ä¸€ä¸ªè¿›ç¨‹ï¼Œä»…å½“ä½¿ç”¨è¯¥æ’ä»¶æ—¶æ‰åˆ›å»ºï¼‰</li><li>GPUè¿›ç¨‹ (GPU Process)ï¼šè´Ÿè´£å¤„ç†æ•´ä¸ªåº”ç”¨ç¨‹åºçš„GPUä»»åŠ¡ï¼ˆç½‘é¡µã€Chrome çš„ UI ç•Œé¢éƒ½é€‰æ‹©é‡‡ç”¨ GPU æ¥ç»˜åˆ¶ï¼‰</li><li>ç½‘ç»œè¿›ç¨‹ï¼ˆNetwork Processï¼‰ï¼šä¸»è¦è´Ÿè´£é¡µé¢çš„ç½‘ç»œèµ„æºåŠ è½½ï¼ˆåœ¨ä»¥å‰çš„æ¶æ„ä¸­æ˜¯æ•´åˆè¿›æµè§ˆå™¨è¿›ç¨‹ä¸­ä½œä¸ºä¸€ä¸ªçº¿ç¨‹ï¼Œæœ¬æ–‡çš„åç»­å†…å®¹ä¼šå°†ç½‘ç»œè¿™ä¸€éƒ¨åˆ†è§†ä½œçº¿ç¨‹ï¼‰</li></ul><h5 id="ï¼ˆ3ï¼‰è¿›ç¨‹æ¨¡å¼"><a href="#ï¼ˆ3ï¼‰è¿›ç¨‹æ¨¡å¼" class="headerlink" title="ï¼ˆ3ï¼‰è¿›ç¨‹æ¨¡å¼"></a>ï¼ˆ3ï¼‰è¿›ç¨‹æ¨¡å¼</h5><p>æµè§ˆå™¨ä¸åŒçš„è¿›ç¨‹æ¨¡å¼ä¼šå¯¹tabè¿›ç¨‹åšä¸åŒçš„å¤„ç†ï¼š</p><ul><li><strong>Process-per-site *<em>ï¼šåŒä¸€ä¸ª *</em>site</strong> ä½¿ç”¨ä¸€ä¸ªè¿›ç¨‹ï¼ˆsiteå³ç›¸åŒæ³¨å†ŒåŸŸåï¼Œæ¯”å¦‚a.baidu.comå’Œb.baidu.comå°±å¯ä»¥ç†è§£ä¸ºåŒä¸€ä¸ª siteï¼‰</li><li><strong>Process-per-site-instance</strong> (default) ï¼šåŒä¸€ä¸ª <strong>site-instance</strong> ä½¿ç”¨ä¸€ä¸ªè¿›ç¨‹ï¼ˆsite-instanceå³æ¥è‡ªåŒä¸€ç«™ç‚¹çš„è¿æ¥é¡µé¢ï¼Œæ»¡è¶³<strong>site</strong>çš„è¿æ¥ä¸”é€šè¿‡aæ ‡ç­¾æˆ–jsä»£ç æ‰“å¼€çš„æ–°é¡µé¢ï¼‰</li><li>*<em>Process-per-tab *</em>ï¼š æ¯ä¸ª tab ä½¿ç”¨ä¸€ä¸ªè¿›ç¨‹</li><li>*<em>Single process *</em> ï¼šæ‰€æœ‰ tab å…±ç”¨ä¸€ä¸ªè¿›ç¨‹</li></ul><h5 id="ï¼ˆ4ï¼‰è¿›ç¨‹é—´å…³ç³»"><a href="#ï¼ˆ4ï¼‰è¿›ç¨‹é—´å…³ç³»" class="headerlink" title="ï¼ˆ4ï¼‰è¿›ç¨‹é—´å…³ç³»"></a>ï¼ˆ4ï¼‰è¿›ç¨‹é—´å…³ç³»</h5><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110061104938.png" alt="image-20211006110439788" style="zoom:67%;"><ul><li>ç”¨æˆ·åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥urlï¼Œå¹¶æŒ‰ä¸‹Enter</li><li><strong>æµè§ˆå™¨è¿›ç¨‹</strong>å‘URLå‘é€è¯·æ±‚ï¼Œè·å–è¿™ä¸ªURLçš„HTMLå†…å®¹å¹¶äº¤ç»™<strong>æ¸²æŸ“è¿›ç¨‹</strong></li><li><strong>æ¸²æŸ“è¿›ç¨‹</strong>è§£æHTMLå†…å®¹ï¼Œè§£æé‡åˆ°ç½‘ç»œèµ„æºå†è¿”å›æ¥äº¤ç»™<strong>æµè§ˆå™¨è¿›ç¨‹</strong>è¿›è¡ŒåŠ è½½ï¼›</li><li><strong>æ¸²æŸ“è¿›ç¨‹</strong>åŒæ—¶è¿˜é€šçŸ¥<strong>æµè§ˆå™¨è¿›ç¨‹</strong>å»å¯åŠ¨<strong>æ’ä»¶è¿›ç¨‹</strong>ï¼Œæ‰§è¡Œæ’ä»¶ä»£ç </li><li>è§£æå®Œæˆåï¼Œ<strong>æ¸²æŸ“è¿›ç¨‹</strong>å°†è®¡ç®—å¾—åˆ°çš„æ•°æ®å¸§äº¤ç»™<strong>GPUè¿›ç¨‹</strong>ï¼Œ<strong>GPUè¿›ç¨‹</strong>å°†å…¶è½¬æ¢ä¸ºå›¾åƒæ˜¾ç¤ºåˆ°å±å¹•ä¸Š</li></ul><h3 id="æµè§ˆå™¨å·¥ä½œæµç¨‹"><a href="#æµè§ˆå™¨å·¥ä½œæµç¨‹" class="headerlink" title="æµè§ˆå™¨å·¥ä½œæµç¨‹"></a>æµè§ˆå™¨å·¥ä½œæµç¨‹</h3><p>ä»æˆ‘ä»¬å†æµè§ˆå™¨é”®å…¥ä¸€ä¸ªURLåœ°å€ï¼Œåˆ°æœ€åç½‘é¡µå‘ˆç°åœ¨æµè§ˆå™¨ä¸Šï¼Œç»è¿‡äº†é‚£äº›è¿‡ç¨‹ï¼Ÿ</p><h4 id="1-æµè§ˆå™¨é¡µé¢åŠ è½½"><a href="#1-æµè§ˆå™¨é¡µé¢åŠ è½½" class="headerlink" title="1.æµè§ˆå™¨é¡µé¢åŠ è½½"></a>1.æµè§ˆå™¨é¡µé¢åŠ è½½</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110070837877.png" alt="image-20211007083755446"></p><p>æµè§ˆå™¨è¿›ç¨‹é’ˆå¯¹å·¥ä½œçš„ä¸åŒæœ‰ä»¥ä¸‹çš„å·¥ä½œçº¿ç¨‹ï¼š</p><ul><li>UIçº¿ç¨‹ï¼šæ§åˆ¶æµè§ˆå™¨çš„æŒ‰é’®ä¸è¾“å…¥æ¡†</li><li>ç½‘ç»œçº¿ç¨‹ï¼šå¤„ç†ç½‘ç»œè¯·æ±‚</li><li>å­˜å‚¨çº¿ç¨‹ï¼šæ§åˆ¶æ–‡ä»¶è®¿é—®</li></ul><h5 id="ï¼ˆ1ï¼‰è¾“å…¥å¤„ç†"><a href="#ï¼ˆ1ï¼‰è¾“å…¥å¤„ç†" class="headerlink" title="ï¼ˆ1ï¼‰è¾“å…¥å¤„ç†"></a>ï¼ˆ1ï¼‰è¾“å…¥å¤„ç†</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110061321788.png" alt="å¤„ç†è¾“å…¥"></p><p>å½“æˆ‘ä»¬åœ¨æµè§ˆå™¨çš„åœ°å€æ è¾“å…¥å†…å®¹æŒ‰ä¸‹å›è½¦æ—¶ï¼Œ<strong>UI çº¿ç¨‹</strong>ä¼šæ ¹æ®è¾“å…¥å†…å®¹åˆ¤æ–­è¾“å…¥å†…å®¹æ˜¯<strong>æœç´¢å…³é”®å­—</strong>è¿˜æ˜¯<strong>URL</strong></p><p>å¦‚æœåˆ¤å®šä¸ºæœç´¢å…³é”®å­—ï¼Œåˆ™è·³è½¬åˆ°é»˜è®¤æœç´¢å¼•æ“çš„æœç´¢URL</p><p>å¦‚æœåˆ¤å®šä¸ºURLï¼Œåˆ™å¼€å§‹è¯·æ±‚URL</p><h5 id="ï¼ˆ2ï¼‰å¼€å§‹å¯¼èˆª"><a href="#ï¼ˆ2ï¼‰å¼€å§‹å¯¼èˆª" class="headerlink" title="ï¼ˆ2ï¼‰å¼€å§‹å¯¼èˆª"></a>ï¼ˆ2ï¼‰å¼€å§‹å¯¼èˆª</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110061321242.png" alt="å¼€å§‹å¯¼èˆª"></p><p><strong>UIçº¿ç¨‹å°†</strong>URLäº¤ç»™ç½‘ç»œçº¿ç¨‹ï¼Œ<strong>ç½‘ç»œçº¿ç¨‹</strong>åˆ™è´Ÿè´£è”ç³»ç›®æ ‡ä¸»æœºè·å–ä¿¡æ¯ï¼ˆå…¶ä¸­å‘ç”Ÿäº†DNSåŸŸåè§£æï¼ŒTLSè¿æ¥ç­‰æ“ä½œéƒ½æ˜¯è®¡ç®—æœºç½‘ç»œç›¸å…³å†…å®¹ï¼‰</p><h5 id="ï¼ˆ3ï¼‰è¯»å–å“åº”"><a href="#ï¼ˆ3ï¼‰è¯»å–å“åº”" class="headerlink" title="ï¼ˆ3ï¼‰è¯»å–å“åº”"></a>ï¼ˆ3ï¼‰è¯»å–å“åº”</h5><img src="/2021/10/07/DevPrinciple/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E6%B5%8F%E8%A7%88%E5%99%A8/Users\linghao\AppData\Roaming\Typora\typora-user-images\image-20211006133826626.png" alt="image-20211006133826626" style="zoom:80%;"><p><strong>ç½‘ç»œçº¿ç¨‹</strong>æ¥æ”¶åˆ°ç›®æ ‡ä¸»æœºçš„å“åº”åï¼Œè§£æHTTPå“åº”æŠ¥æ–‡ï¼Œå“åº”åˆ†ä¸ºheaderï¼ˆå“åº”ç›¸å…³ä¿¡æ¯ï¼‰å’Œpayloadï¼ˆçœŸå®æ•°æ®å†…å®¹ï¼‰ä¸¤éƒ¨åˆ†</p><p>å¦‚æœçŠ¶æ€ç ä¸º301æˆ–302ï¼Œåˆ™éœ€è¦å–å¾—å“åº”å¤´ä¸­Locationåœ°å€ï¼Œ<strong>é‡æ–°å‘èµ·è¯·æ±‚</strong></p><p>å¦‚æœçŠ¶æ€ç ä¸º200ï¼Œåˆ™å¯ä»¥è¿›è¡Œä¸‹é¢çš„æ­¥éª¤ï¼š</p><p>æµè§ˆå™¨æ ¹æ®å“åº”å¤´ä¸­çš„<code>Content-Type</code>æ¥ç¡®å®šç›¸åº”ä¸»ä½“çš„åª’ä½“ç±»å‹ï¼ˆMIME Typeï¼‰ï¼šå¦‚æœæ˜¯text/htmlæ—¶åˆ™å°†ç›¸åº”æ•°æ®äº¤ç»™<strong>æ¸²æŸ“è¿›ç¨‹</strong>æ¥è¿›è¡Œä¸‹ä¸€æ­¥å·¥ä½œï¼ˆè§£æHTMLå†…å®¹ç­‰ï¼‰ï¼Œ<code>image/png</code>åˆ™è°ƒç”¨å›¾ç‰‡æ¸²æŸ“å™¨</p><p>è¯»å–å“åº”çš„è¿‡ç¨‹ä¸­ä¼šæœ‰ä»¥ä¸‹çš„å®‰å…¨æœºåˆ¶ï¼š</p><ul><li>æµè§ˆå™¨å¹¶ä¸å®Œå…¨ä¿¡ä»»<code>Content-Type</code>ï¼Œæ‰€ä»¥å½“æ”¶åˆ°å“åº”ä¸»ä½“ï¼ˆpayloadï¼‰æ—¶ï¼Œç½‘ç»œçº¿ç¨‹ä¼šåœ¨å¿…è¦æ—¶æ£€æŸ¥æ•°æ®çš„å‰å‡ ä¸ªå­—èŠ‚ï¼Œä»¥ç¡®ä¿æ•°æ®å†…å®¹ä¸ header é‡Œæ ‡è¯†çš„æ•°æ®ç±»å‹ï¼ˆContent-Typeï¼‰ä¸€è‡´ã€‚å¦‚æœä¸ä¸€è‡´ï¼Œé‚£ä¹ˆå°±éœ€è¦è¿›è¡Œ MIME ç±»å‹å—…æ¢æ¥çŒœæµ‹è¯¥æ•°æ®çš„ç±»å‹</li><li>æµè§ˆå™¨ä¼šè¿›è¡Œ <code>Safe Browsing</code>å®‰å…¨æ£€æŸ¥ï¼Œå¦‚æœåŸŸåæˆ–è€…è¯·æ±‚å†…å®¹åŒ¹é…åˆ°å·²çŸ¥çš„æ¶æ„ç«™ç‚¹ï¼Œnetwork thread ä¼šå±•ç¤ºä¸€ä¸ªè­¦å‘Šé¡µ</li><li>ç½‘ç»œçº¿ç¨‹è¿˜ä¼šåš <code>CORBï¼ˆCross Origin Read Blockingï¼‰</code>æ£€æŸ¥æ¥ç¡®å®šé‚£äº›æ•æ„Ÿçš„è·¨ç«™æ•°æ®ä¸ä¼šè¢«å‘é€è‡³æ¸²æŸ“è¿›ç¨‹</li></ul><h5 id="ï¼ˆ4ï¼‰æŸ¥æ‰¾æ¸²æŸ“è¿›ç¨‹"><a href="#ï¼ˆ4ï¼‰æŸ¥æ‰¾æ¸²æŸ“è¿›ç¨‹" class="headerlink" title="ï¼ˆ4ï¼‰æŸ¥æ‰¾æ¸²æŸ“è¿›ç¨‹"></a>ï¼ˆ4ï¼‰æŸ¥æ‰¾æ¸²æŸ“è¿›ç¨‹</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110061958151.png" alt="æŸ¥æ‰¾æ¸²æŸ“è¿›ç¨‹"></p><p><strong>ç½‘ç»œçº¿ç¨‹</strong>ç¡®è®¤æµè§ˆå™¨å¯ä»¥å¯¼èˆªåˆ°è¯·æ±‚ç½‘é¡µåï¼Œä¼šé€šçŸ¥<strong>UIçº¿ç¨‹</strong>å»æŸ¥æ‰¾<strong>æ¸²æŸ“è¿›ç¨‹</strong>è¿›è¡Œç½‘é¡µçš„æ¸²æŸ“</p><p>è€ƒè™‘åˆ°ç½‘ç»œè¯·æ±‚è·å–å“åº”éœ€è¦æ—¶é—´ï¼Œ<strong>UIçº¿ç¨‹</strong>å¯ä»¥<strong>å¹¶è¡Œ</strong>æŸ¥æ‰¾å’Œå¯åŠ¨ä¸€ä¸ª<strong>æ¸²æŸ“è¿›ç¨‹</strong>ï¼Œå½“<strong>ç½‘ç»œçº¿ç¨‹</strong>æ¥æ”¶åˆ°æ•°æ®æ—¶ï¼Œ<strong>æ¸²æŸ“è¿›ç¨‹</strong>å°±å·²ç»å‡†å¤‡å¥½äº†</p><h5 id="ï¼ˆ5ï¼‰ç¡®è®¤å¯¼èˆª"><a href="#ï¼ˆ5ï¼‰ç¡®è®¤å¯¼èˆª" class="headerlink" title="ï¼ˆ5ï¼‰ç¡®è®¤å¯¼èˆª"></a>ï¼ˆ5ï¼‰ç¡®è®¤å¯¼èˆª</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110062013638.png" alt="æäº¤å¯¼èˆª"></p><ul><li>æ•°æ®å’Œæ¸²æŸ“è¿›ç¨‹éƒ½å‡†å¤‡äº†ï¼Œ<strong>æµè§ˆå™¨è¿›ç¨‹</strong>ä¼šå‘<strong>æ¸²æŸ“è¿›ç¨‹</strong>å‘é€IPCæ¶ˆæ¯ï¼ˆè¿›ç¨‹é—´é€šä¿¡ï¼‰æ¥ç¡®è®¤å¯¼èˆª</li><li><strong>æµè§ˆå™¨è¿›ç¨‹</strong>å°†æ•°æ®å‘é€ç»™<strong>æ¸²æŸ“è¿›ç¨‹</strong></li><li><strong>æ¸²æŸ“è¿›ç¨‹</strong>æ¥æ”¶åˆ°æ•°æ®åï¼Œåˆå‘é€IPCæ¶ˆæ¯ç»™<strong>æµè§ˆå™¨è¿›ç¨‹</strong>ï¼Œè¡¨æ˜å¯¼èˆªå·²æäº¤ï¼Œé¡µé¢å¼€å§‹åŠ è½½</li><li>åœ°å€æ ä¼šæ›´æ–°ï¼Œå®‰å…¨æŒ‡ç¤ºç¬¦æ›´æ–°ï¼ˆåœ°å€å‰é¢çš„å°é”ï¼‰ï¼Œè®¿é—®å†å²åˆ—è¡¨ï¼ˆhistory tabï¼‰æ›´æ–°ï¼Œå³å¯ä»¥é€šè¿‡å‰è¿›åé€€æ¥åˆ‡æ¢è¯¥é¡µé¢</li></ul><h5 id="ï¼ˆ6ï¼‰åˆå§‹åŒ–åŠ è½½å®Œæˆ"><a href="#ï¼ˆ6ï¼‰åˆå§‹åŒ–åŠ è½½å®Œæˆ" class="headerlink" title="ï¼ˆ6ï¼‰åˆå§‹åŒ–åŠ è½½å®Œæˆ"></a>ï¼ˆ6ï¼‰åˆå§‹åŒ–åŠ è½½å®Œæˆ</h5><p>å¯¼èˆªæäº¤åï¼Œæ¸²æŸ“è¿›ç¨‹å¼€å§‹åŠ è½½èµ„æºåŠæ¸²æŸ“é¡µé¢ï¼ˆå…·ä½“<strong>é¡µé¢æ¸²æŸ“åŸç†</strong>è§ä¸‹æ–‡ï¼‰ï¼Œé¡µé¢æ¸²æŸ“å®Œæˆåï¼Œä¼šå‘æµè§ˆå™¨è¿›ç¨‹å‘é€IPCæ¶ˆæ¯ï¼Œè¿™æ—¶UIçº¿ç¨‹åœæ­¢å±•ç¤ºtabåŠ è½½ä¸­å›¾æ ‡</p><h4 id="2-æµè§ˆå™¨é¡µé¢æ¸²æŸ“"><a href="#2-æµè§ˆå™¨é¡µé¢æ¸²æŸ“" class="headerlink" title="2.æµè§ˆå™¨é¡µé¢æ¸²æŸ“"></a>2.æµè§ˆå™¨é¡µé¢æ¸²æŸ“</h4><p>å‚è€ƒèµ„æ–™ï¼š</p><p><a href="https://blog.csdn.net/weixin_43816287/article/details/115767313">é¡µé¢æ¸²æŸ“æµç¨‹</a></p><p><a href="https://juejin.cn/post/6844904020193067015">æµè§ˆå™¨é¡µé¢çš„æ¸²æŸ“æµç¨‹</a></p><p>æµè§ˆå™¨é¡µé¢æ¸²æŸ“æ­¥éª¤ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110070838171.png" alt="image-20211007083830907"></p><p><strong>æµè§ˆå™¨è¿›ç¨‹</strong>æŠŠæ•°æ®äº¤ç»™äº†<strong>æ¸²æŸ“è¿›ç¨‹</strong>ï¼Œ<strong>æ¸²æŸ“è¿›ç¨‹</strong>å°†HTML/CSS/JSä»£ç ï¼Œè½¬åŒ–ä¸ºç”¨æˆ·å¯è¿›è¡Œäº¤äº’çš„webé¡µé¢</p><p><strong>æ¸²æŸ“è¿›ç¨‹</strong>åŒ…å«ä»¥ä¸‹çº¿ç¨‹ï¼š</p><ul><li>ä¸€ä¸ªä¸»çº¿ç¨‹ï¼ˆmain threadï¼‰</li><li>å¤šä¸ªå·¥ä½œçº¿ç¨‹ï¼ˆwork threadï¼‰</li><li>ä¸€ä¸ªåˆæˆå™¨çº¿ç¨‹ï¼ˆcompositor threadï¼‰</li><li>å¤šä¸ªå…‰æ …åŒ–çº¿ç¨‹ï¼ˆraster threadï¼‰</li></ul><p>æµè§ˆå™¨é¡µé¢æ¸²æŸ“è¿›ç¨‹ï¼š</p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110062110095.png" style="zoom:67%;"><ul><li>æ¸²æŸ“è¿›ç¨‹å°†HTMLå†…å®¹è½¬æ¢ä¸ºèƒ½å¤Ÿè¯»æ‡‚çš„<code>DOMæ ‘</code>ç»“æ„</li><li>æ¸²æŸ“å¼•æ“å°†CSSæ ·å¼è¡¨è½¬åŒ–ä¸ºæµè§ˆå™¨å¯ä»¥ç†è§£çš„<code>styleSheets</code>ï¼Œè®¡ç®—å‡ºDOMèŠ‚ç‚¹çš„æ ·å¼ã€‚</li><li>åˆ›å»º<code>å¸ƒå±€æ ‘</code>ï¼Œå¹¶è®¡ç®—å…ƒç´ çš„å¸ƒå±€ä¿¡æ¯</li><li>å¯¹å¸ƒå±€æ ‘è¿›è¡Œåˆ†å±‚ï¼Œå¹¶ç”Ÿæˆ<code>åˆ†å±‚æ ‘</code></li><li>ä¸ºæ¯ä¸ªå›¾å±‚ç”Ÿæˆ<code>ç»˜åˆ¶åˆ—è¡¨</code>ï¼Œå¹¶å°†å…¶æäº¤åˆ°åˆæˆçº¿ç¨‹</li><li>åˆæˆçº¿ç¨‹å°†å›¾å±‚åˆ†æˆ<code>å›¾å—</code>ï¼Œå¹¶åœ¨<code>å…‰æ …åŒ–çº¿ç¨‹æ± </code>ä¸­å°†å›¾å—è½¬æ¢æˆä½å›¾</li><li>åˆæˆçº¿ç¨‹å‘é€ç»˜åˆ¶å›¾å—å‘½ä»¤<code>DrawQuad</code>ç»™æµè§ˆå™¨è¿›ç¨‹</li><li>æµè§ˆå™¨è¿›ç¨‹æ ¹æ®DrawQuadæ¶ˆæ¯ç”Ÿæˆé¡µé¢ï¼Œå¹¶<code>æ˜¾ç¤º</code>åˆ°æ˜¾ç¤ºå™¨ä¸Š</li></ul><h5 id="ï¼ˆ1ï¼‰æ„å»ºDOM"><a href="#ï¼ˆ1ï¼‰æ„å»ºDOM" class="headerlink" title="ï¼ˆ1ï¼‰æ„å»ºDOM"></a>ï¼ˆ1ï¼‰æ„å»ºDOM</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110062124865.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><strong>æ¸²æŸ“è¿›ç¨‹</strong>æ¥å—åˆ°å¯¼èˆªç¡®è®¤ä¿¡æ¯åï¼Œå¼€å§‹æ¥å—æ¥è‡ª<strong>æµè§ˆå™¨è¿›ç¨‹</strong>æ•°æ®ï¼ˆè¯·æ±‚å“åº”ï¼‰ï¼Œæ¸²æŸ“è¿›ç¨‹çš„<strong>ä¸»çº¿ç¨‹</strong>è§£ææ•°æ®åŒ–ä¸ºDOMå¯¹è±¡ï¼Œ</p><p>æ„å»ºDOMè¿‡ç¨‹ä¸­ï¼š</p><ul><li>å­èµ„æºåŠ è½½ï¼šè§£æåˆ°å›¾ç‰‡ï¼ŒCSSï¼ŒJSè„šæœ¬ç­‰èµ„æºï¼Œ<strong>ä¸»çº¿ç¨‹</strong>é€ä¸€äº¤ç»™<strong>æµè§ˆå™¨è¿›ç¨‹</strong>å‘èµ·è¯·æ±‚å»è·å–ã€‚ä¸ºäº†æå‡æ•ˆç‡ï¼Œæµè§ˆå™¨å¾€å¾€ä¼šè¿è¡Œ<strong>é¢„åŠ è½½æ‰«æç¨‹åº</strong>ï¼Œå¦‚æœhtmlä¸­å­˜åœ¨<strong>imgï¼Œlink</strong>ç­‰æ ‡ç­¾ï¼Œé¢„åŠ è½½æ‰«æç¨‹åºä¼šæŠŠè¿™äº›è¯·æ±‚ä¼ é€’ç»™<strong>æµè§ˆå™¨è¿›ç¨‹</strong>çš„<strong>ç½‘ç»œçº¿ç¨‹</strong>å»ä¸‹è½½</li><li>Javascriptçš„ä¸‹è½½ä¸æ‰§è¡Œï¼šè§£æé‡åˆ°<code>&lt;script&gt;</code>æ ‡ç­¾ï¼Œä¸»çº¿ç¨‹åœæ­¢å¯¹HTMLçš„è§£æï¼Œè€Œå»åŠ è½½æ‰§è¡ŒJSä»£ç ï¼ˆåœ¨<code>&lt;script&gt;</code>æ ‡ç­¾æ·»åŠ ä¸Š<strong>async</strong>æˆ–<strong>defer</strong>ç­‰å±æ€§ï¼Œæµè§ˆå™¨ä¼šå¼‚æ­¥åŠ è½½å’Œæ‰§è¡ŒJSä»£ç ï¼Œè€Œä¸ä¼šé˜»å¡æ¸²æŸ“ï¼‰</li></ul><h5 id="ï¼ˆ2ï¼‰æ ·å¼è®¡ç®—"><a href="#ï¼ˆ2ï¼‰æ ·å¼è®¡ç®—" class="headerlink" title="ï¼ˆ2ï¼‰æ ·å¼è®¡ç®—"></a>ï¼ˆ2ï¼‰æ ·å¼è®¡ç®—</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110062125412.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><ul><li><strong>ä¸»çº¿ç¨‹</strong>åœ¨è§£æé¡µé¢æ—¶ï¼Œé‡åˆ°<code>&lt;style&gt;</code>æ ‡ç­¾æˆ–è€…<code>&lt;link&gt;</code>æ ‡ç­¾çš„CSSèµ„æºï¼Œä¼šåŠ è½½CSSä»£ç </li><li>æ ¹æ®CSSä»£ç æ„å»ºstyleSheetsæ ‘</li><li>æ ·å¼è®¡ç®—è§„åˆ™ï¼šç»§æ‰¿è§„åˆ™ï¼ˆå½“å‰æ ‡ç­¾çš„æ ·å¼ç»§æ‰¿äº†å…¶æ‰€æœ‰çˆ¶æ ‡ç­¾çš„æ ·å¼ï¼‰ï¼Œå±‚å è§„åˆ™ï¼ˆå¤šä¸ªæ ·å¼åŒæ—¶ä½œç”¨äºè¯¥æ ‡ç­¾æ—¶ï¼Œè¿›è¡Œæ ·å¼å±‚å ï¼‰</li></ul><h5 id="ï¼ˆ3ï¼‰å¸ƒå±€"><a href="#ï¼ˆ3ï¼‰å¸ƒå±€" class="headerlink" title="ï¼ˆ3ï¼‰å¸ƒå±€"></a>ï¼ˆ3ï¼‰å¸ƒå±€</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110062125756.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><ul><li>å¯¹DOMæ ‘å’ŒstyleSheetsæ ‘è¿›è¡Œåˆå¹¶ï¼Œç”Ÿæˆrenderæ ‘ï¼ˆå¸ƒå±€æ ‘ï¼‰ï¼Œç”Ÿæˆ<strong>å¸ƒå±€æ ‘</strong>æ—¶æµè§ˆå™¨ä¼šéå†<strong>DOMæ ‘</strong>æ‰€æœ‰å¯è§çš„èŠ‚ç‚¹æ·»åŠ åˆ°å¸ƒå±€æ ‘ä¸­ï¼Œè€Œä¸å¯è§çš„èŠ‚ç‚¹ä¼šè¢«å¿½ç•¥æ‰</li><li>æ¸²æŸ“è¿›ç¨‹è¿˜éœ€è¦è®¡ç®—å‡ºæ¯ä¸ªæ ‡ç­¾å¯¹åº”çš„<strong>ç‰©ç†ä½ç½®</strong>å¹¶å­˜å‚¨åœ¨renderæ ‘ä¸­</li></ul><h5 id="ï¼ˆ4ï¼‰åˆ†å±‚"><a href="#ï¼ˆ4ï¼‰åˆ†å±‚" class="headerlink" title="ï¼ˆ4ï¼‰åˆ†å±‚"></a>ï¼ˆ4ï¼‰åˆ†å±‚</h5><img src="/2021/10/07/DevPrinciple/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E6%B5%8F%E8%A7%88%E5%99%A8/Users\linghao\AppData\Roaming\Typora\typora-user-images\image-20211007091607012.png" alt="image-20211007091607012"><p>é¡µé¢ä¸Šè¿˜æ¶‰åŠè®¸å¤šå¤æ‚çš„æ ·å¼ï¼štransformï¼Œ animation åŠ¨ç”»ã€scrollï¼Œz-indexingæ”¹å˜å±‚çº§ç­‰ç­‰ï¼Œæµè§ˆå™¨åˆ™ä¸ºè¿™äº›ç‰¹æ®Šçš„èŠ‚ç‚¹å»ºç«‹ä¸€ä¸ªå¯¹åº”å›¾å±‚ï¼Œç”Ÿæˆ<strong>å›¾å±‚æ ‘ï¼ˆLayerTreeï¼‰</strong>ï¼Œå°†è¿™äº›å›¾å±‚åˆå¹¶åœ¨ä¸€èµ·ï¼Œå°±æ˜¯ä¸€æ•´ä¸ªé¡µé¢çš„æ ·å¼</p><p>åˆ†å±‚è§„åˆ™ï¼š</p><ul><li>æ‹¥æœ‰å±‚å ä¸Šä¸‹æ–‡å±æ€§çš„å…ƒç´ å³ä½¿ç”¨äº†z-indexçš„å…ƒç´ </li><li>éœ€è¦å‰ªè£çš„åœ°æ–¹ä¹Ÿä¼šè¢«åˆ›å»ºä¸ºå›¾å±‚ï¼ˆå½“çˆ¶å®¹å™¨çš„å®½é«˜ä¸è¶³ä»¥æ’‘èµ·å­å®¹å™¨çš„å®½é«˜ï¼Œå‡ºç°æ»šåŠ¨æ¡æˆ–è€…è®¾ç½®çˆ¶å®¹å™¨ä¸ºoverflow :hode ç­‰ç­‰ï¼Œå­å®¹å™¨é¡µé¢å°±ä¼šè¢«è£å‰ªï¼‰</li></ul><h5 id="ï¼ˆ5ï¼‰ç»˜åˆ¶"><a href="#ï¼ˆ5ï¼‰ç»˜åˆ¶" class="headerlink" title="ï¼ˆ5ï¼‰ç»˜åˆ¶"></a>ï¼ˆ5ï¼‰ç»˜åˆ¶</h5><img src="/2021/10/07/DevPrinciple/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E6%B5%8F%E8%A7%88%E5%99%A8/Users\linghao\AppData\Roaming\Typora\typora-user-images\image-20211007091651791.png" alt="image-20211007091651791" style="zoom:80%;"><p>å°†å›¾å±‚æ‹†åˆ†æˆä¸€æ¡æ¡æŒ‡ä»¤ï¼Œé€æ¡æ‰§è¡Œç»˜åˆ¶å›¾å½¢</p><h5 id="ï¼ˆ6ï¼‰åˆ†å—"><a href="#ï¼ˆ6ï¼‰åˆ†å—" class="headerlink" title="ï¼ˆ6ï¼‰åˆ†å—"></a>ï¼ˆ6ï¼‰åˆ†å—</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110070943457.png" alt="image-20211007094342822"></p><p>å½“é¡µé¢å†…å®¹å¾ˆé•¿æ—¶ï¼Œé¡µé¢å°±ä¼šå‡ºç°æ»šåŠ¨æ¡ã€‚è¿™æ—¶çš„è§†å£å¤§å°æœ‰é™ï¼ˆåœ¨å½“å‰å±å¹•åŒºåŸŸèƒ½çœ‹åˆ°çš„æ¨¡å—å°±å«è§†å£ï¼‰ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹è¦ç»˜åˆ¶æ‰€æœ‰å›¾å±‚å†…å®¹å¼€é”€å¤ªå¤§ï¼Œæ‰€ä»¥éœ€è¦å°†<strong>å›¾å±‚åˆ†æˆå¾ˆå¤šå›¾å—</strong></p><h5 id="ï¼ˆ7ï¼‰å…‰æ …åŒ–"><a href="#ï¼ˆ7ï¼‰å…‰æ …åŒ–" class="headerlink" title="ï¼ˆ7ï¼‰å…‰æ …åŒ–"></a>ï¼ˆ7ï¼‰å…‰æ …åŒ–</h5><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110062110095.png" style="zoom:67%;"><ul><li>æ¸²æŸ“è¿›ç¨‹å°†è¿™äº›å›¾å±‚åˆ†æˆå¾ˆå¤šå›¾å—åï¼Œç„¶åæŒ‰ç…§<strong>è§†å£é™„è¿‘</strong>çš„<strong>å›¾å—</strong>æ¥é€šè¿‡<strong>å…‰æ …åŒ–</strong>ä¼˜å…ˆç”Ÿæˆä½å›¾ï¼ˆå³å±å¹•ä¸Šçš„åƒç´ ï¼‰ï¼Œæ‰€ä»¥å›¾å—æ˜¯<strong>å…‰æ …åŒ–</strong>æ‰§è¡Œçš„æœ€å°å•ä½</li><li>å½“ç”¨æˆ·æ»šåŠ¨é¡µé¢æ—¶ï¼Œç”±äºé¡µé¢å„ä¸ªå±‚éƒ½å·²ç»è¢«å…‰æ …åŒ–äº†ï¼Œæµè§ˆå™¨éœ€è¦åšçš„åªæ˜¯åˆæˆä¸€ä¸ªæ–°çš„å¸§æ¥å±•ç¤ºæ»šåŠ¨åçš„æ•ˆæœ</li><li>ä¹‹å‰çš„ç”ŸæˆDOMæ ‘ã€styleSheetsæ ‘ã€renderæ ‘ï¼ˆLayoutï¼‰ã€åˆ†å±‚(Layer)ã€ç»˜åˆ¶ï¼ˆPaintï¼‰éƒ½æ˜¯åœ¨æ¸²æŸ“å¼•èµ·çš„ä¸»çº¿ç¨‹ä¸­è¿è¡Œçš„ï¼Œ ç»˜åˆ¶åˆ—è¡¨è®°å½•å¥½ç»˜åˆ¶é¡ºåºå’Œç»˜åˆ¶æŒ‡ä»¤çš„åˆ—è¡¨åï¼Œå°†å…¶<strong>æäº¤</strong>ç»™æ¸²æŸ“å¼•æ“ä¸­çš„<strong>åˆæˆçº¿ç¨‹</strong></li><li>åˆæˆçº¿ç¨‹å†äº¤ç»™å…‰æ …åŒ–çº¿ç¨‹æ± å¯¹å›¾å—è¿›è¡Œå¤„ç†</li><li>å…‰æ …åŒ–è¿‡ç¨‹å¾€å¾€ä½¿ç”¨GPUæ¥åŠ é€Ÿç”Ÿæˆå³å¿«é€Ÿå…‰æ …åŒ–ï¼Œç”Ÿæˆçš„ä½å›¾ä¿å­˜åœ¨GPUå†…å­˜ä¸­</li></ul><h5 id="ï¼ˆ8ï¼‰åˆæˆä¸æ˜¾ç¤º"><a href="#ï¼ˆ8ï¼‰åˆæˆä¸æ˜¾ç¤º" class="headerlink" title="ï¼ˆ8ï¼‰åˆæˆä¸æ˜¾ç¤º"></a>ï¼ˆ8ï¼‰åˆæˆä¸æ˜¾ç¤º</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110071019064.gif" alt="åˆæˆçš„å…‰æ …åŒ–è¿‡ç¨‹"></p><ul><li>ä¸€æ—¦æ‰€æœ‰å›¾å—éƒ½è¢«å…‰æ …åŒ–ï¼Œ<strong>åˆæˆçº¿ç¨‹</strong>å°±ä¼šç”Ÿæˆä¸€ä¸ªç»˜åˆ¶å›¾å—çš„å‘½ä»¤â€”â€”â€œDrawQuadâ€ï¼Œç„¶åå°†è¯¥å‘½ä»¤æäº¤ç»™æµè§ˆå™¨è¿›ç¨‹</li><li><strong>æµè§ˆå™¨è¿›ç¨‹</strong>é‡Œé¢æœ‰ä¸€ä¸ªå« viz çš„ç»„ä»¶ï¼Œç”¨æ¥æ¥æ”¶<strong>åˆæˆçº¿ç¨‹</strong>å‘è¿‡æ¥çš„ DrawQuad å‘½ä»¤ï¼Œç„¶åæ ¹æ® DrawQuad å‘½ä»¤ï¼Œå°†å…¶é¡µé¢å†…å®¹ç»˜åˆ¶åˆ°å†…å­˜ä¸­ï¼Œæœ€åå†å°†å†…å­˜æ˜¾ç¤ºåœ¨å±å¹•ä¸Š</li></ul><h4 id="3-æµè§ˆå™¨é¡µé¢äº¤äº’"><a href="#3-æµè§ˆå™¨é¡µé¢äº¤äº’" class="headerlink" title="3.æµè§ˆå™¨é¡µé¢äº¤äº’"></a>3.æµè§ˆå™¨é¡µé¢äº¤äº’</h4><h5 id="ï¼ˆ1ï¼‰æµè§ˆå™¨å¯¹äº‹ä»¶å¤„ç†"><a href="#ï¼ˆ1ï¼‰æµè§ˆå™¨å¯¹äº‹ä»¶å¤„ç†" class="headerlink" title="ï¼ˆ1ï¼‰æµè§ˆå™¨å¯¹äº‹ä»¶å¤„ç†"></a>ï¼ˆ1ï¼‰æµè§ˆå™¨å¯¹äº‹ä»¶å¤„ç†</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110071102089.png" alt="ç‚¹å‡»äº‹ä»¶ä»æµè§ˆå™¨è¿›ç¨‹è·¯ç”±åˆ°æ¸²æŸ“è¿›ç¨‹"></p><p><strong>æµè§ˆå™¨è¿›ç¨‹</strong>é¦–å…ˆæ¥æ”¶åˆ°äº‹ä»¶ä¿¡æ¯å’Œäº‹ä»¶å‘ç”Ÿçš„åæ ‡ï¼Œéšåä¾¿æŠŠä¿¡æ¯ä¼ é€’ç»™<strong>æ¸²æŸ“è¿›ç¨‹</strong>ï¼Œ<strong>æ¸²æŸ“è¿›ç¨‹</strong>æ ¹æ®äº‹ä»¶å‘ç”Ÿçš„åæ ‡æ‰¾åˆ°<strong>ç›®æ ‡å¯¹è±¡ï¼ˆtargetï¼‰</strong>ï¼Œç„¶åè¿è¡Œè¿™ä¸ª<strong>ç›®æ ‡å¯¹è±¡</strong>çš„ç»‘å®šäº‹ä»¶å¯¹åº”çš„<strong>ç›‘å¬å‡½æ•°ï¼ˆlistenerï¼‰</strong></p><h5 id="ï¼ˆ2ï¼‰åˆæˆçº¿ç¨‹æ¥æ”¶äº‹ä»¶"><a href="#ï¼ˆ2ï¼‰åˆæˆçº¿ç¨‹æ¥æ”¶äº‹ä»¶" class="headerlink" title="ï¼ˆ2ï¼‰åˆæˆçº¿ç¨‹æ¥æ”¶äº‹ä»¶"></a>ï¼ˆ2ï¼‰åˆæˆçº¿ç¨‹æ¥æ”¶äº‹ä»¶</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110071129764.png" alt="éå¿«é€Ÿæ»šåŠ¨åŒºåŸŸæœ‰ç”¨æˆ·äº‹ä»¶å‘ç”Ÿ"></p><p>åˆæˆçº¿ç¨‹æ¥æ”¶äº‹ä»¶çš„æƒ…å†µä¸»è¦é’ˆå¯¹<strong>é¡µé¢æ»šåŠ¨</strong>ç›¸å…³çš„äº‹ä»¶ï¼Œåˆæˆçº¿ç¨‹å¯ä»¥ç‹¬ç«‹äºä¸»çº¿ç¨‹ä¹‹å¤–é€šè¿‡å·²å…‰æ …åŒ–çš„å±‚åˆ›å»ºç»„åˆå¸§</p><p>å½“æ¸²æŸ“è¿›ç¨‹ä¸­çš„<strong>åˆæˆçº¿ç¨‹</strong>æ¥æ”¶åˆ°äº‹ä»¶ä¿¡æ¯ï¼Œè¦è¿›è¡Œä»¥ä¸‹åˆ¤å®šï¼š</p><ul><li>é¡µé¢åˆæˆæ—¶ï¼Œåˆæˆå™¨çº¿ç¨‹ä¼šæ ‡è®°é¡µé¢ä¸­ç»‘å®šæœ‰<strong>é¡µé¢æ»šåŠ¨</strong>äº‹ä»¶å¤„ç†å™¨çš„åŒºåŸŸä¸º<strong>éå¿«é€Ÿæ»šåŠ¨åŒºåŸŸ</strong>ï¼ˆnon-fast scrollable region)</li><li>å¦‚æœäº‹ä»¶å‘ç”Ÿåœ¨è¿™äº›å­˜åœ¨æ ‡æ³¨çš„åŒºåŸŸï¼Œåˆæˆçº¿ç¨‹ä¼šæŠŠäº‹ä»¶ä¿¡æ¯å‘é€ç»™ä¸»çº¿ç¨‹ï¼Œç­‰å¾…ä¸»çº¿ç¨‹è¿›è¡Œäº‹ä»¶å¤„ç†</li><li>å¦‚æœäº‹ä»¶ä¸æ˜¯å‘ç”Ÿåœ¨è¿™äº›åŒºåŸŸï¼Œåˆæˆçº¿ç¨‹åˆ™ä¼šç›´æ¥åˆæˆæ–°çš„å¸§è€Œä¸ç”¨ç­‰åˆ°ä¸»çº¿ç¨‹çš„å“åº”</li></ul><h5 id="ï¼ˆ3ï¼‰æŸ¥æ‰¾äº‹ä»¶çš„ç›®æ ‡å¯¹è±¡"><a href="#ï¼ˆ3ï¼‰æŸ¥æ‰¾äº‹ä»¶çš„ç›®æ ‡å¯¹è±¡" class="headerlink" title="ï¼ˆ3ï¼‰æŸ¥æ‰¾äº‹ä»¶çš„ç›®æ ‡å¯¹è±¡"></a>ï¼ˆ3ï¼‰æŸ¥æ‰¾äº‹ä»¶çš„ç›®æ ‡å¯¹è±¡</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110071138363.png" alt="å½“æ•´ä¸ªé¡µé¢éƒ½æ˜¯éå¿«é€Ÿæ»šåŠ¨åŒºåŸŸæ—¶é¡µé¢çš„äº‹ä»¶å¤„ç†ç¤ºæ„å›¾"></p><p>å½“<strong>åˆæˆçº¿ç¨‹</strong>æ¥æ”¶åˆ°äº‹ä»¶ä¿¡æ¯ï¼Œåˆ¤å®šåˆ°äº‹ä»¶å‘ç”Ÿä¸åœ¨éå¿«é€Ÿæ»šåŠ¨åŒºåŸŸåï¼Œåˆæˆå™¨çº¿ç¨‹ä¼šå‘<strong>ä¸»çº¿ç¨‹</strong>å‘é€è¿™ä¸ªæ—¶é—´ä¿¡æ¯ï¼Œ<strong>ä¸»çº¿ç¨‹</strong>è·å–åˆ°äº‹ä»¶ä¿¡æ¯çš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯é€šè¿‡<strong>å‘½ä¸­æµ‹è¯•ï¼ˆhit testï¼‰</strong>å»æ‰¾åˆ°äº‹ä»¶çš„ç›®æ ‡å¯¹è±¡</p><p>å…·ä½“çš„å‘½ä¸­æµ‹è¯•æµç¨‹æ˜¯éå†åœ¨ç»˜åˆ¶é˜¶æ®µç”Ÿæˆçš„<strong>ç»˜ç”»è®°å½•ï¼ˆpaint recordsï¼‰</strong>æ¥æ‰¾åˆ°åŒ…å«äº†äº‹ä»¶å‘ç”Ÿåæ ‡ä¸Šçš„å…ƒç´ å¯¹è±¡</p><h5 id="ï¼ˆ4ï¼‰äº‹ä»¶å¤„ç†ä¼˜åŒ–"><a href="#ï¼ˆ4ï¼‰äº‹ä»¶å¤„ç†ä¼˜åŒ–" class="headerlink" title="ï¼ˆ4ï¼‰äº‹ä»¶å¤„ç†ä¼˜åŒ–"></a>ï¼ˆ4ï¼‰äº‹ä»¶å¤„ç†ä¼˜åŒ–</h5><p>ä¸ºäº†æµè§ˆæµç•…ï¼Œæµè§ˆå™¨éœ€è¦ä¿è¯æ¸²æŸ“è¿›ç¨‹çš„æ¸²æŸ“é€Ÿåº¦ä¸å±å¹•åˆ·æ–°ç‡ä¸€è‡´ï¼ˆå¤§æ¦‚æ¯ç§’ 60 å¸§ï¼‰ï¼Œä½†æ˜¯å­˜åœ¨æŸäº›äº‹ä»¶è§¦å‘é¢‘ç‡è¶…è¿‡äº†è¿™ä¸ªæ•°å€¼ï¼ˆæ¯”å¦‚wheelï¼Œmousewheelï¼Œmousemoveï¼Œpointermoveï¼Œtouchmoveï¼Œè¿™äº›è¿ç»­æ€§çš„äº‹ä»¶ä¸€èˆ¬æ¯ç§’ä¼šè§¦å‘60~120æ¬¡ï¼‰</p><p>äº‹ä»¶æ·¹æ²¡äº†å±å¹•åˆ·æ–°çš„æ—¶é—´è½´ï¼Œå¯¼è‡´é¡µé¢å¾ˆå¡é¡¿ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110071149864.png" alt="äº‹ä»¶æ·¹æ²¡äº†å±å¹•åˆ·æ–°çš„æ—¶é—´è½´ï¼Œå¯¼è‡´é¡µé¢å¾ˆå¡é¡¿"></p><p>å‡å¦‚æ¯ä¸€æ¬¡è§¦å‘äº‹ä»¶éƒ½å°†äº‹ä»¶å‘é€åˆ°ä¸»çº¿ç¨‹å¤„ç†ï¼Œç”±äºå±å¹•çš„åˆ·æ–°é€Ÿç‡ç›¸å¯¹æ¥è¯´è¾ƒä½ï¼Œè¿™æ ·ä½¿å¾—ä¸»çº¿ç¨‹ä¼š<strong>è§¦å‘è¿‡é‡</strong>çš„å‘½ä¸­æµ‹è¯•ä»¥åŠJSä»£ç ï¼Œä½¿å¾—æ€§èƒ½æœ‰äº†æ²¡å¿…è¦æ˜¯<strong>æŸè€—</strong></p><p>å’Œä¹‹å‰ç›¸åŒçš„äº‹ä»¶è½´ï¼Œå¯æ˜¯è¿™æ¬¡äº‹ä»¶è¢«åˆå¹¶å¹¶å»¶è¿Ÿè°ƒåº¦äº†ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110071149521.png" alt="å’Œä¹‹å‰ç›¸åŒçš„äº‹ä»¶è½´ï¼Œå¯æ˜¯è¿™æ¬¡äº‹ä»¶è¢«åˆå¹¶å¹¶å»¶è¿Ÿè°ƒåº¦äº†"></p><p>æµè§ˆå™¨ä¼š<strong>åˆå¹¶</strong>è¿™äº›è¿ç»­çš„äº‹ä»¶ï¼Œå»¶è¿Ÿåˆ°ä¸‹ä¸€å¸§æ¸²æŸ“å†æ‰§è¡Œï¼Œè¾¾åˆ°äº‹ä»¶å¤„ç†ä¼˜åŒ–çš„ç›®çš„</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/Autovy/Image/img/202110131222149.webp&quot; alt=&quot;Internet Explorer&quot;&gt;&lt;/p&gt;
&lt;p&gt;æµè§ˆå™¨ç¬‘è¯90%éƒ½å’ŒIEæœ‰å…³ï¼Œæ²¡äº†IEçš„æµè§ˆå™¨ä¸–ç•Œæ€»å½’æ˜¯å°‘å¾ˆå¤šä¹è¶£ğŸ˜­&lt;/p&gt;
    
    </summary>
    
    
      <category term="å¼€å‘åŸç†" scheme="https://autovy.github.io/categories/%E5%BC%80%E5%8F%91%E5%8E%9F%E7%90%86/"/>
    
    
      <category term="å¼€å‘åŸç†" scheme="https://autovy.github.io/tags/%E5%BC%80%E5%8F%91%E5%8E%9F%E7%90%86/"/>
    
      <category term="æ·±åº¦ç³»åˆ—" scheme="https://autovy.github.io/tags/%E6%B7%B1%E5%BA%A6%E7%B3%BB%E5%88%97/"/>
    
      <category term="è®¡ç®—æœºç³»ç»Ÿ" scheme="https://autovy.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/"/>
    
      <category term="web" scheme="https://autovy.github.io/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>å¼€å‘åŸç†|åç«¯æ¶æ„åŸºç¡€çŸ¥è¯†</title>
    <link href="https://autovy.github.io/2021/09/30/DevPrinciple/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    <id>https://autovy.github.io/2021/09/30/DevPrinciple/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</id>
    <published>2021-09-30T15:45:00.000Z</published>
    <updated>2021-10-13T04:00:34.561Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109302345178.jpeg" alt="Image"></p><p>æŠ“ä½9æœˆçš„å°¾å·´ï¼Œç»ˆäºæ•´ç†å®Œæ¯•ğŸ¥³ã€‚</p><span id="more"></span><h3 id="äº’è”ç½‘æ¶æ„æ¼”åŒ–è¿›ç¨‹"><a href="#äº’è”ç½‘æ¶æ„æ¼”åŒ–è¿›ç¨‹" class="headerlink" title="äº’è”ç½‘æ¶æ„æ¼”åŒ–è¿›ç¨‹"></a>äº’è”ç½‘æ¶æ„æ¼”åŒ–è¿›ç¨‹</h3><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109271633102.jpeg" alt="img"></p><h3 id="åˆ†å¸ƒå¼"><a href="#åˆ†å¸ƒå¼" class="headerlink" title="åˆ†å¸ƒå¼"></a>åˆ†å¸ƒå¼</h3><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://blog.csdn.net/wangshihuidev/article/details/98896812">https://blog.csdn.net/wangshihuidev/article/details/98896812</a></p><h4 id="1-éœ€æ±‚"><a href="#1-éœ€æ±‚" class="headerlink" title="1.éœ€æ±‚"></a>1.éœ€æ±‚</h4><p>ä½†è®¿é—®ç³»ç»Ÿçš„ç”¨æˆ·è¶Šæ¥è¶Šå¤šï¼Œç³»ç»Ÿèµ„æºå°±éœ€è¦æ›´å¤šçš„<strong>CPU</strong>ï¼Œ<strong>å†…å­˜</strong>å»å¤„ç†è¯·æ±‚ï¼Œéœ€è¦æ›´å¤§çš„<strong>ç½‘ç»œå¸¦å®½</strong>å»å¤„ç†æ•°æ®çš„ä¼ è¾“ï¼Œéœ€è¦æ›´å¤š<strong>ç£ç›˜ç©ºé—´</strong>å­˜å‚¨æ•°æ®ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§æ–¹æ³•ï¼š<strong>å‚ç›´ä¼¸ç¼© æ°´å¹³ä¼¸ç¼©</strong></p><h4 id="2-å‚ç›´ä¼¸ç¼©"><a href="#2-å‚ç›´ä¼¸ç¼©" class="headerlink" title="2.å‚ç›´ä¼¸ç¼©"></a>2.å‚ç›´ä¼¸ç¼©</h4><h5 id="ï¼ˆ1ï¼‰å‚ç›´ä¼¸ç¼©ç®€ä»‹"><a href="#ï¼ˆ1ï¼‰å‚ç›´ä¼¸ç¼©ç®€ä»‹" class="headerlink" title="ï¼ˆ1ï¼‰å‚ç›´ä¼¸ç¼©ç®€ä»‹"></a>ï¼ˆ1ï¼‰å‚ç›´ä¼¸ç¼©ç®€ä»‹</h5><p>å‚ç›´ä¼¸ç¼©çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šæå‡<strong>å•å°</strong>æœåŠ¡å™¨è®¡ç®—å¤„ç†çš„æ€§èƒ½ï¼ˆä¸ªäººä¸»ä¹‰ï¼‰</p><p>ä½†æ˜¯å•å°æœåŠ¡å™¨çš„<strong>è®¡ç®—å¤„ç†èƒ½åŠ›æ˜¯æœ‰é™</strong>çš„ï¼Œè€Œä¸”ä¹Ÿä¼šä¸¥é‡å—åˆ°è®¡ç®—æœºç¡¬ä»¶æ°´å¹³çš„åˆ¶çº¦ï¼Œå³ä¾¿ç”¨æ›´å¿«é¢‘ç‡çš„CPUï¼Œæ›´å¿«çš„ç½‘å¡ï¼Œå¡æ›´å¤šçš„ç£ç›˜ä¹Ÿæ€»ä¼šæœ‰å¤©èŠ±æ¿</p><h5 id="ï¼ˆ2ï¼‰å‚ç›´ä¼¸ç¼©ç³»ç»Ÿä¼˜åŒ–"><a href="#ï¼ˆ2ï¼‰å‚ç›´ä¼¸ç¼©ç³»ç»Ÿä¼˜åŒ–" class="headerlink" title="ï¼ˆ2ï¼‰å‚ç›´ä¼¸ç¼©ç³»ç»Ÿä¼˜åŒ–"></a>ï¼ˆ2ï¼‰å‚ç›´ä¼¸ç¼©ç³»ç»Ÿä¼˜åŒ–</h5><p>å¢åŠ CPUåï¼Œè¦è¿›è¡Œä»¥ä¸‹è°ƒæ•´ä»¥ä¿è¯è®¡ç®—èƒ½åŠ›æœ‰æ•ˆå¢é•¿ï¼š</p><ul><li>å¼€å¯å¤šçº¿ç¨‹</li><li>è°ƒå¤§å¹¶å‘é‡</li><li>é˜²æ­¢é”ç«äº‰</li></ul><p>å¢åŠ å†…å­˜ååï¼Œè¦è¿›è¡Œä»¥ä¸‹è°ƒæ•´ä»¥ä¿è¯æœåŠ¡èƒ½åŠ›æœ‰æ•ˆå¢é•¿ï¼š</p><ul><li>è°ƒå¤§å †å‚æ•°</li><li>è°ƒå¤§æœ¬åœ°ç¼“å­˜</li></ul><p>é™¤æ­¤ä¹‹å¤–å¯¹æ•°æ®åº“çš„ä¼˜åŒ–å¦‚åˆ†è¡¨ç­‰æ“ä½œä¹Ÿæ˜¯ä¸€ç§å‚ç›´ä¼¸ç¼©</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109271621445.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h4 id="3-æ°´å¹³ä¼¸ç¼©"><a href="#3-æ°´å¹³ä¼¸ç¼©" class="headerlink" title="3.æ°´å¹³ä¼¸ç¼©"></a>3.æ°´å¹³ä¼¸ç¼©</h4><h5 id="ï¼ˆ1ï¼‰æ°´å¹³ä¼¸ç¼©ç®€ä»‹"><a href="#ï¼ˆ1ï¼‰æ°´å¹³ä¼¸ç¼©ç®€ä»‹" class="headerlink" title="ï¼ˆ1ï¼‰æ°´å¹³ä¼¸ç¼©ç®€ä»‹"></a>ï¼ˆ1ï¼‰æ°´å¹³ä¼¸ç¼©ç®€ä»‹</h5><p>æ°´å¹³ä¼¸ç¼©çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šç”¨<strong>å¤šå°</strong>æœåŠ¡å™¨åˆå¹¶è¿›è¡Œè®¡ç®—å¤„ç†ï¼ˆé›†ä½“ä¸»ä¹‰ï¼‰</p><p>é€šè¿‡å¤šå°æœåŠ¡å™¨æ„æˆ<strong>åˆ†å¸ƒå¼é›†ç¾¤</strong>ä»è€Œæå‡ç³»ç»Ÿçš„æ•´ä½“å¤„ç†èƒ½åŠ›</p><h5 id="ï¼ˆ2ï¼‰æ°´å¹³ä¼¸ç¼©ç³»ç»Ÿä¼˜åŒ–"><a href="#ï¼ˆ2ï¼‰æ°´å¹³ä¼¸ç¼©ç³»ç»Ÿä¼˜åŒ–" class="headerlink" title="ï¼ˆ2ï¼‰æ°´å¹³ä¼¸ç¼©ç³»ç»Ÿä¼˜åŒ–"></a>ï¼ˆ2ï¼‰æ°´å¹³ä¼¸ç¼©ç³»ç»Ÿä¼˜åŒ–</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109271624231.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h4 id="4-æ–¹æ¡ˆæ¯”è¾ƒ"><a href="#4-æ–¹æ¡ˆæ¯”è¾ƒ" class="headerlink" title="4.æ–¹æ¡ˆæ¯”è¾ƒ"></a>4.æ–¹æ¡ˆæ¯”è¾ƒ</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109271621772.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h4 id="5-åˆ†å¸ƒå¼æ¶æ„"><a href="#5-åˆ†å¸ƒå¼æ¶æ„" class="headerlink" title="5.åˆ†å¸ƒå¼æ¶æ„"></a>5.åˆ†å¸ƒå¼æ¶æ„</h4><p>å°†å•ä½“æœåŠ¡è¿›è¡Œä»¥ä¸‹æ”¹é€ ï¼Œå¯è·å¾—ä¸€ä¸ªç®€å•çš„é«˜æ€§èƒ½ç³»ç»Ÿï¼š</p><ul><li>æ•°æ®åº“ä¸åº”ç”¨åˆ†ç¦»ï¼šç³»ç»Ÿç¨‹åºï¼Œæ–‡ä»¶æœåŠ¡ï¼Œæ•°æ®åº“æœåŠ¡éƒ¨ç½²åœ¨ä¸åŒæœåŠ¡å™¨</li><li>åŠ ä¸€ä¸ªç¼“å­˜ï¼šå°†åº”ç”¨ç¨‹åºéœ€è¦çš„çƒ­ç‚¹æ•°æ®å­˜åœ¨ç¼“å†²ä¸­ï¼Œè€Œä¸æ˜¯æ¯ä¸€æ¬¡éƒ½è¦å»è¿æ¥æ•°æ®åº“</li><li>å¤šå°æœåŠ¡å™¨æ„æˆå•ä¸€æœåŠ¡çš„é›†ç¾¤ï¼šå¦‚æ•°æ®åº“é›†ç¾¤ï¼Œåº”ç”¨ç¨‹åºé›†ç¾¤ï¼Œç¼“å­˜æœåŠ¡é›†ç¾¤</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109271901457.png" alt="img"></p><h3 id="ç¼“å­˜æ¶æ„"><a href="#ç¼“å­˜æ¶æ„" class="headerlink" title="ç¼“å­˜æ¶æ„"></a>ç¼“å­˜æ¶æ„</h3><h4 id="1-è®¡ç®—æœºä¸­çš„ç¼“å­˜"><a href="#1-è®¡ç®—æœºä¸­çš„ç¼“å­˜" class="headerlink" title="1.è®¡ç®—æœºä¸­çš„ç¼“å­˜"></a>1.è®¡ç®—æœºä¸­çš„ç¼“å­˜</h4><ul><li>CPUå’Œä¸»å†…å­˜ä¹‹é—´æœ‰ç¼“å­˜</li><li>å†…å­˜å’Œç¡¬ç›˜ä¹‹é—´ä¹Ÿæœ‰ç£ç›˜ç¼“å­˜</li><li>åœ¨ç¡¬ç›˜ä¸ç½‘ç»œä¹‹é—´ä¹Ÿæœ‰æŸç§æ„ä¹‰ä¸Šçš„ç¼“å­˜</li></ul><p>ç¼“å­˜çš„å…³é”®æŒ‡æ ‡æ˜¯<strong>ç¼“å­˜å‘½ä¸­ç‡</strong>ï¼Œå…¶æœ‰ä»¥ä¸‹å½±å“è¦ç´ ï¼š</p><ul><li>ç¼“å­˜é”®é›†åˆå¤§å°ï¼ˆé”®æ•°è¶Šå°‘ï¼Œç¼“å­˜æ•ˆç‡è¶Šé«˜ï¼‰</li><li>ç¼“å­˜å¯ä½¿ç”¨å†…å­˜ç©ºé—´ï¼ˆç¼“å­˜å¯¹è±¡è¶Šå¤šï¼Œç¼“å­˜å‘½ä¸­ç‡è¶Šé«˜ï¼‰</li><li>ç¼“å­˜å¯¹è±¡ç”Ÿå­˜æ—¶é—´ï¼ˆç¼“å­˜æ—¶é—´è¶Šé•¿ï¼Œç¼“å­˜å¯¹è±¡è¢«é‡ç”¨çš„å¯èƒ½æ€§è¶Šé«˜ï¼‰</li></ul><p>ç¼“å­˜åˆ†ä¸ºä¸¤ç§ï¼šä¸€ç§æ˜¯é€šè¯»ç¼“å­˜ï¼Œä¸€ç§æ˜¯æ—è·¯ç¼“å­˜</p><h4 id="2-é€šè¯»ç¼“å­˜"><a href="#2-é€šè¯»ç¼“å­˜" class="headerlink" title="2.é€šè¯»ç¼“å­˜"></a>2.é€šè¯»ç¼“å­˜</h4><h5 id="ï¼ˆ1ï¼‰é€šè¯»ç¼“å­˜ç®€ä»‹"><a href="#ï¼ˆ1ï¼‰é€šè¯»ç¼“å­˜ç®€ä»‹" class="headerlink" title="ï¼ˆ1ï¼‰é€šè¯»ç¼“å­˜ç®€ä»‹"></a>ï¼ˆ1ï¼‰é€šè¯»ç¼“å­˜ç®€ä»‹</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109271925956.png" alt="img"></p><p>é€šè¯»ç¼“å­˜ï¼šå®¢æˆ·ç«¯è¯·æ±‚é€šè¯»ç¼“å­˜æœåŠ¡å™¨ï¼Œè‹¥ç¼“å­˜å‘½ä¸­åˆ™ç›´æ¥è¿”å›æ•°æ®ï¼Œå¦åˆ™ç”±é€šè¯»ç¼“å­˜æœåŠ¡å™¨<strong>ä»£ç†</strong>è¯·æ±‚åˆ°åŸå§‹æœåŠ¡å™¨è·å¾—æ•°æ®</p><p><strong>å®¢æˆ·ç«¯è¿æ¥çš„æ˜¯é€šè¯»ç¼“å­˜</strong>ï¼Œè€Œä¸æ˜¯ç”Ÿæˆç›¸åº”çš„åŸå§‹æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯åªèƒ½é€šè¿‡é€šè¯»ç¼“å­˜è¿›è¡Œ<strong>ä»£ç†</strong>å»è®¿é—®åŸå§‹æœåŠ¡å™¨</p><p>æ¯”è¾ƒå¸¸è§çš„é€šè¯»ç¼“å­˜æœ‰ï¼šNginxåå‘ä»£ç†ç¼“å­˜ï¼ŒCDNç¼“å­˜</p><h5 id="ï¼ˆ2ï¼‰Nginxåå‘ä»£ç†ç¼“å­˜"><a href="#ï¼ˆ2ï¼‰Nginxåå‘ä»£ç†ç¼“å­˜" class="headerlink" title="ï¼ˆ2ï¼‰Nginxåå‘ä»£ç†ç¼“å­˜"></a>ï¼ˆ2ï¼‰Nginxåå‘ä»£ç†ç¼“å­˜</h5><p>Nginxä¸ä»…èƒ½ä½œä¸ºWeb Serverï¼Œè¿˜å…·æœ‰åå‘ä»£ç†ã€è´Ÿè½½å‡è¡¡å’Œç¼“å­˜çš„åŠŸèƒ½</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109271938014.png" alt="img"></p><h5 id="ï¼ˆ3ï¼‰CDNç¼“å­˜"><a href="#ï¼ˆ3ï¼‰CDNç¼“å­˜" class="headerlink" title="ï¼ˆ3ï¼‰CDNç¼“å­˜"></a>ï¼ˆ3ï¼‰CDNç¼“å­˜</h5><img src="https://img.alicdn.com/tfs/TB1eV4wKa6qK1RjSZFmXXX0PFXa-1149-1328.png" alt="ä»€éº¼æ˜¯CDN" style="zoom: 67%;"><p>CDNå³å†…å®¹åˆ†å‘ç½‘ç»œï¼Œå®ƒä»¬æ˜¯ä¸€ç»„åˆ†å¸ƒåœ¨ä¸åŒåœ°ç†ä½ç½®çš„æœåŠ¡å™¨ã€‚å…¶åˆ©ç”¨éå¸ƒå…¨çƒå„åœ°æ•°æ®ä¸­å¿ƒçš„ç¼“å­˜ï¼Œä½¿ç”¨æˆ·å¯ä»¥é€šè¿‡æœ€è¿‘åœ°ç‚¹çš„CDNæœåŠ¡å™¨è·å¾—ç½‘ç»œå†…å®¹</p><p>å¯ä»¥å°†CDNç†è§£ä¸ºéå¸ƒå¤§è¡—å°å··çš„ATMæœºï¼Œäººä»¬ä¸ç”¨å»é“¶è¡Œæ’é•¿é˜Ÿè€Œæ˜¯å»ç¦»è‡ªå·±æœ€è¿‘çš„ATMå»å–ç°é‡‘</p><h4 id="3-æ—è·¯ç¼“å­˜"><a href="#3-æ—è·¯ç¼“å­˜" class="headerlink" title="3.æ—è·¯ç¼“å­˜"></a>3.æ—è·¯ç¼“å­˜</h4><h5 id="ï¼ˆ1ï¼‰æ—è·¯ç¼“å­˜ç®€ä»‹"><a href="#ï¼ˆ1ï¼‰æ—è·¯ç¼“å­˜ç®€ä»‹" class="headerlink" title="ï¼ˆ1ï¼‰æ—è·¯ç¼“å­˜ç®€ä»‹"></a>ï¼ˆ1ï¼‰æ—è·¯ç¼“å­˜ç®€ä»‹</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109271926138.png" alt="img"></p><p>æ—è·¯ç¼“å­˜ï¼šå®¢æˆ·ç«¯å‘è®¿é—®æ—è·¯ç¼“å­˜æ˜¯å¦æœ‰å‘½ä¸­çš„æ•°æ®ï¼Œè‹¥æ²¡æœ‰å°±è‡ªå·±å»è®¿é—®åŸå§‹æœåŠ¡å™¨è·å¾—æ•°æ®</p><p>æ—è·¯ç¼“å­˜é€šå¸¸æ˜¯ä¸€ä¸ª<strong>ç‹¬ç«‹çš„é”®å€¼å¯¹å­˜å‚¨</strong>ï¼ˆkey-valueï¼‰</p><p>æ¯”è¾ƒå¸¸è§çš„æ—è·¯ç¼“å­˜ï¼šRedis</p><h5 id="ï¼ˆ2ï¼‰Redisç¼“å­˜"><a href="#ï¼ˆ2ï¼‰Redisç¼“å­˜" class="headerlink" title="ï¼ˆ2ï¼‰Redisç¼“å­˜"></a>ï¼ˆ2ï¼‰Redisç¼“å­˜</h5><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://zhuanlan.zhihu.com/p/315103766">https://zhuanlan.zhihu.com/p/315103766</a></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109272020654.jpeg" alt="img"></p><ul><li>ç¼“å­˜å‘½ä¸­ï¼šRedisä¸­æœ‰ç›¸åº”æ•°æ®ï¼Œç›´æ¥è¿”å›æ•°æ®</li><li>ç¼“å­˜ç¼ºå¤±ï¼šRedisä¸­æ²¡æœ‰ä¿å­˜ç›¸åº”æ•°æ®ï¼Œéœ€è¦è¯·æ±‚æ•°æ®åº“æœåŠ¡å™¨ï¼Œè€Œä¸”è¦å°†ç¼ºå¤±æ•°æ®å†™å…¥Redisï¼ˆç¼“å­˜æ›´æ–°ï¼‰</li></ul><h4 id="4-ç¼“å­˜ä¼˜ç¼ºç‚¹"><a href="#4-ç¼“å­˜ä¼˜ç¼ºç‚¹" class="headerlink" title="4.ç¼“å­˜ä¼˜ç¼ºç‚¹"></a>4.ç¼“å­˜ä¼˜ç¼ºç‚¹</h4><h5 id="ï¼ˆ1ï¼‰ç¼“å­˜çš„å¥½å¤„"><a href="#ï¼ˆ1ï¼‰ç¼“å­˜çš„å¥½å¤„" class="headerlink" title="ï¼ˆ1ï¼‰ç¼“å­˜çš„å¥½å¤„"></a>ï¼ˆ1ï¼‰ç¼“å­˜çš„å¥½å¤„</h5><ul><li>ç¼“å­˜æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œç›¸æ¯”ç¡¬ç›˜å’Œç½‘ç»œè·å–æ•ˆç‡æ›´é«˜ï¼Œå“åº”æ—¶é—´æ›´å¿«ï¼Œæ€§èƒ½æ›´å¥½</li><li>é™ä½æœåŠ¡å™¨çš„è´Ÿè½½èƒ½åŠ›</li><li>ç¼“å­˜é€šå¸¸ä¼šè®°å½•è®¡ç®—ç»“æœï¼Œç¼“å­˜ä¹Ÿå‡å°‘CPUçš„è®¡ç®—æ¶ˆè€—åŠ å¿«å¤„ç†é€Ÿåº¦</li></ul><h5 id="ï¼ˆ2ï¼‰ç¼“å­˜çš„ç¼ºç‚¹"><a href="#ï¼ˆ2ï¼‰ç¼“å­˜çš„ç¼ºç‚¹" class="headerlink" title="ï¼ˆ2ï¼‰ç¼“å­˜çš„ç¼ºç‚¹"></a>ï¼ˆ2ï¼‰ç¼“å­˜çš„ç¼ºç‚¹</h5><ul><li>æ•°æ®åº“ä¸­çš„æºæ•°æ®è¢«ä¿®æ”¹ï¼Œç¼“å­˜ä¸­çš„æ•°æ®å˜æˆè„æ•°æ®</li><li>æ¯æ¬¡å†™å…¥ç¼“å­˜æ•°æ®éƒ½è¦æ ‡è®°å¤±æ•ˆæ—¶é—´</li></ul><h4 id="5-ç¼“å­˜çš„åˆç†ä½¿ç”¨"><a href="#5-ç¼“å­˜çš„åˆç†ä½¿ç”¨" class="headerlink" title="5.ç¼“å­˜çš„åˆç†ä½¿ç”¨"></a>5.ç¼“å­˜çš„åˆç†ä½¿ç”¨</h4><h5 id="ï¼ˆ1ï¼‰ç¼“å­˜å…³æ³¨è¦ç‚¹"><a href="#ï¼ˆ1ï¼‰ç¼“å­˜å…³æ³¨è¦ç‚¹" class="headerlink" title="ï¼ˆ1ï¼‰ç¼“å­˜å…³æ³¨è¦ç‚¹"></a>ï¼ˆ1ï¼‰ç¼“å­˜å…³æ³¨è¦ç‚¹</h5><ul><li>å…³æ³¨é¢‘ç¹ä¿®æ”¹çš„æ•°æ®ï¼Œå¦‚æœä¸€ä¸ªæ•°æ®ç»å¸¸è¢«ä¿®æ”¹ï¼Œé‚£ä¹ˆä½¿ç”¨ç¼“å­˜çš„ä»·å€¼ä¸å¤§</li><li>ç¼“å­˜è¦æœ‰çƒ­ç‚¹ï¼Œå­˜å‚¨ç©ºé—´æœ‰é™ï¼Œè¦é€‰å–çƒ­é—¨çš„è¢«è®¿é—®æ•°æ®æ”¾åœ¨ç¼“å­˜</li><li>æ³¨æ„ç¼“å­˜é›ªå´©ï¼Œç¼“å­˜å‡»ç©¿ä¸ç¼“å­˜ç©¿é€</li><li>å…³æ³¨ç¼“å­˜çš„æ•°æ®ä¸€è‡´æ€§</li></ul><h5 id="ï¼ˆ2ï¼‰ç¼“å­˜å¼‚å¸¸ä¸è§£å†³æ–¹æ¡ˆ"><a href="#ï¼ˆ2ï¼‰ç¼“å­˜å¼‚å¸¸ä¸è§£å†³æ–¹æ¡ˆ" class="headerlink" title="ï¼ˆ2ï¼‰ç¼“å­˜å¼‚å¸¸ä¸è§£å†³æ–¹æ¡ˆ"></a>ï¼ˆ2ï¼‰ç¼“å­˜å¼‚å¸¸ä¸è§£å†³æ–¹æ¡ˆ</h5><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.sohu.com/a/473442725_115128">https://www.sohu.com/a/473442725_115128</a></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109272244518.png" alt="img"></p><h5 id="ï¼ˆ3ï¼‰ç¼“å­˜é›ªå´©"><a href="#ï¼ˆ3ï¼‰ç¼“å­˜é›ªå´©" class="headerlink" title="ï¼ˆ3ï¼‰ç¼“å­˜é›ªå´©"></a>ï¼ˆ3ï¼‰ç¼“å­˜é›ªå´©</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109272042116.png" alt="img"></p><p>ç¼“å­˜é›ªå´©ï¼šç”±äº<strong>å¤§é‡ç¼“å­˜æ•°æ®è¿‡æœŸæˆ–redisæ•…éšœ</strong>ï¼Œå¤§é‡ç”¨æˆ·è¯·æ±‚æ— æ³•åœ¨redisä¸­å¤„ç†è€Œæ˜¯å…¨éƒ¨æ‰“å‘äº†æ•°æ®åº“ï¼Œæ•°æ®åº“è¢«ä¹±æ£’æ‰“æ­»åï¼ˆå®•æœºï¼‰ï¼Œä¼šå¼•å‘ä¸€ç³»åˆ—è¿é”ååº”ï¼Œé€ æˆç³»ç»Ÿå´©æºƒï¼Œæ•…ç§°ä¸º<strong>é›ªå´©</strong></p><p><strong>å¤§é‡ç¼“å­˜æ•°æ®è¿‡æœŸ</strong>åº”å¯¹æ–¹æ³•</p><ul><li>å‡åŒ€è®¾ç½®è¿‡æœŸæ—¶é—´ï¼š<strong>é¿å…</strong>å°†å¤§é‡æ•°æ®è®¾ä¸º<strong>åŒä¸€ä¸ªè¿‡æœŸæ—¶é—´</strong>ï¼Œå¯ä»¥ç»™è¿‡æœŸæ—¶é—´åŠ ä¸Šä¸€ä¸ªéšæœºæ•°</li><li>äº’æ–¥é”ï¼šå¦‚æœå‘ç°è®¿é—®çš„æ•°æ®ä¸åœ¨ Redis é‡Œï¼Œå°±åŠ ä¸ªäº’æ–¥é”ï¼Œä¿è¯<strong>åŒä¸€æ—¶é—´å†…åªæœ‰ä¸€ä¸ªè¯·æ±‚æ¥æ›´æ–°ç¼“å­˜</strong>ï¼ˆäº’æ–¥é”æœ€å¥½è®¾ç½®<strong>è¶…æ—¶æ—¶é—´</strong>ï¼Œä¸ç„¶å¦‚æœæ‹¿åˆ°é”çš„è¯·æ±‚å‘ç”Ÿé˜»å¡ï¼Œä¸€ç›´ä¸é‡Šæ”¾é”ï¼Œå…¶ä»–è¯·æ±‚ä¹Ÿæ‹¿ä¸åˆ°é”ï¼Œæ•´ä¸ªç³»ç»Ÿå°±æ— å“åº”äº†ï¼‰</li><li>åŒ key ç­–ç•¥ï¼šæˆ‘ä»¬å¯¹ç¼“å­˜æ•°æ®å¯ä»¥ä½¿ç”¨ä¸¤ä¸ª keyï¼Œä¸€ä¸ªæ˜¯ <strong>ä¸» keyï¼Œä¼šè®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œ</strong>ä¸€ä¸ªæ˜¯ <strong>å¤‡ keyï¼Œä¸ä¼šè®¾ç½®è¿‡æœŸ</strong>ï¼Œç›¸å½“äºç»™ç¼“å­˜æ•°æ®åšäº†ä¸ªå‰¯æœ¬ï¼ˆå‰¯æœ¬çš„å‰¯æœ¬ï¼‰</li><li>åå°æ›´æ–°ç¼“å­˜ï¼šè®©ç¼“å­˜<strong>â€œæ°¸ä¹…æœ‰æ•ˆâ€</strong>ï¼Œå¹¶å°†æ›´æ–°ç¼“å­˜çš„å·¥ä½œäº¤ç”±åå°çº¿ç¨‹<strong>å®šæ—¶æ›´æ–°</strong>ï¼ˆæŸäº›ç¼“å­˜ä¼šåœ¨ç³»ç»Ÿå†…å­˜ç´§å¼ çš„æ—¶å€™è¢«æ·˜æ±°ï¼Œæ‰€ä»¥ä¸å­˜åœ¨çœŸæ­£çš„æ°¸ä¹…æœ‰æ•ˆï¼Œå½“ä¸šåŠ¡çº¿ç¨‹å‘ç°ç¼“å­˜æ•°æ®å¤±æ•ˆäº†ï¼Œè¿‡æ¶ˆæ¯é˜Ÿåˆ—å‘é€ä¸€æ¡æ¶ˆæ¯é€šçŸ¥åå°çº¿ç¨‹æ›´æ–°ç¼“å­˜ï¼‰</li><li>é€šè¿‡åå°æ›´æ–°ç¼“å­˜è¿›è¡Œ<strong>ç¼“å­˜é¢„çƒ­</strong>ï¼Œå³æå–æŠŠæ•°æ®ç¼“å­˜èµ·æ¥è€Œä¸æ˜¯ç­‰å¾…ç”¨æˆ·è®¿é—®æ‰æ¥è§¦å‘ç¼“å­˜æ„å»º</li></ul><p><strong>Redis æ•…éšœå®•æœº</strong>åº”å¯¹æ–¹æ³•</p><ul><li>æœåŠ¡ç†”æ–­ï¼š<strong>æœåŠ¡ç†”æ–­</strong>æœºåˆ¶ï¼Œ æš‚åœä¸šåŠ¡åº”ç”¨å¯¹ç¼“å­˜æœåŠ¡çš„è®¿é—®ï¼Œç›´æ¥è¿”å›é”™è¯¯</li><li>è¯·æ±‚é™æµæœºåˆ¶ï¼šå¯ç”¨ <strong>è¯·æ±‚é™æµ</strong>æœºåˆ¶ï¼Œ åªå°†å°‘éƒ¨åˆ†è¯·æ±‚å‘é€åˆ°æ•°æ®åº“è¿›è¡Œå¤„ç†ï¼Œå†å¤šçš„è¯·æ±‚å°±åœ¨å…¥å£ç›´æ¥æ‹’ç»æœåŠ¡</li><li>æ„å»º Redis ç¼“å­˜é«˜å¯é é›†ç¾¤ï¼šé€šè¿‡ <strong>ä¸»ä»èŠ‚ç‚¹</strong>çš„æ–¹å¼æ„å»º Redis ç¼“å­˜é«˜å¯é é›†ç¾¤ï¼Œå¦‚æœ Redis ç¼“å­˜çš„ä¸»èŠ‚ç‚¹æ•…éšœå®•æœºï¼Œ<strong>ä»èŠ‚ç‚¹å¯ä»¥åˆ‡æ¢æˆä¸ºä¸»èŠ‚ç‚¹</strong>ï¼Œç»§ç»­æä¾›ç¼“å­˜æœåŠ¡</li></ul><h5 id="ï¼ˆ4ï¼‰ç¼“å­˜å‡»ç©¿"><a href="#ï¼ˆ4ï¼‰ç¼“å­˜å‡»ç©¿" class="headerlink" title="ï¼ˆ4ï¼‰ç¼“å­˜å‡»ç©¿"></a>ï¼ˆ4ï¼‰ç¼“å­˜å‡»ç©¿</h5><img src="https://p6.itc.cn/q_70/images03/20210622/e18ac966425f4dfe9533dd6a127b0fbb.png" alt="img"><p>ç¼“å­˜å‡»ç©¿ï¼šå¦‚æœç¼“å­˜ä¸­çš„ <strong>æŸä¸ªçƒ­ç‚¹æ•°æ®è¿‡æœŸ</strong>äº†ï¼Œæ­¤æ—¶å¤§é‡çš„è¯·æ±‚è®¿é—®äº†è¯¥çƒ­ç‚¹æ•°æ®ï¼Œå°±æ— æ³•ä»ç¼“å­˜ä¸­è¯»å–ï¼Œç›´æ¥è®¿é—®æ•°æ®åº“ï¼Œæ•°æ®åº“å¾ˆå®¹æ˜“å°±è¢«é«˜å¹¶å‘çš„è¯·æ±‚å†²å®ï¼Œè¿™å°±æ˜¯ <strong>ç¼“å­˜å‡»ç©¿</strong>çš„é—®é¢˜</p><p>ç¼“å­˜å‡»ç©¿åº”å¯¹æ–¹æ³•ï¼ˆä¹Ÿæ˜¯å‰é¢æåˆ°çš„ä¸¤ç§æ–¹æ³•ï¼‰</p><ul><li>äº’æ–¥é”ï¼šä¿è¯åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªä¸šåŠ¡çº¿ç¨‹æ›´æ–°ç¼“å­˜ï¼Œæœªèƒ½è·å–äº’æ–¥é”çš„è¯·æ±‚ï¼Œè¦ä¹ˆç­‰å¾…é”é‡Šæ”¾åé‡æ–°è¯»å–ç¼“å­˜ï¼Œè¦ä¹ˆå°±è¿”å›ç©ºå€¼æˆ–è€…é»˜è®¤å€¼</li><li>åå°æ›´æ–°ç¼“å­˜ï¼šä¸ç»™çƒ­ç‚¹æ•°æ®è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œç”±åå°å¼‚æ­¥æ›´æ–°ç¼“å­˜ï¼Œæˆ–è€…åœ¨çƒ­ç‚¹æ•°æ®å‡†å¤‡è¦è¿‡æœŸå‰ï¼Œæå‰é€šçŸ¥åå°çº¿ç¨‹æ›´æ–°ç¼“å­˜ä»¥åŠé‡æ–°è®¾ç½®è¿‡æœŸæ—¶é—´</li></ul><h5 id="ï¼ˆ5ï¼‰ç¼“å­˜ç©¿é€"><a href="#ï¼ˆ5ï¼‰ç¼“å­˜ç©¿é€" class="headerlink" title="ï¼ˆ5ï¼‰ç¼“å­˜ç©¿é€"></a>ï¼ˆ5ï¼‰ç¼“å­˜ç©¿é€</h5><img src="https://p9.itc.cn/q_70/images03/20210622/a1b8b0927ad7484286fa965e9dc90a09.png" alt="img"><p>ç¼“å­˜ç©¿é€ï¼šç”¨æˆ·è®¿é—®çš„æ•°æ®å³ä¸åœ¨ç¼“å­˜ä¸­ï¼Œä¹Ÿä¸åœ¨æ•°æ®åº“ä¸­ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç§è¯±å› ï¼š</p><ul><li>ä¸šåŠ¡è¯¯æ“ä½œï¼Œç¼“å­˜ä¸­çš„æ•°æ®å’Œæ•°æ®åº“ä¸­çš„æ•°æ®éƒ½è¢«è¯¯åˆ é™¤äº†</li><li>é»‘å®¢æ¶æ„æ”»å‡»ï¼Œæ•…æ„å¤§é‡è®¿é—®æŸäº›è¯»å–ä¸å­˜åœ¨æ•°æ®çš„ä¸šåŠ¡</li></ul><p>ç¼“å­˜ä¼ é€’åº”å¯¹æ–¹æ³•</p><ul><li>éæ³•è¯·æ±‚çš„é™åˆ¶ï¼šåœ¨APIç½‘å…³å¤„ç­›é€‰è¯·æ±‚ï¼Œå¦‚æœåˆ¤æ–­å‡ºæ˜¯æ¶æ„è¯·æ±‚å°±ç›´æ¥è¿”å›é”™è¯¯ï¼Œé¿å…è¿›ä¸€æ­¥è®¿é—®ç¼“å­˜å’Œæ•°æ®åº“</li><li>ç¼“å­˜ç©ºå€¼æˆ–è€…é»˜è®¤å€¼ï¼šé’ˆå¯¹æŸ¥è¯¢çš„æ•°æ®ï¼Œåœ¨ç¼“å­˜ä¸­è®¾ç½®ä¸€ä¸ªç©ºå€¼æˆ–è€…é»˜è®¤å€¼ï¼Œè¿™æ ·åç»­è¯·æ±‚å°±å¯ä»¥ä»ç¼“å­˜ä¸­è¯»å–åˆ°ç©ºå€¼æˆ–è€…é»˜è®¤å€¼ï¼Œè¿”å›ç»™åº”ç”¨ï¼Œè€Œä¸ä¼šç»§ç»­æŸ¥è¯¢æ•°æ®åº“</li><li>å¸ƒéš†è¿‡æ»¤å™¨ï¼šåœ¨å†™å…¥æ•°æ®æ•°æ®æ—¶ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨åšä¸ªæ ‡è®°ï¼Œé€šè¿‡æŸ¥è¯¢å¸ƒéš†è¿‡æ»¤å™¨å¯ä»¥å¿«é€Ÿåˆ¤æ–­æ•°æ®æ˜¯å¦å­˜åœ¨ï¼Œé¿å…é€šè¿‡æŸ¥è¯¢æ•°æ®åº“æ¥åˆ¤æ–­æ•°æ®æ˜¯å¦å­˜åœ¨ï¼ˆRedisæœ¬èº«ä¹Ÿæ˜¯æ”¯æŒå¸ƒéš†è¿‡æ»¤å™¨çš„ï¼‰</li></ul><h5 id="ï¼ˆ6ï¼‰ç¼“å­˜æ•°æ®ä¸€è‡´æ€§"><a href="#ï¼ˆ6ï¼‰ç¼“å­˜æ•°æ®ä¸€è‡´æ€§" class="headerlink" title="ï¼ˆ6ï¼‰ç¼“å­˜æ•°æ®ä¸€è‡´æ€§"></a>ï¼ˆ6ï¼‰ç¼“å­˜æ•°æ®ä¸€è‡´æ€§</h5><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://blog.51cto.com/u_14983647/2548012">https://blog.51cto.com/u_14983647/2548012</a></p><p>ç¼“å­˜ä¸æ•°æ®åº“å­˜åœ¨ä¸€è‡´æ€§é—®é¢˜çš„æ ¹æœ¬åŸå› æ˜¯ï¼šå¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œç›¸åŒæ•°æ®</p><p>åœ¨<strong>è¯»</strong>çš„æƒ…å†µä¸‹è¡¨ç°ä¸ºä¸¤ä¸ªåŒæ—¶æŸ¥è¯¢ç¼“å­˜çš„çº¿ç¨‹<strong>åŒæ—¶ä¸å‘½ä¸­</strong>ï¼Œåœ¨å†™çš„æƒ…å†µä¸‹è¡¨ç°ä¸ºå¤šä¸ªçº¿ç¨‹å¹¶å‘å›å†™ç¼“å­˜çš„å€¼ä¸åŒï¼Œå‘ç”Ÿ<strong>ç¼“å­˜å’Œæ•°æ®åº“ä¸ä¸€è‡´</strong></p><p>æœ‰ä»¥ä¸‹å‡ ç§ä¸åŒçš„å†™å…¥ç­–ç•¥</p><ul><li><p>å…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†æ›´æ–°ç¼“å­˜ï¼ˆæ™®é€šä½å¹¶å‘ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109280831554.png" alt="8 å¼ å›¾å¸¦ä½ åˆ†æ Redis ä¸ MySQL æ•°æ®ä¸€è‡´æ€§é—®é¢˜_mysql_05"></p><p>æ›´æ–°mysqlæˆåŠŸï¼Œæ›´æ–°redisç¼“å­˜å¤±è´¥ä¼šé€ æˆ<strong>æ•°æ®ä¸ä¸€è‡´</strong></p></li></ul><ul><li><p>å…ˆåˆ é™¤ç¼“å­˜ï¼Œå†å†™å…¥æ•°æ®åº“ï¼ˆä½å¹¶å‘ä¼˜åŒ–ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109280833664.png" alt="8 å¼ å›¾å¸¦ä½ åˆ†æ Redis ä¸ MySQL æ•°æ®ä¸€è‡´æ€§é—®é¢˜_redis_06"></p><p>å…ˆå°†ç¼“å­˜åˆ é™¤ï¼Œä¸‹ä¸ªè¿›ç¨‹å†è¯·æ±‚æ›´æ–°åçš„æ•°æ®åº“æ¥æ›´æ–°ç¼“å­˜ï¼Œè¿™ç§æ–¹æ¡ˆåªé€‚åˆä½å¹¶å‘ä¸­ä½¿ç”¨ï¼Œåœ¨é«˜å¹¶å‘ä¸­ä¸€æ—¦ä¸‹ä¸€ä¸ªè¿›ç¨‹åœ¨å‰ä¸€ä¸ªè¿›ç¨‹æ›´æ–°æ•°æ®åº“å‰å°±å»æ›´æ–°ç¼“å­˜ï¼Œé‚£ç¼“å­˜ä¸­æ”¾å…¥çš„ä¾æ—§æ˜¯æ—§æ•°æ®</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109280843114.png" alt="8 å¼ å›¾å¸¦ä½ åˆ†æ Redis ä¸ MySQL æ•°æ®ä¸€è‡´æ€§é—®é¢˜_æ•°æ®ä¸€è‡´æ€§_07"></p></li><li><p>å»¶æ—¶åŒåˆ ç­–ç•¥</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109280844096.png" alt="8 å¼ å›¾å¸¦ä½ åˆ†æ Redis ä¸ MySQL æ•°æ®ä¸€è‡´æ€§é—®é¢˜_æ•°æ®ä¸€è‡´æ€§_08"></p><p>å…ˆå°†ç¼“å­˜åˆ é™¤ï¼Œåœ¨æ›´æ–°æ•°æ®åº“åå†æ¬¡åˆ é™¤ç¼“å­˜ï¼Œå¯ä»¥å¾ˆå¿«è§£å†³ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œä½†æ˜¯ä»ç„¶æœ‰ç¬¬äºŒæ¬¡åˆ é™¤é”™è¯¯ï¼Œå¤šå†™å¤šè¯»é«˜å¹¶å‘æƒ…å†µä¸‹å¯¹ MySQLè®¿é—®çš„å‹åŠ›ï¼ˆè¿™æ—¶å€™å…¶å®å¯ä»¥åŠ å…¥æ¶ˆæ¯é˜Ÿåˆ—å¼‚æ­¥è§£å†³ï¼Œåé¢ä¼šè®²åˆ°<strong>å¼‚æ­¥æ¶æ„</strong>ï¼‰</p><ul><li>ç›´æ¥æ“ä½œç¼“å­˜ï¼Œå®šæœŸå†™å…¥sqlï¼ˆé€‚åˆé«˜å¹¶å‘ï¼‰</li></ul><img src="https://bigsai.oss-cn-shanghai.aliyuncs.com/img/image-20201106192531468.png" alt="8 å¼ å›¾å¸¦ä½ åˆ†æ Redis ä¸ MySQL æ•°æ®ä¸€è‡´æ€§é—®é¢˜_redis_09" style="zoom: 50%;"><p>åœ¨é«˜å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œæœ€ä½³çš„æ–¹æ³•æ˜¯ç›´æ¥æ›´æ–°ç¼“å­˜ï¼Œå°†ç¼“å­˜å®šæœŸæ›´æ–°åˆ°æ•°æ®åº“</p><h3 id="å¼‚æ­¥æ¶æ„"><a href="#å¼‚æ­¥æ¶æ„" class="headerlink" title="å¼‚æ­¥æ¶æ„"></a>å¼‚æ­¥æ¶æ„</h3><h4 id="1-å¼‚æ­¥æ¶æ„ç®€ä»‹"><a href="#1-å¼‚æ­¥æ¶æ„ç®€ä»‹" class="headerlink" title="1.å¼‚æ­¥æ¶æ„ç®€ä»‹"></a>1.å¼‚æ­¥æ¶æ„ç®€ä»‹</h4><h5 id="ï¼ˆ1ï¼‰éœ€æ±‚"><a href="#ï¼ˆ1ï¼‰éœ€æ±‚" class="headerlink" title="ï¼ˆ1ï¼‰éœ€æ±‚"></a>ï¼ˆ1ï¼‰éœ€æ±‚</h5><p>ç¼“å­˜å®é™…ä¸Šæ›´å¤šè§£å†³äº†<strong>è¯»</strong>çš„é—®é¢˜ï¼Œå› ä¸ºç¼“å­˜å¾ˆéš¾ä¿è¯æ•°æ®çš„æŒä¹…æ€§å’Œä¸€è‡´æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šå¸¸ä¸ä¼šå°†æ•°æ®ç›´æ¥å†™å…¥ç¼“å­˜ä¸­ï¼Œè€Œæ˜¯å†™å…¥ RDBMAS ç­‰æ•°æ®ä¸­ï¼Œè¿™æ—¶å€™æˆ‘ä»¬ä½¿ç”¨<strong>æ¶ˆæ¯é˜Ÿåˆ—</strong>çš„<strong>å¼‚æ­¥æ¶æ„</strong>æå‡ç³»ç»Ÿçš„<strong>å†™</strong>çš„æ€§èƒ½</p><h5 id="ï¼ˆ2ï¼‰åŒæ­¥æ¶æ„ä¸å¼‚æ­¥æ¶æ„"><a href="#ï¼ˆ2ï¼‰åŒæ­¥æ¶æ„ä¸å¼‚æ­¥æ¶æ„" class="headerlink" title="ï¼ˆ2ï¼‰åŒæ­¥æ¶æ„ä¸å¼‚æ­¥æ¶æ„"></a>ï¼ˆ2ï¼‰åŒæ­¥æ¶æ„ä¸å¼‚æ­¥æ¶æ„</h5><p>åŒæ­¥æ¶æ„ï¼šåº”ç”¨ç¨‹åºè°ƒç”¨æœåŠ¡æ—¶ï¼Œé˜»å¡è¿›ç¨‹ç­‰å¾…æœåŠ¡å®Œæˆï¼Œç›´åˆ°è¿”å›æœåŠ¡ç»“æœæ‰ä¼šç»§ç»­æ‰§è¡Œ</p><img src="https://mmbiz.qpic.cn/mmbiz_png/NdsdouZwicac3O5p5TVPt4OwoCeI8CEaIibdELIzMiaRPrmvKlcZjMYAtPI749qIqO07O4PxJNtEg8yV9wsdHUkpw/640?wx_fmt=png" alt="img" style="zoom:67%;"><p>è¿™æ ·çš„é˜»å¡ä¼šå¸¦æ¥ä»¥ä¸‹é—®é¢˜ï¼š</p><ul><li>ä¸èƒ½é‡Šæ”¾å ç”¨çš„ç³»ç»Ÿèµ„æºï¼Œå¯¼è‡´ç³»ç»Ÿèµ„æºä¸è¶³ï¼Œå½±å“ç³»ç»Ÿæ€§èƒ½</li><li>æ— æ³•å¿«é€Ÿç»™ç”¨æˆ·å“åº”ç»“æœ</li></ul><p>å¼‚æ­¥æ¶æ„ï¼šåº”ç”¨ç¨‹åºå°†è°ƒç”¨ä¿¡æ¯å‘ç»™æ¶ˆæ¯é˜Ÿåˆ—å°±ç›´æ¥è¿”å›ï¼Œåº”ç”¨ç¨‹åºæ”¶åˆ°è¿”å›åç»§ç»­æ‰§è¡Œï¼Œå¿«é€Ÿå“åº”ç”¨æˆ·é‡Šæ”¾èµ„æºã€‚æœ‰ä¸“é—¨çš„æ¶ˆè´¹é˜Ÿåˆ—ç¨‹åºä»ä¸­æ¶ˆæ¯é˜Ÿåˆ—å–å‡ºæ¶ˆæ¯å‘é€ç»™é‚®ç®±æœåŠ¡å™¨æœ€åå°†è¿”å›ç»“æœé€šçŸ¥æ¶ˆæ¯é˜Ÿåˆ—</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109281929483.png" alt="img"></p><ul><li></li></ul><h4 id="2-æ¶ˆæ¯é˜Ÿåˆ—"><a href="#2-æ¶ˆæ¯é˜Ÿåˆ—" class="headerlink" title="2.æ¶ˆæ¯é˜Ÿåˆ—"></a>2.æ¶ˆæ¯é˜Ÿåˆ—</h4><h5 id="ï¼ˆ1ï¼‰æ¶ˆæ¯é˜Ÿåˆ—æ¨¡å‹"><a href="#ï¼ˆ1ï¼‰æ¶ˆæ¯é˜Ÿåˆ—æ¨¡å‹" class="headerlink" title="ï¼ˆ1ï¼‰æ¶ˆæ¯é˜Ÿåˆ—æ¨¡å‹"></a>ï¼ˆ1ï¼‰æ¶ˆæ¯é˜Ÿåˆ—æ¨¡å‹</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109281946207.png" alt="img"></p><p>æ¶ˆæ¯é˜Ÿåˆ—æ¨¡å‹æœ‰ä¸‰ä¸ªè§’è‰²ï¼š</p><ul><li>ç”Ÿäº§è€…ï¼šäº§ç”Ÿæ•°æ®å°è£…å‘ç»™æ¶ˆæ¯é˜Ÿåˆ—</li><li>æ¶ˆæ¯é˜Ÿåˆ—ï¼šå­˜å‚¨æ¥æ”¶åˆ°çš„æ¶ˆæ¯</li><li>æ¶ˆè´¹è€…ï¼šä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­å–å‡ºæ•°æ®ï¼Œæ¶ˆè´¹æ•°æ®</li></ul><h5 id="ï¼ˆ2ï¼‰æ¶ˆè´¹æ¨¡å¼"><a href="#ï¼ˆ2ï¼‰æ¶ˆè´¹æ¨¡å¼" class="headerlink" title="ï¼ˆ2ï¼‰æ¶ˆè´¹æ¨¡å¼"></a>ï¼ˆ2ï¼‰æ¶ˆè´¹æ¨¡å¼</h5><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://segmentfault.com/a/1190000019411260">https://segmentfault.com/a/1190000019411260</a></p><ul><li><p>ç‚¹å¯¹ç‚¹æ¨¡å¼ï¼šä¸å¯é‡å¤æ¶ˆè´¹ï¼ŒQueueæ”¯æŒå­˜åœ¨å¤šä¸ªæ¶ˆè´¹è€…ï¼Œä½†æ˜¯å¯¹ä¸€ä¸ªæ¶ˆæ¯è€Œè¨€ï¼Œåªä¼šæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…å¯ä»¥æ¶ˆè´¹</p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109281957502.jpeg" alt="img" style="zoom:67%;"></li></ul><ul><li><p>è®¢é˜…æ¨¡å¼ï¼šå¯ä»¥é‡å¤æ¶ˆè´¹ï¼Œå‘å¸ƒåˆ°topicçš„æ¶ˆæ¯ä¼šè¢«æ‰€æœ‰è®¢é˜…è€…æ¶ˆè´¹</p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109281957275.jpeg" alt="img" style="zoom: 60%;"></li></ul><h5 id="ï¼ˆ3ï¼‰æ¶ˆæ¯é˜Ÿåˆ—çš„ä¼˜ç‚¹"><a href="#ï¼ˆ3ï¼‰æ¶ˆæ¯é˜Ÿåˆ—çš„ä¼˜ç‚¹" class="headerlink" title="ï¼ˆ3ï¼‰æ¶ˆæ¯é˜Ÿåˆ—çš„ä¼˜ç‚¹"></a>ï¼ˆ3ï¼‰æ¶ˆæ¯é˜Ÿåˆ—çš„ä¼˜ç‚¹</h5><ul><li><strong>å®ç°å¼‚æ­¥å¤„ç†ï¼Œæå‡å¤„ç†æ€§èƒ½</strong>ï¼šä¸å†é˜»å¡å®¢æˆ·ç«¯ç¨‹åºï¼Œæé«˜å®¢æˆ·ç«¯ç¨‹åºçš„å¤„ç†æ€§èƒ½</li><li><strong>å¯ä»¥è®©ç³»ç»Ÿè·å¾—æ›´å¥½çš„ä¼¸ç¼©æ€§</strong>ï¼šè€—æ—¶çš„ä»»åŠ¡å¯ä»¥é€šè¿‡åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå‘å¤šå°æ¶ˆè´¹è€…æœåŠ¡å™¨å¹¶è¡Œå‘é€æ¶ˆæ¯ï¼Œç„¶ååœ¨å¾ˆå¤šå°æ¶ˆè´¹è€…æœåŠ¡å™¨ä¸Š<strong>å¹¶è¡Œå¤„ç†æ¶ˆæ¯</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥åœ¨å¤šå°ç‰©ç†æœåŠ¡å™¨ä¸Šè¿è¡Œæ¶ˆè´¹è€…</li><li><strong>å¯ä»¥å¹³è¡¡æµé‡å³°å€¼ï¼Œå‰Šå³°å¡«è°·</strong>ï¼šé€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—çš„ç¼“å†²ï¼Œå°†è®¿é—®çš„é«˜å³°æ¶ˆæ‰ï¼Œè€Œå°†è®¿é—®çš„ä½è°·å¡«å¹³ï¼Œä½¿ç³»ç»Ÿå¤„åœ¨ä¸€ä¸ªæœ€ä½³çš„å¤„ç†çŠ¶æ€ä¹‹ä¸‹ï¼Œä¸ä¼šå¯¹ç³»ç»Ÿçš„è´Ÿè½½äº§ç”Ÿå¤ªå¤§çš„å†²å‡»</li><li><strong>å¤±è´¥éš”ç¦»å’Œè‡ªæˆ‘ä¿®å¤</strong>ï¼šç”Ÿäº§è€…ä¸ç›´æ¥ä¾èµ–æ¶ˆè´¹è€…ï¼Œæ‰€ä»¥åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—å¯ä»¥å°†æ¶ˆè´¹è€…ç³»ç»Ÿäº§ç”Ÿçš„é”™è¯¯å¼‚å¸¸ä¸ç”Ÿäº§è€…ç³»ç»Ÿéš”ç¦»å¼€æ¥ï¼Œç”Ÿäº§è€…ä¸å—æ¶ˆè´¹è€…å¤±è´¥çš„å½±å“</li><li><strong>ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„ä»£ç å®ç°è§£è€¦åˆ</strong>ï¼šå¤šä¸ªç”Ÿäº§è€…å‘å¸ƒæ¶ˆæ¯ï¼Œå¤šä¸ªæ¶ˆè´¹è€…å¤„ç†æ¶ˆæ¯ï¼Œå…±åŒå®Œæˆå®Œæ•´çš„ä¸šåŠ¡å¤„ç†é€»è¾‘ï¼Œä½†æ˜¯å®ƒä»¬çš„ä¸éœ€è¦ç›´æ¥çš„äº¤äº’è°ƒç”¨ï¼Œæ²¡æœ‰ä»£ç çš„ä¾èµ–è€¦åˆ</li></ul><h4 id="3-å¼‚æ­¥æ¶æ„æ€»ç»“"><a href="#3-å¼‚æ­¥æ¶æ„æ€»ç»“" class="headerlink" title="3.å¼‚æ­¥æ¶æ„æ€»ç»“"></a>3.å¼‚æ­¥æ¶æ„æ€»ç»“</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109281953133.png" alt="img"></p><h3 id="è´Ÿè½½å‡è¡¡"><a href="#è´Ÿè½½å‡è¡¡" class="headerlink" title="è´Ÿè½½å‡è¡¡"></a>è´Ÿè½½å‡è¡¡</h3><p>è´Ÿè½½å‡è¡¡æ˜¯ä¸€ç§å°†è¯·æ±‚åˆ†å‘åˆ°ä¸åŒæœåŠ¡å™¨ä»¥åˆ†æ•£é«˜å¹¶å‘è®¡ç®—å‹åŠ›çš„ç­–ç•¥</p><h4 id="1-è´Ÿè½½å‡è¡¡æ–¹æ¡ˆ"><a href="#1-è´Ÿè½½å‡è¡¡æ–¹æ¡ˆ" class="headerlink" title="1.è´Ÿè½½å‡è¡¡æ–¹æ¡ˆ"></a>1.è´Ÿè½½å‡è¡¡æ–¹æ¡ˆ</h4><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://segmentfault.com/a/1190000022328323">https://segmentfault.com/a/1190000022328323</a></p><h5 id="ï¼ˆ1ï¼‰HTTPé‡å®šå‘è´Ÿè½½å‡è¡¡"><a href="#ï¼ˆ1ï¼‰HTTPé‡å®šå‘è´Ÿè½½å‡è¡¡" class="headerlink" title="ï¼ˆ1ï¼‰HTTPé‡å®šå‘è´Ÿè½½å‡è¡¡"></a>ï¼ˆ1ï¼‰HTTPé‡å®šå‘è´Ÿè½½å‡è¡¡</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109282037827.png" alt="img"></p><p>ç”¨æˆ·è¯·æ±‚åˆ°HTTPé‡å®šå‘è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ï¼Œç”¨ä¸€å¥—è´Ÿè½½å‡è¡¡ç®—æ³•<strong>è®¡ç®—åˆ°åç«¯æœåŠ¡å™¨çš„åœ°å€</strong>ï¼Œç„¶åå°†æ–°çš„åœ°å€ç»™ç”¨æˆ·æµè§ˆå™¨ï¼Œæµè§ˆå™¨æ”¶åˆ°é‡å®šå‘å“åº”åå‘é€è¯·æ±‚åˆ°æ–°çš„åº”ç”¨æœåŠ¡å™¨ä»è€Œå®ç°è´Ÿè½½å‡è¡¡</p><p>ç¼ºç‚¹ï¼š</p><ul><li>åŠ å¤§è¯·æ±‚çš„å·¥ä½œé‡ï¼Œç”¨æˆ·ç«¯è¦è¿›è¡Œä¸¤æ¬¡è¯·æ±‚</li><li>é›†ç¾¤IPåœ°å€éœ€è¦æš´éœ²åœ¨å…¬ç½‘ï¼Œå®‰å…¨æ€§ä½</li></ul><h5 id="ï¼ˆ2ï¼‰DNSè´Ÿè½½å‡è¡¡"><a href="#ï¼ˆ2ï¼‰DNSè´Ÿè½½å‡è¡¡" class="headerlink" title="ï¼ˆ2ï¼‰DNSè´Ÿè½½å‡è¡¡"></a>ï¼ˆ2ï¼‰DNSè´Ÿè½½å‡è¡¡</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109282038685.png" alt="img"></p><p>ç”¨æˆ·é€šè¿‡æµè§ˆå™¨å‘èµ·HTTPè¯·æ±‚çš„æ—¶å€™ï¼ŒDNS é€šè¿‡å¯¹åŸŸåè¿›è¡Œè§£æå¾—åˆ° IP åœ°å€ï¼Œç”¨æˆ·å§”æ‰˜åè®®æ ˆçš„ IP åœ°å€å»ºç«‹HTTP è¿æ¥è®¿é—®çœŸæ­£çš„æœåŠ¡å™¨ï¼Œä¸åŒçš„ç”¨æˆ·è¿›è¡ŒåŸŸåè§£æå°†ä¼šè·å–ä¸åŒçš„IPåœ°å€ä»è€Œå®ç°è´Ÿè½½å‡è¡¡</p><ul><li>é€šè¿‡ <strong>DNS è§£æ</strong>è·å–è´Ÿè½½å‡è¡¡é›†ç¾¤æŸå°æœåŠ¡å™¨çš„<strong>åœ°å€</strong></li><li>ä¸ç”¨æ¯æ¬¡éƒ½è¯·æ±‚è´Ÿè½½çš„ip,å¯ä»¥<strong>ç¼“å­˜</strong>èµ·æ¥ï¼Œé‡å¤ä½¿ç”¨ï¼Œæé«˜æ€§èƒ½</li><li>DNSä¸ç”¨æš´éœ²å®é™…è®¡ç®—çš„æœåŠ¡å™¨IPï¼ˆä¸æ˜¯é‡‡ç”¨é‡å®šå‘çš„æ–¹å¼æš´éœ²åœ¨æµè§ˆå™¨ï¼Œè€Œä¸”åšäº†äºŒæ¬¡è´Ÿè½½å‡è¡¡ï¼Œå†…ç½‘çš„IPä¸ä¼šæš´éœ²å‡ºæ¥ï¼‰</li></ul><h5 id="ï¼ˆ3ï¼‰åå‘ä»£ç†è´Ÿè½½å‡è¡¡"><a href="#ï¼ˆ3ï¼‰åå‘ä»£ç†è´Ÿè½½å‡è¡¡" class="headerlink" title="ï¼ˆ3ï¼‰åå‘ä»£ç†è´Ÿè½½å‡è¡¡"></a>ï¼ˆ3ï¼‰åå‘ä»£ç†è´Ÿè½½å‡è¡¡</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109282040480.png" alt="img"></p><p>å®¢æˆ·ç«¯è¯·æ±‚åå‘ä»£ç†æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨æ ¹æ®ç®—æ³•å¾—åˆ°è´Ÿè½½çš„IPï¼Œç”±åå‘ä»£ç†æœåŠ¡å™¨ä»£ç†å®¢æˆ·ç«¯è¯·æ±‚å†…ç½‘çš„åº”ç”¨æœåŠ¡å™¨é›†ç¾¤ï¼Œæœ€åå°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯</p><p>å¸¸ç”¨çš„åå‘ä»£ç†æœ‰ï¼šnignxï¼Œapache</p><p>åŸºäºhttpå±‚åšçš„è´Ÿè½½å‡è¡¡ï¼Œæ˜¯ä¸€ä¸ªæ¯”è¾ƒé‡çš„åè®®ï¼Œæ•ˆç‡ç•¥ä½ï¼Œä¸€èˆ¬é€‚ç”¨äºæ¯”è¾ƒå°çš„é›†ç¾¤ï¼Œ10+è§„æ¨¡</p><h5 id="ï¼ˆ4ï¼‰IPè´Ÿè½½å‡è¡¡"><a href="#ï¼ˆ4ï¼‰IPè´Ÿè½½å‡è¡¡" class="headerlink" title="ï¼ˆ4ï¼‰IPè´Ÿè½½å‡è¡¡"></a>ï¼ˆ4ï¼‰IPè´Ÿè½½å‡è¡¡</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109290839127.png" alt="img"></p><p>å®¢æˆ·ç«¯è¯·æ±‚è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ä¿®æ”¹ç›®æ ‡IPä¸ºå†…ç½‘æœºå™¨çš„IPï¼Œæœ€åè¿”å›å“åº”æ•°æ®å¹¶ä¿®æ”¹å“åº”åœ°å€ä¸ºå…¬ç½‘ip</p><p>å¯¹ç½‘ç»œå±‚çš„IPåœ°å€è¿›è¡Œæ›¿æ¢ï¼Œä¸éœ€è¦åœ¨httpå±‚å·¥ä½œï¼Œç›´æ¥åœ¨æ“ä½œç³»ç»Ÿå†…æ ¸çš„IPæ•°æ®åŒ…ä¸­æ›¿æ¢åœ°å€ã€‚æ•ˆç‡æ¯”åŸºäºHTTPå±‚çš„åå‘ä»£ç†é«˜</p><p>è¯·æ±‚å’Œå“åº”åº¦éœ€è¦ç»è¿‡è´Ÿè½½å‡è¡¡æœåŠ¡å™¨è¿›è¡Œipå±‚æ›¿æ¢ï¼Œå“åº”æ•°æ®ä¼šæˆä¸ºåæœŸçš„ç“¶é¢ˆ</p><h5 id="ï¼ˆ5ï¼‰æ•°æ®é“¾è·¯è´Ÿè½½å‡è¡¡"><a href="#ï¼ˆ5ï¼‰æ•°æ®é“¾è·¯è´Ÿè½½å‡è¡¡" class="headerlink" title="ï¼ˆ5ï¼‰æ•°æ®é“¾è·¯è´Ÿè½½å‡è¡¡"></a>ï¼ˆ5ï¼‰æ•°æ®é“¾è·¯è´Ÿè½½å‡è¡¡</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109282038248.png" alt="img"></p><p>å®¢æˆ·ç«¯è¯·æ±‚è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ï¼Œè´Ÿè½½å‡è¡¡æœåŠ¡å™¨æ›¿æ¢macåœ°å€åº”ç”¨æœåŠ¡å™¨ï¼Œipä¸ºè´Ÿè½½å‡è¡¡æœåŠ¡å™¨ipï¼Œè®¡ç®—æœåŠ¡å™¨ç›´æ¥å“åº”æ•°æ®åˆ°å®¢æˆ·ç«¯ï¼›</p><p>è§£å†³å“åº”æ•°æ®ä½“é‡è¿‡å¤§æ•ˆç‡ä½çš„é—®é¢˜ï¼Œé€šè¿‡ä¿®æ”¹æ•°æ®é“¾è·¯å±‚çš„macåœ°å€ï¼Œipä½¿ç”¨çš„æ˜¯è™šæ‹ŸIPï¼Œæ¥å®ç°è´Ÿè½½å‡è¡¡</p><p>è¯¥è´Ÿè½½å‡è¡¡æ–¹å¼ååé‡é«˜ï¼Œé€‚åˆå¤§å‹äº’è”ç½‘å…¬å¸ä½¿ç”¨</p><h4 id="2-è´Ÿè½½å‡è¡¡ç®—æ³•"><a href="#2-è´Ÿè½½å‡è¡¡ç®—æ³•" class="headerlink" title="2.è´Ÿè½½å‡è¡¡ç®—æ³•"></a>2.è´Ÿè½½å‡è¡¡ç®—æ³•</h4><p>å‚è€ƒèµ„æ–™ï¼š</p><p><a href="http://www.zhengdexing.org/2019/04/16/LoadBalancing">è´Ÿè½½å‡è¡¡ç®—æ³•ä»‹ç»</a></p><p><a href="https://segmentfault.com/a/1190000022799223">è´Ÿè½½å‡è¡¡ç®—æ³•å®ç°</a></p><h5 id="ï¼ˆ1ï¼‰è½®è¯¢è®¿é—®"><a href="#ï¼ˆ1ï¼‰è½®è¯¢è®¿é—®" class="headerlink" title="ï¼ˆ1ï¼‰è½®è¯¢è®¿é—®"></a>ï¼ˆ1ï¼‰è½®è¯¢è®¿é—®</h5><p>å°†è¯·æ±‚æŒ‰ç…§é¡ºåºè½®æµçš„åˆ†é…åˆ°æœåŠ¡å™¨ä¸Šï¼Œå‡è¡¡çš„å¯¹å¾…æ¯ä¸€å°åç«¯çš„æœåŠ¡å™¨,ä¸å…³å¿ƒæœåŠ¡å™¨çš„çš„è¿æ¥æ•°å’Œè´Ÿè½½æƒ…å†µï¼Œå¯èƒ½å¯¼è‡´æ€§èƒ½é«˜çš„æœåŠ¡å™¨æ— æ³•å®Œå…¨å‘æŒ¥å®åŠ›ï¼Œæ€§èƒ½ä½çš„æœåŠ¡å™¨æ— æ³•æ‰¿è½½è¿‡å¤§çš„è´Ÿè½½</p><p>å¦‚ä¸‹å›¾ï¼šæ¥è‡ªå®¢æˆ·ç«¯çš„6ä¸ªè¯·æ±‚è¢«å‡åŒ€åˆ†å‘ç»™ä¸¤å°åº”ç”¨æœåŠ¡å™¨</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109290902293.png" alt="img"></p><h5 id="ï¼ˆ2ï¼‰éšæœºè®¿é—®"><a href="#ï¼ˆ2ï¼‰éšæœºè®¿é—®" class="headerlink" title="ï¼ˆ2ï¼‰éšæœºè®¿é—®"></a>ï¼ˆ2ï¼‰éšæœºè®¿é—®</h5><p>æ ¹æ®æœåŠ¡å™¨åˆ—è¡¨çš„å¤§å°æ¥éšæœºè·å–å…¶ä¸­çš„ä¸€å°æ¥è®¿é—®ï¼Œéšç€è°ƒç”¨é‡çš„å¢å¤§ï¼Œå®é™…æ•ˆæœè¶Šæ¥è¶Šè¿‘ä¼¼äºå¹³å‡åˆ†é…åˆ°æ²¡ä¸€å°æœåŠ¡å™¨ï¼Œå’Œè½®è¯¢çš„æ•ˆæœç±»ä¼¼ï¼Œæ¯”è¾ƒé€‚åˆæœåŠ¡å™¨æ€§èƒ½å·®ä¸å¤šçš„åœºæ™¯</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109290912846.png" alt="img"></p><h5 id="ï¼ˆ3ï¼‰åŠ æƒè½®è¯¢"><a href="#ï¼ˆ3ï¼‰åŠ æƒè½®è¯¢" class="headerlink" title="ï¼ˆ3ï¼‰åŠ æƒè½®è¯¢"></a>ï¼ˆ3ï¼‰åŠ æƒè½®è¯¢</h5><p>åŠ æƒè½®è¯¢æ˜¯åœ¨è½®è¯¢çš„åŸºç¡€ä¸Šï¼Œæ ¹æ®æœåŠ¡å™¨çš„æ€§èƒ½å·®å¼‚ï¼Œä¸ºæœåŠ¡å™¨èµ‹äºˆä¸€å®šçš„æƒå€¼ï¼Œæ€§èƒ½é«˜çš„æœåŠ¡å™¨åˆ†é…æ›´é«˜çš„æƒå€¼</p><p>å¦‚ä¸‹å›¾ï¼šæ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚æŒ‰5:1çš„æƒé‡åˆ†å‘ç»™ä¸¤å°åº”ç”¨æœåŠ¡å™¨</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109290907944.png" alt="img"></p><h5 id="ï¼ˆ4ï¼‰æœ€å°‘è¿æ¥"><a href="#ï¼ˆ4ï¼‰æœ€å°‘è¿æ¥" class="headerlink" title="ï¼ˆ4ï¼‰æœ€å°‘è¿æ¥"></a>ï¼ˆ4ï¼‰æœ€å°‘è¿æ¥</h5><p>ç”±äºæ¯ä¸ªè¯·æ±‚çš„è¿æ¥æ—¶é—´ä¸ä¸€æ ·ï¼Œä½¿ç”¨è½®è¯¢æˆ–è€…åŠ æƒè½®è¯¢ç®—æ³•çš„è¯ï¼Œå¯èƒ½ä¼šè®©ä¸€å°æœåŠ¡å™¨å½“å‰è¿æ¥æ•°è¿‡å¤§ï¼Œè€Œå¦ä¸€å°æœåŠ¡å™¨çš„è¿æ¥è¿‡å°ï¼Œé€ æˆè´Ÿè½½ä¸å‡è¡¡ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥é‡‡ç”¨æœ€å°‘è¿æ¥ç®—æ³•ï¼šå°†è¯·æ±‚å‘é€ç»™å½“å‰æœ€å°‘è¿æ¥æ•°çš„æœåŠ¡å™¨ä¸Š</p><p>å¦‚ä¸‹å›¾ï¼šå½“å‰æœåŠ¡å™¨1å½“å‰è¿æ¥æ•°æœ€å°ï¼Œé‚£ä¹ˆæœ€æ–°çš„è¯·æ±‚å°†ä¼šå‘ç»™æœåŠ¡å™¨1</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109290913344.png" alt="img"></p><p>åœ¨æœ€å°‘è¿æ¥çš„åŸºç¡€ä¸Šï¼Œä¹Ÿæœ‰åŠ æƒæœ€å°‘è¿æ¥ç®—æ³•ï¼šæ ¹æ®æœåŠ¡å™¨çš„æ€§èƒ½ä¸ºæ¯å°æœåŠ¡å™¨åˆ†é…æƒé‡ä»¥è®¡ç®—å‡ºæ¯å°æœåŠ¡å™¨èƒ½å¤„ç†çš„è¿æ¥æ•°</p><h5 id="ï¼ˆ5ï¼‰æºåœ°å€å“ˆå¸Œæ³•"><a href="#ï¼ˆ5ï¼‰æºåœ°å€å“ˆå¸Œæ³•" class="headerlink" title="ï¼ˆ5ï¼‰æºåœ°å€å“ˆå¸Œæ³•"></a>ï¼ˆ5ï¼‰æºåœ°å€å“ˆå¸Œæ³•</h5><p>æºåœ°å€å“ˆå¸Œé€šè¿‡å¯¹å®¢æˆ·ç«¯ IP è®¡ç®—å“ˆå¸Œå€¼ä¹‹åï¼Œå†å¯¹æœåŠ¡å™¨æ•°é‡å–æ¨¡å¾—åˆ°ç›®æ ‡æœåŠ¡å™¨çš„åºå·ã€‚å¯ä»¥ä¿è¯åŒä¸€ IP çš„å®¢æˆ·ç«¯çš„è¯·æ±‚ä¼šè½¬å‘åˆ°åŒä¸€å°æœåŠ¡å™¨ä¸Šï¼Œç”¨æ¥å®ç°ä¼šè¯ç²˜æ»ï¼ˆè®©ç”¨æˆ·åœ¨ä¸€æ¬¡ä¼šè¯å‘¨æœŸå†…çš„æ‰€æœ‰è¯·æ±‚å§‹ç»ˆè½¬å‘åˆ°ä¸€å°ç‰¹å®šçš„åç«¯æœåŠ¡å™¨ä¸Šï¼Œè¿™ç§æœºåˆ¶ä¹Ÿç§°ä¸ºç²˜æ»ä¼šè¯ï¼‰<img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109290915683.png" alt="img"></p><h3 id="æ•°æ®å­˜å‚¨"><a href="#æ•°æ®å­˜å‚¨" class="headerlink" title="æ•°æ®å­˜å‚¨"></a>æ•°æ®å­˜å‚¨</h3><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.cnblogs.com/linuxk/p/9366838.html">https://www.cnblogs.com/linuxk/p/9366838.html</a></p><h4 id="1-æ•°æ®åº“ä¸»ä»å¤åˆ¶"><a href="#1-æ•°æ®åº“ä¸»ä»å¤åˆ¶" class="headerlink" title="1.æ•°æ®åº“ä¸»ä»å¤åˆ¶"></a>1.æ•°æ®åº“ä¸»ä»å¤åˆ¶</h4><h5 id="ï¼ˆ1ï¼‰ä¸€ä¸»å¤šé‡"><a href="#ï¼ˆ1ï¼‰ä¸€ä¸»å¤šé‡" class="headerlink" title="ï¼ˆ1ï¼‰ä¸€ä¸»å¤šé‡"></a>ï¼ˆ1ï¼‰ä¸€ä¸»å¤šé‡</h5><p>ä¸ºäº†é™ä½æ•°æ®åº“çš„å‹åŠ›ï¼Œæ•°æ®åº“æœåŠ¡å™¨å¸¸å¸¸ä½¿ç”¨<strong>ä¸€ä¸»å¤šé‡</strong>ç»“æ„ï¼Œå¯¹äº<strong>å®¹ç¾ã€å¯æ‰©å±•æ€§å’Œé«˜å¯ç”¨æ€§</strong>ï¼Œéƒ½æ˜¯æœ‰å¥½å¤„ï¼Œä¸€ä¸»å¤šé‡ç»“æ„ä¸»è¦ä¾èµ–äº<strong>ä¸»ä»å¤åˆ¶</strong>ä¸<strong>è¯»å†™åˆ†ç¦»</strong></p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109291452911.png" alt="image-20210929145219480" style="zoom:67%;"><h5 id="ï¼ˆ2ï¼‰ä¸»ä»å¤åˆ¶"><a href="#ï¼ˆ2ï¼‰ä¸»ä»å¤åˆ¶" class="headerlink" title="ï¼ˆ2ï¼‰ä¸»ä»å¤åˆ¶"></a>ï¼ˆ2ï¼‰ä¸»ä»å¤åˆ¶</h5><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pbWFnZXMyMDE4LmNuYmxvZ3MuY29tL2Jsb2cvMTM0OTUzOS8yMDE4MDcvMTM0OTUzOS0yMDE4MDcyNTE2NDY0Njk1MS05NTkzODQ4MS5wbmc" alt="img"><p>ä¸»ä»å¤åˆ¶å³è¦è®©ä¸»åº“å’Œä»åº“çš„æ•°æ®ä¸€è‡´ï¼Œå…¶å®ç°æ­¥éª¤ä¸ºï¼š</p><ul><li>ä»åº“IOçº¿ç¨‹é€šè¿‡ä¸»åº“åˆ›å»ºçš„æˆæƒç”¨æˆ·è¿æ¥ä¸Šmaster</li><li>åº”ç”¨ç¨‹åºå‘é€SQLæ›´æ–°å‘½ä»¤åˆ°ä¸»åº“ï¼Œä¸»åº“å°†è¯¥å‘½ä»¤åŒæ­¥è®°å½•åˆ°Binlogä¸­</li><li>ä¸»åº“IOçº¿ç¨‹å¯¹ä»åº“IOçº¿ç¨‹çš„è¯·æ±‚è¿›è¡ŒéªŒè¯åï¼Œå°†å‘½ä»¤å’Œä¸‹ä¸€ä¸ªæŒ‡å®šæ›´æ–°çš„ä½ç½®ï¼ˆpositionï¼‰å‘é€åˆ°ä»åº“</li><li>ä»åº“æ¥æ”¶æ›´æ–°æ—¥å¿—ååŠ å…¥åˆ°è‡ªå·±çš„RelayLogæ–‡ä»¶æœ«ç«¯ï¼Œå¹¶å°†è¯»å–åˆ°çš„ä¸»åº“Binlogæ–‡ä»¶åå’Œpositionè®°å½•åˆ°master.infoæ–‡ä»¶</li><li>ä»åº“SQLçº¿ç¨‹æ£€æµ‹åˆ°RelayLogä¸­çš„å†…å®¹æœ‰æ›´æ–°ï¼Œä¼šç«‹åˆ»è§£æå†…å®¹å¹¶æ‰§è¡Œè§£æåçš„SQLè¯­å¥</li></ul><h5 id="ï¼ˆ3ï¼‰è¯»å†™åˆ†ç¦»"><a href="#ï¼ˆ3ï¼‰è¯»å†™åˆ†ç¦»" class="headerlink" title="ï¼ˆ3ï¼‰è¯»å†™åˆ†ç¦»"></a>ï¼ˆ3ï¼‰è¯»å†™åˆ†ç¦»</h5><p>ä¸»ä»å¤åˆ¶éœ€è¦æ—¶é—´ï¼Œå‘ä¸»åº“å†™å…¥æ•°æ®åï¼Œå¦‚æœç›´æ¥ä»ä»åº“è¯»å–ï¼Œå¾ˆå¯èƒ½è¯»ä¸åˆ°æœ€æ–°å€¼ï¼Œæ‰€ä»¥è¯»å†™åˆ†ç¦»ä¸»è¦ç”¨äºå¯¹å®æ—¶æ€§è¦æ±‚ä¸é«˜çš„ä¸šåŠ¡åœºæ™¯</p><ul><li>æ•°æ®åº“ä¸»æœºè´Ÿè´£è¯»å†™æ“ä½œï¼Œä»æœºåªè´Ÿè´£è¯»æ“ä½œ</li><li>æ•°æ®åº“ä¸»æœºé€šè¿‡å¤åˆ¶å°†æ•°æ®åŒæ­¥åˆ°ä»æœºï¼Œæ¯å°æ•°æ®åº“æœåŠ¡å™¨éƒ½å­˜å‚¨äº†æ‰€æœ‰çš„ä¸šåŠ¡æ•°æ®</li><li>åº”ç”¨æœåŠ¡å™¨å°†å†™æ“ä½œå‘ç»™æ•°æ®åº“ä¸»æœºï¼Œå°†è¯»æ“ä½œå‘ç»™æ•°æ®åº“ä»æœº</li></ul><h4 id="2-æ•°æ®åº“åˆ†ç‰‡"><a href="#2-æ•°æ®åº“åˆ†ç‰‡" class="headerlink" title="2.æ•°æ®åº“åˆ†ç‰‡"></a>2.æ•°æ®åº“åˆ†ç‰‡</h4><p>å‚è€ƒèµ„æ–™<a href="https://segmentfault.com/a/1190000015627336">https://segmentfault.com/a/1190000015627336</a></p><h5 id="ï¼ˆ1ï¼‰åˆ†ç‰‡ç®€ä»‹"><a href="#ï¼ˆ1ï¼‰åˆ†ç‰‡ç®€ä»‹" class="headerlink" title="ï¼ˆ1ï¼‰åˆ†ç‰‡ç®€ä»‹"></a>ï¼ˆ1ï¼‰åˆ†ç‰‡ç®€ä»‹</h5><p>åˆ†ç‰‡æ˜¯è§£å†³æ•°æ®åº“å­˜å‚¨å®¹é‡é™åˆ¶çš„ç›´æ¥é€”å¾„ã€‚åˆ†ç‰‡åŒ…æ‹¬<strong>å‚ç›´åˆ†ç‰‡</strong>ä¸<strong>æ°´å¹³åˆ†ç‰‡</strong>ä¸¤ç§æ–¹å¼</p><h5 id="ï¼ˆ2ï¼‰å‚ç›´åˆ†ç‰‡"><a href="#ï¼ˆ2ï¼‰å‚ç›´åˆ†ç‰‡" class="headerlink" title="ï¼ˆ2ï¼‰å‚ç›´åˆ†ç‰‡"></a>ï¼ˆ2ï¼‰å‚ç›´åˆ†ç‰‡</h5><p>å‚ç›´åˆ†ç‰‡åˆå«çºµå‘åˆ†å‰²ï¼ŒæŠŠåŸæœ‰æ•°æ®åº“åˆ‡åˆ†æˆæŒ‰ä¸šåŠ¡å¤šä¸ªæ•°æ®åº“ã€‚å‚ç›´æ‹†åˆ†åä¸šåŠ¡æ¸…æ™°ï¼Œæ‹†åˆ†è§„åˆ™æ˜ç¡®ï¼Œç³»ç»Ÿä¹‹é—´å®¹æ˜“æ•´åˆä¸æ‰©å±•</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109291543889.png" alt="å›¾ç‰‡æè¿°"></p><h5 id="ï¼ˆ3ï¼‰æ°´å¹³åˆ†ç‰‡"><a href="#ï¼ˆ3ï¼‰æ°´å¹³åˆ†ç‰‡" class="headerlink" title="ï¼ˆ3ï¼‰æ°´å¹³åˆ†ç‰‡"></a>ï¼ˆ3ï¼‰æ°´å¹³åˆ†ç‰‡</h5><p>æ°´å¹³åˆ†ç‰‡åˆå«æ¨ªå‘åˆ†å‰²ï¼Œå³ä»¥è¡¨ä¸­çš„æ•°æ®è¡Œè®°å½•ä¸ºå•ä½ï¼ŒæŠŠåŸæœ‰é€»è¾‘æ•°æ®åº“åˆ‡åˆ†æˆå¤šä¸ªç‰©ç†æ•°æ®åº“åˆ†ç‰‡ï¼Œè¡¨æ•°æ®è®°å½•åˆ†å¸ƒå­˜å‚¨åœ¨å„ä¸ªåˆ†ç‰‡ä¸Š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109291545069.png" alt="å›¾ç‰‡æè¿°"></p><p>å¸¸ç”¨æ°´å¹³åˆ†ç‰‡çš„è§„åˆ™ï¼šå“ˆå¸Œå–æ¨¡ç®—æ³•<code>H(Key(OrderId)) = Hash(Key(OrderId))%N</code>ï¼Œå°†é”®å€¼ç›¸åŒçš„è¡Œæ”¾åœ¨ä¸€ä¸ªæ•°æ®åº“ä¸­</p><h3 id="æœç´¢å¼•æ“"><a href="#æœç´¢å¼•æ“" class="headerlink" title="æœç´¢å¼•æ“"></a>æœç´¢å¼•æ“</h3><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://leetcode-cn.com/circle/article/7qT9CA/">https://leetcode-cn.com/circle/article/7qT9CA/</a></p><h4 id="1-æœç´¢å¼•æ“æ¶æ„"><a href="#1-æœç´¢å¼•æ“æ¶æ„" class="headerlink" title="1.æœç´¢å¼•æ“æ¶æ„"></a>1.æœç´¢å¼•æ“æ¶æ„</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109291608846.png" alt="img"></p><h4 id="2-æœç´¢å¼•æ“å·¥ä½œåŸç†åˆ†æ"><a href="#2-æœç´¢å¼•æ“å·¥ä½œåŸç†åˆ†æ" class="headerlink" title="2.æœç´¢å¼•æ“å·¥ä½œåŸç†åˆ†æ"></a>2.æœç´¢å¼•æ“å·¥ä½œåŸç†åˆ†æ</h4><h5 id="ï¼ˆ1ï¼‰æœé›†"><a href="#ï¼ˆ1ï¼‰æœé›†" class="headerlink" title="ï¼ˆ1ï¼‰æœé›†"></a>ï¼ˆ1ï¼‰æœé›†</h5><p>ç½‘ç»œçˆ¬è™«çš„èµ·ç‚¹æ˜¯ä¸€ç»„ä¼˜è´¨çš„ç§å­ç½‘é¡µçš„é“¾æ¥ï¼ˆæ–°æµªä¸»é¡µï¼Œè…¾è®¯ä¸»é¡µç­‰ï¼‰ï¼Œé€šè¿‡å¹¿åº¦ä¼˜å…ˆéå†ä¸æ–­éå†è¿™äº›ç½‘é¡µï¼Œçˆ¬å–ç½‘é¡µå†…å®¹ï¼Œæå–å…¶ä¸­çš„é“¾æ¥ï¼Œå¹¶åˆå°†è¿™äº›é“¾æ¥åŠ å…¥å¾…çˆ¬é˜Ÿåˆ—ä¸­ï¼Œé‡å¤ä¸Šé¢æ“ä½œï¼ˆé€’å½’äº†å±äºæ˜¯ï¼‰</p><p><strong>å¾…çˆ¬urlé˜Ÿåˆ—ï¼š</strong></p><p>å¾…çˆ¬å–çš„urlæ”¾å…¥Redisä¸­ï¼Œä¿è¯é«˜æ€§èƒ½ã€‚Rediså¼€å¯æŒä¹…åŒ–åŠŸèƒ½ï¼Œæ”¯æŒæ–­ç‚¹ç»­çˆ¬ï¼Œå³ä¾¿Rediså¯„äº†ï¼Œä¹Ÿå¯ä»¥ä»ä¸Šä¸€ä¸ªå¾…çˆ¬urlé‡æ–°å¼€å§‹çˆ¬</p><p><strong>urlåˆ¤é‡ï¼š</strong></p><p>ä¸ºäº†é¿å…ç½‘é¡µè¢«é‡å¤çˆ¬å–ï¼Œæˆ‘ä»¬ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆä¸Šé¢åº”å¯¹ç¼“å­˜ç©¿é€ä¹Ÿæåˆ°è¿‡ï¼Œå¯ä»¥å¿«é€Ÿåˆ¤æ–­æ•°æ®æ˜¯å¦å­˜åœ¨æ•°æ®åº“ä¸­ï¼‰è¿›è¡Œå»é‡æ“ä½œ</p><p>å¸ƒéš†è¿‡æ»¤å™¨ç”±ã€Œåˆå§‹å€¼éƒ½ä¸º 0 çš„ä½å›¾æ•°ç»„ã€å’Œã€Œ N ä¸ªå“ˆå¸Œå‡½æ•°ã€ä¸¤éƒ¨åˆ†ç»„æˆï¼Œå°†æ•°æ®ï¼ˆurlï¼‰ç»è¿‡å¤šä¸ªå“ˆå¸Œå‡½æ•°å¤„ç†ç”¨ä½å›¾æ•°ç»„è¡¨ç¤ºï¼ŒæŸ¥è¯¢urlæ˜¯å¦è¢«çˆ¬è¿‡æ—¶ï¼Œåªè¦æŸ¥åˆ°ä½å›¾æ•°ç»„å¯¹åº”çš„å€¼æ˜¯å¦å…¨ä¸º1ï¼Œåªè¦æœ‰ä¸€ä¸ª0ï¼Œå°±è®¤ä¸ºè¯¥urlæœªè¢«çˆ¬è¿‡</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109291639347.png" alt="img"></p><p>å¸ƒéš†è¿‡æ»¤å™¨ç”±äºæ˜¯åŸºäºå“ˆå¸Œå‡½æ•°å®ç°æŸ¥æ‰¾çš„ï¼Œé«˜æ•ˆæŸ¥æ‰¾çš„åŒæ—¶å­˜åœ¨å“ˆå¸Œå†²çªçš„å¯èƒ½æ€§ï¼Œ<strong>æŸ¥è¯¢å¸ƒéš†è¿‡æ»¤å™¨è¯´æ•°æ®å­˜åœ¨ï¼Œå¹¶ä¸ä¸€å®šè¯æ˜è¯¥æ•°æ®è¢«å¤„ç†è¿‡ï¼Œä½†æ˜¯æŸ¥è¯¢åˆ°æ•°æ®ä¸å­˜åœ¨ï¼Œè¿™ä¸ªæ•°æ®ä¸€å®šæ˜¯æ²¡æœ‰å¤„ç†è¿‡çš„</strong>ï¼Œé’ˆå¯¹è¿™ç§æƒ…å†µæˆ‘ä»¬å¯ä»¥é€šè¿‡<strong>è°ƒæ•´å¸ƒéš†è¿‡æ»¤å™¨çš„å“ˆå¸Œå‡½æ•°</strong>æˆ–å…¶<strong>åº•å±‚çš„ä½å›¾å¤§å°</strong>æ¥å°½å¯èƒ½åœ°é™ä½è¯¯åˆ¤çš„æ¦‚ç‡ï¼Œè‡³äºå‘ç”Ÿè¯¯åˆ¤çš„å°‘é‡urlï¼Œlet it goï¼ï¼ˆå°±æ˜¯è¿™ä¹ˆç²—æš´ï¼‰</p><p><strong>ç½‘é¡µå­˜å‚¨æ–‡ä»¶ï¼š</strong></p><p>ç½‘é¡µä¿¡æ¯å­˜å‚¨æ–‡ä»¶</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109291654266.png" alt="img"></p><p>ç½‘é¡µid-urlå¯¹åº”æ–‡ä»¶</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109291654439.png" alt="img"></p><h5 id="ï¼ˆ2ï¼‰é¢„å¤„ç†"><a href="#ï¼ˆ2ï¼‰é¢„å¤„ç†" class="headerlink" title="ï¼ˆ2ï¼‰é¢„å¤„ç†"></a>ï¼ˆ2ï¼‰é¢„å¤„ç†</h5><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://mah93.github.io/2019/08/08/string-matching/">å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•</a></p><p>çˆ¬å–å®Œä¸€ä¸ªç½‘é¡µçš„htmlä»£ç åï¼Œéœ€è¦å°†<code>&lt;script&gt;,&lt;style&gt;,&lt;option&gt;</code>è¿™äº›æ— ç”¨çš„æ ‡ç­¾åŠæ ‡ç­¾åŒ…å«çš„å†…å®¹ç»™å»æ‰ï¼Œç„¶åæŠŠå…¶ä»–æ ‡ç­¾ä¹Ÿå»æ‰ä½†æ˜¯ä¿ç•™é‡Œé¢çš„å†…å®¹ï¼Œæœ€åå¾—åˆ°<strong>çº¯æ–‡æœ¬</strong>ï¼ˆå†…å®¹åŒ…å«ç”¨æˆ·è¦æœç´¢çš„å…³é”®è¯ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨<strong>å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•</strong>å¯¹htmlå†…å®¹è¿›è¡Œ<strong>é¢„å¤„ç†</strong>ï¼Œå¯¹äºå­—ç¬¦ä¸²åŒ¹é…ç®—æ³•è¿™é‡Œåˆ—ä¸ªæ¸…å•è‡ªå·±å»æŸ¥ç½¢ :(</p><p>å•æ¨¡å¼ä¸²åŒ¹é…ç®—æ³•ï¼š</p><ul><li>BFç®—æ³•</li><li>RKç®—æ³•</li><li>BMç®—æ³•</li><li>KMPç®—æ³•</li></ul><p>ä¸Šé¢çš„æŸ¥è¯¢ç®—æ³•æŸ¥è¯¢å•ä¸ªå­—ç¬¦ä¸²æ•ˆç‡ç¡®å®ä¸é”™ï¼Œä½†æ˜¯æˆ‘ä»¬è¦ä¸€æ¬¡æ€§æŸ¥å‡º<code>&lt;script&gt;,&lt;style&gt;,&lt;option&gt;</code>è¿™äº›å­—æ®µä¸²ï¼Œå¤šæ¨¡å¼ä¸²åŒ¹é…ç®—æ³•æ›´åŠ é«˜æ•ˆ</p><p>å¤šæ¨¡å¼ä¸²åŒ¹é…ç®—æ³•ï¼š</p><ul><li>ACè‡ªåŠ¨æœº</li></ul><h5 id="ï¼ˆ3ï¼‰åˆ†è¯å¹¶åˆ›å»ºå€’æ’ç´¢å¼•"><a href="#ï¼ˆ3ï¼‰åˆ†è¯å¹¶åˆ›å»ºå€’æ’ç´¢å¼•" class="headerlink" title="ï¼ˆ3ï¼‰åˆ†è¯å¹¶åˆ›å»ºå€’æ’ç´¢å¼•"></a>ï¼ˆ3ï¼‰åˆ†è¯å¹¶åˆ›å»ºå€’æ’ç´¢å¼•</h5><p><strong>åˆ†è¯ï¼š</strong></p><p>é¢„å¤„ç†è·å¾—çº¯æ–‡æœ¬åï¼Œè¦å¯¹æ–‡æœ¬å†…å®¹è¿›è¡Œåˆ†è¯å³æŠŠä¸€æ®µæ–‡æœ¬åˆ‡åˆ†ä¸ºä¸€ä¸ªä¸ªè¯ã€‚è‹±è¯­çš„åˆ†è¯æ¯”è¾ƒç®€å•ï¼Œæ¯ä¸€ä¸ªå•è¯åŸºæœ¬éƒ½æ˜¯ç”¨ç©ºæ ¼éš”å¼€çš„ï¼Œä¸­æ–‡çš„åˆ†è¯æ¯”è¾ƒéš¾åˆ†å‰²ï¼Œä¸€èˆ¬æ˜¯æ ¹æ®ç°æˆçš„è¯åº“è¿›è¡ŒåŒ¹é…ï¼Œæœ‰å…´è¶£å¯ä»¥ç ”ç©¶ä¸€ä¸‹githubä¸Šæœ‰åçš„<a href="https://github.com/fxsjy/jieba">jieba</a>åˆ†è¯å¼€æºåº“</p><p><strong>ç»„ç»‡ï¼š</strong></p><p>åˆ†è¯åï¼Œå°†å•è¯ä¸ç½‘é¡µä¿¡æ¯å­˜å‚¨æ–‡ä»¶ï¼ˆæ–‡æ¡£ï¼‰å¯¹åº”èµ·æ¥ç»„æˆä»¥ä¸‹çŸ©é˜µ</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109291737670.png" alt="img"></p><p><strong>å€’æ’ç´¢å¼•ï¼š</strong></p><p>å†æŒ‰ç…§å•è¯-æ–‡æ¡£ç»„ç»‡èµ·æ¥å°±å«åš<strong>å€’æ’ç´¢å¼•</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109291955544.png" alt="img"></p><p>è¿™æ ·æˆ‘ä»¬åªè¦æœç´¢<strong>å•è¯</strong>ï¼Œå°±èƒ½æ‰¾åˆ°å•è¯å¯¹åº”çš„<strong>æ–‡æ¡£id</strong>ï¼Œä»è€Œå®šä½urlï¼ˆä¸Šé¢åˆ†è¯+å€’æ’ç´¢å¼•çš„å¤„ç†æµç¨‹ï¼Œå°±æ˜¯ ElasticSearch æœç´¢å¼•æ“å¹²çš„äº‹ï¼Œä¹Ÿæ˜¯ ES èƒ½è¾¾åˆ°æ¯«ç§’çº§å“åº”çš„å…³é”®ï¼‰</p><p><strong>æ’åºï¼š</strong></p><p>æ ¹æ®è¯è¯­æˆ‘ä»¬è·å¾—äº†ä¸€ç»„ç½‘é¡µçš„idï¼Œé‚£å“ªäº›ç½‘é¡µåº”è¯¥æ’åœ¨å‰é¢å‘¢ï¼Ÿ</p><p>Googleä½¿ç”¨äº†ä¸€ç§å«åšâ€<strong>PageRank</strong>â€œçš„ç®—æ³•ï¼Œé€šè¿‡è®¡ç®—æ¯ä¸ªç½‘é¡µçš„æƒé‡ï¼Œå¹¶æŒ‰ç…§æƒé‡æ’åºã€‚å®ƒä»¥ç½‘é¡µä¹‹é—´çš„è¶…é“¾æ¥ä¸ªæ•°å’Œè´¨é‡ä½œä¸ºä¸»è¦å› ç´ ç²—ç•¥åœ°åˆ†æç½‘é¡µé‡è¦æ€§ä»¥ä¾¿å¯¹å…¶è¿›è¡Œæ‰“åˆ†ã€‚</p><p>åœ¨PageRankä¸­ï¼Œå¦‚æœç½‘é¡µAåŒ…å«ç½‘é¡µBè¯´æ˜Aè®¤å¯äº†Bï¼Œå³ä¸ºé¡µé¢BæŠ•äº†ä¸€ç¥¨</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109292017540.png" alt="img"></p><p>å¦‚ä¸Šå›¾ï¼šABCD åˆå§‹å€¼éƒ½ä¸º1ï¼Œç„¶åæ ¹æ®å…³ç³»è®¡ç®—æƒé‡ã€‚æ¯”å¦‚æ­¤æ—¶BåŒ…å«äº†ADä¸¤ä¸ªç½‘é¡µï¼Œé‚£ä¹ˆæƒé‡1è¢«åˆ†ä¸ºä¸¤ä¸ª1/2åˆ†åˆ«ç»™Aå’ŒDï¼Œæ­¤æ—¶AåŒ…å«BCDï¼Œé‚£ä¹ˆæ­¤æ—¶Aé¡µé¢æ–°çš„æƒé‡ä¸º1/2 + 1/3 + 1 = 11/6</p><p>æ­¤å¤–è¿˜æœ‰é€šè¿‡<strong>è¯é¢‘TF</strong>è¿›è¡Œæ’åº</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109292024700.png" alt="img"></p><h5 id="ï¼ˆ4ï¼‰æŸ¥è¯¢è¿‡ç¨‹"><a href="#ï¼ˆ4ï¼‰æŸ¥è¯¢è¿‡ç¨‹" class="headerlink" title="ï¼ˆ4ï¼‰æŸ¥è¯¢è¿‡ç¨‹"></a>ï¼ˆ4ï¼‰æŸ¥è¯¢è¿‡ç¨‹</h5><ul><li>ç”¨æˆ·è¾“å…¥æœç´¢å†…å®¹ï¼Œé¦–å…ˆç»è¿‡åˆ†è¯å™¨å¤„ç†</li><li>æŒ‰è·å¾—çš„è¯è¯­å»å€’æ’ç´¢å¼•é‡ŒæŸ¥è¯¢ç›¸åº”æ–‡æ¡£</li><li>å¾—åˆ°ç½‘é¡µidåï¼Œå»ç½‘é¡µå­˜å‚¨æ–‡ä»¶ä¸­æå–å‡ºç½‘é¡µçš„é“¾æ¥å’Œå†…å®¹ï¼Œå†æŒ‰æƒé‡ä»å¤§åˆ°å°æ’åºå³å¯</li></ul><h5 id="ï¼ˆ5ï¼‰å¯»æ‰¾çƒ­é—¨æœç´¢å­—ç¬¦ä¸²"><a href="#ï¼ˆ5ï¼‰å¯»æ‰¾çƒ­é—¨æœç´¢å­—ç¬¦ä¸²" class="headerlink" title="ï¼ˆ5ï¼‰å¯»æ‰¾çƒ­é—¨æœç´¢å­—ç¬¦ä¸²"></a>ï¼ˆ5ï¼‰å¯»æ‰¾çƒ­é—¨æœç´¢å­—ç¬¦ä¸²</h5><p>ç°åœ¨çš„æœç´¢å¼•æ“è¿˜æœ‰ä¸€é¡¹åŠŸèƒ½ï¼šæœç´¢æç¤ºè¯ï¼Œå…¶ä¸»è¦åˆ©ç”¨Trieæ ‘æ¥å®ç°ï¼ˆå­—å…¸æ ‘ï¼Œå‰ç¼€æ ‘ï¼Œå•è¯æŸ¥è¯¢æ ‘ï¼‰ï¼Œå¦‚ä¸‹å›¾</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109292042845.png" alt="img"></p><p>è¿™é¢—å¤šå‰æ ‘è¡¨ç¤ºäº†å…³é”®å­—é›†åˆ <code>[&quot;to&quot;ï¼Œ&quot;tea&quot;ï¼Œ&quot;ted&quot;ï¼Œ&quot;ten&quot;ï¼Œ&quot;a&quot;ï¼Œ&quot;i&quot;ï¼Œ&quot;in&quot;, &quot;inn&quot;]</code>ï¼Œ</p><p>ä¸€èˆ¬æœç´¢å¼•æ“ä¼šç»´æŠ¤ä¸€ä¸ªè¯åº“ï¼Œå‡è®¾è¿™ä¸ªè¯åº“ç”±æ‰€æœ‰æœç´¢æ¬¡æ•°å¤§äºæŸä¸ªé˜ˆå€¼ï¼ˆå¦‚ 1000ï¼‰çš„å­—ç¬¦ä¸²ç»„æˆï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨è¿™ä¸ªè¯åº“æ„å»ºä¸€é¢— Trie æ ‘ï¼Œè¿™æ ·å½“ç”¨æˆ·è¾“å…¥å­—æ¯çš„æ—¶å€™ï¼Œå°±å¯ä»¥ä»¥è¿™ä¸ªå­—æ¯ä½œä¸ºå‰ç¼€å» Trie æ ‘ä¸­æŸ¥æ‰¾</p><p>å“ªå¦‚ä½•è·å¾—çƒ­é—¨çš„æœç´¢æç¤ºè¯æ”¾åœ¨æœ€å‰é¢å‘¢ï¼Ÿ</p><p>é€šå¸¸åœ¨å®ç°Trieæ ‘çš„æ—¶å€™ï¼Œä¼šåœ¨èŠ‚ç‚¹ç»“æ„ä¸­è®¾ç½®ä¸€ä¸ªæ ‡å¿—ï¼Œç”¨æ¥æ ‡è®°è¯¥ç»“ç‚¹å¤„æ˜¯å¦æ„æˆä¸€ä¸ªå•è¯ï¼Œè¯¥æ ‡è®°ä¹Ÿå¯ä»¥è®¾ç½®ä¸º<strong>æœç´¢æ¬¡æ•°</strong></p><p>ä¾æ¬¡éå† Trie æ ‘çš„èŠ‚ç‚¹ï¼Œå°†èŠ‚ç‚¹ï¼ˆå­—ç¬¦ä¸²+æ¬¡æ•°ï¼‰ä¼ ç»™ä¸€ä¸ª<strong>å°é¡¶å †</strong>ï¼Œæ ¹æ®æœç´¢æ¬¡æ•°ä¸æ–­è°ƒæ•´å°é¡¶å †ï¼Œè¿™æ ·éå†å®Œ Trie æ ‘çš„èŠ‚ç‚¹åï¼Œå°é¡¶å †é‡Œçš„ 10 ä¸ªèŠ‚ç‚¹å³æ˜¯æœ€çƒ­é—¨çš„æœç´¢å­—ç¬¦</p><h3 id="å¾®æœåŠ¡"><a href="#å¾®æœåŠ¡" class="headerlink" title="å¾®æœåŠ¡"></a>å¾®æœåŠ¡</h3><h4 id="1-è½¯ä»¶æ¶æ„"><a href="#1-è½¯ä»¶æ¶æ„" class="headerlink" title="1.è½¯ä»¶æ¶æ„"></a>1.è½¯ä»¶æ¶æ„</h4><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://crimsonromance.github.io/2019/03/23/%E5%9B%9B%E7%A7%8D%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%EF%BC%9A%E5%8D%95%E4%BD%93%E6%9E%B6%E6%9E%84%E3%80%81%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84%E3%80%81%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84%E3%80%81Serverless%E6%9E%B6%E6%9E%84/">å››ç§è½¯ä»¶æ¶æ„</a></p><h5 id="ï¼ˆ1ï¼‰å•ä½“æ¶æ„"><a href="#ï¼ˆ1ï¼‰å•ä½“æ¶æ„" class="headerlink" title="ï¼ˆ1ï¼‰å•ä½“æ¶æ„"></a>ï¼ˆ1ï¼‰å•ä½“æ¶æ„</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109121533917.png" alt="image-20210912153357714"></p><p>å…¸å‹çš„ä¸‰çº§æ¶æ„ï¼Œå‰ç«¯(Web/æ‰‹æœºç«¯)+ä¸­é—´ä¸šåŠ¡é€»è¾‘å±‚+æ•°æ®åº“å±‚</p><p>å•ä½“æ¶æ„å‡ºç°çš„é—®é¢˜ï¼š</p><ul><li>ä»£ç åˆ†æ”¯ç®¡ç†å›°éš¾</li><li>æ–°å¢åŠŸèƒ½éº»çƒ¦</li><li>å®¹æ˜“è€—å°½æ•°æ®åº“è¿æ¥</li></ul><h5 id="ï¼ˆ2ï¼‰åˆ†å¸ƒå¼æ¶æ„"><a href="#ï¼ˆ2ï¼‰åˆ†å¸ƒå¼æ¶æ„" class="headerlink" title="ï¼ˆ2ï¼‰åˆ†å¸ƒå¼æ¶æ„"></a>ï¼ˆ2ï¼‰åˆ†å¸ƒå¼æ¶æ„</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109121532105.png" alt="img"></p><p>å°†ä¸€ä¸ªå¤§çš„ç³»ç»Ÿåˆ’åˆ†ä¸ºå¤šä¸ªä¸šåŠ¡æ¨¡å—ï¼Œä¸šåŠ¡æ¨¡å—åˆ†åˆ«éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œå„ä¸ªä¸šåŠ¡æ¨¡å—ä¹‹é—´é€šè¿‡æ¥å£è¿›è¡Œæ•°æ®äº¤äº’ã€‚æ•°æ®åº“ä¹Ÿå¤§é‡é‡‡ç”¨åˆ†å¸ƒå¼æ•°æ®åº“ï¼Œé€šè¿‡LVS/Nginxä»£ç†åº”ç”¨ï¼Œå°†ç”¨æˆ·è¯·æ±‚å‡è¡¡çš„è´Ÿè½½åˆ°ä¸åŒçš„æœåŠ¡å™¨ä¸Š</p><h5 id="ï¼ˆ3ï¼‰å¾®æœåŠ¡æ¶æ„"><a href="#ï¼ˆ3ï¼‰å¾®æœåŠ¡æ¶æ„" class="headerlink" title="ï¼ˆ3ï¼‰å¾®æœåŠ¡æ¶æ„"></a>ï¼ˆ3ï¼‰å¾®æœåŠ¡æ¶æ„</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109121533619.png" alt="img"></p><p>å°†ç³»ç»Ÿæ‹†åˆ†æˆå¾ˆå¤šå°åº”ç”¨ï¼ˆå¾®æœåŠ¡ï¼‰ï¼Œå¾®æœåŠ¡å¯ä»¥éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œä¹Ÿå¯ä»¥éƒ¨ç½²åœ¨ç›¸åŒçš„æœåŠ¡å™¨ä¸åŒçš„å®¹å™¨ä¸Šã€‚å½“åº”ç”¨çš„æ•…éšœä¸ä¼šå½±å“åˆ°å…¶ä»–åº”ç”¨ï¼Œå•åº”ç”¨çš„è´Ÿè½½ä¹Ÿä¸ä¼šå½±å“åˆ°å…¶ä»–åº”ç”¨</p><p>å¾®æœåŠ¡çš„ç‰¹ç‚¹ï¼š</p><ul><li>å¤§åº”ç”¨æ‹†åˆ†ä¸ºå°æ¨¡å—</li><li>å°æ¨¡å—ä¸å±äºé›†ç¾¤ä¸­</li><li>é€šè¿‡è¿œç¨‹è°ƒç”¨çš„æ–¹å¼ä¾èµ–å„ä¸ªç‹¬ç«‹çš„æ¨¡å—å®Œæˆä¸šåŠ¡çš„å¤„ç†</li></ul><p>è¿™äº›å°æ¨¡å—å°±æ˜¯ä¸€ä¸ªå¾®æœåŠ¡äº†</p><h4 id="2-å¾®æœåŠ¡æŠ€æœ¯é€‰å‹"><a href="#2-å¾®æœåŠ¡æŠ€æœ¯é€‰å‹" class="headerlink" title="2.å¾®æœåŠ¡æŠ€æœ¯é€‰å‹"></a>2.å¾®æœåŠ¡æŠ€æœ¯é€‰å‹</h4><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://xie.infoq.cn/article/23d55563fdda52771571807e9">2020å¾®æœåŠ¡æ¶æ„æŠ€æœ¯é€‰å‹</a></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109292309972.png" alt="img"></p><p>å¾®æœåŠ¡çš„å†…å®¹æœ‰ç‚¹åºå¤§ğŸ˜°ï¼Œå„ç§æŠ€æœ¯é€‰å‹æ–¹æ¡ˆä¹Ÿå¾ˆå¤šï¼Œå¯ä»¥æŸ¥çœ‹æˆ‘çš„å‰ä¸€ç¯‡åšæ–‡ï¼ˆSpringCloud + Netflix OSSï¼‰åšä¸€ä¸ªäº†è§£ï¼š<a href="https://autovy.github.io/2021/09/20/Java/Java-SpringCloud/">Java|SpringCloud + Netflix OSS Demo</a></p><h3 id="é«˜å¯ç”¨"><a href="#é«˜å¯ç”¨" class="headerlink" title="é«˜å¯ç”¨"></a>é«˜å¯ç”¨</h3><h4 id="1-é«˜å¯ç”¨ç®€ä»‹"><a href="#1-é«˜å¯ç”¨ç®€ä»‹" class="headerlink" title="1.é«˜å¯ç”¨ç®€ä»‹"></a>1.é«˜å¯ç”¨ç®€ä»‹</h4><p>ç³»ç»Ÿé«˜å¯ç”¨æ„å‘³ç€åœ¨ä¸€å°æœåŠ¡å™¨æŒ‚æ‰çš„æƒ…å†µä¸‹ï¼Œç³»ç»Ÿä»ç„¶æ— ä¸­æ–­åœ°æ‰§è¡Œå…¶åŠŸèƒ½çš„èƒ½åŠ›</p><h4 id="2-é«˜å¯ç”¨ç­–ç•¥"><a href="#2-é«˜å¯ç”¨ç­–ç•¥" class="headerlink" title="2.é«˜å¯ç”¨ç­–ç•¥"></a>2.é«˜å¯ç”¨ç­–ç•¥</h4><h5 id="ï¼ˆ1ï¼‰å†—ä½™å¤‡ä»½"><a href="#ï¼ˆ1ï¼‰å†—ä½™å¤‡ä»½" class="headerlink" title="ï¼ˆ1ï¼‰å†—ä½™å¤‡ä»½"></a>ï¼ˆ1ï¼‰å†—ä½™å¤‡ä»½</h5><p>å†—ä½™å¤‡ä»½æ˜¯æŒ‡å¤åˆ¶å…³é”®éƒ¨ä»¶æˆ–è€…ç³»ç»Ÿçš„ä¸»è¦åŠŸèƒ½ï¼Œå½“æ„å¤–å‘ç”Ÿæ—¶ï¼Œå¯ä»¥å¿«é€Ÿå®‰å…¨åœ°æ¢å¤åŸæœ‰çš„ç³»ç»Ÿï¼Œåœ¨ä¸€å®šçš„èŒƒå›´å†…ä¿éšœä¸šåŠ¡çš„æ­£å¸¸è¿è¡Œ</p><h5 id="ï¼ˆ2ï¼‰è´Ÿè½½å‡è¡¡"><a href="#ï¼ˆ2ï¼‰è´Ÿè½½å‡è¡¡" class="headerlink" title="ï¼ˆ2ï¼‰è´Ÿè½½å‡è¡¡"></a>ï¼ˆ2ï¼‰è´Ÿè½½å‡è¡¡</h5><p>è´Ÿè½½å‡è¡¡ä¹Ÿå¯ä»¥ä¿è¯é«˜å¯ç”¨ï¼Œä½¿ç”¨å¤šå°æœåŠ¡å™¨åˆ†æ‹…ä¸€å°æœåŠ¡å™¨çš„å‹åŠ›ï¼Œè´Ÿè½½å‡è¡¡æœåŠ¡å™¨ä¸€æ—¦å‘ç°é›†ç¾¤ä¸­æŸå°æœåŠ¡å™¨å‡ºç°é—®é¢˜ï¼Œç«‹åˆ»åœæ­¢å¯¹å…¶çš„è¯·æ±‚åˆ†å‘</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109300822419.png" alt="img"></p><h5 id="ï¼ˆ3ï¼‰é™æµé™çº§"><a href="#ï¼ˆ3ï¼‰é™æµé™çº§" class="headerlink" title="ï¼ˆ3ï¼‰é™æµé™çº§"></a>ï¼ˆ3ï¼‰é™æµé™çº§</h5><p>é™æµæ˜¯å¯¹éƒ¨åˆ†è¯·æ±‚è¿›è¡Œä¸¢å¼ƒå¤„ç†ï¼Œä¿è¯å¤§éƒ¨åˆ†çš„ç”¨æˆ·å¯ä»¥æ­£å¸¸çš„è¯·æ±‚å®Œæˆä»»åŠ¡</p><p>é™çº§å³å¯ä»¥å±è”½éƒ¨åˆ†å½“å‰çœ‹æ¥ä¸æ˜¯å¾ˆæœ‰ç”¨çš„ä»»åŠ¡</p><h5 id="ï¼ˆ5ï¼‰å¼‚åœ°å¤šæ´»"><a href="#ï¼ˆ5ï¼‰å¼‚åœ°å¤šæ´»" class="headerlink" title="ï¼ˆ5ï¼‰å¼‚åœ°å¤šæ´»"></a>ï¼ˆ5ï¼‰å¼‚åœ°å¤šæ´»</h5><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://zhuanlan.zhihu.com/p/32009822">é¥¿äº†ä¹ˆå¼‚åœ°å¤šæ´»æŠ€æœ¯å®ç°</a></p><p>å¤§å‹çš„ç³»ç»Ÿå¤šä¼šåœ¨å„ä¸ªåœ°æ–¹éƒ¨ç½²æ•°æ®ä¸­å¿ƒï¼Œé‡‡ç”¨å¼‚åœ°å¤šæ´»çš„å¤šæœºæˆ¿ç­–ç•¥</p><p>å¼‚åœ°å¤šæ´»ä¸‹ï¼Œå„ä¸ªåœ°åŸŸç‹¬ç«‹éš”ç¦»ï¼Œä¸šåŠ¡æµé‡å¯ä»¥ä¸å‡ç­‰çš„åˆ†é…åˆ°å„ä¸ªåœ°åŸŸå’Œå¯ç”¨åŒºé‡Œé¢</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109300837226.jpeg" alt="img"></p><ul><li>gzsæ˜¯ä¸€ä¸ªå…¨å±€çš„ï¼ˆæ‰€æœ‰æœºæˆ¿éƒ½å¯ä»¥è®¿é—®çš„ï¼‰æœåŠ¡ï¼Œä¿å­˜å’Œæ¨é€shardingä¿¡æ¯ã€‚</li><li>API routerå¤åˆ¶è·¯ç”±å¤–ç½‘æµé‡</li><li>SOAProxyå®ç°è·¨æœºæˆ¿è°ƒç”¨</li><li>å¼ºä¸€è‡´æ•°æ®åº“ / æ•°æ®åº“å±‚çš„æ‹¦æˆª ç”±DALå®ç°ï¼ˆå›¾ä¸Šæ²¡å±•ç¤ºï¼‰</li><li>DRCå®ç°Mqsqlçš„åŒå‘å¤åˆ¶</li></ul><h3 id="å®‰å…¨æ€§"><a href="#å®‰å…¨æ€§" class="headerlink" title="å®‰å…¨æ€§"></a>å®‰å…¨æ€§</h3><h4 id="1-æ•°æ®åŠ å¯†"><a href="#1-æ•°æ®åŠ å¯†" class="headerlink" title="1.æ•°æ®åŠ å¯†"></a>1.æ•°æ®åŠ å¯†</h4><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.jianshu.com/p/94dc5186746d">å¯¹ç§°åŠ å¯†ã€å•å‘åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†</a></p><h5 id="ï¼ˆ1ï¼‰å•å‘æ•£åˆ—åŠ å¯†"><a href="#ï¼ˆ1ï¼‰å•å‘æ•£åˆ—åŠ å¯†" class="headerlink" title="ï¼ˆ1ï¼‰å•å‘æ•£åˆ—åŠ å¯†"></a>ï¼ˆ1ï¼‰å•å‘æ•£åˆ—åŠ å¯†</h5><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109300857948.png" alt="img"><p>å•å‘åŠ å¯†æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š</p><ul><li>è¾“å…¥ä¸€æ ·ï¼Œè¾“å‡ºå¿…ç„¶ç›¸åŒ</li><li>é›ªå´©æ•ˆåº”ï¼Œè¾“å…¥çš„å¾®å°æ”¹å˜ï¼Œå°†ä¼šå¼•èµ·ç»“æœçš„å·¨å¤§å˜åŒ–</li><li>å®šé•¿è¾“å‡ºï¼Œæ— è®ºåŸå§‹æ•°æ®å¤šå¤§ï¼Œç»“æœå¤§å°éƒ½æ˜¯ç›¸åŒçš„</li><li>ä¸å¯é€†ï¼Œæ— æ³•æ ¹æ®ç‰¹å¾ç è¿˜åŸåŸæ¥çš„æ•°æ®</li></ul><p>å¸¸ç”¨çš„å•å‘åŠ å¯†ç®—æ³•æœ‰ï¼šMD5ï¼ŒSHAï¼ŒCRC</p><p>å•å‘åŠ å¯†é€šå¸¸åº”ç”¨åœ¨ç”¨æˆ·å¯†ç åŠ å¯†ä¸­ï¼Œç»è¿‡åŠ å¯†åçš„å¯†ç å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œå³ä¾¿è¢«è„±åº“äº†ä¹Ÿæ— æ³•è§£å¯†å‡ºå¯†ç ï¼ˆé‰´äºæœ‰äº›ç”¨æˆ·ä¼šç”¨ä¸€äº›å¼±å¯†ç ï¼Œå®¹æ˜“è¢«å½©è™¹è¡¨æš´æ€ï¼Œç´¢å¼•å•å‘åŠ å¯†å¸¸å¸¸ä¹Ÿè¦åŠ ä¸€ç‚¹ç›ï¼‰</p><h5 id="ï¼ˆ2ï¼‰å¯¹ç§°åŠ å¯†"><a href="#ï¼ˆ2ï¼‰å¯¹ç§°åŠ å¯†" class="headerlink" title="ï¼ˆ2ï¼‰å¯¹ç§°åŠ å¯†"></a>ï¼ˆ2ï¼‰å¯¹ç§°åŠ å¯†</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109300857192.png" alt="img"></p><p>é‡‡ç”¨å•é’¥å¯†ç çš„åŠ å¯†æ–¹æ³•ï¼ŒåŒä¸€ä¸ªå¯†é’¥å¯ä»¥åŒæ—¶ç”¨æ¥åŠ å¯†å’Œè§£å¯†</p><p>å¯¹ç§°åŠ å¯†æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li>åŠ å¯†æ–¹å’Œè§£å¯†æ–¹ä½¿ç”¨åŒä¸€ä¸ªå¯†é’¥</li><li>åŠ å¯†è§£å¯†çš„é€Ÿåº¦æ¯”è¾ƒå¿«ï¼Œé€‚åˆæ•°æ®æ¯”è¾ƒé•¿æ—¶çš„ä½¿ç”¨</li><li>å¯†é’¥ä¼ è¾“çš„è¿‡ç¨‹ä¸å®‰å…¨ï¼Œä¸”å®¹æ˜“è¢«ç ´è§£ï¼Œå¯†é’¥ç®¡ç†ä¹Ÿæ¯”è¾ƒéº»çƒ¦</li></ul><p>å¸¸ç”¨çš„å¯¹ç§°åŠ å¯†ç®—æ³•æœ‰ï¼šDESï¼Œ3DESï¼ŒAESï¼ŒBlowfish</p><h5 id="ï¼ˆ3ï¼‰éå¯¹ç§°åŠ å¯†"><a href="#ï¼ˆ3ï¼‰éå¯¹ç§°åŠ å¯†" class="headerlink" title="ï¼ˆ3ï¼‰éå¯¹ç§°åŠ å¯†"></a>ï¼ˆ3ï¼‰éå¯¹ç§°åŠ å¯†</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109300857820.png" alt></p><p>éå¯¹ç§°å¯†é’¥åŠ å¯†ä¹Ÿç§°ä¸ºå…¬é’¥åŠ å¯†ï¼Œç”±ä¸€å¯¹å…¬é’¥å’Œç§é’¥ç»„æˆã€‚å…¬é’¥æ˜¯ä»ç§é’¥æå–å‡ºæ¥çš„</p><p>å¯ä»¥ç”¨å…¬é’¥åŠ å¯†ï¼Œå†ç”¨ç§é’¥è§£å¯†ï¼Œè¿™ç§æƒ…å½¢ä¸€èˆ¬ç”¨äºå…¬é’¥åŠ å¯†ï¼›ä¹Ÿå¯ä»¥ç”¨ç§é’¥åŠ å¯†ï¼Œç”¨å…¬é’¥è§£å¯†ï¼Œå¸¸ç”¨äºæ•°å­—ç­¾å</p><p>éå¯¹ç§°åŠ å¯†çš„<strong>ä¸»è¦åŠŸèƒ½å°±æ˜¯åŠ å¯†å’Œæ•°å­—ç­¾å</strong></p><p>å¸¸ç”¨çš„éå¯¹ç§°åŠ å¯†ï¼šRSAï¼ŒDSAï¼ŒECC</p><h4 id="2-HTTPæ”»å‡»ä¸é˜²æŠ¤"><a href="#2-HTTPæ”»å‡»ä¸é˜²æŠ¤" class="headerlink" title="2.HTTPæ”»å‡»ä¸é˜²æŠ¤"></a>2.HTTPæ”»å‡»ä¸é˜²æŠ¤</h4><h5 id="ï¼ˆ1ï¼‰SQLæ³¨å…¥"><a href="#ï¼ˆ1ï¼‰SQLæ³¨å…¥" class="headerlink" title="ï¼ˆ1ï¼‰SQLæ³¨å…¥"></a>ï¼ˆ1ï¼‰SQLæ³¨å…¥</h5><p>SQLæ³¨å…¥æ˜¯æ”»å‡»è€…åœ¨æäº¤è¯·æ±‚å‚æ•°çš„æ—¶å€™ï¼ŒåŒ…å«äº†æ¶æ„çš„SQLè„šæœ¬</p><p>ä¸€é˜¶sqlæ³¨å…¥ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109301727816.png" alt="image-20210930172727417"></p><p>äºŒé˜¶sqlæ³¨å…¥ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109301728597.png" alt="image-20210930172812394"></p><p>SQLæ³¨å…¥é˜²å¾¡æ–¹æ³•ï¼ˆæ¥æºäºwikiï¼‰ï¼š</p><ul><li>åœ¨è®¾è®¡åº”ç”¨ç¨‹åºæ—¶ï¼Œå®Œå…¨ä½¿ç”¨<a href="https://zh.wikipedia.org/wiki/åƒæ•¸åŒ–æŸ¥è©¢">å‚æ•°åŒ–æŸ¥è¯¢</a>ï¼ˆParameterized Queryï¼‰æ¥è®¾è®¡èµ„æ–™è®¿é—®åŠŸèƒ½ï¼ˆæœ€æœ‰æ•ˆçš„æ–¹å¼ï¼‰</li><li>åœ¨ç»„åˆSQLå­—ç¬¦ä¸²æ—¶ï¼Œå…ˆé’ˆå¯¹æ‰€ä¼ å…¥çš„å‚æ•°åŠ å…¥å…¶ä»–å­—ç¬¦ï¼ˆå°†å•å¼•å·å­—ç¬¦å‰åŠ ä¸Šè½¬ä¹‰å­—ç¬¦ï¼‰ã€‚</li><li>å¦‚æœä½¿ç”¨<a href="https://zh.wikipedia.org/wiki/PHP">PHP</a>å¼€å‘ç½‘é¡µç¨‹åºçš„è¯ï¼Œéœ€åŠ å…¥è½¬ä¹‰å­—ç¬¦ä¹‹åŠŸèƒ½ï¼ˆè‡ªåŠ¨å°†æ‰€æœ‰çš„ç½‘é¡µä¼ å…¥å‚æ•°ï¼Œå°†å•å¼•å·å­—ç¬¦å‰åŠ ä¸Šè½¬ä¹‰å­—ç¬¦ï¼‰ã€‚</li><li>ä½¿ç”¨phpå¼€å‘ï¼Œå¯å†™å…¥htmlç‰¹æ®Šå‡½æ•°ï¼Œå¯æ­£ç¡®é˜»æŒ¡<a href="https://zh.wikipedia.org/wiki/XSS">XSS</a>æ”»å‡»ã€‚</li><li>å…¶ä»–ï¼Œä½¿ç”¨å…¶ä»–æ›´å®‰å…¨çš„æ–¹å¼è¿æ¥SQLæ•°æ®åº“ã€‚ä¾‹å¦‚å·²ä¿®æ­£è¿‡SQLæ³¨å…¥é—®é¢˜çš„æ•°æ®åº“è¿æ¥ç»„ä»¶ï¼Œä¾‹å¦‚<a href="https://zh.wikipedia.org/wiki/ASP.NET">ASP.NET</a>çš„SqlDataSourceå¯¹è±¡æˆ–æ˜¯ <a href="https://zh.wikipedia.org/wiki/è¯­è¨€é›†æˆæŸ¥è¯¢">LINQ</a> to SQLã€‚</li><li>å¢å¼º<a href="https://zh.wikipedia.org/w/index.php?title=Web_application_firewall&action=edit&redlink=1">WAF</a>çš„é˜²å¾¡åŠ›</li></ul><h5 id="ï¼ˆ2ï¼‰XSSæ”»å‡»"><a href="#ï¼ˆ2ï¼‰XSSæ”»å‡»" class="headerlink" title="ï¼ˆ2ï¼‰XSSæ”»å‡»"></a>ï¼ˆ2ï¼‰XSSæ”»å‡»</h5><p>è·¨ç«™ç‚¹è„šæœ¬æ”»å‡»ï¼Œæ”»å‡»è€…é€šè¿‡æ„é€ æ¶æ„çš„æµè§ˆå™¨è„šæœ¬æ–‡ä»¶æ³¨å…¥åˆ°ç½‘é¡µä¸Šï¼Œä½¿å…¶åœ¨å…¶ä»–ç”¨æˆ·çš„æµè§ˆå™¨è¿è¡Œè¿›è€Œè¿›è¡Œæ”»å‡»</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109301732875.png" alt="xss.gif"></p><p>XSSæ”»å‡»é˜²å¾¡æ–¹æ³•ï¼š</p><ul><li>è¿‡æ»¤ç‰¹æ®Šå­—ç¬¦</li><li>ä½¿ç”¨HTTPå¤´æŒ‡å®šç±»å‹å³ï¼Œå¯å¼ºè¡ŒæŒ‡å®šè¾“å‡ºå†…å®¹ä¸ºæ–‡æœ¬æˆ–JavaScriptè„šæœ¬ï¼ˆé¡ºä¾¿æŒ‡å®šäº†å†…å®¹ç¼–ç ï¼‰ï¼Œè€Œéå¯ä»¥å¼•å‘æ”»å‡»çš„HTML</li></ul><h3 id="å¤§æ•°æ®"><a href="#å¤§æ•°æ®" class="headerlink" title="å¤§æ•°æ®"></a>å¤§æ•°æ®</h3><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.hadoopdoc.com/hdfs/hdfs-tutorial">https://www.hadoopdoc.com/hdfs/hdfs-tutorial</a></p><p>ï¼ˆæœ¬æ–‡åªåšç®€å•ä»‹ç»ï¼Œå¤§æ•°æ®çš„å†…å®¹ä¹ŸæŒºå¤šçš„ï¼Œæœ‰å…´è¶£çš„å¯ä»¥ç‚¹å…¥ä¸Šé¢é“¾æ¥æ·±å…¥å­¦ä¹ ï¼‰</p><h4 id="1-æ–‡ä»¶å­˜å‚¨HDFSæ¶æ„"><a href="#1-æ–‡ä»¶å­˜å‚¨HDFSæ¶æ„" class="headerlink" title="1.æ–‡ä»¶å­˜å‚¨HDFSæ¶æ„"></a>1.æ–‡ä»¶å­˜å‚¨HDFSæ¶æ„</h4><h5 id="ï¼ˆ1ï¼‰HDFSç®€ä»‹"><a href="#ï¼ˆ1ï¼‰HDFSç®€ä»‹" class="headerlink" title="ï¼ˆ1ï¼‰HDFSç®€ä»‹"></a>ï¼ˆ1ï¼‰HDFSç®€ä»‹</h5><p>HDFSæ˜¯ä¸€ç§åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œè®¾è®¡ç”¨äºåœ¨å•†ç”¨ç¡¬ä»¶ä¸Šå•†ç”¨ï¼Œç®¡ç†æ•°ä»¥åƒè®¡çš„æœåŠ¡å™¨ï¼Œæ•°ä»¥ä¸‡è®¡çš„ç£ç›˜ï¼Œå°†å¤§è§„æ¨¡çš„æœåŠ¡å™¨èµ„æºå½“åšä¸€ä¸ªå•ä¸€çš„å‡ºæ‰¿è¯ºå‡½ç³»ç»Ÿè¿›è¡Œç®¡ç†ï¼Œæ“ä½œå¤§æ‰¹é‡æ•°æ®å°±åƒä½¿ç”¨æ™®é€šæ–‡ä»¶ç³»ç»Ÿä¸€æ ·</p><h5 id="ï¼ˆ2ï¼‰HDFSèŠ‚ç‚¹"><a href="#ï¼ˆ2ï¼‰HDFSèŠ‚ç‚¹" class="headerlink" title="ï¼ˆ2ï¼‰HDFSèŠ‚ç‚¹"></a>ï¼ˆ2ï¼‰HDFSèŠ‚ç‚¹</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109302252992.png" alt="HDFSæ¶æ„å›¾"></p><ul><li>Namenodeä¼šè§„èŒƒå®¢æˆ·ç«¯å¯¹æ–‡ä»¶çš„è®¿é—®ï¼Œå®ƒç»´æŠ¤å’Œç®¡ç†SlaveèŠ‚ç‚¹ï¼Œå¹¶æŠŠè¯»å†™ä»»åŠ¡åˆ†é…ç»™SlaveèŠ‚ç‚¹ï¼ˆéƒ¨ç½²åœ¨é«˜å¯é çš„ç¡¬ä»¶ä¸Šé¢ï¼‰</li><li>Datanodeè´Ÿè´£æ•°æ®å­˜å‚¨ï¼Œå®ƒæ˜¯çœŸæ­£å¹²æ´»çš„èŠ‚ç‚¹ï¼Œæ¯”å¦‚å“åº”å®¢æˆ·ç«¯çš„æ•°æ®è¯»å†™è¯·æ±‚ï¼Œæ ¹æ®Namenodeçš„æŒ‡ä»¤åˆ›å»ºå’Œåˆ é™¤blockï¼ˆå¯ä»¥éƒ¨ç½²åœ¨ä»·æ ¼ä½å»‰çš„å•†ç”¨æœºå™¨ä¸Šï¼‰</li></ul><h5 id="ï¼ˆ3ï¼‰HDFSè¿›ç¨‹"><a href="#ï¼ˆ3ï¼‰HDFSè¿›ç¨‹" class="headerlink" title="ï¼ˆ3ï¼‰HDFSè¿›ç¨‹"></a>ï¼ˆ3ï¼‰HDFSè¿›ç¨‹</h5><p>HDFSæœ‰2ä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼š</p><ul><li><strong>Namenode</strong>ï¼šè¯¥è¿›ç¨‹è¿è¡Œåœ¨masterèŠ‚ç‚¹ä¸Šï¼ŒNamenodeèŠ‚ç‚¹å­˜å‚¨å…ƒæ•°æ®ï¼Œæ¯”å¦‚æ–‡ä»¶åï¼Œå—æ•°é‡ï¼Œå—å‰¯æœ¬æ•°é‡ï¼Œå—çš„å­˜å‚¨ä½ç½®ï¼Œä»¥åŠå—IDç­‰</li><li><strong>Datanode</strong>ï¼šè¯¥è¿›ç¨‹è¿è¡Œåœ¨SlaveèŠ‚ç‚¹ï¼Œè¿™äº›èŠ‚ç‚¹æ˜¯çœŸæ­£å¯¹æ•°æ®è¿›è¡Œå¤„ç†å’Œå­˜å‚¨çš„èŠ‚ç‚¹</li></ul><h5 id="ï¼ˆ4ï¼‰HDFSæ•°æ®å­˜å‚¨"><a href="#ï¼ˆ4ï¼‰HDFSæ•°æ®å­˜å‚¨" class="headerlink" title="ï¼ˆ4ï¼‰HDFSæ•°æ®å­˜å‚¨"></a>ï¼ˆ4ï¼‰HDFSæ•°æ®å­˜å‚¨</h5><p><img src="/2021/09/30/DevPrinciple/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/C:%5CUsers%5Clinghao%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210930225658950.png" alt="image-20210930225658950"></p><p>æŠŠæ–‡ä»¶å†™å…¥åˆ°HDFSçš„æ—¶å€™ï¼ŒHDFSä¼šæŠŠæ–‡ä»¶åˆ†å‰²æˆå¾ˆå¤šåˆ†ç‰‡ï¼Œä¹Ÿå°±æ˜¯å—ï¼ˆblockï¼‰ï¼Œæ–‡ä»¶åˆ†å‰²æˆå—ä¹‹åï¼ŒHDFSä¼šæŠŠä»–ä»¬ä»¥åˆ†å¸ƒå¼æ–¹å¼å­˜å‚¨åœ¨é›†ç¾¤çš„ä¸å¤šèŠ‚ç‚¹ä¸Š</p><h5 id="ï¼ˆ5ï¼‰HDFSæœºæ¶æ„ŸçŸ¥"><a href="#ï¼ˆ5ï¼‰HDFSæœºæ¶æ„ŸçŸ¥" class="headerlink" title="ï¼ˆ5ï¼‰HDFSæœºæ¶æ„ŸçŸ¥"></a>ï¼ˆ5ï¼‰HDFSæœºæ¶æ„ŸçŸ¥</h5><p>ä¸ºäº†æ•°æ®å®¹é”™ï¼ŒNameNodeæŠŠå—çš„å‰¯æœ¬æ”¾åœ¨å¤šä¸ªæœºæ¶ä¸Šï¼ŒNameNodeå°½é‡ä¼šåœ¨æ¯ä¸ªæœºæ¶éƒ½å­˜å‚¨è‡³å°‘ä¸€ä¸ªå—å‰¯æœ¬ï¼Œè¿™æ ·å¦‚æœå…¶ä¸­ä¸€ä¸ªæœºæ¶å‘ç”Ÿæ•…éšœï¼Œç³»ç»Ÿè¿˜æ˜¯å¯ç”¨çš„</p><p>æœºæ¶æ„ŸçŸ¥ç­–ç•¥çš„ç›®çš„æ˜¯æå‡æ•°æ®å¯ç”¨æ€§ã€å¯é æ€§å’Œç½‘ç»œå¸¦å®½åˆ©ç”¨ç‡</p><h5 id="ï¼ˆ6ï¼‰HDFSæ¶æ„"><a href="#ï¼ˆ6ï¼‰HDFSæ¶æ„" class="headerlink" title="ï¼ˆ6ï¼‰HDFSæ¶æ„"></a>ï¼ˆ6ï¼‰HDFSæ¶æ„</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109301755744.jpeg" alt="HDFS 1.0 æ¶æ„å›¾"></p><ul><li><p>Namenodeè´Ÿè´£å­˜å‚¨å…ƒæ•°æ®è€ŒDatanodeè´Ÿè´£å­˜å‚¨å®é™…çš„æ•°æ®ã€‚æ‰§è¡Œä»»ä½•ä»»åŠ¡ï¼Œå®¢æˆ·ç«¯éƒ½å¾—å’ŒNamenodeè¿›è¡Œäº¤äº’ï¼Œå› ä¸ºNamenodeæ˜¯æ•´ä¸ªé›†ç¾¤çš„ä¸­å¿ƒ</p></li><li><p>Datanodeæ˜¯æŠŠæ•°æ®å­˜å‚¨åœ¨æœ¬åœ°ç£ç›˜çš„ï¼Œå®ƒä¼šå®šæœŸç»™Namenodeå‘é€å¿ƒè·³ä¿¡æ¯ï¼Œä»¥æ­¤æ¥è¡¨æ˜è‡ªå·±å¤„åœ¨å·¥ä½œçŠ¶æ€ï¼ŒDatanodeè¿˜ä¼šæ ¹æ®å‰¯æœ¬å› å­è´Ÿè´£æŠŠblockæ‹·è´åˆ°å…¶ä»–Datanode</p></li></ul><h4 id="2-å¤§æ•°æ®å¤„ç†æ¡†æ¶"><a href="#2-å¤§æ•°æ®å¤„ç†æ¡†æ¶" class="headerlink" title="2.å¤§æ•°æ®å¤„ç†æ¡†æ¶"></a>2.å¤§æ•°æ®å¤„ç†æ¡†æ¶</h4><h5 id="ï¼ˆ1ï¼‰Mapreduce"><a href="#ï¼ˆ1ï¼‰Mapreduce" class="headerlink" title="ï¼ˆ1ï¼‰Mapreduce"></a>ï¼ˆ1ï¼‰Mapreduce</h5><p>MapReduce æ˜¯ Hadoop ç”Ÿæ€ä¸‹é¢çš„è®¡ç®—å±‚ï¼Œå®ƒæŠŠä»»åŠ¡åˆ†å‰²æˆå°ä»»åŠ¡å¹¶åˆ†å‘åˆ°é›†ç¾¤çš„æœºå™¨ä¸Šå¹¶è¡Œæ‰§è¡Œï¼Œå…¶åˆ†ä¸ºMapå’ŒReduceä¸¤ä¸ªé˜¶æ®µ</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109302309030.png" alt="img"></p><p>mapå’Œreduceè¿›ç¨‹åœ¨åˆ†å¸ƒå¼é›†ç¾¤ä¸­å¯åŠ¨è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109302313905.png" alt="img"></p><h5 id="ï¼ˆ2ï¼‰Hive"><a href="#ï¼ˆ2ï¼‰Hive" class="headerlink" title="ï¼ˆ2ï¼‰Hive"></a>ï¼ˆ2ï¼‰Hive</h5><p>Hive æ˜¯ä¸€ä¸ªæ¶æ„åœ¨ Hadoop ä¹‹ä¸Šçš„æ•°æ®ä»“åº“åŸºç¡€å·¥å…·ï¼Œå®ƒå¯ä»¥å¤„ç†ç»“æ„åŒ–å’ŒåŠç»“æ„åŒ–æ•°æ®ï¼Œå®ƒä½¿å¾—æŸ¥è¯¢å’Œåˆ†æå­˜å‚¨åœ¨ Hadoop ä¸Šçš„æ•°æ®å˜å¾—éå¸¸æ–¹ä¾¿</p><p>æœ‰äº† Hiveï¼Œä½ åªè¦å¼€å‘ç®€å•çš„ SQL æŸ¥è¯¢å°±å¯ä»¥è¾¾åˆ° MapReduce ä½œä¸šåŒæ ·çš„æŸ¥è¯¢åŠŸèƒ½</p><p><img src="https://www.hadoopdoc.com/media/editor/file_1570081501000_20191003134501543078.png" alt="Hiveæ¶æ„ç»„ä»¶"></p><h5 id="ï¼ˆ3ï¼‰Spark"><a href="#ï¼ˆ3ï¼‰Spark" class="headerlink" title="ï¼ˆ3ï¼‰Spark"></a>ï¼ˆ3ï¼‰Spark</h5><p>Spark æ˜¯ä¸€ç§é«˜æ•ˆä¸”å¤šç”¨é€”çš„é›†ç¾¤è®¡ç®—å¹³å°ï¼Œå®ƒæä¾›äº†ä¸€æ•´å¥—å¼€å‘ APIï¼ŒåŒ…æ‹¬æµè®¡ç®—ã€æœºå™¨å­¦ä¹ æˆ–è€…SQLå¹¶æ”¯æŒæ”¯æŒæ‰¹å¤„ç†å’Œæµå¤„ç†</p><p>Sparkå·²ç»é€æ­¥æ›¿ä»£MapReduceã€Hiveã€Storm ç­‰ä¼ ç»Ÿçš„å¤§æ•°æ®è®¡ç®—æ¡†æ¶</p><p><img src="https://www.hadoopdoc.com/media/editor/file_1571152729000_20191015231852727918.png" alt="sparkè¿è¡Œæ¶æ„åŠæµç¨‹"></p><p>Sparkåº”ç”¨ç¨‹åºæ¶‰åŠäº†driverï¼Œmasterï¼Œworkerä¸‰ä¸ªèŠ‚ç‚¹ï¼š</p><ul><li>Driverï¼šè¿è¡ŒApplicationçš„mainå‡½æ•°å¹¶åˆ›å»ºSparkContextï¼ˆè¿è¡Œç¯å¢ƒï¼‰ï¼ŒDriveråŒæ—¶è´Ÿè´£å°†SparkContextå…³é—­</li><li>Workerï¼šé›†ç¾¤ä¸­ä»»ä½•ä¸€ä¸ªå¯ä»¥è¿è¡Œsparkåº”ç”¨ä»£ç çš„èŠ‚ç‚¹</li><li>Executorï¼šä¸€ä¸ªåº”ç”¨ç¨‹åºè¿è¡Œçš„ç›‘æ§å’Œæ‰§è¡Œå®¹å™¨</li></ul><h5 id="ï¼ˆ4ï¼‰Flink"><a href="#ï¼ˆ4ï¼‰Flink" class="headerlink" title="ï¼ˆ4ï¼‰Flink"></a>ï¼ˆ4ï¼‰Flink</h5><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://flink.apache.org/zh/">Apache Flink</a></p><p>Apache Flink æ˜¯ä¸€ä¸ªæ¡†æ¶å’Œåˆ†å¸ƒå¼å¤„ç†å¼•æ“ï¼Œç”¨äºåœ¨<em>æ— è¾¹ç•Œå’Œæœ‰è¾¹ç•Œ</em>æ•°æ®æµä¸Šè¿›è¡Œæœ‰çŠ¶æ€çš„è®¡ç®—ã€‚Flink èƒ½åœ¨æ‰€æœ‰å¸¸è§é›†ç¾¤ç¯å¢ƒä¸­è¿è¡Œï¼Œå¹¶èƒ½ä»¥å†…å­˜é€Ÿåº¦å’Œä»»æ„è§„æ¨¡è¿›è¡Œè®¡ç®—</p><p>ä½œä¸ºæµå¼æ•°æ®æµæ‰§è¡Œå¼•æ“ï¼Œé’ˆå¯¹æ•°æ®æµçš„åˆ†å¸ƒå¼è®¡ç®—æä¾›æ•°æ®åˆ†å¸ƒï¼Œæ•°æ®é€šä¿¡ä»¥åŠå®¹é”™æœºåˆ¶ç­‰åŠŸèƒ½ã€‚åŒæ—¶Flinkä¹Ÿæä¾›äº†æœºå™¨å­¦ä¹ åº“ï¼Œå›¾è®¡ç®—åº“ç­‰</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109302330786.png" alt="image-20210930233007590"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109302345178.jpeg&quot; alt=&quot;Image&quot;&gt;&lt;/p&gt;
&lt;p&gt;æŠ“ä½9æœˆçš„å°¾å·´ï¼Œç»ˆäºæ•´ç†å®Œæ¯•ğŸ¥³ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="å¼€å‘åŸç†" scheme="https://autovy.github.io/categories/%E5%BC%80%E5%8F%91%E5%8E%9F%E7%90%86/"/>
    
    
      <category term="åç«¯" scheme="https://autovy.github.io/tags/%E5%90%8E%E7%AB%AF/"/>
    
      <category term="å¼€å‘åŸç†" scheme="https://autovy.github.io/tags/%E5%BC%80%E5%8F%91%E5%8E%9F%E7%90%86/"/>
    
      <category term="æ·±åº¦ç³»åˆ—" scheme="https://autovy.github.io/tags/%E6%B7%B1%E5%BA%A6%E7%B3%BB%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>Java|SpringCloud + Netflix OSS Demo</title>
    <link href="https://autovy.github.io/2021/09/20/Java/Java-SpringCloud/"/>
    <id>https://autovy.github.io/2021/09/20/Java/Java-SpringCloud/</id>
    <published>2021-09-20T06:30:00.000Z</published>
    <updated>2021-09-20T09:01:47.980Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109201109518.png" alt="image-20210920110949198"></p><p>Netflix OSSå·²åœ¨æ–°ç‰ˆçš„SpringCloudä¸­ç§»é™¤äº†ï¼ŒSpringCloud Netflixå·²ç»è½åç‰ˆæœ¬äº†ğŸ¤¯ï¼Œä½†æ˜¯ä¸å¦¨é€šè¿‡å…¶æŒæ¡å¾®æœåŠ¡çš„æ€æƒ³ï¼Œç†è§£SpringCloudçš„æ ¸å¿ƒæ€æƒ³ï¼Œæ ¸å¿ƒç»„ä»¶</p><span id="more"></span><h4 id="åˆ†å¸ƒå¼ä¸é›†ç¾¤"><a href="#åˆ†å¸ƒå¼ä¸é›†ç¾¤" class="headerlink" title="åˆ†å¸ƒå¼ä¸é›†ç¾¤"></a>åˆ†å¸ƒå¼ä¸é›†ç¾¤</h4><h5 id="ï¼ˆ1ï¼‰å¾®æœåŠ¡æ¦‚å¿µ"><a href="#ï¼ˆ1ï¼‰å¾®æœåŠ¡æ¦‚å¿µ" class="headerlink" title="ï¼ˆ1ï¼‰å¾®æœåŠ¡æ¦‚å¿µ"></a>ï¼ˆ1ï¼‰å¾®æœåŠ¡æ¦‚å¿µ</h5><p>å¾®æœåŠ¡ç®€å•æ¥è¯´ï¼Œä¸€ä¸ªspringbootå°±æ˜¯ä¸€ä¸ªå¾®æœåŠ¡ï¼Œä¸åŒçš„æ˜¯è¿™ä¸ªspringbootåªåšä¸€é¡¹å•çº¯çš„ä»»åŠ¡</p><h5 id="ï¼ˆ2ï¼‰æœåŠ¡æ³¨å†Œ"><a href="#ï¼ˆ2ï¼‰æœåŠ¡æ³¨å†Œ" class="headerlink" title="ï¼ˆ2ï¼‰æœåŠ¡æ³¨å†Œ"></a>ï¼ˆ2ï¼‰æœåŠ¡æ³¨å†Œ</h5><p>springcloudæœ‰ä¸ªå¾®æœåŠ¡æ³¨å†Œä¸­eureka serverï¼Œé€šè¿‡å®ƒæŠŠå¾®æœåŠ¡æ³¨å†Œèµ·æ¥ä»¥ä¾›æ¥è°ƒç”¨</p><h5 id="ï¼ˆ3ï¼‰æœåŠ¡è®¿é—®"><a href="#ï¼ˆ3ï¼‰æœåŠ¡è®¿é—®" class="headerlink" title="ï¼ˆ3ï¼‰æœåŠ¡è®¿é—®"></a>ï¼ˆ3ï¼‰æœåŠ¡è®¿é—®</h5><p>å¾®æœåŠ¡ç›´æ¥å¯ä»¥é€šè¿‡æ³¨å†Œä¸­å¿ƒçš„å®šä½ç›¸äº’è®¿é—®</p><h5 id="ï¼ˆ4ï¼‰åˆ†å¸ƒå¼æ¦‚å¿µ"><a href="#ï¼ˆ4ï¼‰åˆ†å¸ƒå¼æ¦‚å¿µ" class="headerlink" title="ï¼ˆ4ï¼‰åˆ†å¸ƒå¼æ¦‚å¿µ"></a>ï¼ˆ4ï¼‰åˆ†å¸ƒå¼æ¦‚å¿µ</h5><p> ç®€å•è¯´ï¼ŒåŸæ¥æ˜¯åœ¨ä¸€ä¸ª springbooté‡Œå°±å®Œæˆçš„äº‹æƒ…ï¼Œç°åœ¨åˆ†å¸ƒåœ¨å¤šä¸ª springbooté‡Œåšï¼Œè¿™å°±æ˜¯åˆæ­¥å…·å¤‡åˆ†å¸ƒå¼é›å½¢äº†</p><ul><li>å¦‚æœæˆ‘è¦æ›´æ–°æ•°æ®å¾®æœåŠ¡ï¼Œè§†å›¾å¾®æœåŠ¡æ˜¯ä¸å—å½±å“çš„</li><li>å¯ä»¥è®©ä¸åŒçš„å›¢é˜Ÿå¼€å‘ä¸åŒçš„å¾®æœåŠ¡ï¼Œä»–ä»¬ä¹‹é—´åªè¦çº¦å®šå¥½æ¥å£ï¼Œå½¼æ­¤ä¹‹é—´æ˜¯ä½è€¦åˆçš„ã€‚</li><li>å¦‚æœè§†å›¾å¾®æœåŠ¡æŒ‚äº†ï¼Œæ•°æ®å¾®æœåŠ¡ä¾ç„¶å¯ä»¥ç»§ç»­ä½¿ç”¨<br>ç­‰ç­‰</li></ul><h5 id="ï¼ˆ5ï¼‰é›†ç¾¤"><a href="#ï¼ˆ5ï¼‰é›†ç¾¤" class="headerlink" title="ï¼ˆ5ï¼‰é›†ç¾¤"></a>ï¼ˆ5ï¼‰é›†ç¾¤</h5><p>æä¾›ç›¸åŒåŠŸèƒ½ï¼Œåªæ˜¯ç«¯å£ä¸ä¸€æ ·çš„å¾®æœåŠ¡ç§°ä¸ºé›†ç¾¤</p><ul><li>æ¯”èµ·ä¸€ä¸ª springboot, ä¸¤ä¸ªspringboot å¯ä»¥åˆ†åˆ«éƒ¨ç½²åœ¨ä¸¤ä¸ªä¸åŒçš„æœºå™¨ä¸Šï¼Œé‚£ä¹ˆç†è®ºä¸Šæ¥è¯´ï¼Œèƒ½å¤Ÿæ‰¿å—çš„è´Ÿè½½å°±æ˜¯ x 2. è¿™æ ·ç³»ç»Ÿå°±å…·å¤‡é€šè¿‡æ¨ªå‘æ‰©å±•è€Œæé«˜æ€§èƒ½çš„æœºåˆ¶</li><li>å¦‚æœ 8001 æŒ‚äº†ï¼Œè¿˜æœ‰ 8002 ç»§ç»­æä¾›å¾®æœåŠ¡ï¼Œè¿™å°±å«åšé«˜å¯ç”¨ </li></ul><h4 id="SpringCloudä»‹ç»"><a href="#SpringCloudä»‹ç»" class="headerlink" title="SpringCloudä»‹ç»"></a>SpringCloudä»‹ç»</h4><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://crimsonromance.github.io/2019/03/23/%E5%9B%9B%E7%A7%8D%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%EF%BC%9A%E5%8D%95%E4%BD%93%E6%9E%B6%E6%9E%84%E3%80%81%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84%E3%80%81%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84%E3%80%81Serverless%E6%9E%B6%E6%9E%84/">å››ç§è½¯ä»¶æ¶æ„</a></p><h5 id="ï¼ˆ1ï¼‰å•ä½“æ¶æ„"><a href="#ï¼ˆ1ï¼‰å•ä½“æ¶æ„" class="headerlink" title="ï¼ˆ1ï¼‰å•ä½“æ¶æ„"></a>ï¼ˆ1ï¼‰å•ä½“æ¶æ„</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109121533917.png" alt="image-20210912153357714"></p><p>å…¸å‹çš„ä¸‰çº§æ¶æ„ï¼Œå‰ç«¯(Web/æ‰‹æœºç«¯)+ä¸­é—´ä¸šåŠ¡é€»è¾‘å±‚+æ•°æ®åº“å±‚</p><h5 id="ï¼ˆ2ï¼‰åˆ†å¸ƒå¼æ¶æ„"><a href="#ï¼ˆ2ï¼‰åˆ†å¸ƒå¼æ¶æ„" class="headerlink" title="ï¼ˆ2ï¼‰åˆ†å¸ƒå¼æ¶æ„"></a>ï¼ˆ2ï¼‰åˆ†å¸ƒå¼æ¶æ„</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109121532105.png" alt="img"></p><p>å°†ä¸€ä¸ªå¤§çš„ç³»ç»Ÿåˆ’åˆ†ä¸ºå¤šä¸ªä¸šåŠ¡æ¨¡å—ï¼Œä¸šåŠ¡æ¨¡å—åˆ†åˆ«éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œå„ä¸ªä¸šåŠ¡æ¨¡å—ä¹‹é—´é€šè¿‡æ¥å£è¿›è¡Œæ•°æ®äº¤äº’ã€‚æ•°æ®åº“ä¹Ÿå¤§é‡é‡‡ç”¨åˆ†å¸ƒå¼æ•°æ®åº“ï¼Œé€šè¿‡LVS/Nginxä»£ç†åº”ç”¨ï¼Œå°†ç”¨æˆ·è¯·æ±‚å‡è¡¡çš„è´Ÿè½½åˆ°ä¸åŒçš„æœåŠ¡å™¨ä¸Š</p><h5 id="ï¼ˆ3ï¼‰å¾®æœåŠ¡æ¶æ„"><a href="#ï¼ˆ3ï¼‰å¾®æœåŠ¡æ¶æ„" class="headerlink" title="ï¼ˆ3ï¼‰å¾®æœåŠ¡æ¶æ„"></a>ï¼ˆ3ï¼‰å¾®æœåŠ¡æ¶æ„</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109121533619.png" alt="img"></p><p>å°†ç³»ç»Ÿæ‹†åˆ†æˆå¾ˆå¤šå°åº”ç”¨ï¼ˆå¾®æœåŠ¡ï¼‰ï¼Œå¾®æœåŠ¡å¯ä»¥éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œä¹Ÿå¯ä»¥éƒ¨ç½²åœ¨ç›¸åŒçš„æœåŠ¡å™¨ä¸åŒçš„å®¹å™¨ä¸Šã€‚å½“åº”ç”¨çš„æ•…éšœä¸ä¼šå½±å“åˆ°å…¶ä»–åº”ç”¨ï¼Œå•åº”ç”¨çš„è´Ÿè½½ä¹Ÿä¸ä¼šå½±å“åˆ°å…¶ä»–åº”ç”¨</p><h5 id="ï¼ˆ4ï¼‰SpringCloudç»„æˆ"><a href="#ï¼ˆ4ï¼‰SpringCloudç»„æˆ" class="headerlink" title="ï¼ˆ4ï¼‰SpringCloudç»„æˆ"></a>ï¼ˆ4ï¼‰SpringCloudç»„æˆ</h5><p>SpringCloud å°±æ˜¯ä¸€å¥—å·¥å…·ï¼Œå¸®åŠ©æˆ‘ä»¬å¾ˆå®¹æ˜“åœ°æ­å»ºå‡ºè¿™ä¹ˆä¸€ä¸ª é›†ç¾¤å’Œåˆ†å¸ƒå¼çš„æ¶å­å‡ºæ¥ï¼ŒSpring Cloud ä¸“æ³¨äºä¸ºå…¸å‹ç”¨ä¾‹æä¾›è‰¯å¥½çš„å¼€ç®±å³ç”¨ä½“éªŒï¼Œå¹¶ä¸ºå…¶ä»–ç”¨æˆ·æä¾›å¯æ‰©å±•æ€§æœºåˆ¶</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109121619055.png" alt="img"></p><ul><li>Spring Cloud Netflixï¼šcloudå„é¡¹æœåŠ¡ä¾èµ–ä¸å®ƒï¼Œä¸å„ç§Netflix OSSç»„ä»¶é›†æˆï¼Œç»„æˆå¾®æœåŠ¡çš„æ ¸å¿ƒï¼Œå®ƒçš„ä¸»è¦æœ‰ç»„æˆæœ‰Eureka, Hystrix, Zuul</li><li>Eurekaæ³¨å†Œä¸­å¿ƒæœåŠ¡ï¼šSpringCloudæœåŠ¡ä¸­å¿ƒï¼Œäº‘ç«¯æœåŠ¡å‘ç°ï¼Œä¸€ä¸ªåŸºäº REST çš„æœåŠ¡ï¼Œç”¨äºå®šä½æœåŠ¡ï¼Œä»¥å®ç°äº‘ç«¯ä¸­é—´å±‚æœåŠ¡å‘ç°å’Œæ•…éšœè½¬ç§»</li><li>Microserviceï¼šå¾®æœåŠ¡ï¼Œåœ¨springcloudå¯ä»¥ç®€å•ç†è§£ä¸ºä¸“èŒåšä¸€é¡¹ä»»åŠ¡çš„springbootï¼Œå¾®æœåŠ¡ä¹‹é—´å¯ä»¥é€šè¿‡Ribbonå’ŒFeignä¸¤ç§æ–¹å¼è¿›è¡Œå¾®æœåŠ¡ä¹‹é—´çš„è®¿é—®ï¼ˆFeignæ˜¯ä¸»æµæ–¹å¼ï¼‰</li><li>Zipkiné“¾è·¯è·Ÿè¸ªï¼šä»å±äºSpring Cloud Sleuthï¼ˆæ—¥å¿—æ”¶é›†å·¥å…·åŒ…ï¼‰ï¼Œä¸ºSpringCloudåº”ç”¨å®ç°äº†ä¸€ç§åˆ†å¸ƒå¼è¿½è¸ªè§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥æŸ¥çœ‹å¾®æœåŠ¡ä¹‹é—´çš„å¤æ‚çš„è°ƒç”¨å…³ç³»</li><li>Config Server é…ç½®æœåŠ¡å™¨ï¼šä¿—ç§°é…ç½®ä¸­å¿ƒï¼Œé…ç½®ç®¡ç†å·¥å…·åŒ…ï¼Œè®©ä½ å¯ä»¥æŠŠé…ç½®æ”¾åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼ˆæ¯”å¦‚é›†ä¸­æ”¾åœ¨gitï¼‰ï¼Œé›†ä¸­åŒ–ç®¡ç†é›†ç¾¤é…ç½®</li><li>Bus æ¶ˆæ¯æ€»çº¿ï¼šäº‹ä»¶ã€æ¶ˆæ¯æ€»çº¿ï¼Œç”¨äºåœ¨é›†ç¾¤ï¼ˆä¾‹å¦‚ï¼Œé…ç½®å˜åŒ–äº‹ä»¶ï¼‰ä¸­ä¼ æ’­çŠ¶æ€å˜åŒ–ï¼Œå¯ä¸Config Server è”åˆï¼Œå†ä½¿ç”¨RabbitMQå®ç°çƒ­éƒ¨ç½²ï¼ˆæ‰€è°“çƒ­éƒ¨ç½²å³ä¸éœ€è¦é‡å¯å¾®æœåŠ¡ï¼Œå¯¹é…ç½®ä¿¡æ¯è‡ªåŠ¨æ›´æ–°ï¼‰</li><li>æ–­è·¯å™¨Hystrixï¼šå®¹é”™ç®¡ç†å·¥å…·ï¼Œæ—¨åœ¨é€šè¿‡ç†”æ–­æœºåˆ¶æ§åˆ¶æœåŠ¡å’Œç¬¬ä¸‰æ–¹åº“çš„èŠ‚ç‚¹,ä»è€Œå¯¹å»¶è¿Ÿå’Œæ•…éšœæä¾›æ›´å¼ºå¤§çš„å®¹é”™èƒ½åŠ›ï¼Œç®€å•æ¥è¯´å°±æ˜¯æä¾›å¼‚å¸¸æˆ–é”™è¯¯çš„å¤„ç†å¾®æœåŠ¡ï¼Œæ¯”å¦‚è¯´æŸä¸ªå¾®æœåŠ¡å¯„äº†ï¼Œæ–­è·¯å™¨å°±å¯ä»¥è°ƒç”¨å…¶ä»–å¾®æœåŠ¡é¡¶ä¸Šï¼ˆä¸€èˆ¬æ˜¯é”™è¯¯å¤„ç†çš„å¾®æœåŠ¡ï¼‰</li><li>Hystrix dashboard æ–­è·¯å™¨ç›‘æ§ï¼šé€šè¿‡turbineå°†é›†ç¾¤ä¸­å¤šä¸ªå®ä¾‹æ±‡èšåœ¨ä¸€èµ·ï¼Œå¯¹å¾®æœåŠ¡è¿›è¡Œæ–­è·¯å™¨ç›‘æ§</li><li>ç½‘å…³Zuulï¼šZuul æ˜¯åœ¨äº‘å¹³å°ä¸Šæä¾›åŠ¨æ€è·¯ç”±,ç›‘æ§,å¼¹æ€§,å®‰å…¨ç­‰è¾¹ç¼˜æœåŠ¡çš„æ¡†æ¶ï¼Œé€šè¿‡ç½‘å…³ç®€åŒ–äº†å¯¹å„ä¸ªæœåŠ¡çš„è®¿é—®ï¼šä¸å†éœ€è¦è®°å½•å„ä¸ªå¾®æœåŠ¡çš„åœ°å€å’Œç«¯å£ï¼Œè€Œæ˜¯é€šè¿‡ç½‘å…³å»è®¿é—®ä»–ä»¬</li></ul><h4 id="Springcloud-å¯åŠ¨æµ‹è¯•"><a href="#Springcloud-å¯åŠ¨æµ‹è¯•" class="headerlink" title="Springcloud å¯åŠ¨æµ‹è¯•"></a>Springcloud å¯åŠ¨æµ‹è¯•</h4><h5 id="ï¼ˆ1ï¼‰é¡¹ç›®å¯åŠ¨"><a href="#ï¼ˆ1ï¼‰é¡¹ç›®å¯åŠ¨" class="headerlink" title="ï¼ˆ1ï¼‰é¡¹ç›®å¯åŠ¨"></a>ï¼ˆ1ï¼‰é¡¹ç›®å¯åŠ¨</h5><ul><li><p>å¯åŠ¨RabbitMQï¼ˆè®¿é—®<a href="http://127.0.0.1:15672/#">http://127.0.0.1:15672/#</a> å³å·²å¼€å¯ï¼‰</p></li><li><p>å¯åŠ¨é“¾è·¯è¿½è¸ªæœåŠ¡å™¨ï¼ˆè¿™é‡Œå¼€å¯çš„ç«¯å£è¦ä¸å¾®æœåŠ¡ä¸­çš„é…ç½®ä¸€è‡´ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar zipkin-server-2.10.1-exec.jar  --server.port=8050 --zipkin.collector.rabbitmq.addresses=localhost</span><br></pre></td></tr></table></figure></li><li><p>è®¿é—®é…ç½®ä»“åº“<a href="https://github.com/Autovy/SpringCloudConfig/">https://github.com/Autovy/SpringCloudConfig/</a> ï¼ˆä¹Ÿå¯ä»¥åœ¨config-serveræ¨¡å—çš„é…ç½®æ–‡ä»¶ä¿®æ”¹æˆè‡ªå·±çš„ä»“åº“ï¼‰</p></li><li><p>è¿è¡ŒEurekaServerApplicationï¼Œå¯åŠ¨æ³¨å†Œä¸­å¿ƒæœåŠ¡ï¼ˆç«¯å£ä¸º8761ï¼‰</p></li><li><p>è¿è¡ŒConfigServerApplicationï¼Œå¯åŠ¨é…ç½®æœåŠ¡å™¨ï¼ˆç«¯å£ä¸º8030ï¼‰</p></li><li><p>è¿è¡ŒProductDataServiceApplicationï¼Œå¯åŠ¨æ•°æ®å¾®æœåŠ¡ï¼ˆç«¯å£å¡«å†™8001ï¼Œ8002å½¢æˆé›†ç¾¤ï¼‰</p></li><li><p>è¿è¡ŒProductViewServiceFeignApplicationï¼Œå¯åŠ¨è§†å›¾å¾®æœåŠ¡ï¼ˆç«¯å£å¯å¡«å†™8012ï¼Œ8013ï¼‰</p></li><li><p>è¿è¡ŒProductServiceHystrixDashboardApplicationï¼Œå¼€å¯æ–­è·¯å™¨ç›‘æ§ï¼Œç›‘æ§å•ä¸ªå¾®æœåŠ¡ï¼ˆç«¯å£ä¸º8020ï¼‰</p></li><li><p>è¿è¡ŒProductServiceTurbineApplicationï¼Œå¼€å¯èšåˆæ–­è·¯å™¨ç›‘æ§ä»¥ç›‘æ§é›†ç¾¤ï¼ˆç«¯å£ä¸º8021ï¼‰</p></li><li><p>è¿è¡Œè§†å›¾å¾®æœåŠ¡é‡Œçš„ AccessViewService æ¥å‘¨æœŸæ€§åœ°è®¿é—® <code>http://127.0.0.1:8012/products</code> å’Œ <code>http://127.0.0.1:8013/products</code>ï¼Œä»¥æä¾›ç›‘æ§æ•°æ®</p></li><li><p>è¿è¡ŒProductServiceZuulApplicationï¼Œå¼€å¯ç½‘å…³æœåŠ¡ï¼ˆç«¯å£ä¸º8060ï¼‰</p></li></ul><h5 id="ï¼ˆ2ï¼‰æµ‹è¯•æœåŠ¡æ³¨å†Œä¸­å¿ƒ"><a href="#ï¼ˆ2ï¼‰æµ‹è¯•æœåŠ¡æ³¨å†Œä¸­å¿ƒ" class="headerlink" title="ï¼ˆ2ï¼‰æµ‹è¯•æœåŠ¡æ³¨å†Œä¸­å¿ƒ"></a>ï¼ˆ2ï¼‰æµ‹è¯•æœåŠ¡æ³¨å†Œä¸­å¿ƒ</h5><p>æ‰“å¼€é“¾æ¥<a href="http://127.0.0.1:8761/">http://127.0.0.1:8761/</a>   ï¼Œå³å¯æŸ¥çœ‹åˆ°æ³¨å†ŒæœåŠ¡ä¸­å¿ƒEureka</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191356386.png" alt="image-20210919135602819"></p><h5 id="ï¼ˆ3ï¼‰æµ‹è¯•æ•°æ®å¾®æœåŠ¡"><a href="#ï¼ˆ3ï¼‰æµ‹è¯•æ•°æ®å¾®æœåŠ¡" class="headerlink" title="ï¼ˆ3ï¼‰æµ‹è¯•æ•°æ®å¾®æœåŠ¡"></a>ï¼ˆ3ï¼‰æµ‹è¯•æ•°æ®å¾®æœåŠ¡</h5><p>æ‰“å¼€é“¾æ¥<a href="http://127.0.0.1:8001/products">http://127.0.0.1:8001/products</a> å’Œ <a href="http://127.0.0.1:8002/products">http://127.0.0.1:8002/products</a> éƒ½å¯ä»¥è®¿é—®åˆ°è¿”å›çš„æ•°æ®</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191358031.png" alt="image-20210919135818137"></p><h5 id="ï¼ˆ4ï¼‰æµ‹è¯•è§†å›¾å¾®æœåŠ¡"><a href="#ï¼ˆ4ï¼‰æµ‹è¯•è§†å›¾å¾®æœåŠ¡" class="headerlink" title="ï¼ˆ4ï¼‰æµ‹è¯•è§†å›¾å¾®æœåŠ¡"></a>ï¼ˆ4ï¼‰æµ‹è¯•è§†å›¾å¾®æœåŠ¡</h5><p>æ‰“å¼€é“¾æ¥<a href="http://127.0.0.1:8012/products">http://127.0.0.1:8012/products</a> å’Œ <a href="http://127.0.0.1:8013/products">http://127.0.0.1:8013/products</a> å¯ä»¥è®¿é—®åˆ°è§†å›¾é¡µé¢ï¼Œå¹¶ä¸”å¯ä»¥å‘ç°è§†å›¾å¾®æœåŠ¡ä¼šéšæœºé€‰æ‹©ç«¯å£è®¿é—®æ•°æ®å¾®æœåŠ¡å®ç°è´Ÿè½½å‡è¡¡</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191401332.png" alt="image-20210919140106927"></p><h5 id="ï¼ˆ5ï¼‰æµ‹è¯•æœåŠ¡é“¾è·¯è¿½è¸ª"><a href="#ï¼ˆ5ï¼‰æµ‹è¯•æœåŠ¡é“¾è·¯è¿½è¸ª" class="headerlink" title="ï¼ˆ5ï¼‰æµ‹è¯•æœåŠ¡é“¾è·¯è¿½è¸ª"></a>ï¼ˆ5ï¼‰æµ‹è¯•æœåŠ¡é“¾è·¯è¿½è¸ª</h5><p>æ‰“å¼€é“¾æ¥<a href="http://127.0.0.1:8050/zipkin/dependency/">http://127.0.0.1:8050/zipkin/dependency/</a>  å³å¯è®¿é—®åˆ°</p><p>Zipkiné“¾è·¯è·Ÿè¸ªæœåŠ¡é¡µé¢ï¼Œå³å¯çœ‹åˆ°å¾®æœåŠ¡é—´çš„è®¿é—®å…³ç³»</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191404204.png" alt="image-20210919140414948"></p><h5 id="ï¼ˆ6ï¼‰æµ‹è¯•Busæ¶ˆæ¯æ€»çº¿"><a href="#ï¼ˆ6ï¼‰æµ‹è¯•Busæ¶ˆæ¯æ€»çº¿" class="headerlink" title="ï¼ˆ6ï¼‰æµ‹è¯•Busæ¶ˆæ¯æ€»çº¿"></a>ï¼ˆ6ï¼‰æµ‹è¯•Busæ¶ˆæ¯æ€»çº¿</h5><p>å¯è®¿é—®<a href="http://127.0.0.1:8030/version/dev">http://127.0.0.1:8030/version/dev</a> æŸ¥çœ‹åˆ°é…ç½®æœåŠ¡å™¨çš„ä¿¡æ¯</p><p>è®¿é—®è§†å›¾æŸ¥çœ‹å½“å‰ç‰ˆæœ¬å·</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191407817.png" alt="image-20210919140727703"></p><p>ä¿®æ”¹é…ç½®æœåŠ¡å™¨gitä¸Šçš„ç‰ˆæœ¬å·ï¼Œè¿™é‡Œæˆ‘çš„ä»“åº“åœ°å€ä¸º<a href="https://github.com/Autovy/SpringCloudConfig/">https://github.com/Autovy/SpringCloudConfig/</a></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191411510.png" alt="image-20210919141137143"></p><p>å¯åŠ¨è§†å›¾å¾®æœåŠ¡ä¸­çš„FreshConfigUtilä½¿ç”¨ post çš„æ–¹å¼è®¿é—® <a href="http://localhost:8012/actuator/bus-refresh">http://localhost:8012/actuator/bus-refresh</a>  åœ°å€ï¼Œæ›´æ–°é…ç½®ä¿¡æ¯</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191414604.png" alt="image-20210919141416336"></p><p>æœ€åå†æŸ¥çœ‹è§†å›¾ä¸Šçš„æ›´æ–°</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191415873.png" alt="image-20210919141503558"></p><p>å¯ä»¥è®¿é—®RabbitMQé¡µé¢ï¼š<a href="http://127.0.0.1:15672/">http://127.0.0.1:15672/</a> ï¼ŒæŸ¥çœ‹é˜Ÿåˆ—ï¼Œè¿æ¥ï¼Œè¿˜æœ‰äº¤æ¢æœº</p><h5 id="ï¼ˆ7ï¼‰æµ‹è¯•Hystrixæ–­è·¯å™¨åŠå…¶ç›‘æ§"><a href="#ï¼ˆ7ï¼‰æµ‹è¯•Hystrixæ–­è·¯å™¨åŠå…¶ç›‘æ§" class="headerlink" title="ï¼ˆ7ï¼‰æµ‹è¯•Hystrixæ–­è·¯å™¨åŠå…¶ç›‘æ§"></a>ï¼ˆ7ï¼‰æµ‹è¯•Hystrixæ–­è·¯å™¨åŠå…¶ç›‘æ§</h5><p>æ‰“å¼€é“¾æ¥<a href="http://localhost:8020/hystrix">http://localhost:8020/hystrix</a> å³å¯è¿›å…¥Hystrixæ–­è·¯å™¨çš„ç›‘æ§å…¥å£</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191417418.png" alt="image-20210919141754328"></p><p>æ¡†å†…è¾“å…¥<a href="http://localhost:8012/actuator/hystrix.stream">http://localhost:8012/actuator/hystrix.stream</a> å³å¯å¯¹8012ç«¯å£çš„è§†å›¾å¾®æœåŠ¡è¿›è¡Œç›‘æ§</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191419460.png" alt="image-20210919141940229"></p><p>æ¡†å†…è¾“å…¥<a href="http://localhost:8021/turbine.stream">http://localhost:8021/turbine.stream</a> å³å¯å®ç°å¯¹æ•´ä¸ªé›†ç¾¤çš„è§†å›¾å¾®æœåŠ¡è¿›è¡Œç›‘æ§</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191421059.png" alt="image-20210919142137829"></p><p><strong>åœæ­¢æ•°æ®å¾®æœåŠ¡</strong>ProductDataServiceApplicationé›†ç¾¤ï¼Œè§¦å‘æ–­è·¯å™¨ï¼š</p><p>è®¿é—®è§†å›¾å¯å¾—</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191429890.png" alt="image-20210919142903819"></p><p>è®¿é—®å•ä¸ªå¾®æœåŠ¡ç›‘æ§é¡µé¢å¯å¾—</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191432572.png" alt="image-20210919143250565"></p><p>è®¿é—®èšåˆé›†ç¾¤å¾®æœåŠ¡ç›‘æ§é¡µé¢å¯å¾—</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191431299.png" alt="image-20210919143120242"></p><h5 id="ï¼ˆ8ï¼‰ç½‘å…³æµ‹è¯•"><a href="#ï¼ˆ8ï¼‰ç½‘å…³æµ‹è¯•" class="headerlink" title="ï¼ˆ8ï¼‰ç½‘å…³æµ‹è¯•"></a>ï¼ˆ8ï¼‰ç½‘å…³æµ‹è¯•</h5><p>å¯ä»¥åœ¨zuulçš„é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹å¾®æœåŠ¡çš„è®¿é—®è·¯ç”±ï¼Œæˆ‘ç»‘å®šçš„è·¯ç”±å¦‚ä¸‹ï¼š</p><p><a href="http://localhost:8060/api-data/products">http://localhost:8060/api-data/products</a>  ï¼šè®¿é—®æ•°æ®å¾®æœåŠ¡é›†ç¾¤</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191358031.png" alt="image-20210919135818137"></p><p><a href="http://localhost:8060/api-view/products">http://localhost:8060/api-view/products</a>  ï¼šè®¿é—®è§†å›¾å¾®æœåŠ¡é›†ç¾¤</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191426987.png" alt="image-20210919142625877"></p><p>å¯ä»¥å‘ç°å…¶è®¿é—®é›†ç¾¤çš„ç«¯å£ä¹Ÿæ˜¯è´Ÿè½½å‡è¡¡çš„</p><h4 id="æœåŠ¡æ³¨å†Œä¸­å¿ƒ"><a href="#æœåŠ¡æ³¨å†Œä¸­å¿ƒ" class="headerlink" title="æœåŠ¡æ³¨å†Œä¸­å¿ƒ"></a>æœåŠ¡æ³¨å†Œä¸­å¿ƒ</h4><h5 id="ï¼ˆ1ï¼‰éœ€æ±‚"><a href="#ï¼ˆ1ï¼‰éœ€æ±‚" class="headerlink" title="ï¼ˆ1ï¼‰éœ€æ±‚"></a>ï¼ˆ1ï¼‰éœ€æ±‚</h5><p>é€šè¿‡æœåŠ¡æ³¨å†Œä¸­å¿ƒç®¡ç†å¾®æœåŠ¡ï¼Œå¹¶ä¸”è®©å¾®æœåŠ¡ç›´æ¥å¯ä»¥ç›¸äº’å®šä½äº¤æµ</p><h5 id="ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–"><a href="#ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–" class="headerlink" title="ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–"></a>ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--        æ·»åŠ eurekaæœåŠ¡ç«¯--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ3ï¼‰ç›¸å…³é…ç½®"><a href="#ï¼ˆ3ï¼‰ç›¸å…³é…ç½®" class="headerlink" title="ï¼ˆ3ï¼‰ç›¸å…³é…ç½®"></a>ï¼ˆ3ï¼‰ç›¸å…³é…ç½®</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># eurekaæœåŠ¡é…ç½®</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">localhost</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">fetch-registry:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">serviceUrl:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://$&#123;eureka.instance.hostname&#125;:$&#123;server.port&#125;/eureka/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># sringå¾®æœåŠ¡æ¨¡å—å‘½å</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">eureka-server</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>hostname: localhost è¡¨ç¤ºä¸»æœºåç§°</li><li>registerWithEurekaï¼šfalse è¡¨ç¤ºæ˜¯å¦æ³¨å†Œåˆ°æœåŠ¡å™¨ã€‚ å› ä¸ºå®ƒæœ¬èº«å°±æ˜¯æœåŠ¡å™¨ï¼Œæ‰€ä»¥å°±æ— éœ€æŠŠè‡ªå·±æ³¨å†Œåˆ°æœåŠ¡å™¨</li><li>fetchRegistry: false è¡¨ç¤ºæ˜¯å¦è·å–æœåŠ¡å™¨çš„æ³¨å†Œä¿¡æ¯ï¼Œå’Œä¸Šé¢åŒç†ï¼Œè¿™é‡Œä¹Ÿè®¾ç½®ä¸º false</li><li>defaultZoneï¼š <code>http://$&#123;eureka.instance.hostname&#125;:$&#123;server.port&#125;/eureka/</code> è‡ªå·±ä½œä¸ºæœåŠ¡å™¨ï¼Œå…¬å¸ƒå‡ºæ¥çš„åœ°å€ã€‚ æ¯”å¦‚åç»­æŸä¸ªå¾®æœåŠ¡è¦æŠŠè‡ªå·±æ³¨å†Œåˆ° eureka server, é‚£ä¹ˆå°±è¦ä½¿ç”¨è¿™ä¸ªåœ°å€ï¼š <a href="http://localhost:8761/eureka/">http://localhost:8761/eureka/</a></li></ul><h5 id="ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨"><a href="#ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨" class="headerlink" title="ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨"></a>ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaServer</span> <span class="comment">// æ³¨è§£æ ‡æ³¨ä¸ºEurekaæœåŠ¡ç«¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EurekaServerApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¾ç½®é»˜è®¤ç«¯å£</span></span><br><span class="line">        <span class="keyword">int</span> port = <span class="number">8761</span>;</span><br><span class="line">        <span class="comment">// å¯åŠ¨EurekaServerç®¡ç†é¡µé¢</span></span><br><span class="line">        <span class="keyword">new</span> SpringApplicationBuilder(EurekaServerApplication.class)</span><br><span class="line">                .properties(<span class="string">&quot;server.port=&quot;</span> + port)</span><br><span class="line">                .run(args);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="é…ç½®æœåŠ¡å™¨"><a href="#é…ç½®æœåŠ¡å™¨" class="headerlink" title="é…ç½®æœåŠ¡å™¨"></a>é…ç½®æœåŠ¡å™¨</h4><h5 id="ï¼ˆ1ï¼‰éœ€æ±‚-1"><a href="#ï¼ˆ1ï¼‰éœ€æ±‚-1" class="headerlink" title="ï¼ˆ1ï¼‰éœ€æ±‚"></a>ï¼ˆ1ï¼‰éœ€æ±‚</h5><p>å¾®æœåŠ¡è¦åšé›†ç¾¤ï¼Œè¿™å°±æ„å‘³ç€ï¼Œä¼šæœ‰å¤šä¸ªå¾®æœåŠ¡å®ä¾‹ã€‚ åœ¨ä¸šåŠ¡ä¸Šæœ‰æ—¶å€™éœ€è¦ä¿®æ”¹ä¸€äº›é…ç½®ä¿¡æ¯ï¼Œæ¯”å¦‚è¯´ ç‰ˆæœ¬ä¿¡æ¯ï¼Œå€˜è‹¥æ²¡æœ‰é…ç½®æœåŠ¡ï¼Œ é‚£ä¹ˆå°±éœ€è¦æŒ¨ä¸ªä¿®æ”¹å¾®æœåŠ¡ï¼ŒæŒ¨ä¸ªé‡æ–°éƒ¨ç½²å¾®æœåŠ¡ï¼Œè¿™æ ·å°±æ¯”è¾ƒéº»çƒ¦ã€‚</p><p>æˆ‘ä»¬å¯ä»¥æŠŠè¿™äº›é…ç½®ä¿¡æ¯æ”¾åœ¨ä¸€ä¸ªå…¬å…±çš„åœ°æ–¹ï¼Œæ¯”å¦‚gitï¼Œç„¶åé€šè¿‡é…ç½®æœåŠ¡å™¨æŠŠå®ƒè·å–ä¸‹æ¥ï¼Œç„¶åå¾®æœåŠ¡å†ä»é…ç½®æœåŠ¡å™¨ä¸Šå–ä¸‹æ¥</p><h5 id="ï¼ˆ2ï¼‰gitå‡†å¤‡"><a href="#ï¼ˆ2ï¼‰gitå‡†å¤‡" class="headerlink" title="ï¼ˆ2ï¼‰gitå‡†å¤‡"></a>ï¼ˆ2ï¼‰gitå‡†å¤‡</h5><p>åœ¨githubä¸Šæ–°å»ºä»“åº“ï¼Œå¹¶åˆ›å»ºrespoç›®å½•ï¼Œåœ¨ç›®å½•ä¸‹æ·»åŠ  product-view-service-feign-dev.propertiesæ–‡ä»¶å¹¶å†™å…¥ç‰ˆæœ¬ä¿¡æ¯</p><p>å¦‚æˆ‘åˆ›å»ºçš„ä»“åº“ï¼š<a href="https://github.com/Autovy/SpringCloudConfig">https://github.com/Autovy/SpringCloudConfig</a></p><h5 id="ï¼ˆ3ï¼‰ç›¸å…³ä¾èµ–"><a href="#ï¼ˆ3ï¼‰ç›¸å…³ä¾èµ–" class="headerlink" title="ï¼ˆ3ï¼‰ç›¸å…³ä¾èµ–"></a>ï¼ˆ3ï¼‰ç›¸å…³ä¾èµ–</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- eurekaå®¢æˆ·ç«¯æ³¨å†Œä¾èµ– --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- springboot webæ”¯æŒ --&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®æœåŠ¡æ”¯æŒ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-config-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ4ï¼‰ç›¸å…³é…ç½®"><a href="#ï¼ˆ4ï¼‰ç›¸å…³é…ç½®" class="headerlink" title="ï¼ˆ4ï¼‰ç›¸å…³é…ç½®"></a>ï¼ˆ4ï¼‰ç›¸å…³é…ç½®</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é…ç½®å¾®æœåŠ¡åä¸é…ç½®æœåŠ¡å™¨çš„é…ç½®ä¿¡æ¯ï¼ˆè¿™é‡Œç”¨gitä½œä¸ºé…ç½®æœåŠ¡å™¨ï¼‰</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">config-server</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">config:</span></span><br><span class="line">      <span class="attr">label:</span> <span class="string">master</span></span><br><span class="line">      <span class="attr">server:</span></span><br><span class="line">        <span class="attr">git:</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">https://github.com/Autovy/SpringCloudConfig/</span> <span class="comment">#githubä»“åº“åœ°å€</span></span><br><span class="line">          <span class="attr">search-paths:</span> <span class="string">respo</span>  <span class="comment"># ä»“åº“ä¸‹çš„ç›®å½•</span></span><br><span class="line">          <span class="attr">default-label:</span> <span class="string">main</span>  <span class="comment"># åˆ†æ”¯åæ”¹ä¸ºäº†main</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®æ³¨å†Œä¸­æ€§çš„åœ°å€è¦ä¸Eurekaçš„é…ç½®å¯¹åº”</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">serviceUrl:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://localhost:8761/eureka/</span></span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ5ï¼‰æœåŠ¡å¯åŠ¨"><a href="#ï¼ˆ5ï¼‰æœåŠ¡å¯åŠ¨" class="headerlink" title="ï¼ˆ5ï¼‰æœåŠ¡å¯åŠ¨"></a>ï¼ˆ5ï¼‰æœåŠ¡å¯åŠ¨</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span>  <span class="comment">// æ³¨è§£æ ‡æ³¨ä¸ºEurekaå®¢æˆ·ç«¯ï¼Œå®ç°æ³¨å†Œ</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="meta">@EnableConfigServer</span>  <span class="comment">// ä½¿ç”¨è¯¥æ³¨è§£è¡¨æ˜è¯¥springbootæ˜¯ä¸ªé…ç½®æœåŠ¡å™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConfigServerApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> port = <span class="number">8030</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> SpringApplicationBuilder(ConfigServerApplication.class)</span><br><span class="line">                .properties(<span class="string">&quot;server.port=&quot;</span>+port)</span><br><span class="line">                .run(args);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="RabbitMQ"><a href="#RabbitMQ" class="headerlink" title="RabbitMQ"></a>RabbitMQ</h4><h5 id="ï¼ˆ1ï¼‰-RabbitMQçš„ä»‹ç»"><a href="#ï¼ˆ1ï¼‰-RabbitMQçš„ä»‹ç»" class="headerlink" title="ï¼ˆ1ï¼‰ RabbitMQçš„ä»‹ç»"></a>ï¼ˆ1ï¼‰ RabbitMQçš„ä»‹ç»</h5><p>é€šè¿‡RabbitMQä¸æ¶ˆæ¯æ€»çº¿Buså®ç°é…ç½®æœåŠ¡å™¨çƒ­éƒ¨ç½²å³è‡ªåŠ¨æ›´æ–°é…ç½®ä¿¡æ¯</p><p>RabbitMQ æ˜¯ä¸€ä¸ªç”± Erlang è¯­è¨€å¼€å‘çš„ AMQP çš„å¼€æºå®ç°ã€‚</p><p><code>AMQP</code>(<code>Advanced Message Queuing Protocol</code>)ï¼Œé¡¾åæ€ä¹‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ¶ˆæ¯åè®®ï¼Œèƒ½å¤Ÿä½¿å¾—éµå¾ªè¯¥åè®®çš„å®¢æˆ·ç«¯å’Œæ¶ˆæ¯ä¸­é—´ä»¶(<code>Broker</code>)è¿›è¡Œé€šè®¯</p><h5 id="ï¼ˆ2ï¼‰RabbitMQå®‰è£…"><a href="#ï¼ˆ2ï¼‰RabbitMQå®‰è£…" class="headerlink" title="ï¼ˆ2ï¼‰RabbitMQå®‰è£…"></a>ï¼ˆ2ï¼‰RabbitMQå®‰è£…</h5><p>é¦–å…ˆè¦å®‰è£…erlangï¼Œå¹¶é…ç½®ç¯å¢ƒï¼Œæ‰ç»§ç»­å®‰è£…RabbitMQ</p><p>é…ç½®æ’ä»¶åé‡å¯RabbitMQ</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109160921566.png" alt="image-20210916092150386"></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109160922543.png" alt="image-20210916092243391"></p><h5 id="ï¼ˆ3ï¼‰RabbitMQé¡µé¢æ— æ³•è®¿é—®é—®é¢˜"><a href="#ï¼ˆ3ï¼‰RabbitMQé¡µé¢æ— æ³•è®¿é—®é—®é¢˜" class="headerlink" title="ï¼ˆ3ï¼‰RabbitMQé¡µé¢æ— æ³•è®¿é—®é—®é¢˜"></a>ï¼ˆ3ï¼‰RabbitMQé¡µé¢æ— æ³•è®¿é—®é—®é¢˜</h5><p>ä¸€èˆ¬æ¥è¯´å¼€å¯äº†RabbitMQæœåŠ¡åï¼Œå¯ä»¥é€šè¿‡é“¾æ¥<a href="http://127.0.0.1:15672/è¿›è¡Œè®¿é—®">http://127.0.0.1:15672/è¿›è¡Œè®¿é—®</a></p><p>å¦‚æœé¡µé¢æ— æ³•è®¿é—®åˆ°ï¼Œå¯ä»¥è‡ªè¡Œä¸‹åˆ—è¯­å¥é‡æ–°ç”Ÿæˆç›¸å…³é…ç½®æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net stop rabbitmq &amp;&amp; rabbitmq-server -detached &amp;&amp; net start rabbitmq</span><br></pre></td></tr></table></figure><p>è¿™æ ·å³å¯è®¿é—®åˆ°RabbitMQçš„é¡µé¢ï¼ˆç”¨æˆ·ä¸å¯†ç é»˜è®¤ä¸ºguest/guestï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109160935154.png" alt="image-20210916093536018"></p><h5 id="ï¼ˆ4ï¼‰æ¶ˆæ¯è·¯ç”±è¿‡ç¨‹"><a href="#ï¼ˆ4ï¼‰æ¶ˆæ¯è·¯ç”±è¿‡ç¨‹" class="headerlink" title="ï¼ˆ4ï¼‰æ¶ˆæ¯è·¯ç”±è¿‡ç¨‹"></a>ï¼ˆ4ï¼‰æ¶ˆæ¯è·¯ç”±è¿‡ç¨‹</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109160946397.png" alt="image-20210916094610081"></p><p>æ¶ˆæ¯<code>(message)</code>å‘å¸ƒç»™äº¤æ¢æœº<code>(Exchange)</code></p><p><code>Exchange</code>ç›¸å½“äºé‚®å±€æˆ–è€…ä¿¡ç®±ï¼Œå®ƒæ¥æ”¶åˆ°æ¶ˆæ¯åä¼šæ ¹æ®ä¸åŒçš„è§„åˆ™(ç§°ä¸º<code>Bindings</code>)æ¥ç¡®å®šè¦å‘ç»™å“ªä¸ªé˜Ÿåˆ—<code>(queue)</code></p><p>æœ€åAMQPä»£ç†ä¼šå°†æ¶ˆæ¯æŠ•é€’ç»™è®¢é˜…äº†æ­¤é˜Ÿåˆ—çš„æ¶ˆè´¹è€…ï¼Œæˆ–è€…æ˜¯æ¶ˆè´¹è€…ä¾æ®éœ€æ±‚è‡ªè¡Œè·å–</p><h5 id="ï¼ˆ5ï¼‰æ¨¡å¼åˆ†ç±»"><a href="#ï¼ˆ5ï¼‰æ¨¡å¼åˆ†ç±»" class="headerlink" title="ï¼ˆ5ï¼‰æ¨¡å¼åˆ†ç±»"></a>ï¼ˆ5ï¼‰æ¨¡å¼åˆ†ç±»</h5><p>RabbitMQæä¾›äº†å››ç§Exchangeæ¨¡å¼ï¼šfanout,direct,topic,header ã€‚headeråœ¨å®é™…ä½¿ç”¨ä¸­å¾ˆå°‘ç”¨åˆ°ï¼Œæ•…æˆ‘ä»¬åªä»‹ç»å‰é¢ä¸‰ç§</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109160953038.png" alt="img"></p><ul><li>Direct æ¨¡å¼å°±æ˜¯æŒ‡å®šé˜Ÿåˆ—æ¨¡å¼ï¼Œ æ¶ˆæ¯æ¥äº†ï¼Œåªå‘ç»™æŒ‡å®šçš„ Queue, å…¶ä»–Queue éƒ½æ”¶ä¸åˆ°</li><li>Topic æ¨¡å¼å°±æ˜¯ä¸»é¢˜æ¨¡å¼ï¼ŒQueue æŒ‰ç…§æŸç§ä¸»é¢˜åˆ†ç±»æ¥æ”¶æ¶ˆæ¯</li><li>Fanout æ¨¡å¼å°±æ˜¯å¹¿æ’­æ¨¡å¼ï¼Œæ¶ˆæ¯æ¥äº†ï¼Œä¼šå‘ç»™æ‰€æœ‰çš„é˜Ÿåˆ—</li></ul><p>åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬è®©config-serverå»gitè·å–æœ€æ–°é…ç½®ä¿¡æ¯ï¼Œå¹¶å°†è¯¥ä¿¡æ¯å¹¿æ’­ç»™é›†ç¾¤ä¸­çš„æ‰€æœ‰è§†å›¾å¾®æœåŠ¡</p><h4 id="æ–­è·¯å™¨ç›‘æ§"><a href="#æ–­è·¯å™¨ç›‘æ§" class="headerlink" title="æ–­è·¯å™¨ç›‘æ§"></a>æ–­è·¯å™¨ç›‘æ§</h4><h5 id="ï¼ˆ1ï¼‰éœ€æ±‚-2"><a href="#ï¼ˆ1ï¼‰éœ€æ±‚-2" class="headerlink" title="ï¼ˆ1ï¼‰éœ€æ±‚"></a>ï¼ˆ1ï¼‰éœ€æ±‚</h5><p>å‰é¢æˆ‘ä»¬äº†è§£äº†æ–­è·¯å™¨ï¼Œ å½“æ•°æ®æœåŠ¡ä¸å¯ç”¨çš„æ—¶å€™ï¼Œ æ–­è·¯å™¨å°±ä¼šå‘æŒ¥ä½œç”¨</p><p>è€Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ–­è·¯å™¨ç›‘æ§æ¥å¯è§†åŒ–æ–­è·¯å™¨è¿è¡Œæƒ…å†µ</p><h5 id="ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–-1"><a href="#ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–-1" class="headerlink" title="ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–"></a>ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- åœ¨eurekaæ³¨å†Œå¾®æœåŠ¡ä¾èµ– --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ·»åŠ webæ”¯æŒ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ¶ˆæ¯æ€»çº¿ä¾èµ–ï¼Œç”¨äºè®¿é—®è·¯å¾„/actuator/bus-refresh --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å¢åŠ æ–­è·¯å™¨ä¾èµ– --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-hystrix<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">&lt;!-- å¢åŠ æ–­è·¯å™¨ä¾èµ–ç›‘æ§é¢æ¿ä¾èµ– --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-hystrix-dashboard<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ3ï¼‰ç›¸å…³é…ç½®-1"><a href="#ï¼ˆ3ï¼‰ç›¸å…³é…ç½®-1" class="headerlink" title="ï¼ˆ3ï¼‰ç›¸å…³é…ç½®"></a>ï¼ˆ3ï¼‰ç›¸å…³é…ç½®</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é…ç½®å¾®æœåŠ¡å¹¶å‘½å</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">hystrix-dashboard</span></span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨-1"><a href="#ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨-1" class="headerlink" title="ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨"></a>ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableHystrixDashboard</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductServiceHystrixDashboardApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> port = <span class="number">8020</span>;</span><br><span class="line">        <span class="keyword">if</span>(!NetUtil.isUsableLocalPort(port)) &#123;</span><br><span class="line">            System.err.printf(<span class="string">&quot;ç«¯å£%dè¢«å ç”¨äº†ï¼Œæ— æ³•å¯åŠ¨%n&quot;</span>, port );</span><br><span class="line">            System.exit(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ„é€ æœåŠ¡</span></span><br><span class="line">        <span class="keyword">new</span> SpringApplicationBuilder(ProductServiceHystrixDashboardApplication.class)</span><br><span class="line">                .properties(<span class="string">&quot;server.port=&quot;</span> + port)</span><br><span class="line">                .run(args);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ–­è·¯å™¨èšåˆç›‘æ§"><a href="#æ–­è·¯å™¨èšåˆç›‘æ§" class="headerlink" title="æ–­è·¯å™¨èšåˆç›‘æ§"></a>æ–­è·¯å™¨èšåˆç›‘æ§</h4><h5 id="ï¼ˆ1ï¼‰éœ€æ±‚-3"><a href="#ï¼ˆ1ï¼‰éœ€æ±‚-3" class="headerlink" title="ï¼ˆ1ï¼‰éœ€æ±‚"></a>ï¼ˆ1ï¼‰éœ€æ±‚</h5><p>ä¸Šé¢çš„å†…å®¹åªèƒ½é’ˆå¯¹ä¸€ä¸ªå¾®æœåŠ¡è¿›è¡Œæ–­è·¯å™¨ç›‘æ§ï¼Œä½†æ˜¯ä¸€ä¸ªå¾®æœåŠ¡é€šå¸¸ç”±å¤šä¸ªå®ä¾‹ç»„æˆï¼Œç›‘æ§èµ·æ¥ååˆ†ä¸æ–¹ä¾¿ï¼›springcloudæä¾›äº†turbineå¯ä»¥æŠŠä¸€ä¸ªé›†ç¾¤é‡Œçš„å¤šä¸ªå®ä¾‹æ±‡èšåœ¨ä¸€ä¸ªturbineé‡Œï¼Œè¿™æ ·å°±èƒ½å¤Ÿåœ¨é›†ç¾¤å±‚é¢è¿›è¡Œç›‘æ§äº†</p><h5 id="ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–-2"><a href="#ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–-2" class="headerlink" title="ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–"></a>ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åœ¨eurekaæ³¨å†Œå¾®æœåŠ¡ä¾èµ– --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ¶ˆæ¯æ€»çº¿ä¾èµ–ï¼Œç”¨äºè®¿é—®è·¯å¾„/actuator/bus-refresh --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¢åŠ æ–­è·¯å™¨ä¾èµ– --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-hystrix<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¢åŠ æ–­è·¯å™¨ä¾èµ–ç›‘æ§é¢æ¿ä¾èµ– --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-hystrix-dashboard<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¢åŠ turbine --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-turbine<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ3ï¼‰ç›¸å…³é…ç½®-2"><a href="#ï¼ˆ3ï¼‰ç›¸å…³é…ç½®-2" class="headerlink" title="ï¼ˆ3ï¼‰ç›¸å…³é…ç½®"></a>ï¼ˆ3ï¼‰ç›¸å…³é…ç½®</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">turbine</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®turbine</span></span><br><span class="line"><span class="attr">turbine:</span></span><br><span class="line">  <span class="attr">aggregator:</span></span><br><span class="line">    <span class="attr">cluster-config:</span> <span class="string">default</span></span><br><span class="line">  <span class="comment"># é…ç½®Eurekaä¸­çš„serviceIdåˆ—è¡¨ï¼Œè¡¨æ˜ç›‘æ§å“ªäº›æœåŠ¡</span></span><br><span class="line">  <span class="comment">#ï¼ˆè¿™æ ·å°±ä¼šæŠŠå¾®æœåŠ¡åç§°ä¸ºproduct-view-service-feignçš„å®ä¾‹ä¿¡æ¯æ”¶é›†èµ·æ¥ï¼‰</span></span><br><span class="line">  <span class="attr">app-config:</span> <span class="string">product-view-service-feign</span></span><br><span class="line">  <span class="attr">cluster-name-expression:</span> <span class="string">new</span> <span class="string">String(&quot;default&quot;)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®æ³¨å†Œä¸­æ€§çš„åœ°å€è¦ä¸Eurekaçš„é…ç½®å¯¹åº”ï¼ˆæ³¨å†Œï¼‰</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">serviceUrl:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://localhost:8761/eureka/</span></span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨-2"><a href="#ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨-2" class="headerlink" title="ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨"></a>ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯åŠ¨ç±»</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableTurbine</span> <span class="comment">// å¼€å¯Turbine</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductServiceTurbineApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> port = <span class="number">8021</span>;</span><br><span class="line">        <span class="keyword">if</span>(!NetUtil.isUsableLocalPort(port))&#123;</span><br><span class="line">            System.err.printf(<span class="string">&quot;ç«¯å£%dè¢«å ç”¨ï¼Œæ— æ³•å¯åŠ¨%n&quot;</span>, port);</span><br><span class="line">            System.exit(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">new</span> SpringApplicationBuilder(ProductServiceTurbineApplication.class)</span><br><span class="line">                .properties(<span class="string">&quot;server.port=&quot;</span>+ port)</span><br><span class="line">                .run(args);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç½‘å…³Zuul"><a href="#ç½‘å…³Zuul" class="headerlink" title="ç½‘å…³Zuul"></a>ç½‘å…³Zuul</h4><h5 id="ï¼ˆ1ï¼‰éœ€æ±‚-4"><a href="#ï¼ˆ1ï¼‰éœ€æ±‚-4" class="headerlink" title="ï¼ˆ1ï¼‰éœ€æ±‚"></a>ï¼ˆ1ï¼‰éœ€æ±‚</h5><p>å¾®æœåŠ¡æœ‰å¯èƒ½æ”¾åœ¨ä¸åŒçš„ ip åœ°å€ä¸Šï¼Œæœ‰å¯èƒ½æ˜¯ä¸åŒçš„ç«¯å£</p><p>ä¸ºäº†è®¿é—®ä»–ä»¬ï¼Œå°±éœ€è¦è®°å½•è¿™äº›åœ°å€å’Œç«¯å£ã€‚ è€Œåœ°å€å’Œç«¯å£éƒ½å¯èƒ½ä¼šå˜åŒ–ï¼Œè¿™å°±å¢åŠ äº†è®¿é—®è€…çš„è´Ÿæ‹…</p><p>è¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ç½‘å…³ç®€åŒ–å¯¹å¾®æœåŠ¡çš„è®¿é—®ï¼Œä»…éœ€è¦ä¸€ä¸ªåœ°å€ä¸€ä¸ªç«¯å£å°±å¯ä»¥å®ç°å¯¹ä¸€ä¸ªå¾®æœåŠ¡é›†ç¾¤çš„è®¿é—®</p><h5 id="ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–-3"><a href="#ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–-3" class="headerlink" title="ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–"></a>ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¾®æœåŠ¡æ³¨å†Œä¸­å¿ƒ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- webæœåŠ¡æ”¯æŒ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¢åŠ zuulç½‘å…³ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-zuul<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ3ï¼‰ç›¸å…³é…ç½®-3"><a href="#ï¼ˆ3ï¼‰ç›¸å…³é…ç½®-3" class="headerlink" title="ï¼ˆ3ï¼‰ç›¸å…³é…ç½®"></a>ï¼ˆ3ï¼‰ç›¸å…³é…ç½®</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">product-service-zuul</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®æ³¨å†Œä¸­æ€§çš„åœ°å€è¦ä¸Eurekaçš„é…ç½®å¯¹åº”ï¼ˆæ³¨å†Œï¼‰</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">serviceUrl:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://localhost:8761/eureka/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹zuulè¿›è¡Œè·¯ç”±æ˜ å°„</span></span><br><span class="line"><span class="attr">zuul:</span></span><br><span class="line">  <span class="attr">routes:</span></span><br><span class="line">    <span class="attr">api-a:</span></span><br><span class="line">      <span class="attr">path:</span> <span class="string">/api-data/**</span></span><br><span class="line">      <span class="attr">serviceId:</span> <span class="string">PRODUCT-DATA-SERVICE</span></span><br><span class="line">    <span class="attr">api-b:</span></span><br><span class="line">      <span class="attr">path:</span> <span class="string">/api-view/**</span></span><br><span class="line">      <span class="attr">serviceId:</span> <span class="string">PRODUCT-VIEW-SERVICE-FEIGN</span></span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨-3"><a href="#ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨-3" class="headerlink" title="ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨"></a>ï¼ˆ4ï¼‰æœåŠ¡å¯åŠ¨</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯åŠ¨ç±»</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableZuulProxy</span> <span class="comment">// ç½‘å…³æœåŠ¡</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span> <span class="comment">// æ³¨å†ŒæœåŠ¡å®¢æˆ·ç«¯</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductServiceZuulApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> port = <span class="number">8060</span>;</span><br><span class="line">        <span class="keyword">if</span>(!NetUtil.isUsableLocalPort(port))&#123;</span><br><span class="line">            System.err.printf(<span class="string">&quot;ç«¯å£%dè¢«å ç”¨äº†ï¼Œæ— æ³•å¯åŠ¨%d&quot;</span>, port);</span><br><span class="line">            System.exit(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> SpringApplicationBuilder(ProductServiceZuulApplication.class)</span><br><span class="line">                .properties(<span class="string">&quot;server.port=&quot;</span> + port)</span><br><span class="line">                .run(args);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ•°æ®å¾®æœåŠ¡"><a href="#æ•°æ®å¾®æœåŠ¡" class="headerlink" title="æ•°æ®å¾®æœåŠ¡"></a>æ•°æ®å¾®æœåŠ¡</h4><h5 id="ï¼ˆ1ï¼‰éœ€æ±‚-5"><a href="#ï¼ˆ1ï¼‰éœ€æ±‚-5" class="headerlink" title="ï¼ˆ1ï¼‰éœ€æ±‚"></a>ï¼ˆ1ï¼‰éœ€æ±‚</h5><p>è®¿é—®æ•°æ®åº“ä¸ºè§†å›¾å¾®æœåŠ¡æä¾›æ•°æ®ï¼ˆåœ¨æœ¬é¡¹ç›®ä¸­ä¸ºäº†é…ç½®æ–¹ä¾¿ï¼Œä¸è®¾daoå±‚ç›´æ¥åœ¨serviceå±‚æä¾›å‡æ•°æ®ï¼‰ï¼ŒçœŸæ­£æ„ä¹‰ä¸Šå®Œæ•´çš„springboot</p><h5 id="ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–-4"><a href="#ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–-4" class="headerlink" title="ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–"></a>ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- eurekaå®¢æˆ·ç«¯ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- webæœåŠ¡ç”¨äºæä¾›æ§åˆ¶å±‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--å¢åŠ zipkinï¼Œä½¿æœåŠ¡å¯ä»¥è¢«è¿½è¸ªåˆ°--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-zipkin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ3ï¼‰ç›¸å…³é…ç½®-4"><a href="#ï¼ˆ3ï¼‰ç›¸å…³é…ç½®-4" class="headerlink" title="ï¼ˆ3ï¼‰ç›¸å…³é…ç½®"></a>ï¼ˆ3ï¼‰ç›¸å…³é…ç½®</h5><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é…ç½®å¾®æœåŠ¡åä¸é…ç½®æœåŠ¡é“¾è·¯è¿½è¸ª</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">product-data-service</span></span><br><span class="line">  <span class="attr">zipkin:</span></span><br><span class="line">    <span class="attr">base-url:</span> <span class="string">http://localhost:8050</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®æ³¨å†Œä¸­æ€§çš„åœ°å€è¦ä¸Eurekaçš„é…ç½®å¯¹åº”</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">serviceUrl:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://localhost:8761/eureka/</span></span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ4ï¼‰å®ä½“ç±»"><a href="#ï¼ˆ4ï¼‰å®ä½“ç±»" class="headerlink" title="ï¼ˆ4ï¼‰å®ä½“ç±»"></a>ï¼ˆ4ï¼‰å®ä½“ç±»</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ„é€ å®ä½“ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> price;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPrice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPrice</span><span class="params">(<span class="keyword">int</span> price)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment">// é»˜è®¤æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Product</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// åˆ©ç”¨è¯¥æ„é€ æ–¹æ³•ï¼Œå¯ä»¥å£°æ˜ä¸€ä¸ªç”±é»˜è®¤å€¼çš„å¯¹è±¡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Product</span><span class="params">(<span class="keyword">int</span> id, String name, <span class="keyword">int</span> price)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ5ï¼‰æœåŠ¡å±‚"><a href="#ï¼ˆ5ï¼‰æœåŠ¡å±‚" class="headerlink" title="ï¼ˆ5ï¼‰æœåŠ¡å±‚"></a>ï¼ˆ5ï¼‰æœåŠ¡å±‚</h5><p>ä¸æ¥å…¥daoå±‚ï¼Œç›´æ¥åœ¨æœåŠ¡å±‚æä¾›å‡æ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æœåŠ¡å±‚ï¼ˆè¿™é‡Œä¸æ¥å…¥daoå±‚ï¼Œè€Œæ˜¯æä¾›å‡æ•°æ®ï¼‰</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å¾—é…ç½®ä¸­çš„ç«¯å£å·</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;server.port&#125;&quot;)</span></span><br><span class="line">    String port;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Product&gt; <span class="title">list</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;Product&gt; ps = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="comment">// æä¾›å‡æ•°æ®ï¼Œlistæ–¹æ³•æ²¡æœ‰å¯¹åº”daoå±‚ç›¸åº”çš„æ•°æ®åº“æ“ä½œæ–¹æ³•</span></span><br><span class="line">        ps.add(<span class="keyword">new</span> Product(<span class="number">1</span>,<span class="string">&quot;product a from port:&quot;</span>+port, <span class="number">50</span>));</span><br><span class="line">        ps.add(<span class="keyword">new</span> Product(<span class="number">2</span>,<span class="string">&quot;product b from port:&quot;</span>+port, <span class="number">150</span>));</span><br><span class="line">        ps.add(<span class="keyword">new</span> Product(<span class="number">3</span>,<span class="string">&quot;product c from port:&quot;</span>+port, <span class="number">250</span>));</span><br><span class="line">        <span class="keyword">return</span> ps;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ6ï¼‰æ§åˆ¶å±‚"><a href="#ï¼ˆ6ï¼‰æ§åˆ¶å±‚" class="headerlink" title="ï¼ˆ6ï¼‰æ§åˆ¶å±‚"></a>ï¼ˆ6ï¼‰æ§åˆ¶å±‚</h5><p>æ¥å…¥æœåŠ¡å±‚å¹¶æ˜ å°„è·¯å¾„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductController</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è‡ªåŠ¨è£…é…æœåŠ¡å±‚</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    ProductService productService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ˜ å°„urlè·¯å¾„</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/products&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">products</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// è°ƒç”¨æœåŠ¡å±‚çš„æ–¹æ³•</span></span><br><span class="line">        List&lt;Product&gt; ps = productService.list();</span><br><span class="line">        <span class="keyword">return</span> ps;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ7ï¼‰æœåŠ¡å¯åŠ¨"><a href="#ï¼ˆ7ï¼‰æœåŠ¡å¯åŠ¨" class="headerlink" title="ï¼ˆ7ï¼‰æœåŠ¡å¯åŠ¨"></a>ï¼ˆ7ï¼‰æœåŠ¡å¯åŠ¨</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span> <span class="comment">// æœåŠ¡æ³¨å†Œä¸­å¿ƒå®¢æˆ·ç«¯ï¼Œå¾®æœåŠ¡æ³¨å†Œ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductDataServiceApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®©ç”¨æˆ·è¾“å…¥ç«¯å£å·ï¼Œå¼€å¯å¤šä¸ªæœåŠ¡å½¢æˆé›†ç¾¤</span></span><br><span class="line">        <span class="keyword">int</span> port = <span class="number">0</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;è¯·è¾“å…¥å¼€å¯æœåŠ¡çš„ç«¯å£å·ï¼š&quot;</span>);</span><br><span class="line">        Scanner strpost = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        port = strpost.nextInt();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¯åŠ¨ProductDataServiceæœåŠ¡</span></span><br><span class="line">        <span class="keyword">new</span> SpringApplicationBuilder(ProductDataServiceApplication.class)</span><br><span class="line">                .properties(<span class="string">&quot;server.port=&quot;</span> + port)</span><br><span class="line">                .run(args);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* é…ç½®zipkin:åœ¨å¯åŠ¨ç±»é‡Œé…ç½® Sampler æŠ½æ ·ç­–ç•¥ï¼š ALWAYS_SAMPLE è¡¨ç¤ºæŒç»­æŠ½æ ·*/</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Sampler <span class="title">defaultSampler</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Sampler.ALWAYS_SAMPLE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è§†å›¾å¾®æœåŠ¡"><a href="#è§†å›¾å¾®æœåŠ¡" class="headerlink" title="è§†å›¾å¾®æœåŠ¡"></a>è§†å›¾å¾®æœåŠ¡</h4><h5 id="ï¼ˆ1ï¼‰éœ€æ±‚-6"><a href="#ï¼ˆ1ï¼‰éœ€æ±‚-6" class="headerlink" title="ï¼ˆ1ï¼‰éœ€æ±‚"></a>ï¼ˆ1ï¼‰éœ€æ±‚</h5><p>è®¿é—®æ•°æ®å¾®æœåŠ¡ï¼ˆè¿™é‡Œä¸»è¦ç”¨feignçš„æ–¹å¼ï¼‰ï¼Œå°†æ•°æ®å‘é€åˆ°è§†å›¾å±‚å±•ç¤º</p><h5 id="ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–-5"><a href="#ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–-5" class="headerlink" title="ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–"></a>ï¼ˆ2ï¼‰ç›¸å…³ä¾èµ–</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æœåŠ¡æ³¨å†Œä¾èµ– --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ”¯æŒ Feign æ–¹å¼çš„å¾®æœåŠ¡è®¿é—®--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- webæ”¯æŒä¾èµ– --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è§†å›¾å±‚ä¾èµ– --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--å¢åŠ zipkinï¼Œä½¿æœåŠ¡å¯ä»¥è¢«è¿½è¸ªåˆ°--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-zipkin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å¢åŠ ä¸€ä¸ª spring-cloud-starter-config ç”¨äºè®¿é—®é…ç½®æœåŠ¡å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-config<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ¶ˆæ¯æ€»çº¿ä¾èµ–ï¼Œç”¨äºè®¿é—®è·¯å¾„/actuator/bus-refresh --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ç”¨äºæ”¯æŒrabbitmq --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-bus-amqp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ç”¨äºæ”¯æŒæ–­è·¯å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-hystrix<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ3ï¼‰ç›¸å…³é…ç½®-5"><a href="#ï¼ˆ3ï¼‰ç›¸å…³é…ç½®-5" class="headerlink" title="ï¼ˆ3ï¼‰ç›¸å…³é…ç½®"></a>ï¼ˆ3ï¼‰ç›¸å…³é…ç½®</h5><p>è¿™é‡Œçš„å¾®æœåŠ¡ç”±äºè¦é€šè¿‡rabbitMQè®¿é—®åˆ°é…ç½®æœåŠ¡å™¨ï¼Œéœ€è¦ç³»ç»Ÿå±‚é¢ä¸Šçš„é…ç½®ï¼Œæ•…éœ€è¦ä¸¤ä¸ªé…ç½®æ–‡ä»¶ï¼š<strong>bootstrap.yml å’Œ application.yml</strong></p><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.jianshu.com/p/c955c44ae534">application.ymlä¸bootstrap.ymlçš„åŒºåˆ«</a></p><ul><li>bootstrap.yml å’Œ application.yml éƒ½å¯ä»¥ç”¨æ¥é…ç½®å‚æ•°</li><li>bootstrap.yml ç”¨æ¥ç¨‹åºå¼•å¯¼æ—¶æ‰§è¡Œï¼Œåº”ç”¨äºæ›´åŠ æ—©æœŸé…ç½®ä¿¡æ¯è¯»å–ã€‚å¯ä»¥ç†è§£æˆç³»ç»Ÿçº§åˆ«çš„ä¸€äº›å‚æ•°é…ç½®ï¼Œè¿™äº›å‚æ•°ä¸€èˆ¬æ˜¯ä¸ä¼šå˜åŠ¨çš„ã€‚ä¸€æ—¦bootStrap.yml è¢«åŠ è½½ï¼Œåˆ™å†…å®¹ä¸ä¼šè¢«è¦†ç›–</li><li>application.yml å¯ä»¥ç”¨æ¥å®šä¹‰åº”ç”¨çº§åˆ«çš„ï¼Œ åº”ç”¨ç¨‹åºç‰¹æœ‰é…ç½®ä¿¡æ¯ï¼Œå¯ä»¥ç”¨æ¥é…ç½®åç»­å„ä¸ªæ¨¡å—ä¸­éœ€ä½¿ç”¨çš„å…¬å…±å‚æ•°ç­‰</li></ul><p><strong>bootstrap.ymlæ–‡ä»¶</strong></p><p>ä¸»è¦æä¾›äº† serviceId: config-server, è¿™ä¸ªæ˜¯é…ç½®æœåŠ¡å™¨åœ¨ eureka server é‡Œçš„æœåŠ¡åç§°ï¼Œè¿™æ ·å°±å¯ä»¥å®šä½ config-serveräº†</p><p>åœ¨æ³¨å†ŒæœåŠ¡ä¸­å¿ƒçš„æ³¨å†Œä¹Ÿç§»åˆ°äº†bootstrap.yml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é…ç½® config-serverï¼ˆæœåŠ¡ç«¯ï¼‰çš„ä¿¡æ¯</span></span><br><span class="line"><span class="attr">spring :</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">config:</span></span><br><span class="line">      <span class="attr">label:</span> <span class="string">main</span></span><br><span class="line">      <span class="attr">profile:</span> <span class="string">dev</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">service-id:</span> <span class="string">config-server</span></span><br><span class="line">    <span class="comment"># å¢åŠ æ€»çº¿é…ç½®</span></span><br><span class="line">    <span class="attr">bus:</span></span><br><span class="line">      <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">trace:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># æ–°å¢rabbitMQé…ç½®</span></span><br><span class="line">  <span class="attr">rabbitmq:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">5672</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">guest</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">guest</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®æ³¨å†Œä¸­å¿ƒçš„åœ°å€è¦ä¸Eurekaçš„é…ç½®å¯¹åº”ï¼ˆæ³¨å†Œï¼‰</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">serviceUrl:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://localhost:8761/eureka/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>application.ymlæ–‡ä»¶</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é…ç½®å¾®æœåŠ¡åä¸é…ç½®æœåŠ¡é“¾è·¯è¿½è¸ª</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">product-view-service-feign</span></span><br><span class="line">  <span class="attr">zipkin:</span></span><br><span class="line">    <span class="attr">base-url:</span> <span class="string">http://localhost:8050</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># é…ç½®thymeleaf</span></span><br><span class="line">  <span class="attr">thymeleaf:</span></span><br><span class="line">    <span class="attr">cache:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">prefix:</span> <span class="string">classpath:/templates/</span></span><br><span class="line">    <span class="attr">suffix:</span> <span class="string">.html</span></span><br><span class="line">    <span class="attr">encoding:</span> <span class="string">UTF-8</span></span><br><span class="line">    <span class="attr">servlet:</span></span><br><span class="line">      <span class="attr">content-type:</span> <span class="string">text/html</span></span><br><span class="line">    <span class="attr">mode:</span> <span class="string">HTML5</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å¯æ–­è·¯å™¨</span></span><br><span class="line"><span class="attr">feign.hystrix.enabled:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–°å¢è·¯å¾„è®¿é—®å…è®¸ï¼Œè¿™æ ·æ‰èƒ½è®¿é—® /actuator/bus-refresh,ç”¨äºè®¿é—®é…ç½®æœåŠ¡å™¨æ›´æ–°é…ç½®ä¿¡æ¯</span></span><br><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoints:</span></span><br><span class="line">    <span class="attr">web:</span></span><br><span class="line">      <span class="attr">exposure:</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">&quot;*&quot;</span></span><br><span class="line">      <span class="attr">cors:</span></span><br><span class="line">        <span class="attr">allowed-origins:</span> <span class="string">&quot;*&quot;</span></span><br><span class="line">        <span class="attr">allowed-methods:</span> <span class="string">&quot;*&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ4ï¼‰å®ä½“ç±»-1"><a href="#ï¼ˆ4ï¼‰å®ä½“ç±»-1" class="headerlink" title="ï¼ˆ4ï¼‰å®ä½“ç±»"></a>ï¼ˆ4ï¼‰å®ä½“ç±»</h5><p>ä¸æ•°æ®å¾®æœåŠ¡çš„ä¸€è‡´</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ„é€ å®ä½“ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> price;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPrice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPrice</span><span class="params">(<span class="keyword">int</span> price)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Product</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Product</span><span class="params">(<span class="keyword">int</span> id, String name, <span class="keyword">int</span> price)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ5ï¼‰å®¢æˆ·ç«¯"><a href="#ï¼ˆ5ï¼‰å®¢æˆ·ç«¯" class="headerlink" title="ï¼ˆ5ï¼‰å®¢æˆ·ç«¯"></a>ï¼ˆ5ï¼‰å®¢æˆ·ç«¯</h5><p>è§†å›¾å¾®æœåŠ¡ä½œä¸ºå®¢æˆ·ç«¯å»è®¿é—®æ•°æ®å¾®æœåŠ¡è¿™ä¸ªæœåŠ¡ç«¯ï¼Œå¹¶åˆ©ç”¨æ–­è·¯å™¨æä¾›è®¿é—®å¤±è´¥åçš„å¼‚å¸¸å¤„ç†ä¿¡æ¯</p><p><strong>Feignå®¢æˆ·ç«¯</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Feign å®¢æˆ·ç«¯ï¼Œ é€šè¿‡ æ³¨è§£æ–¹å¼è®¿é—®PRODUCT-DATA-SERVICEæœåŠ¡çš„ productsè·¯å¾„</span></span><br><span class="line"><span class="comment">// å¦‚æœè®¿é—®çš„ PRODUCT-DATA-SERVICE ä¸å¯ç”¨çš„è¯ï¼Œå°±è°ƒç”¨ ProductClientFeignHystrix æ¥è¿›è¡Œåé¦ˆä¿¡æ¯</span></span><br><span class="line"><span class="meta">@FeignClient(value = &quot;PRODUCT-DATA-SERVICE&quot;, fallback = ProductClientFeignHystrix.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ProductClientFeign</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;products&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Product&gt; <span class="title">list</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Hystrixæ–­è·¯å™¨å¤„ç†</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®ç°äº† ProductClientFeign æ¥å£ï¼Œå¹¶æä¾›äº† list() æ–¹æ³•</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductClientFeignHystrix</span> <span class="keyword">implements</span>  <span class="title">ProductClientFeign</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Product&gt; <span class="title">list</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;Product&gt; res = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        res.add(<span class="keyword">new</span> Product(<span class="number">0</span>, <span class="string">&quot;äº§å“æ•°æ®å¾®æœåŠ¡ä¸å¯ç”¨&quot;</span>, <span class="number">0</span>));</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ6ï¼‰æœåŠ¡å±‚"><a href="#ï¼ˆ6ï¼‰æœåŠ¡å±‚" class="headerlink" title="ï¼ˆ6ï¼‰æœåŠ¡å±‚"></a>ï¼ˆ6ï¼‰æœåŠ¡å±‚</h5><p>æ¥å…¥å®¢æˆ·ç«¯ï¼Œè‡ªåŠ¨è£…é…å®¢æˆ·ç«¯è¯·æ±‚åˆ°çš„æ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    ProductClientFeign productClientFeign;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æœåŠ¡ç±»çš„æ•°æ®ä»ProductClientRibbonï¼ˆå®¢æˆ·ç«¯ï¼‰ä¸­è·å–</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Product&gt; <span class="title">list</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> productClientFeign.list();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ7ï¼‰æ§åˆ¶å±‚"><a href="#ï¼ˆ7ï¼‰æ§åˆ¶å±‚" class="headerlink" title="ï¼ˆ7ï¼‰æ§åˆ¶å±‚"></a>ï¼ˆ7ï¼‰æ§åˆ¶å±‚</h5><p>æ¥å…¥æœåŠ¡å±‚ï¼Œæ˜ å°„è®¿é—®è·¯å¾„ï¼Œå‘é€æ•°æ®åˆ°è§†å›¾å±‚å¹¶è¾“å‡ºè§†å›¾</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RefreshScope</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    ProductService productService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ¨é…ç½®æœåŠ¡å™¨è·å¾—ç‰ˆæœ¬å·</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;version&#125;&quot;)</span></span><br><span class="line">    String version;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ§åˆ¶å™¨å°†æ•°æ®æ”¾å…¥product.html</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/products&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">products</span><span class="params">(Model m)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        List&lt;Product&gt; ps = productService.list();</span><br><span class="line">        <span class="comment">// å‘é€åˆ°è§†å›¾</span></span><br><span class="line">        m.addAttribute(<span class="string">&quot;version&quot;</span>, version);</span><br><span class="line">        m.addAttribute(<span class="string">&quot;ps&quot;</span>, ps);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;products&quot;</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ8ï¼‰è§†å›¾å±‚"><a href="#ï¼ˆ8ï¼‰è§†å›¾å±‚" class="headerlink" title="ï¼ˆ8ï¼‰è§†å›¾å±‚"></a>ï¼ˆ8ï¼‰è§†å›¾å±‚</h5><p>ä½¿ç”¨thymeleafå¯æ¥å…¥javaåŠ¨æ€åŒ–æ•°æ®</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">HTML</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>products<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Content-Type&quot;</span> <span class="attr">content</span>=<span class="string">&quot;text/html; charset=UTF-8&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-tag">table</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="attribute">border-collapse</span>:collapse;</span></span><br><span class="line"><span class="css">      <span class="attribute">width</span>:<span class="number">400px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">margin</span>:<span class="number">20px</span> auto;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-tag">td</span>,<span class="selector-tag">th</span>&#123;</span></span><br><span class="line"><span class="css">      <span class="attribute">border</span>:<span class="number">1px</span> solid gray;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;workingArea&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">th</span>&gt;</span>id<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">th</span>&gt;</span>äº§å“åç§°<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">th</span>&gt;</span>ä»·æ ¼<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">&quot;p: $&#123;ps&#125;&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;p.id&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;p.name&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;p.price&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">colspan</span>=<span class="string">&quot;3&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;version&#125;&quot;</span> &gt;</span>how2j springcloud version unknown<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ9ï¼‰ç½‘ç»œè®¿é—®"><a href="#ï¼ˆ9ï¼‰ç½‘ç»œè®¿é—®" class="headerlink" title="ï¼ˆ9ï¼‰ç½‘ç»œè®¿é—®"></a>ï¼ˆ9ï¼‰ç½‘ç»œè®¿é—®</h5><p><strong>æ›´æ–°é…ç½®ä¿¡æ¯</strong></p><p>ä½¿ç”¨ post çš„æ–¹å¼è®¿é—®é…ç½®æœåŠ¡å™¨çš„ <a href="http://localhost:8012/actuator/bus-refresh">http://localhost:8012/actuator/bus-refresh</a> åœ°å€ï¼Œç”¨äºæ›´æ–°é…ç½®ä¿¡æ¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä½¿ç”¨ post çš„æ–¹å¼è®¿é—® http://localhost:8012/actuator/bus-refresh åœ°å€</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FreshConfigUntil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">          <span class="comment">// å¢åŠ è¯·æ±‚å¤´</span></span><br><span class="line">          HashMap&lt;String, String&gt; headers = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">          headers.put(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;application/json; charset=utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">          <span class="comment">// å› ä¸ºè¦å»gitè·å–ï¼Œè¿˜è¦åˆ·æ–°config-server, ä¼šæ¯”è¾ƒå¡ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¼šè¦å¥½å‡ ç§’æ‰èƒ½å®Œæˆ</span></span><br><span class="line">          System.out.println(<span class="string">&quot;è¯·è€å¿ƒç­‰å¾…&quot;</span>);</span><br><span class="line"></span><br><span class="line">          <span class="comment">// å‘é€postè¯·æ±‚</span></span><br><span class="line">          String result = HttpUtil.createPost(<span class="string">&quot;http://localhost:8012/actuator/bus-refresh&quot;</span>)</span><br><span class="line">                  .addHeaders(headers).execute().body();</span><br><span class="line"></span><br><span class="line">          System.out.println(<span class="string">&quot;result&quot;</span> + result);</span><br><span class="line">          System.out.println(<span class="string">&quot;refresh å®Œæˆ&quot;</span>);</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æä¾›ç›‘æ§æ•°æ®</strong></p><p>ä¸æ–­å¯¹è§†å›¾å±‚è¿›è¡Œè®¿é—®ï¼Œä»¥æä¾›æ–­è·¯å™¨ç›‘æ§çš„æ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸€ä¸ªä¸æ–­è®¿é—®è§†å›¾æœåŠ¡çš„ç±»ï¼Œä»¥ä¾¿åœ¨ç›‘æ§ä¸­è§‚å¯Ÿåˆ°ç°è±¡</span></span><br><span class="line"><span class="comment">// è®¿é—®é›†ç¾¤çš„8012å’Œ8013ç«¯å£</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccessViewService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>)&#123;</span><br><span class="line">            ThreadUtil.sleep(<span class="number">1000</span>);</span><br><span class="line">            access(<span class="number">8012</span>);</span><br><span class="line">            access(<span class="number">8013</span>);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">access</span><span class="params">(<span class="keyword">int</span> port)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            String html = HttpUtil.get(String.format(<span class="string">&quot;http://127.0.0.1:%d/products&quot;</span>, port));</span><br><span class="line">            System.out.println(<span class="string">&quot;html length:&quot;</span> + html.length());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            System.out.printf(<span class="string">&quot;%dåœ°å€çš„è§†å›¾æœåŠ¡æ— æ³•è®¿é—®%n&quot;</span>, port);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ10ï¼‰æœåŠ¡å¯åŠ¨"><a href="#ï¼ˆ10ï¼‰æœåŠ¡å¯åŠ¨" class="headerlink" title="ï¼ˆ10ï¼‰æœåŠ¡å¯åŠ¨"></a>ï¼ˆ10ï¼‰æœåŠ¡å¯åŠ¨</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span> <span class="comment">// æ³¨å†ŒæœåŠ¡ä¸­ä¿¡æ¯æ³¨å†Œå®¢æˆ·ç«¯</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="meta">@EnableFeignClients</span>   <span class="comment">//è¡¨æ˜ä½¿ç”¨Feignæ–¹å¼</span></span><br><span class="line"><span class="meta">@EnableCircuitBreaker</span> <span class="comment">// å…±äº«ä¿¡æ¯ç»™æ–­è·¯ç›‘æ§å™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductViewServiceFeignApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¢åŠ rabbitmqæ˜¯å¦å¯åŠ¨åˆ¤æ–­</span></span><br><span class="line">        <span class="keyword">int</span> rabbitMQPort = <span class="number">5672</span>;</span><br><span class="line">        <span class="keyword">if</span>(NetUtil.isUsableLocalPort(rabbitMQPort))&#123;</span><br><span class="line">            System.err.printf(<span class="string">&quot;æœªåœ¨ç«¯å£%då‘ç°rabbitMQæœåŠ¡ï¼Œè¯·æ£€æŸ¥&quot;</span>, rabbitMQPort);</span><br><span class="line">            System.exit(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®©ç”¨æˆ·è¾“å…¥ç«¯å£å·ï¼Œå¼€å¯å¤šä¸ªæœåŠ¡å½¢æˆé›†ç¾¤</span></span><br><span class="line">        <span class="keyword">int</span> port = <span class="number">0</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;è¯·è¾“å…¥å¼€å¯æœåŠ¡çš„ç«¯å£å·ï¼š&quot;</span>);</span><br><span class="line">        Scanner strpost = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        port = strpost.nextInt();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> SpringApplicationBuilder(ProductViewServiceFeignApplication.class)</span><br><span class="line">                .properties(<span class="string">&quot;server.port=&quot;</span> + port)</span><br><span class="line">                .run(args);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* é…ç½®zipkon:åœ¨å¯åŠ¨ç±»é‡Œé…ç½® Sampler æŠ½æ ·ç­–ç•¥ï¼š ALWAYS_SAMPLE è¡¨ç¤ºæŒç»­æŠ½æ ·*/</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Sampler <span class="title">defaultSampler</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Sampler.ALWAYS_SAMPLE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109201109518.png&quot; alt=&quot;image-20210920110949198&quot;&gt;&lt;/p&gt;
&lt;p&gt;Netflix OSSå·²åœ¨æ–°ç‰ˆçš„SpringCloudä¸­ç§»é™¤äº†ï¼ŒSpringCloud Netflixå·²ç»è½åç‰ˆæœ¬äº†ğŸ¤¯ï¼Œä½†æ˜¯ä¸å¦¨é€šè¿‡å…¶æŒæ¡å¾®æœåŠ¡çš„æ€æƒ³ï¼Œç†è§£SpringCloudçš„æ ¸å¿ƒæ€æƒ³ï¼Œæ ¸å¿ƒç»„ä»¶&lt;/p&gt;
    
    </summary>
    
    
      <category term="Java" scheme="https://autovy.github.io/categories/Java/"/>
    
    
      <category term="å¼€å‘å®æˆ˜" scheme="https://autovy.github.io/tags/%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/"/>
    
      <category term="Java" scheme="https://autovy.github.io/tags/Java/"/>
    
      <category term="æ¡†æ¶å­¦ä¹ " scheme="https://autovy.github.io/tags/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="åç«¯" scheme="https://autovy.github.io/tags/%E5%90%8E%E7%AB%AF/"/>
    
      <category term="SpringBoot" scheme="https://autovy.github.io/tags/SpringBoot/"/>
    
      <category term="SpringCloud" scheme="https://autovy.github.io/tags/SpringCloud/"/>
    
      <category term="å¾®æœåŠ¡" scheme="https://autovy.github.io/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/"/>
    
  </entry>
  
  <entry>
    <title>Java|JavaWebå…¥é—¨è®²è§£</title>
    <link href="https://autovy.github.io/2021/09/14/Java/Java-JavaWeb%E5%85%A5%E9%97%A8%E8%AE%B2%E8%A7%A3/"/>
    <id>https://autovy.github.io/2021/09/14/Java/Java-JavaWeb%E5%85%A5%E9%97%A8%E8%AE%B2%E8%A7%A3/</id>
    <published>2021-09-14T06:30:00.000Z</published>
    <updated>2021-09-21T15:06:13.148Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109140841902.png" alt="pngkey.com-java-logo-png-2232144"></p><span id="more"></span><h3 id="å­¦ä¹ ç›®æ ‡"><a href="#å­¦ä¹ ç›®æ ‡" class="headerlink" title="å­¦ä¹ ç›®æ ‡"></a>å­¦ä¹ ç›®æ ‡</h3><ul><li>å­¦ä¼šæœ¬åœ°æ­å»ºç¯å¢ƒï¼Œè¿è¡Œspringbooté¡¹ç›®</li><li>äº†è§£javawebå¼€å‘åŸºæœ¬æŠ€æœ¯ä¸å·¥å…·ä½¿ç”¨</li><li>äº†è§£springé‡è¦æ¦‚å¿µ</li><li>æ¸…æ¥šåŸºæœ¬çš„å¼€å‘æ¶æ„</li><li>å­¦ä¼šå¼€å‘Springbootå…¥é—¨å®ä¾‹</li><li>å­¦ä¼šå¼€å‘SpringBoot JPA æŒä¹…å±‚æ”¯æŒå®ä¾‹</li></ul><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><p><a href="http://autovy.github.io/JavaWebDemo.zip">Demoä¸‹è½½</a></p><p><a href="https://mybatis.org/mybatis-3/zh/index.html">MyBatisä¸­æ–‡æ–‡æ¡£</a></p><p><a href="https://lfvepclr.gitbooks.io/spring-framework-5-doc-cn/content/">Spring Framework 5 ä¸­æ–‡æ–‡æ¡£</a></p><p><a href="https://www.docs4dev.com/docs/zh/spring-boot/2.1.1.RELEASE/reference/boot-documentation.html">SpringBootä¸­æ–‡æ–‡æ¡£</a></p><p><a href="https://www.docs4dev.com/docs/zh/spring-cloud/Greenwich.RELEASE/reference/">SpringCloudä¸­æ–‡æ–‡æ¡£</a></p><p><a href="https://www.liaoxuefeng.com/wiki/1252599548343744">å»–é›ªå³°Javaæ•™ç¨‹åšå®¢</a></p><p><a href="https://autovy.github.io/2021/06/30/Java/Java-%E5%9F%BA%E4%BA%8ESSM%E8%AF%84%E8%AE%BA%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E5%BC%80%E5%8F%91/">autovyåšå®¢ï¼šåŸºäºSSMè¯„è®ºç®¡ç†ç³»ç»Ÿå¼€å‘</a></p><h3 id="åŸºæœ¬å·¥å…·çš„ä½¿ç”¨"><a href="#åŸºæœ¬å·¥å…·çš„ä½¿ç”¨" class="headerlink" title="åŸºæœ¬å·¥å…·çš„ä½¿ç”¨"></a>åŸºæœ¬å·¥å…·çš„ä½¿ç”¨</h3><h4 id="IDEæ¨è"><a href="#IDEæ¨è" class="headerlink" title="IDEæ¨è"></a>IDEæ¨è</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109110902451.png" alt="image-20210911090207325"></p><p>æ¨èJetBrainså…¬å¸çš„IDEå…¨å®¶æ¡¶ï¼Œä¿æŒé£æ ¼ä¸€è‡´ï¼Œå‡å°‘å¯¹IDEçš„å­¦ä¹ æˆæœ¬</p><p>ä½¿ç”¨<a href="https://www.jetbrains.com/toolbox-app/">toolbox</a>ä¸‹è½½æ›´æ–¹ä¾¿</p><h4 id="æ„å»ºå·¥å…·"><a href="#æ„å»ºå·¥å…·" class="headerlink" title="æ„å»ºå·¥å…·"></a>æ„å»ºå·¥å…·</h4><p>ä½¿ç”¨æ„å»ºå·¥å…·ç®¡ç†javaé¡¹ç›®çš„ä¾èµ–é¡¹å¹¶å®ç°è‡ªåŠ¨åŒ–æ„å»º</p><h5 id="ï¼ˆ1ï¼‰åŸºæœ¬ä»‹ç»"><a href="#ï¼ˆ1ï¼‰åŸºæœ¬ä»‹ç»" class="headerlink" title="ï¼ˆ1ï¼‰åŸºæœ¬ä»‹ç»"></a>ï¼ˆ1ï¼‰åŸºæœ¬ä»‹ç»</h5><p>Maven </p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109110852517.png" alt="Apache_Maven_logo.svg"></p><p>Ant</p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109110848712.png" alt="1024px-Apache-Ant-logo.svg" style="zoom: 50%;"><p>Gradle</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109110847529.png" alt="Gradle_logo"></p><h5 id="ï¼ˆ2ï¼‰æ¯”è¾ƒ"><a href="#ï¼ˆ2ï¼‰æ¯”è¾ƒ" class="headerlink" title="ï¼ˆ2ï¼‰æ¯”è¾ƒ"></a>ï¼ˆ2ï¼‰æ¯”è¾ƒ</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109110854847.png" alt="image-20210911085448524"></p><ul><li>Antï¼šçº¯javaç¼–å†™ï¼Œéœ€è¦è‡ªå®šä¹‰æ„å»ºè¿‡ç¨‹</li><li>Mavenï¼šå®ç°äº†è‡ªåŠ¨åŒ–æ„å»ºï¼Œå¹¶å†…ç½®äº†ä¾èµ–ç®¡ç†</li><li>Gradleï¼šGradleç»“åˆäº†å‰ä¸¤è€…çš„ä¼˜ç‚¹ï¼Œæ˜¯Android StudioæŒ‡å®šæ„å»ºå·¥å…·</li></ul><p>é€šè¿‡è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ï¼Œspringbootå¤§å¤§å‡å°‘äº†ä¾èµ–é¡¹çš„æ·»åŠ å·¥ä½œ</p><h5 id="ï¼ˆ3ï¼‰Mavenç»“æ„"><a href="#ï¼ˆ3ï¼‰Mavenç»“æ„" class="headerlink" title="ï¼ˆ3ï¼‰Mavenç»“æ„"></a>ï¼ˆ3ï¼‰Mavenç»“æ„</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109110937736.jpeg" alt="img"></p><h5 id="ï¼ˆ4ï¼‰MavenåŸºæœ¬ä½¿ç”¨æ“ä½œ"><a href="#ï¼ˆ4ï¼‰MavenåŸºæœ¬ä½¿ç”¨æ“ä½œ" class="headerlink" title="ï¼ˆ4ï¼‰MavenåŸºæœ¬ä½¿ç”¨æ“ä½œ"></a>ï¼ˆ4ï¼‰MavenåŸºæœ¬ä½¿ç”¨æ“ä½œ</h5><p>IDEAåˆ›å»ºMavené¡¹ç›®ï¼š</p><ul><li>å·¦è¾¹é€‰æ‹©Maven</li><li>åˆ›å»ºç©ºMavené¡¹ç›®</li></ul><p>æŸ¥çœ‹é…ç½®æ–‡ä»¶pom.xmlï¼š</p><p>é…ç½®jaråŒ…çš„ä»“åº“åœ°å€</p><p>mavençš„ä»“åº“é»˜è®¤åœ¨å›½å¤–ï¼Œè¿™é‡Œå¯ä»¥æ›´æ¢ä¸ºé˜¿é‡Œäº‘çš„ä»“åº“</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>public<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun nexus<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> # ä»“åº“åœ°å€       <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">releases</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">releases</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ·»åŠ ä¾èµ–é¡¹ï¼š</p><p>åœ¨mvnrepositoryæŸ¥æ‰¾ä¾èµ–é¡¹ï¼š<a href="https://mvnrepository.com/">https://mvnrepository.com/</a></p><p>æŸ¥æ‰¾å¹¶å¤åˆ¶junit 4.12çš„ä¾èµ–é…ç½®ä¿¡æ¯</p><p>å¢åŠ ä¾èµ–æ ‡ç­¾<code>&lt;dependencies&gt;</code>å</p><p>åœ¨ideaä¸­å¯¼å…¥ä¾èµ–é¡¹</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109110954913.png" alt="image-20210911095458093"></p><p>æŸ¥çœ‹å¤–éƒ¨åº“ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109110955224.png" alt="image-20210911095520948"></p><h4 id="WebæœåŠ¡å™¨"><a href="#WebæœåŠ¡å™¨" class="headerlink" title="WebæœåŠ¡å™¨"></a>WebæœåŠ¡å™¨</h4><p>WebæœåŠ¡å™¨ä¸€èˆ¬æŒ‡ç½‘ç«™æœåŠ¡å™¨ï¼Œæ˜¯æŒ‡é©»ç•™äº[å› ç‰¹ç½‘]ä¸ŠæŸç§ç±»å‹è®¡ç®—æœºçš„ç¨‹åºï¼Œå¯ä»¥å¤„ç†æµè§ˆå™¨ç­‰Webå®¢æˆ·ç«¯çš„è¯·æ±‚å¹¶è¿”å›ç›¸åº”å“åº”</p><h5 id="ï¼ˆ1ï¼‰Tomcatä»‹ç»"><a href="#ï¼ˆ1ï¼‰Tomcatä»‹ç»" class="headerlink" title="ï¼ˆ1ï¼‰Tomcatä»‹ç»"></a>ï¼ˆ1ï¼‰Tomcatä»‹ç»</h5><p>Javaå­¦ä¹ ä¸­å¸¸å¸¸ä½¿ç”¨<strong>Tomcat</strong>ï¼Œè¿™ä¸ªä¸ªå°å‹ã€è½»é‡çº§çš„æ”¯æŒJSPå’ŒServlet æŠ€æœ¯çš„WebæœåŠ¡å™¨ï¼Œæ–°ç‰ˆçš„springbootç›´æ¥å°±å†…åµŒäº†è¿™ä¸ªwebæœåŠ¡å™¨æ”¾åœ¨äº†å¯åŠ¨é¡¹ä¸­</p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109111020941.png" alt="img" style="zoom: 25%;"><h5 id="ï¼ˆ2ï¼‰Tomcatä¸‹è½½"><a href="#ï¼ˆ2ï¼‰Tomcatä¸‹è½½" class="headerlink" title="ï¼ˆ2ï¼‰Tomcatä¸‹è½½"></a>ï¼ˆ2ï¼‰Tomcatä¸‹è½½</h5><p>æ–°ç‰ˆçš„springbootå·²å†…åµŒtomcatï¼Œä¸éœ€è¦å†ä¸‹è½½ï¼Œæ‰€ä»¥è¿™å—åšç®€å•çš„ä»‹ç»ï¼Œäº†è§£ä¸€ä¸‹è¿è¡Œçš„åŸç†å°±å¥½</p><p>å®˜ç½‘ä¸‹è½½ï¼š<a href="http://tomcat.apache.org/">http://tomcat.apache.org/</a></p><h5 id="ï¼ˆ3ï¼‰Tomcatè¿è¡Œ"><a href="#ï¼ˆ3ï¼‰Tomcatè¿è¡Œ" class="headerlink" title="ï¼ˆ3ï¼‰Tomcatè¿è¡Œ"></a>ï¼ˆ3ï¼‰Tomcatè¿è¡Œ</h5><ul><li><p>æ–°å»ºæ–‡ä»¶htmlæ–‡ä»¶åœ¨webapps\wwwæ–‡ä»¶å¤¹</p></li><li><p>å¯åŠ¨bin/startup.bat</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109111044774.png" alt="image-20210911104424694"></p></li><li><p>è®¿é—®<code>http://127.0.0.1:8080/www/test.html</code></p></li></ul><p>tomcatçš„é»˜è®¤ç«¯å£æ˜¯8080ç«¯å£ï¼Œæ‰€ä»¥springbootå¯åŠ¨çš„ç½‘é¡µæœåŠ¡é»˜è®¤ä¹Ÿæ˜¯8080ç«¯å£</p><h5 id="ï¼ˆ4ï¼‰Tomcatä¿®æ”¹ç«¯å£"><a href="#ï¼ˆ4ï¼‰Tomcatä¿®æ”¹ç«¯å£" class="headerlink" title="ï¼ˆ4ï¼‰Tomcatä¿®æ”¹ç«¯å£"></a>ï¼ˆ4ï¼‰Tomcatä¿®æ”¹ç«¯å£</h5><p>ç½‘é¡µçš„é»˜è®¤ç«¯å£ä½¿80ç«¯å£</p><ul><li>æŸ¥çœ‹æ–‡ä»¶<code>conf\server.xml</code></li><li>ä¿®æ”¹ç«¯å£ä¸º80ç«¯å£</li><li>é‡æ–°å¯åŠ¨bin/startup.bat</li><li>80ç«¯å£å ç”¨é—®é¢˜</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// å‚çœ‹ç«¯å£å·å«80çš„æ¡ç›®</span><br><span class="line">netstat -ano|findstr &quot;80&quot;</span><br><span class="line"></span><br><span class="line">// æ ¹æ®pidæŸ¥è¯¢å¯¹åº”çš„åº”ç”¨ç¨‹åº</span><br><span class="line">tasklist|findstr &quot;1828&quot;</span><br><span class="line"></span><br><span class="line">// æ€æ­»è¿›ç¨‹</span><br><span class="line">taskkill /f /pid 1828</span><br></pre></td></tr></table></figure><ul><li><p>å¦‚æœæ˜¯è¢«ç³»ç»Ÿå ç”¨ï¼Œå¯ä»¥è¿›å…¥æœåŠ¡ä¸­å¿ƒ<code>services.msc</code>ï¼Œåœæ­¢æˆ–ç¦ç”¨SQL Server Reporting Services (MSSQLSERVER) ï¼ˆæ—¥å¿—æœåŠ¡ï¼Œä¸€èˆ¬ç”¨ä¸ä¸Šï¼‰</p></li><li><p>è®¿é—®<code>http://127.0.0.1/www/test.html</code></p></li></ul><h4 id="æœ¬åœ°æ•°æ®åº“ç¯å¢ƒæ­å»º"><a href="#æœ¬åœ°æ•°æ®åº“ç¯å¢ƒæ­å»º" class="headerlink" title="æœ¬åœ°æ•°æ®åº“ç¯å¢ƒæ­å»º"></a>æœ¬åœ°æ•°æ®åº“ç¯å¢ƒæ­å»º</h4><h5 id="ï¼ˆ1ï¼‰PHPstudyä»‹ç»"><a href="#ï¼ˆ1ï¼‰PHPstudyä»‹ç»" class="headerlink" title="ï¼ˆ1ï¼‰PHPstudyä»‹ç»"></a>ï¼ˆ1ï¼‰PHPstudyä»‹ç»</h5><p>phpstudyé›†æˆäº†webæœåŠ¡ï¼ˆapacheå’Œnginxï¼‰,æ•°æ®åº“æœåŠ¡ï¼ˆmysqlï¼‰ï¼Œè¿˜æœ‰æ•°æ®åº“ç¼“å­˜å·¥å…·redisç­‰ã€‚</p><p>èƒ½æ¯”è¾ƒæ–¹ä¾¿å¾—æ­å»ºæœ¬åœ°ç¯å¢ƒï¼ˆå¦‚æœæ²¡æœ‰dockerè¿›è¡Œå®¹å™¨åŒ–çš„è¯ï¼Œç¡®å®æ˜¯æœ€ä½³é€‰æ‹©ï¼‰</p><p>ä¸‹è½½åœ°å€ï¼š<a href="https://www.xp.cn/">https://www.xp.cn/</a></p><h5 id="ï¼ˆ2ï¼‰åˆ›å»ºæ•°æ®åº“"><a href="#ï¼ˆ2ï¼‰åˆ›å»ºæ•°æ®åº“" class="headerlink" title="ï¼ˆ2ï¼‰åˆ›å»ºæ•°æ®åº“"></a>ï¼ˆ2ï¼‰åˆ›å»ºæ•°æ®åº“</h5><p>è¿™é‡Œä½¿ç”¨mysql8.0.12ç‰ˆæœ¬</p><p>æ— ä»£ç åˆ›å»ºå¥½æ•°æ®åº“</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109111420500.png" alt="image-20210911142052336"></p><h5 id="ï¼ˆ3ï¼‰æ•°æ®åº“è¿æ¥"><a href="#ï¼ˆ3ï¼‰æ•°æ®åº“è¿æ¥" class="headerlink" title="ï¼ˆ3ï¼‰æ•°æ®åº“è¿æ¥"></a>ï¼ˆ3ï¼‰æ•°æ®åº“è¿æ¥</h5><p>åœ¨ideaä¸­è¿æ¥æ•°æ®åº“ï¼Œæµ‹è¯•è¿æ¥åå‡ºç°æ—¶åŒºé—®é¢˜åˆ™å¡«å†™<code>GMT</code>ç­‰æ—¶åŒº,æ¨èä½¿ç”¨<code>serverTimezone=Asia/Shanghai</code></p><p>åˆ›å»ºæ•°æ®è¡¨studentï¼Œå¯åœ¨ç±»å‹å¤„å¡«å…¥é•¿åº¦ä¾‹å¦‚<code>char(20)</code></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109111444220.png" alt="image-20210911144428199"></p><h3 id="J2EE"><a href="#J2EE" class="headerlink" title="J2EE"></a>J2EE</h3><p>Java EEæ˜¯ä¸€ç³»åˆ—æŠ€æœ¯æ ‡å‡†æ‰€ç»„æˆçš„å¹³å°ï¼Œå®ƒå®šä¹‰äº†åŠ¨æ€Webé¡µé¢åŠŸèƒ½ï¼ˆServletå’ŒJspï¼‰ã€å•†ä¸šç»„ä»¶ï¼ˆEJBï¼‰ã€å¼‚æ­¥æ¶ˆæ¯ä¼ è¾“æœºåˆ¶ï¼ˆJMSï¼‰ã€åç§°å’Œç›®å½•å®šä½æœåŠ¡ï¼ˆJNDIï¼‰ã€æ•°æ®åº“è®¿é—®ï¼ˆJDBCï¼‰ã€ä¸å­ç³»ç»Ÿçš„è¿æ¥å™¨ï¼ˆJCAï¼‰å’Œå®‰å…¨æœåŠ¡ç­‰</p><p>è¿™é‡Œä¸»è¦ä»‹ç»Servletï¼ˆæœåŠ¡ç«¯ç¨‹åºï¼Œå¯å¤„ç†è¯·æ±‚ç”ŸæˆåŠ¨æ€webå†…å®¹ï¼‰ï¼ŒJDBCï¼ˆæ•°æ®åº“è®¿é—®è¿æ¥ï¼‰ï¼Œjavaçš„webå¼€å‘æ¡†æ¶éƒ½æ˜¯åœ¨æ­¤åŸºç¡€ä¸Šçš„å»¶æ‹“</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109132024561.png" alt="image-20210913202431607"></p><h4 id="Servlet"><a href="#Servlet" class="headerlink" title="Servlet"></a>Servlet</h4><h5 id="ï¼ˆ1ï¼‰æµè§ˆå™¨è®¿é—®Servletæµç¨‹"><a href="#ï¼ˆ1ï¼‰æµè§ˆå™¨è®¿é—®Servletæµç¨‹" class="headerlink" title="ï¼ˆ1ï¼‰æµè§ˆå™¨è®¿é—®Servletæµç¨‹"></a>ï¼ˆ1ï¼‰æµè§ˆå™¨è®¿é—®Servletæµç¨‹</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109111454488.png" alt="image-20210911145431318"></p><h5 id="ï¼ˆ2ï¼‰Servlet-demo-å¼€å‘"><a href="#ï¼ˆ2ï¼‰Servlet-demo-å¼€å‘" class="headerlink" title="ï¼ˆ2ï¼‰Servlet demo å¼€å‘"></a>ï¼ˆ2ï¼‰Servlet demo å¼€å‘</h5><p>1.æ–°å»ºä¸€ä¸ªç©ºmavençš„é¡¹ç›®</p><p>2.mavenå¯¼å…¥Servletä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>3.ç¼–å†™Servletç±»</p><p>ç¼–å†™Servletç±»æ¥æ”¶è¯·æ±‚ï¼Œè¿”å›å†…å®¹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»§æ‰¿Servletæä¾›çš„httpå¤„ç†ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é‡å†™doGetæ–¹æ³•ï¼Œå¤„ç†getè¯·æ±‚</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ•æ‰httpè¯·æ±‚å¼‚å¸¸</span></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">// è¿”å›å“åº”è¾“å‡ºåˆ°é¡µé¢</span></span><br><span class="line">            response.getWriter().println(<span class="string">&quot;&lt;h1&gt;Hello Servlet&lt;h1&gt;&quot;</span>);</span><br><span class="line">            response.getWriter().println(<span class="keyword">new</span> Date().toString());</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4.ç¼–å†™web.xmlé…ç½®æ–‡ä»¶</p><p>ç¼–å†™web.xmlé…ç½®Servlet</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109111532343.png" alt="image-20210911153159249"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    é…ç½®servletä¿¡æ¯--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>HelloServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    é…ç½®httpå¤„ç†ç±»ä¸urlæ˜ å°„--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>HelloServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/hello<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><p>5.å°†Servletéƒ¨ç½²åˆ°tomcatä¸Š</p><p>æ‰“å¼€æ¨¡å—è®¾ç½®(F4) &gt;  å·¥ä»¶  &gt;  åˆ›å»ºwebå·¥ä»¶</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109111539001.png" alt="image-20210911153909470"></p><p>æ·»åŠ é…ç½® &gt; tomcatæœ¬åœ°æœåŠ¡å™¨ &gt; æ·»åŠ åˆšåˆšåˆ›å»ºçš„å·¥ä»¶ &gt; æ³¨æ„ä¿®æ”¹åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ï¼ˆå½±å“è®¿é—®çš„urlï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109111541291.png" alt="image-20210911154152177"></p><p>å¼€å¯æœåŠ¡è¿›è¡Œæµ‹è¯•</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109111556434.png" alt="image-20210911155646449"></p><h4 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h4><p><strong>JDBC</strong> (<strong>J</strong>ava <strong>D</strong>ata<strong>B</strong>ase <strong>C</strong>onnection) æ˜¯é€šè¿‡JAVAè®¿é—®æ•°æ®åº“</p><h5 id="ï¼ˆ1ï¼‰Javaè¿æ¥æ•°æ®åº“æµç¨‹"><a href="#ï¼ˆ1ï¼‰Javaè¿æ¥æ•°æ®åº“æµç¨‹" class="headerlink" title="ï¼ˆ1ï¼‰Javaè¿æ¥æ•°æ®åº“æµç¨‹"></a>ï¼ˆ1ï¼‰Javaè¿æ¥æ•°æ®åº“æµç¨‹</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109111653998.png" alt="undefined"></p><h5 id="ï¼ˆ2ï¼‰JDBCæŸ¥è¯¢æ•°æ®åº“å¼€å‘"><a href="#ï¼ˆ2ï¼‰JDBCæŸ¥è¯¢æ•°æ®åº“å¼€å‘" class="headerlink" title="ï¼ˆ2ï¼‰JDBCæŸ¥è¯¢æ•°æ®åº“å¼€å‘"></a>ï¼ˆ2ï¼‰JDBCæŸ¥è¯¢æ•°æ®åº“å¼€å‘</h5><p>1.æ–°å»ºä¸€ä¸ªç©ºmavençš„é¡¹ç›®</p><p>2.æ·»åŠ mysql-connector-javaä¾</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.23<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>3.æ³¨æ„å¼€å¯phpstudyçš„mysqlæœåŠ¡ï¼Œå¹¶åœ¨ideaä¸­è¿æ¥ï¼Œè®°å½•jdbcé“¾æ¥</p><p>4.ç¼–å†™JDBCæŸ¥è¯¢demo</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestJDBC</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">// å¯¼å…¥æ•°æ®åº“é©±åŠ¨åŒ…</span></span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å»ºç«‹ä¸æ•°æ®åº“çš„è¿æ¥</span></span><br><span class="line">            <span class="comment">// æ•°æ®åº“åç§°ï¼Œ è´¦å·ï¼Œå¯†ç </span></span><br><span class="line">            Connection c = DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/test&quot;</span>, <span class="string">&quot;test&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// åˆ›å»ºStatementï¼Œç”¨äºæ‰§è¡Œsqlè¯­å¥</span></span><br><span class="line">            Statement s = c.createStatement();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ç¼–å†™sqlè¯­å¥</span></span><br><span class="line">            String sql  = <span class="string">&quot;select * from student&quot;</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ‰§è¡Œsqlè¯­å¥ï¼Œå¹¶è¿”å›ç»“æœ</span></span><br><span class="line">            ResultSet res = s.executeQuery(sql);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å¤„ç†è¿”å›ç»“æœ</span></span><br><span class="line">            <span class="keyword">while</span>(res.next())&#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">int</span> id = res.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">                String name = res.getString(<span class="string">&quot;name&quot;</span>);</span><br><span class="line"></span><br><span class="line">                System.out.printf(<span class="string">&quot;%d.%s\n&quot;</span>, id, name);</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ•æ‰æ•°æ®åº“åŠ è½½å¼‚å¸¸</span></span><br><span class="line">        <span class="keyword">catch</span> (ClassNotFoundException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ•æ‰æ•°æ®åº“è¿æ¥å¼‚å¸¸</span></span><br><span class="line">        <span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ3ï¼‰JDBC-ORM-æŒä¹…åŒ–å­˜å‚¨"><a href="#ï¼ˆ3ï¼‰JDBC-ORM-æŒä¹…åŒ–å­˜å‚¨" class="headerlink" title="ï¼ˆ3ï¼‰JDBC ORM æŒä¹…åŒ–å­˜å‚¨"></a>ï¼ˆ3ï¼‰JDBC ORM æŒä¹…åŒ–å­˜å‚¨</h5><p>ORM=Object Relationship Database Mapping</p><p>å¯¹è±¡å’Œå…³ç³»æ•°æ®åº“çš„æ˜ å°„ ç®€å•è¯´ï¼Œ<strong>ä¸€ä¸ªå¯¹è±¡</strong>ï¼Œå¯¹åº”æ•°æ®åº“é‡Œçš„<strong>ä¸€æ¡è®°å½•</strong>ï¼Œä½¿ç”¨Javaå¯¹è±¡æ¥å°†æ•°æ®åº“å†…çš„æ•°æ®æŒä¹…åŒ–</p><p>JDBC æ˜¯é¢å‘ SQL çš„ï¼Œä½¿ç”¨èµ·æ¥æ¯”è¾ƒç¹çã€‚æ‰€ä»¥å°±æœ‰äº† ORM æ¡†æ¶ï¼Œå»ºç«‹äº† Java å¯¹è±¡ä¸æ•°æ®åº“è¡¨ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œå¯ä»¥é€šè¿‡ç›´æ¥æ“ä½œå¯¹è±¡æ¥å®ç°æŒä¹…åŒ–ï¼Œç®€åŒ–äº†æ“ä½œçš„ç¹æ‚åº¦</p><p>javaç›®å‰æµè¡Œçš„æ•°æ®åº“è®¿é—®æ¡†æ¶éƒ½æ˜¯ORMæ¡†æ¶</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109132026779.jpeg" alt="img"></p><p>1.åˆ›å»ºStudentç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸€èˆ¬å°†ä¸€ä¸ªæ•°æ®è¡¨æŠ½è±¡ä¸ºä¸€ä¸ªç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†è¡¨ä¸­çš„å­—æ®µä½œä¸ºç±»çš„å±æ€§</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æä¾›å¤–ç•Œæ“ä½œå±æ€§çš„æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ideaä¸­å®ä½“ç±»çš„åˆ›å»ºæœ‰ä»¥ä¸‹ä¸‰ç§æ–¹æ³•ï¼š</p><ul><li><p>é€‰å®šç±»çš„å­—æ®µç”Ÿæˆsetterå’Œgetteræ–¹æ³•</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109200954096.png" alt="image-20210920095441605"></p></li></ul><ul><li><p>ä½¿ç”¨æ•°æ®åº“å·¥å…·åˆ›å»ºå®ä½“ç±»</p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041650556.png" alt="image-20210904165034192" style="zoom: 67%;"></li></ul><ul><li>ä½¿ç”¨Lombokå·¥å…·è‡ªåŠ¨ç”Ÿæˆgetterå’Œsetteræ–¹æ³•</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041657535.png" alt="image-20210904165746685"></p><p>2.ä¿®æ”¹demo</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestJDBC</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">// å¯¼å…¥æ•°æ®åº“é©±åŠ¨åŒ…</span></span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å»ºç«‹ä¸æ•°æ®åº“çš„è¿æ¥</span></span><br><span class="line">            <span class="comment">// æ•°æ®åº“åç§°ï¼Œ è´¦å·ï¼Œå¯†ç </span></span><br><span class="line">            Connection c = DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/test&quot;</span>, <span class="string">&quot;test&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// åˆ›å»ºStatementï¼Œç”¨äºæ‰§è¡Œsqlè¯­å¥</span></span><br><span class="line">            Statement s = c.createStatement();</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// &gt;&gt;&gt;&gt;&gt;&gt; ä¿®æ”¹sqlè¯­å¥</span></span><br><span class="line">            String sql  = <span class="string">&quot;select * from student where id = 1&quot;</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ‰§è¡Œsqlè¯­å¥ï¼Œå¹¶è¿”å›ç»“æœ</span></span><br><span class="line">            ResultSet res = s.executeQuery(sql);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//  &gt;&gt;&gt;&gt;å»æ‰whileå¤„ç†è¿”å›ç»“æœ</span></span><br><span class="line">            <span class="keyword">if</span>(res.next())&#123;</span><br><span class="line">                <span class="comment">//&gt;&gt;&gt;&gt;&gt;&gt; å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨äºå­˜å‚¨ä¸€æ¡æ•°æ®</span></span><br><span class="line">                Student student = <span class="keyword">new</span> Student();</span><br><span class="line"></span><br><span class="line">                <span class="comment">// å°†æ•°æ®åº“ä¸­çš„å€¼å­˜å‚¨åœ¨å¯¹è±¡ä¸­</span></span><br><span class="line">                student.setId(res.getInt(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">                student.setName(res.getString(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">                System.out.println(student);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ•æ‰æ•°æ®åº“åŠ è½½å¼‚å¸¸</span></span><br><span class="line">        <span class="keyword">catch</span> (ClassNotFoundException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ•æ‰æ•°æ®åº“è¿æ¥å¼‚å¸¸</span></span><br><span class="line">        <span class="keyword">catch</span> (SQLException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3.æ‰“æ–­ç‚¹å‚çœ‹studentå¯¹è±¡</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109111751277.png" alt="image-20210911175137132"></p><h3 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h3><h4 id="Springé‡è¦æ¦‚å¿µ"><a href="#Springé‡è¦æ¦‚å¿µ" class="headerlink" title="Springé‡è¦æ¦‚å¿µ"></a>Springé‡è¦æ¦‚å¿µ</h4><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://blog.csdn.net/qq_40587575/article/details/79901550">https://blog.csdn.net/qq_40587575/article/details/79901550</a></p><h5 id="ï¼ˆ1ï¼‰IoCä¸DIæ¦‚å¿µ"><a href="#ï¼ˆ1ï¼‰IoCä¸DIæ¦‚å¿µ" class="headerlink" title="ï¼ˆ1ï¼‰IoCä¸DIæ¦‚å¿µ"></a>ï¼ˆ1ï¼‰IoCä¸DIæ¦‚å¿µ</h5><p>IoCï¼š</p><ul><li>Iocâ€”Inversion of Controlï¼Œå³â€œæ§åˆ¶åè½¬â€</li><li>åœ¨Javaå¼€å‘ä¸­ï¼ŒIocæ„å‘³ç€å°†ä½ è®¾è®¡å¥½çš„å¯¹è±¡äº¤ç»™å®¹å™¨æ§åˆ¶ï¼Œè€Œä¸æ˜¯ä¼ ç»Ÿçš„åœ¨ä½ çš„å¯¹è±¡å†…éƒ¨ç›´æ¥æ§åˆ¶</li><li>IoCå¾ˆå¥½çš„ä½“ç°äº†é¢å‘å¯¹è±¡è®¾è®¡æ³•åˆ™ä¹‹ä¸€â€”â€” å¥½è±åæ³•åˆ™ï¼šâ€œåˆ«æ‰¾æˆ‘ä»¬ï¼Œæˆ‘ä»¬æ‰¾ä½ â€ï¼›å³ç”±<strong>IoCå®¹å™¨å¸®å¯¹è±¡æ‰¾ç›¸åº”çš„ä¾èµ–å¯¹è±¡å¹¶æ³¨å…¥ï¼Œè€Œä¸æ˜¯ç”±å¯¹è±¡ä¸»åŠ¨å»æ‰¾</strong></li></ul><table><thead><tr><th>Iocç‰¹ç‚¹</th><th>ä¼ ç»Ÿjavaç¨‹åº</th><th>Iocè®¾è®¡</th></tr></thead><tbody><tr><td>æ§åˆ¶</td><td>åœ¨å¯¹è±¡å†…éƒ¨é€šè¿‡newè¿›è¡Œåˆ›å»ºå¯¹è±¡ï¼Œæ˜¯ç¨‹åºä¸»åŠ¨å»åˆ›å»ºä¾èµ–å¯¹è±¡</td><td>IoCæ˜¯æœ‰ä¸“é—¨ä¸€ä¸ªå®¹å™¨æ¥åˆ›å»ºè¿™äº›å¯¹è±¡ï¼Œå³ç”±Iocå®¹å™¨æ¥æ§åˆ¶å¯¹è±¡çš„åˆ›å»º</td></tr><tr><td>åè½¬</td><td>ç”±æˆ‘ä»¬è‡ªå·±åœ¨å¯¹è±¡ä¸­ä¸»åŠ¨æ§åˆ¶å»ç›´æ¥è·å–ä¾èµ–å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æ­£è½¬</td><td>åè½¬åˆ™æ˜¯ç”±å®¹å™¨æ¥å¸®å¿™åˆ›å»ºåŠæ³¨å…¥ä¾èµ–å¯¹è±¡ï¼Œå¯¹è±¡åªæ˜¯è¢«åŠ¨çš„æ¥å—ä¾èµ–å¯¹è±¡</td></tr></tbody></table><p>DIï¼š</p><ul><li>DIâ€”Dependency Injectionï¼Œå³â€œä¾èµ–æ³¨å…¥â€</li><li>ç»„ä»¶ä¹‹é—´ä¾èµ–å…³ç³»ç”±å®¹å™¨åœ¨è¿è¡ŒæœŸå†³å®šï¼Œç”±å®¹å™¨åŠ¨æ€çš„å°†æŸä¸ªä¾èµ–å…³ç³»æ³¨å…¥åˆ°ç»„ä»¶ä¹‹ä¸­</li><li>é€šè¿‡ä¾èµ–æ³¨å…¥æœºåˆ¶ï¼Œæˆ‘ä»¬åªéœ€è¦é€šè¿‡ç®€å•çš„é…ç½®ï¼Œè€Œæ— éœ€ä»»ä½•ä»£ç å°±å¯æŒ‡å®šç›®æ ‡éœ€è¦çš„èµ„æºï¼Œå®Œæˆè‡ªèº«çš„ä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸éœ€è¦å…³å¿ƒå…·ä½“çš„èµ„æºæ¥è‡ªä½•å¤„ï¼Œç”±è°å®ç°</li><li>â€œä¾èµ–æ³¨å…¥â€æ˜ç¡®æè¿°äº†â€œè¢«æ³¨å…¥å¯¹è±¡ä¾èµ–IoCå®¹å™¨é…ç½®ä¾èµ–å¯¹è±¡â€</li></ul><h5 id="ï¼ˆ2ï¼‰IoCä¸DIæ¦‚å¿µå›¾ä¾‹"><a href="#ï¼ˆ2ï¼‰IoCä¸DIæ¦‚å¿µå›¾ä¾‹" class="headerlink" title="ï¼ˆ2ï¼‰IoCä¸DIæ¦‚å¿µå›¾ä¾‹"></a>ï¼ˆ2ï¼‰IoCä¸DIæ¦‚å¿µå›¾ä¾‹</h5><p>ä¼ ç»Ÿçš„javaç¨‹åº</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109120728738.png" alt="image-20210912072844684"></p><p>ä½¿ç”¨äº†loC/DIçš„ç¨‹åº</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109120729641.png" alt="image-20210912072938515"></p><h5 id="ï¼ˆ3ï¼‰Springçš„åº”ç”¨"><a href="#ï¼ˆ3ï¼‰Springçš„åº”ç”¨" class="headerlink" title="ï¼ˆ3ï¼‰Springçš„åº”ç”¨"></a>ï¼ˆ3ï¼‰Springçš„åº”ç”¨</h5><p>åªéœ€è¦ç†è§£ä¸€ç‚¹ï¼šSpringå¸®æˆ‘ä»¬å®Œæˆäº†ç±»çš„åˆ›å»ºï¼Œå¤šä¸ªç±»çš„åˆä½œçš„å·¥ä½œï¼Œå³å°†IoCå®¹å™¨ä¸å…¶åœ¨å…¶ä¸­æ³¨å†Œçš„ç±»çœ‹ä½œé»‘ç›’ï¼Œé€šè¿‡<strong>æ³¨è§£</strong>å’Œ<strong>é…ç½®æ–‡ä»¶</strong>ï¼Œå¯ä»¥è®©ç±»åœ¨å¹³å°ä¸Šæ³¨å†Œï¼Œè€Œè¿™äº›æ³¨å†Œçš„ç±»å«<strong>Bean</strong>ï¼Œæˆ‘ä»¬è¦åšçš„å·¥ä½œå®é™…ä¸Šå°±æ˜¯æ³¨å†Œç±»å’Œæ‹¿åˆ°IoCè£…é…å¥½çš„ç±»</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109120939057.png" alt="image-20210912093936648"></p><h5 id="ï¼ˆ4ï¼‰Springæ¨¡å—"><a href="#ï¼ˆ4ï¼‰Springæ¨¡å—" class="headerlink" title="ï¼ˆ4ï¼‰Springæ¨¡å—"></a>ï¼ˆ4ï¼‰Springæ¨¡å—</h5><p>å‚è€ƒèµ„æ–™ï¼š</p><p><a href="https://blog.csdn.net/u010648555/article/details/76299467">Springå¸¸ç”¨æ³¨è§£</a></p><p><a href="https://blog.csdn.net/qq_44543508/article/details/103718958">Springçš„@beanæ³¨è§£</a></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109121039116.png" alt="spring-overview"></p><p>Springæä¾›äº†ä¸€å †ç»„ä»¶ï¼Œé€šè¿‡æ‹¼æ¥è¿™äº›ç»„ä»¶æˆ‘ä»¬å¯ä»¥ç»„è£…å‡ºwebåº”ç”¨ï¼ˆæ¯”è¾ƒç»å…¸çš„ç¼åˆæ€ªæœ‰ï¼šSSIï¼ŒSSHï¼ŒSSMï¼Œä»–ä»¬çš„é¦–å­—æ¯å°±ä»£è¡¨Springï¼‰</p><p>Springæ€ä¹ˆçŸ¥é“åº”è¯¥æŠŠå“ªäº›Javaç±»å½“æˆbeanæ³¨å†Œåˆ°å®¹å™¨ä¸­å‘¢ï¼Ÿ<br>ä½¿ç”¨é…ç½®æ–‡ä»¶æˆ–è€…æ³¨è§£çš„æ–¹å¼è¿›è¡Œæ ‡è¯†éœ€è¦å¤„ç†çš„javaç±»!</p><p>æ”¾åœ¨å…·ä½“çš„å®ä¾‹ä¸­å¯ä»¥è¿™æ ·ç†è§£ï¼šå°†æ•°æ®åº“çš„é…ç½®ä¿¡æ¯æ³¨å†Œåœ¨å®¹å™¨ä¸­ï¼Œåœ¨éœ€è¦è®¿é—®æ•°æ®åº“çš„å¯¹è±¡ä¸­ç”¨æˆ·é€šè¿‡æ³¨è§£ï¼ˆjavaç¨‹åºä¸­çš„ç‰¹æ®Šæ ‡è®°ï¼‰è®©è¯¥å¯¹è±¡ä¾èµ–æ³¨å…¥äº†æ•°æ®åº“é…ç½®ä¿¡æ¯ï¼Œä»è€Œå¯ä»¥è®¿é—®åˆ°æ•°æ®åº“ï¼›</p><h4 id="å¼€å‘æ¶æ„"><a href="#å¼€å‘æ¶æ„" class="headerlink" title="å¼€å‘æ¶æ„"></a>å¼€å‘æ¶æ„</h4><h5 id="ï¼ˆ1ï¼‰ä¸šåŠ¡é€»è¾‘"><a href="#ï¼ˆ1ï¼‰ä¸šåŠ¡é€»è¾‘" class="headerlink" title="ï¼ˆ1ï¼‰ä¸šåŠ¡é€»è¾‘"></a>ï¼ˆ1ï¼‰ä¸šåŠ¡é€»è¾‘</h5><p><strong>Controllerâ€“&gt;serviceæ¥å£â€“&gt;serviceImplâ€“&gt;daoæ¥å£â€“&gt;daoImplâ€“&gt;mapperâ€“&gt;db</strong></p><h5 id="ï¼ˆ2ï¼‰æ‰§è¡Œæµç¨‹"><a href="#ï¼ˆ2ï¼‰æ‰§è¡Œæµç¨‹" class="headerlink" title="ï¼ˆ2ï¼‰æ‰§è¡Œæµç¨‹"></a>ï¼ˆ2ï¼‰æ‰§è¡Œæµç¨‹</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041811913.png" alt="img"></p><p>è€Œ<code>pojo</code>åˆ™æ˜¯å®ä½“ç±»ä½œä¸ºå„å±‚æ¬¡å¤„ç†ä¼ é€’çš„å¯¹è±¡ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041811687.png" alt="image-20210629104056016"></p><h5 id="ï¼ˆ3ï¼‰å„å±‚èŒèƒ½"><a href="#ï¼ˆ3ï¼‰å„å±‚èŒèƒ½" class="headerlink" title="ï¼ˆ3ï¼‰å„å±‚èŒèƒ½"></a>ï¼ˆ3ï¼‰å„å±‚èŒèƒ½</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109120951753.png" alt="image-20210912095119480"></p><ul><li>dao/mapperå±‚å³æ•°æ®æŒä¹…å±‚ï¼Œdaoå±‚çš„ä½œç”¨ä¸ºè®¿é—®æ•°æ®åº“ï¼Œå‘æ•°æ®åº“å‘é€sqlè¯­å¥ï¼Œå®Œæˆæ•°æ®çš„å¢åˆ æ”¹æŸ¥ä»»åŠ¡</li><li>serviceå±‚è°ƒç”¨daoå±‚çš„æ¥å£è¿›è¡Œä¸šåŠ¡é€»è¾‘åº”ç”¨çš„å¤„ç†ï¼Œå°è£…Serviceå±‚çš„ä¸šåŠ¡é€»è¾‘æœ‰åˆ©äºä¸šåŠ¡é€»è¾‘çš„ç‹¬ç«‹æ€§å’Œé‡å¤åˆ©ç”¨æ€§</li><li>controllerå±‚å³æ§åˆ¶å±‚ï¼Œæ§åˆ¶è¯·æ±‚å’Œå“åº”ï¼Œè´Ÿè´£å‰åç«¯äº¤äº’ controllerå±‚ä¸»è¦è°ƒç”¨Serviceå±‚é‡Œé¢çš„æ¥å£æ§åˆ¶å…·ä½“çš„ä¸šåŠ¡æµç¨‹</li><li>viewå±‚å³è§†å›¾å±‚ï¼Œç”¨æˆ·å¯ä»¥çœ‹åˆ°å¹¶æ“ä½œï¼Œå¯ä»¥ç†è§£ä¸ºå‰ç«¯</li></ul><h4 id="SpringBoot"><a href="#SpringBoot" class="headerlink" title="SpringBoot"></a>SpringBoot</h4><p>SpringBootè®©Springåº”ç”¨æ›´åŠ è½»é‡åŒ–ï¼Œå¹¶ç®€åŒ–äº†äº†é…ç½®ï¼Œå®ç°è‡ªåŠ¨åŒ–é…ç½®</p><p>Spring Bootæ˜¯ä¸€ä¸ªåŸºäºSpringçš„å¥—ä»¶ï¼Œå®ƒå¸®æˆ‘ä»¬é¢„ç»„è£…äº†Springçš„ä¸€ç³»åˆ—ç»„ä»¶ï¼Œä»¥ä¾¿ä»¥å°½å¯èƒ½å°‘çš„ä»£ç å’Œé…ç½®æ¥å¼€å‘åŸºäºSpringçš„Javaåº”ç”¨ç¨‹åº</p><p>æ€»è€Œè¨€ä¹‹ï¼ŒSpringbootæ˜¯Springçš„ä¸€å¥—å¿«é€Ÿå¼€å‘æ•´åˆåŒ…</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109140739880.gif" alt="img"></p><h5 id="ï¼ˆ1ï¼‰SpringBootå¯åŠ¨åŸç†"><a href="#ï¼ˆ1ï¼‰SpringBootå¯åŠ¨åŸç†" class="headerlink" title="ï¼ˆ1ï¼‰SpringBootå¯åŠ¨åŸç†"></a>ï¼ˆ1ï¼‰SpringBootå¯åŠ¨åŸç†</h5><p>å‚è€ƒèµ„æ–™ï¼š</p><p><a href="https://www.cnblogs.com/theRhyme/p/11057233.html">https://www.cnblogs.com/theRhyme/p/11057233.html</a></p><p><a href="https://juejin.cn/post/6895341123816914958#heading-1">https://juejin.cn/post/6895341123816914958#heading-1</a></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109111934807.png" alt="img"></p><ul><li><p>å¯åŠ¨è¿‡ç¨‹ä¸­ï¼Œå°†æ³¨å†Œç±»è£…é…åˆ°Iocå®¹å™¨ï¼Œåˆ°æ—¶å€™æˆ‘ä»¬å¯ä»¥ç›´æ¥è·å¾—è£…é…å¥½çš„ç±»</p></li><li><p>åå°„ï¼šé€šè¿‡åå°„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿è¡Œæ—¶è·å¾—ç¨‹åºæˆ–ç¨‹åºé›†ä¸­æ¯ä¸€ä¸ªç±»å‹çš„æˆå‘˜å’Œæˆå‘˜çš„ä¿¡æ¯ã€‚ç¨‹åºä¸­ä¸€èˆ¬çš„å¯¹è±¡çš„ç±»å‹éƒ½æ˜¯åœ¨ç¼–è¯‘æœŸå°±ç¡®å®šä¸‹æ¥çš„ï¼Œè€Œ Java åå°„æœºåˆ¶å¯ä»¥åŠ¨æ€åœ°åˆ›å»ºå¯¹è±¡å¹¶è°ƒç”¨å…¶å±æ€§ï¼Œè¿™æ ·çš„å¯¹è±¡çš„ç±»å‹åœ¨ç¼–è¯‘æœŸæ˜¯æœªçŸ¥çš„</p></li><li><p>@ComponentScan ï¼š<strong>æ‰«ææ‰€åœ¨ç±»çš„package</strong>ï¼›å‘Šè¯‰Springæ‰«æå“ªä¸ªåŒ…ä¸‹é¢ç±»ï¼ŒåŠ è½½ç¬¦åˆæ¡ä»¶çš„ç»„ä»¶(æ¯”å¦‚@Componentå’Œ@Repositoryä»¥åŠ@RestControllerï¼Œ@Serviceç­‰ç±»)</p></li><li><p>@EnableAutoConfigurationï¼š<strong>å¼€å¯è‡ªåŠ¨é…ç½®</strong>ï¼›ç»è¿‡å±‚å±‚è°ƒç”¨ï¼Œæœ€ç»ˆé€šè¿‡loadSpringFactories()æ–¹æ³•åŠ è½½META-INF/spring.factoriesä¸­çš„é…ç½®ç±»</p></li><li><p>@SpringBootConfigurationï¼š<strong>æ ‡æ³¨å½“å‰ç±»æ˜¯é…ç½®ç±»</strong>ï¼›å°†å½“å‰ç±»å†…å£°æ˜çš„ä¸€ä¸ªæˆ–å¤šä¸ªä»¥@Beanæ³¨è§£æ ‡è®°çš„æ–¹æ³•çš„å®ä¾‹çº³å…¥åˆ°springå®¹å™¨ä¸­ï¼Œå¹¶ä¸”å®ä¾‹åå°±æ˜¯æ–¹æ³•å</p></li></ul><h5 id="ï¼ˆ2ï¼‰SpringBoot-Web-Demo"><a href="#ï¼ˆ2ï¼‰SpringBoot-Web-Demo" class="headerlink" title="ï¼ˆ2ï¼‰SpringBoot Web Demo"></a>ï¼ˆ2ï¼‰SpringBoot Web Demo</h5><p>1.æ–°å»ºSpring Initializré¡¹ç›®</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109111939355.png" alt="image-20210911193904203"></p><p>2.å‹¾é€‰webæ¨¡å—</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109111940650.png" alt="image-20210911194039612"></p><p>3.æŸ¥çœ‹pom.xml</p><p>æŸ¥çœ‹pom.xmlç­‰å¾…ä¾èµ–ä¸‹è½½å®Œæ¯•ï¼ˆspringbootå†…ç½®çš„ä¾èµ–é¡¹è¿‡å¤šï¼Œä¸‹è½½æ—¶é—´è¾ƒé•¿ï¼Œstart-webç®€åŒ–äº†Mavençš„ä¾èµ–åŠ è½½ï¼‰</p><p>4.æŸ¥çœ‹SpringbootApplication.javaæ–‡ä»¶</p><p>é¡¹ç›®åˆ›å»ºå¥½ä¹‹åï¼Œå°±è‡ªå¸¦ä¸€ä¸ªSpringbootApplication, å…¶è¢«@SpringBootApplication æ‰€æ ‡è®°ï¼Œè¡¨ç¤ºè¿™ä¸ªæ˜¯ä¸€ä¸ªSpringboot åº”ç”¨ï¼Œå…¶ä¸ºSpringboot åº”ç”¨çš„å…¥å£</p><p>5.æ–°å»ºwebæ–‡ä»¶å­˜æ”¾æ§åˆ¶å™¨</p><p>æ–°å»ºHelloController.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨è§£ä¸ºæ§åˆ¶å™¨</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ³¨è§£ä¸ºæ˜ å°„url</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello SpringBoot!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™é‡Œå°±ç›¸å½“äºå®ç°äº†Servletçš„åŠŸèƒ½ï¼šå¤„ç†httpè¯·æ±‚ï¼Œè¿”å›å“åº”å†…å®¹</p><p>è€Œè¿™é‡Œçš„æ³¨è§£å°±ç›¸å½“äºå®ç°äº†Servletçš„web.xmlé…ç½®æ–‡ä»¶çš„åŠŸèƒ½</p><p>æ³¨è§£æ˜¯javaä¸€ä¸ªå¼ºå¤§çš„ç‰¹æ€§ï¼Œç®€å•æ¥è¯´å¯ä»¥ç†è§£ä¸ºä»£ç ä¸­çš„ç‰¹æ®Šæ ‡è®°ï¼Œå¼€å‘äººå‘˜å¯ä»¥åœ¨ä¸æ”¹å˜åŸæœ‰ä»£ç æƒ…å†µä¸‹ï¼Œåœ¨æºä»£ç ä¸­åµŒå…¥è¡¥å……ä¿¡æ¯</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109112001559.png" alt="image-20210911200155436"></p><p>6.è¿è¡Œæµ‹è¯•</p><p>è®¿é—®é“¾æ¥ï¼š<code>http://localhost:8080/hello</code></p><p>æ„Ÿè§‰å°‘äº†ä»€ä¹ˆâ€¦â€¦æˆ‘çš„tomcatå‘¢ï¼Ÿå¥½åƒæ²¡æœ‰é…webæœåŠ¡å™¨ğŸ˜°</p><p>åŸæ¥tomcatå·²ç»å†…åµŒåœ¨SpringbootApplicationä¸­ä¸€èµ·å¯åŠ¨äº†</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109112009212.png" alt="image-20210911200952174"></p><p>ä¹Ÿå¯ä»¥çœ‹åˆ°ä¾èµ–é¡¹ä¸­ä¹ŸåŠ è½½äº†tomcatï¼ŒTomcatçš„å±æ€§éƒ½åœ¨<code>org.springframework.boot.autoconfigure.web.ServerProperties</code>é…ç½®ç±»ä¸­åšäº†å®šä¹‰</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109112026994.png" alt="image-20210911202642854"></p><p>7.ä¿®æ”¹ç«¯å£å’Œä¸Šä¸‹æ–‡</p><p>åœ¨<code>resources/application.properties</code>æ–‡ä»¶ä¿®æ”¹é…ç½®ï¼ˆå¯ä»¥ä¿®æ”¹ç«¯å£å’Œä¸Šä¸‹æ–‡ä»¥åŠè§†å›¾å®šä½ï¼‰</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">server.port</span>=<span class="string">80</span></span><br><span class="line"><span class="meta">server.servlet.context-path</span>=<span class="string">/test</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•è®¿é—®<code>http://localhost/test/hello</code>ï¼Œå¦‚æœå‡ºç°äº†ç«¯å£å ç”¨æƒ…å†µï¼Œå¯ä»¥å‚è€ƒtomcatçš„å¤„ç†æ–¹æ³•</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109112044412.png" alt="image-20210911204412242"></p><h5 id="ï¼ˆ3ï¼‰æŒä¹…å±‚æ”¯æŒ"><a href="#ï¼ˆ3ï¼‰æŒä¹…å±‚æ”¯æŒ" class="headerlink" title="ï¼ˆ3ï¼‰æŒä¹…å±‚æ”¯æŒ"></a>ï¼ˆ3ï¼‰æŒä¹…å±‚æ”¯æŒ</h5><p><strong>Hibernate</strong></p><p>Hibernateæ˜¯jpaçš„å…·ä½“å®ç°ï¼Œspringbooté»˜è®¤ä½¿ç”¨çš„å°±æ˜¯Hibernateï¼Œå¯ä»¥è®©æˆ‘ä»¬ä¸å†™ä¸€å¥sqlï¼Œä¾¿äºç§»æ¤ï¼ŒåŒæ—¶ä¹Ÿç¼ºä¹çµæ´»æ€§</p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109140808602.png" alt="image-20210912105841614" style="zoom:50%;"><p><strong>MyBatis</strong></p><p>MyBatisä¹Ÿæ˜¯ä¸€ä¸ªæŒä¹…åŒ–æ¡†æ¶ï¼Œä¸å®Œå…¨æ˜¯ä¸€ä¸ªORMæ¡†æ¶ï¼ˆMybatisæ˜¯å°†javaæ–¹æ³•ä¸sqlè¯­å¥å…³è”èµ·æ¥ï¼Œè€Œæ²¡æœ‰å°†javaå¯¹è±¡ä¸æ•°æ®åº“å…³è”èµ·æ¥ï¼‰ä¸æ˜¯ä¾ç…§çš„JPAè§„èŒƒï¼Œå¯ä»¥è¿›è¡Œæ›´ç»†è‡´çš„SQLä¼˜åŒ–ï¼Œæ¯”è¾ƒçµæ´»é€‚åˆå¤„ç†å¤§é‡æ•°æ®çš„ä¸šåŠ¡ï¼Œæ¨èå­¦ä¹ </p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109121103990.png" alt="@mybatis"></p><h5 id="ï¼ˆ4ï¼‰SpringBoot-JPA-Demo"><a href="#ï¼ˆ4ï¼‰SpringBoot-JPA-Demo" class="headerlink" title="ï¼ˆ4ï¼‰SpringBoot  JPA Demo"></a>ï¼ˆ4ï¼‰SpringBoot  JPA Demo</h5><p>JPA(Java Persistence API)æ˜¯Sunå®˜æ–¹æå‡ºçš„JavaæŒä¹…åŒ–è§„èŒƒï¼Œç”¨æ¥æ–¹ä¾¿å¤§å®¶æ“ä½œæ•°æ®åº“</p><p>1.å‡†å¤‡æ•°æ®åº“ï¼Œå‚è€ƒæœ¬åœ°æœåŠ¡å™¨ç¯å¢ƒæ­å»ºç« èŠ‚</p><p>2.åœ¨å‰ä¸€ä¸ªdemoä¸­è¿›è¡Œä¿®æ”¹ï¼ˆæˆ–æ–°å»ºä¸€ä¸ªspringé¡¹ç›®ï¼‰</p><p>3.å¢åŠ å¯¹mysqlå’Œjpaçš„æ”¯æŒ</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- mysql--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.21<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- jpa--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span> </span><br></pre></td></tr></table></figure><p>4.ä¿®æ”¹springbooté…ç½®æ–‡ä»¶ï¼Œè¿æ¥æ•°æ®åº“</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ•°æ®åº“é…ç½®ä¿¡æ¯ï¼ˆæ³¨æ„é…ç½®æ•°æ®åº“çš„ç¼–ç å’Œæ—¶åŒºï¼‰</span></span><br><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/test?characterEncoding=UTF-8&amp;serverTimezone=Asia/Shanghai</span></span><br><span class="line"><span class="meta">spring.datasource.username</span>=<span class="string">test</span></span><br><span class="line"><span class="meta">spring.datasource.password</span>=<span class="string">123456</span></span><br><span class="line"><span class="comment"># æ•°æ®åº“è¿æ¥é©±åŠ¨</span></span><br><span class="line"><span class="meta">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br></pre></td></tr></table></figure><p>5.æ ¹æ®ormåˆ›å»ºå®ä½“ç±»Entity</p><p>å®ä½“å±‚æ˜¯å„å±‚æ¬¡ç”¨äºè¾“å…¥è¾“å‡ºå¤„ç†çš„æ•°æ®å¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span> <span class="comment">// æ ‡è®°ä¸ºå®ä½“ç±»</span></span><br><span class="line"><span class="meta">@Table(name = &quot;student&quot;)</span> <span class="comment">// è¡¨æ˜ç±»å¯¹åº”çš„è¡¨å</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç±»çš„ç§æœ‰å±æ€§</span></span><br><span class="line">  <span class="meta">@Id</span> <span class="comment">// æ ‡è®°ä¸ºä¸»é”®</span></span><br><span class="line">  <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span> <span class="comment">// è¡¨æ˜ä¸ºè‡ªå¢é•¿æ–¹å¼</span></span><br><span class="line">  <span class="meta">@Column(name = &quot;id&quot;)</span> <span class="comment">// è¡¨æ˜å¯¹åº”çš„æ•°æ®åº“å­—æ®µå</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">  <span class="meta">@Column(name = &quot;name&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  <span class="meta">@Column(name = &quot;age&quot;)</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">// æä¾›å¤–ç•Œæ“ä½œå±æ€§çš„æ–¹æ³•</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> id;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.id = id;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>6.ç¼–å†™DAOå±‚</p><p>DAOä¸é€‰æ‹©çš„æ•°æ®åº“æ¡†æ¶æœ‰å…³</p><p>DAOå±‚æä¾›ä¸æ•°æ®åº“äº¤äº’çš„æ¥å£ï¼Œç»§æ‰¿JpaRepositoryçˆ¶æ¥å£,æä¾›äº†ä¸€ç³»åˆ—æ“ä½œæ•°æ®åº“æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»§æ‰¿JpaRepositoryçˆ¶æ¥å£,æä¾›äº†ä¸€ç³»åˆ—æ“ä½œæ•°æ®åº“æ–¹æ³•</span></span><br><span class="line"><span class="comment">// å¹¶ä¸”æä¾›äº†æ³›å‹&lt;ç±» , ä¸»é”®ç±»å‹&gt;</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">StudentDAO</span> <span class="keyword">extends</span> <span class="title">JpaRepository</span>&lt;<span class="title">Student</span>, <span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>7.ç¼–å†™Serviceå±‚</p><p>å®šä¹‰ä¼šç”¨åˆ°çš„æ“ä½œæ•°æ®åº“æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰ä¼šç”¨åˆ°çš„æ“ä½œæ•°æ®åº“æ¥å£</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">StudentService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŸ¥æ‰¾æ‰€æœ‰</span></span><br><span class="line">    <span class="function">List&lt;Student&gt; <span class="title">listAll</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="comment">// æŸ¥æ‰¾æŒ‡å®šid</span></span><br><span class="line">    <span class="function">Student <span class="title">get</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ç°æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®ç°æ¥å£ä¸­å…·ä½“çš„æ“ä½œæ•°æ®åº“çš„æ–¹æ³•</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentServicempl</span> <span class="keyword">implements</span> <span class="title">StudentService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    StudentDAO studentDAO;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Student&gt; <span class="title">listAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> studentDAO.findAll();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">get</span><span class="params">(<span class="keyword">int</span> id)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> studentDAO.getById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>8.ç¼–å†™æ§åˆ¶å™¨</p><p>è´Ÿè´£è°ƒç”¨æœåŠ¡å±‚çš„æ–¹æ³•ï¼Œå¹¶æ˜ å°„è·¯å¾„æä¾›ç»™å®¢æˆ·ç«¯ä½¿ç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span> <span class="comment">// æ³¨è§£ä¸ºæ§åˆ¶å™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentController</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è‡ªåŠ¨è£…é…serviceå±‚</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    StudentServicempl studentServicempl;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;list&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">list</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// å­˜å‚¨æ•°æ®åº“è¿”å›çš„åˆ—è¡¨</span></span><br><span class="line">        List&lt;Student&gt; list = studentServicempl.listAll();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¾“å‡ºçš„å­—ç¬¦ä¸²</span></span><br><span class="line">        String str = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// éå†åˆ—è¡¨,è·å¾—å¯¹è±¡å±æ€§çš„å€¼</span></span><br><span class="line">        <span class="keyword">for</span> (Student item: list) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ‹¼æ¥ä¸ºå­—ç¬¦ä¸²è¾“å‡º</span></span><br><span class="line">            str += item.getId() + <span class="string">&quot;.&quot;</span> + item.getName() + <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment">// æ˜ å°„get url</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;get&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">get</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Student student = studentServicempl.get(<span class="number">3</span>);</span><br><span class="line">        <span class="keyword">return</span> student.getName() + student.getId();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>9.ç¼–å†™å•å…ƒæµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="meta">@WebAppConfiguration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æµ‹è¯•controllerå±‚</span></span><br><span class="line">    MockMvc mockMvc;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    WebApplicationContext context;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUp</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        System.out.println(context);</span><br><span class="line">        mockMvc = MockMvcBuilders.webAppContextSetup(context).build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">get</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        mockMvc.perform(MockMvcRequestBuilders.get(<span class="string">&quot;/list&quot;</span>).accept(MediaType.APPLICATION_JSON))</span><br><span class="line">                .andExpect(MockMvcResultMatchers.status().isOk())</span><br><span class="line">                .andDo(MockMvcResultHandlers.print())</span><br><span class="line">                .andReturn();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æµ‹è¯•Daoå±‚</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    StudentDAO dao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        List&lt;Student&gt; students = dao.findAll();</span><br><span class="line">        <span class="keyword">for</span>(Student student : students)&#123;</span><br><span class="line">            System.out.println(student.getName());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æµ‹è¯•serviceå±‚</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    StudentServicempl studentServicempl;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        List&lt;Student&gt; students = studentServicempl.listAll();</span><br><span class="line">        <span class="keyword">for</span>(Student student : students)&#123;</span><br><span class="line">            System.out.println(student.getName());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ5ï¼‰SpringBoot-Mybatis-Demo"><a href="#ï¼ˆ5ï¼‰SpringBoot-Mybatis-Demo" class="headerlink" title="ï¼ˆ5ï¼‰SpringBoot  Mybatis  Demo"></a>ï¼ˆ5ï¼‰SpringBoot  Mybatis  Demo</h5><p>ä¿®æ”¹JPA Demoçš„daoå±‚ä¸å®ä½“ç±»ï¼Œä¸ºserviceæä¾›æ“ä½œæ•°æ®åº“çš„æ–¹æ³•ï¼Œæœ‰æ³¨è§£æ³•å’Œxmlä¸¤ç§æ–¹å¼</p><p>è¿™é‡Œé‡‡ç”¨æ¯”è¾ƒæ–¹ä¾¿çš„æ³¨è§£æ³•</p><ul><li><p>ä¿®æ”¹Daoï¼Œæ˜ å°„sqlè¯­å¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ‡æ³¨ä¸ºmybatisçš„mapperæ¥å£</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">StudentDAO</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨@Selectæ³¨è§£è¡¨ç¤ºè°ƒç”¨æ–¹æ³•ä¼šå»æ‰§è¡Œå¯¹åº”çš„sqlè¯­å¥</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from student&quot;)</span></span><br><span class="line">    <span class="function">List&lt;Student&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from student where id= #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="function">Student <span class="title">getById</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><ul><li><p>ä¿®æ”¹pojo</p><p>Mybatisæ˜¯å°†javaæ–¹æ³•ä¸sqlè¯­å¥å…³è”èµ·æ¥ï¼Œè€Œæ²¡æœ‰å°†javaå¯¹è±¡ä¸æ•°æ®åº“å…³è”èµ·æ¥ã€‚æ‰€ä»¥ä¸éœ€è¦æ³¨è§£å®ä½“ç±»ä¸æ•°æ®åº“çš„è”ç³»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">long</span> id;</span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">long</span> age;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> id;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">long</span> id)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.id = id;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">long</span> age)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h3 id="SpringCloud-Netflix"><a href="#SpringCloud-Netflix" class="headerlink" title="SpringCloud Netflix"></a>SpringCloud Netflix</h3><h4 id="åˆ†å¸ƒå¼ä¸é›†ç¾¤"><a href="#åˆ†å¸ƒå¼ä¸é›†ç¾¤" class="headerlink" title="åˆ†å¸ƒå¼ä¸é›†ç¾¤"></a>åˆ†å¸ƒå¼ä¸é›†ç¾¤</h4><h5 id="ï¼ˆ1ï¼‰å¾®æœåŠ¡æ¦‚å¿µ"><a href="#ï¼ˆ1ï¼‰å¾®æœåŠ¡æ¦‚å¿µ" class="headerlink" title="ï¼ˆ1ï¼‰å¾®æœåŠ¡æ¦‚å¿µ"></a>ï¼ˆ1ï¼‰å¾®æœåŠ¡æ¦‚å¿µ</h5><p>å¾®æœåŠ¡ç®€å•æ¥è¯´ï¼Œä¸€ä¸ªspringbootå°±æ˜¯ä¸€ä¸ªå¾®æœåŠ¡ï¼Œä¸åŒçš„æ˜¯è¿™ä¸ªspringbootåªåšä¸€é¡¹å•çº¯çš„ä»»åŠ¡</p><h5 id="ï¼ˆ2ï¼‰æœåŠ¡æ³¨å†Œ"><a href="#ï¼ˆ2ï¼‰æœåŠ¡æ³¨å†Œ" class="headerlink" title="ï¼ˆ2ï¼‰æœåŠ¡æ³¨å†Œ"></a>ï¼ˆ2ï¼‰æœåŠ¡æ³¨å†Œ</h5><p>springcloudæœ‰ä¸ªå¾®æœåŠ¡æ³¨å†Œä¸­eureka serverï¼Œé€šè¿‡å®ƒæŠŠå¾®æœåŠ¡æ³¨å†Œèµ·æ¥ä»¥ä¾›æ¥è°ƒç”¨</p><h5 id="ï¼ˆ3ï¼‰æœåŠ¡è®¿é—®"><a href="#ï¼ˆ3ï¼‰æœåŠ¡è®¿é—®" class="headerlink" title="ï¼ˆ3ï¼‰æœåŠ¡è®¿é—®"></a>ï¼ˆ3ï¼‰æœåŠ¡è®¿é—®</h5><p>å¾®æœåŠ¡ç›´æ¥å¯ä»¥é€šè¿‡æ³¨å†Œä¸­å¿ƒçš„å®šä½ç›¸äº’è®¿é—®</p><h5 id="ï¼ˆ4ï¼‰åˆ†å¸ƒå¼æ¦‚å¿µ"><a href="#ï¼ˆ4ï¼‰åˆ†å¸ƒå¼æ¦‚å¿µ" class="headerlink" title="ï¼ˆ4ï¼‰åˆ†å¸ƒå¼æ¦‚å¿µ"></a>ï¼ˆ4ï¼‰åˆ†å¸ƒå¼æ¦‚å¿µ</h5><p> ç®€å•è¯´ï¼ŒåŸæ¥æ˜¯åœ¨ä¸€ä¸ª springbooté‡Œå°±å®Œæˆçš„äº‹æƒ…ï¼Œç°åœ¨åˆ†å¸ƒåœ¨å¤šä¸ª springbooté‡Œåšï¼Œè¿™å°±æ˜¯åˆæ­¥å…·å¤‡åˆ†å¸ƒå¼é›å½¢äº†</p><ul><li>å¦‚æœæˆ‘è¦æ›´æ–°æ•°æ®å¾®æœåŠ¡ï¼Œè§†å›¾å¾®æœåŠ¡æ˜¯ä¸å—å½±å“çš„</li><li>å¯ä»¥è®©ä¸åŒçš„å›¢é˜Ÿå¼€å‘ä¸åŒçš„å¾®æœåŠ¡ï¼Œä»–ä»¬ä¹‹é—´åªè¦çº¦å®šå¥½æ¥å£ï¼Œå½¼æ­¤ä¹‹é—´æ˜¯ä½è€¦åˆçš„ã€‚</li><li>å¦‚æœè§†å›¾å¾®æœåŠ¡æŒ‚äº†ï¼Œæ•°æ®å¾®æœåŠ¡ä¾ç„¶å¯ä»¥ç»§ç»­ä½¿ç”¨<br>ç­‰ç­‰</li></ul><h5 id="ï¼ˆ5ï¼‰é›†ç¾¤"><a href="#ï¼ˆ5ï¼‰é›†ç¾¤" class="headerlink" title="ï¼ˆ5ï¼‰é›†ç¾¤"></a>ï¼ˆ5ï¼‰é›†ç¾¤</h5><p>æä¾›ç›¸åŒåŠŸèƒ½ï¼Œåªæ˜¯ç«¯å£ä¸ä¸€æ ·çš„å¾®æœåŠ¡ç§°ä¸ºé›†ç¾¤</p><ul><li>æ¯”èµ·ä¸€ä¸ª springboot, ä¸¤ä¸ªspringboot å¯ä»¥åˆ†åˆ«éƒ¨ç½²åœ¨ä¸¤ä¸ªä¸åŒçš„æœºå™¨ä¸Šï¼Œé‚£ä¹ˆç†è®ºä¸Šæ¥è¯´ï¼Œèƒ½å¤Ÿæ‰¿å—çš„è´Ÿè½½å°±æ˜¯ x 2. è¿™æ ·ç³»ç»Ÿå°±å…·å¤‡é€šè¿‡æ¨ªå‘æ‰©å±•è€Œæé«˜æ€§èƒ½çš„æœºåˆ¶</li><li>å¦‚æœ 8001 æŒ‚äº†ï¼Œè¿˜æœ‰ 8002 ç»§ç»­æä¾›å¾®æœåŠ¡ï¼Œè¿™å°±å«åšé«˜å¯ç”¨ </li></ul><h4 id="SpringCloudä»‹ç»"><a href="#SpringCloudä»‹ç»" class="headerlink" title="SpringCloudä»‹ç»"></a>SpringCloudä»‹ç»</h4><p>å‚è€ƒèµ„æ–™ï¼š<a href="https://crimsonromance.github.io/2019/03/23/%E5%9B%9B%E7%A7%8D%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%EF%BC%9A%E5%8D%95%E4%BD%93%E6%9E%B6%E6%9E%84%E3%80%81%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84%E3%80%81%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84%E3%80%81Serverless%E6%9E%B6%E6%9E%84/">å››ç§è½¯ä»¶æ¶æ„</a></p><h5 id="ï¼ˆ1ï¼‰å•ä½“æ¶æ„"><a href="#ï¼ˆ1ï¼‰å•ä½“æ¶æ„" class="headerlink" title="ï¼ˆ1ï¼‰å•ä½“æ¶æ„"></a>ï¼ˆ1ï¼‰å•ä½“æ¶æ„</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109121533917.png" alt="image-20210912153357714"></p><p>å…¸å‹çš„ä¸‰çº§æ¶æ„ï¼Œå‰ç«¯(Web/æ‰‹æœºç«¯)+ä¸­é—´ä¸šåŠ¡é€»è¾‘å±‚+æ•°æ®åº“å±‚</p><h5 id="ï¼ˆ2ï¼‰åˆ†å¸ƒå¼æ¶æ„"><a href="#ï¼ˆ2ï¼‰åˆ†å¸ƒå¼æ¶æ„" class="headerlink" title="ï¼ˆ2ï¼‰åˆ†å¸ƒå¼æ¶æ„"></a>ï¼ˆ2ï¼‰åˆ†å¸ƒå¼æ¶æ„</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109121532105.png" alt="img"></p><p>å°†ä¸€ä¸ªå¤§çš„ç³»ç»Ÿåˆ’åˆ†ä¸ºå¤šä¸ªä¸šåŠ¡æ¨¡å—ï¼Œä¸šåŠ¡æ¨¡å—åˆ†åˆ«éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œå„ä¸ªä¸šåŠ¡æ¨¡å—ä¹‹é—´é€šè¿‡æ¥å£è¿›è¡Œæ•°æ®äº¤äº’ã€‚æ•°æ®åº“ä¹Ÿå¤§é‡é‡‡ç”¨åˆ†å¸ƒå¼æ•°æ®åº“ï¼Œé€šè¿‡LVS/Nginxä»£ç†åº”ç”¨ï¼Œå°†ç”¨æˆ·è¯·æ±‚å‡è¡¡çš„è´Ÿè½½åˆ°ä¸åŒçš„æœåŠ¡å™¨ä¸Š</p><h5 id="ï¼ˆ3ï¼‰å¾®æœåŠ¡æ¶æ„"><a href="#ï¼ˆ3ï¼‰å¾®æœåŠ¡æ¶æ„" class="headerlink" title="ï¼ˆ3ï¼‰å¾®æœåŠ¡æ¶æ„"></a>ï¼ˆ3ï¼‰å¾®æœåŠ¡æ¶æ„</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109121533619.png" alt="img"></p><p>å°†ç³»ç»Ÿæ‹†åˆ†æˆå¾ˆå¤šå°åº”ç”¨ï¼ˆå¾®æœåŠ¡ï¼‰ï¼Œå¾®æœåŠ¡å¯ä»¥éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œä¹Ÿå¯ä»¥éƒ¨ç½²åœ¨ç›¸åŒçš„æœåŠ¡å™¨ä¸åŒçš„å®¹å™¨ä¸Šã€‚å½“åº”ç”¨çš„æ•…éšœä¸ä¼šå½±å“åˆ°å…¶ä»–åº”ç”¨ï¼Œå•åº”ç”¨çš„è´Ÿè½½ä¹Ÿä¸ä¼šå½±å“åˆ°å…¶ä»–åº”ç”¨</p><h5 id="ï¼ˆ4ï¼‰SpringCloudåŸºæœ¬ç»„æˆ"><a href="#ï¼ˆ4ï¼‰SpringCloudåŸºæœ¬ç»„æˆ" class="headerlink" title="ï¼ˆ4ï¼‰SpringCloudåŸºæœ¬ç»„æˆ"></a>ï¼ˆ4ï¼‰SpringCloudåŸºæœ¬ç»„æˆ</h5><p>Springå°†ç›®å‰å„å®¶å…¬å¸å¼€å‘çš„æ¯”è¾ƒæˆç†Ÿã€ç»å¾—èµ·å®é™…è€ƒéªŒçš„æœåŠ¡æ¡†æ¶ç»„åˆèµ·æ¥ï¼Œé€šè¿‡Spring Booté£æ ¼è¿›è¡Œå†å°è£…å±è”½æ‰äº†å¤æ‚çš„é…ç½®å’Œå®ç°åŸç†ï¼Œæœ€ç»ˆç»™å¼€å‘è€…ç•™å‡ºäº†ä¸€å¥—ç®€å•æ˜“æ‡‚ã€æ˜“éƒ¨ç½²å’Œæ˜“ç»´æŠ¤çš„åˆ†å¸ƒå¼ç³»ç»Ÿå¼€å‘å·¥å…·åŒ…</p><p>SpringCloud å°±æ˜¯ä¸€å¥—å·¥å…·ï¼Œå¸®åŠ©æˆ‘ä»¬å¾ˆå®¹æ˜“åœ°æ­å»ºå‡ºè¿™ä¹ˆä¸€ä¸ª é›†ç¾¤å’Œåˆ†å¸ƒå¼çš„æ¶å­å‡ºæ¥ï¼ŒSpring Cloud ä¸“æ³¨äºä¸ºå…¸å‹ç”¨ä¾‹æä¾›è‰¯å¥½çš„å¼€ç®±å³ç”¨ä½“éªŒï¼Œå¹¶ä¸ºå…¶ä»–ç”¨æˆ·æä¾›å¯æ‰©å±•æ€§æœºåˆ¶</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109121619055.png" alt="img"></p><ul><li>Spring Cloud Netflixï¼šcloudå„é¡¹æœåŠ¡ä¾èµ–ä¸å®ƒï¼Œä¸å„ç§Netflix OSSç»„ä»¶é›†æˆï¼Œç»„æˆå¾®æœåŠ¡çš„æ ¸å¿ƒï¼Œå®ƒçš„ä¸»è¦æœ‰ç»„æˆæœ‰Eureka, Hystrix, Zuul</li><li>Eurekaæ³¨å†Œä¸­å¿ƒæœåŠ¡ï¼šSpringCloudæœåŠ¡ä¸­å¿ƒï¼Œäº‘ç«¯æœåŠ¡å‘ç°ï¼Œä¸€ä¸ªåŸºäº REST çš„æœåŠ¡ï¼Œç”¨äºå®šä½æœåŠ¡ï¼Œä»¥å®ç°äº‘ç«¯ä¸­é—´å±‚æœåŠ¡å‘ç°å’Œæ•…éšœè½¬ç§»</li><li>Microserviceï¼šå¾®æœåŠ¡ï¼Œåœ¨springcloudå¯ä»¥ç®€å•ç†è§£ä¸ºä¸“èŒåšä¸€é¡¹ä»»åŠ¡çš„springbootï¼Œå¾®æœåŠ¡ä¹‹é—´å¯ä»¥é€šè¿‡Ribbonå’ŒFeignä¸¤ç§æ–¹å¼è¿›è¡Œå¾®æœåŠ¡ä¹‹é—´çš„è®¿é—®ï¼ˆFeignæ˜¯ä¸»æµæ–¹å¼ï¼‰</li><li>Zipkiné“¾è·¯è·Ÿè¸ªï¼šä»å±äºSpring Cloud Sleuthï¼ˆæ—¥å¿—æ”¶é›†å·¥å…·åŒ…ï¼‰ï¼Œä¸ºSpringCloudåº”ç”¨å®ç°äº†ä¸€ç§åˆ†å¸ƒå¼è¿½è¸ªè§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥æŸ¥çœ‹å¾®æœåŠ¡ä¹‹é—´çš„å¤æ‚çš„è°ƒç”¨å…³ç³»</li><li>Config Server é…ç½®æœåŠ¡å™¨ï¼šä¿—ç§°é…ç½®ä¸­å¿ƒï¼Œé…ç½®ç®¡ç†å·¥å…·åŒ…ï¼Œè®©ä½ å¯ä»¥æŠŠé…ç½®æ”¾åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼ˆæ¯”å¦‚é›†ä¸­æ”¾åœ¨gitï¼‰ï¼Œé›†ä¸­åŒ–ç®¡ç†é›†ç¾¤é…ç½®</li><li>Bus æ¶ˆæ¯æ€»çº¿ï¼šäº‹ä»¶ã€æ¶ˆæ¯æ€»çº¿ï¼Œç”¨äºåœ¨é›†ç¾¤ï¼ˆä¾‹å¦‚ï¼Œé…ç½®å˜åŒ–äº‹ä»¶ï¼‰ä¸­ä¼ æ’­çŠ¶æ€å˜åŒ–ï¼Œå¯ä¸Config Server è”åˆï¼Œå†ä½¿ç”¨RabbitMQå®ç°çƒ­éƒ¨ç½²ï¼ˆæ‰€è°“çƒ­éƒ¨ç½²å³ä¸éœ€è¦é‡å¯å¾®æœåŠ¡ï¼Œå¯¹é…ç½®ä¿¡æ¯è‡ªåŠ¨æ›´æ–°ï¼‰</li><li>æ–­è·¯å™¨Hystrixï¼šå®¹é”™ç®¡ç†å·¥å…·ï¼Œæ—¨åœ¨é€šè¿‡ç†”æ–­æœºåˆ¶æ§åˆ¶æœåŠ¡å’Œç¬¬ä¸‰æ–¹åº“çš„èŠ‚ç‚¹,ä»è€Œå¯¹å»¶è¿Ÿå’Œæ•…éšœæä¾›æ›´å¼ºå¤§çš„å®¹é”™èƒ½åŠ›ï¼Œç®€å•æ¥è¯´å°±æ˜¯æä¾›å¼‚å¸¸æˆ–é”™è¯¯çš„å¤„ç†å¾®æœåŠ¡ï¼Œæ¯”å¦‚è¯´æŸä¸ªå¾®æœåŠ¡å¯„äº†ï¼Œæ–­è·¯å™¨å°±å¯ä»¥è°ƒç”¨å…¶ä»–å¾®æœåŠ¡é¡¶ä¸Šï¼ˆä¸€èˆ¬æ˜¯é”™è¯¯å¤„ç†çš„å¾®æœåŠ¡ï¼‰</li><li>Hystrix dashboard æ–­è·¯å™¨ç›‘æ§ï¼šé€šè¿‡turbineå°†é›†ç¾¤ä¸­å¤šä¸ªå®ä¾‹æ±‡èšåœ¨ä¸€èµ·ï¼Œå¯¹å¾®æœåŠ¡è¿›è¡Œæ–­è·¯å™¨ç›‘æ§</li><li>ç½‘å…³Zuulï¼šZuul æ˜¯åœ¨äº‘å¹³å°ä¸Šæä¾›åŠ¨æ€è·¯ç”±,ç›‘æ§,å¼¹æ€§,å®‰å…¨ç­‰è¾¹ç¼˜æœåŠ¡çš„æ¡†æ¶ï¼Œé€šè¿‡ç½‘å…³ç®€åŒ–äº†å¯¹å„ä¸ªæœåŠ¡çš„è®¿é—®ï¼šä¸å†éœ€è¦è®°å½•å„ä¸ªå¾®æœåŠ¡çš„åœ°å€å’Œç«¯å£ï¼Œè€Œæ˜¯é€šè¿‡ç½‘å…³å»è®¿é—®ä»–ä»¬</li></ul><h4 id="Springcloud-å¯åŠ¨æµ‹è¯•"><a href="#Springcloud-å¯åŠ¨æµ‹è¯•" class="headerlink" title="Springcloud å¯åŠ¨æµ‹è¯•"></a>Springcloud å¯åŠ¨æµ‹è¯•</h4><h5 id="ï¼ˆ1ï¼‰é¡¹ç›®å¯åŠ¨"><a href="#ï¼ˆ1ï¼‰é¡¹ç›®å¯åŠ¨" class="headerlink" title="ï¼ˆ1ï¼‰é¡¹ç›®å¯åŠ¨"></a>ï¼ˆ1ï¼‰é¡¹ç›®å¯åŠ¨</h5><ul><li><p>å¯åŠ¨RabbitMQï¼ˆè®¿é—®<a href="http://127.0.0.1:15672/#å³å·²å¼€å¯ï¼‰">http://127.0.0.1:15672/#å³å·²å¼€å¯ï¼‰</a></p></li><li><p>å¯åŠ¨é“¾è·¯è¿½è¸ªæœåŠ¡å™¨ï¼ˆè¿™é‡Œå¼€å¯çš„ç«¯å£è¦ä¸å¾®æœåŠ¡ä¸­çš„é…ç½®ä¸€è‡´ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar zipkin-server-2.10.1-exec.jar  --server.port=8050 --zipkin.collector.rabbitmq.addresses=localhost</span><br></pre></td></tr></table></figure></li><li><p>è®¿é—®é…ç½®ä»“åº“<a href="https://github.com/Autovy/SpringCloudConfig/ï¼ˆä¹Ÿå¯ä»¥åœ¨config-serveræ¨¡å—çš„é…ç½®æ–‡ä»¶ä¿®æ”¹æˆè‡ªå·±çš„ä»“åº“ï¼‰">https://github.com/Autovy/SpringCloudConfig/ï¼ˆä¹Ÿå¯ä»¥åœ¨config-serveræ¨¡å—çš„é…ç½®æ–‡ä»¶ä¿®æ”¹æˆè‡ªå·±çš„ä»“åº“ï¼‰</a></p></li><li><p>è¿è¡ŒEurekaServerApplicationï¼Œå¯åŠ¨æ³¨å†Œä¸­å¿ƒæœåŠ¡ï¼ˆç«¯å£ä¸º8761ï¼‰</p></li><li><p>è¿è¡ŒConfigServerApplicationï¼Œå¯åŠ¨é…ç½®æœåŠ¡å™¨ï¼ˆç«¯å£ä¸º8030ï¼‰</p></li><li><p>è¿è¡ŒProductDataServiceApplicationï¼Œå¯åŠ¨æ•°æ®å¾®æœåŠ¡ï¼ˆç«¯å£å¡«å†™8001ï¼Œ8002å½¢æˆé›†ç¾¤ï¼‰</p></li><li><p>è¿è¡ŒProductViewServiceFeignApplicationï¼Œå¯åŠ¨è§†å›¾å¾®æœåŠ¡ï¼ˆç«¯å£å¯å¡«å†™8012ï¼Œ8013ï¼‰</p></li><li><p>è¿è¡ŒProductServiceHystrixDashboardApplicationï¼Œå¼€å¯æ–­è·¯å™¨ç›‘æ§ï¼Œç›‘æ§å•ä¸ªå¾®æœåŠ¡ï¼ˆç«¯å£ä¸º8020ï¼‰</p></li><li><p>è¿è¡ŒProductServiceTurbineApplicationï¼Œå¼€å¯èšåˆæ–­è·¯å™¨ç›‘æ§ä»¥ç›‘æ§é›†ç¾¤ï¼ˆç«¯å£ä¸º8021ï¼‰</p></li><li><p>è¿è¡Œè§†å›¾å¾®æœåŠ¡é‡Œçš„ AccessViewService æ¥å‘¨æœŸæ€§åœ°è®¿é—® <code>http://127.0.0.1:8012/products</code> å’Œ <code>http://127.0.0.1:8013/products</code>ï¼Œä»¥æä¾›ç›‘æ§æ•°æ®</p></li><li><p>è¿è¡ŒProductServiceZuulApplicationï¼Œå¼€å¯ç½‘å…³æœåŠ¡ï¼ˆç«¯å£ä¸º8060ï¼‰</p></li></ul><h5 id="ï¼ˆ2ï¼‰æµ‹è¯•æœåŠ¡æ³¨å†Œä¸­å¿ƒ"><a href="#ï¼ˆ2ï¼‰æµ‹è¯•æœåŠ¡æ³¨å†Œä¸­å¿ƒ" class="headerlink" title="ï¼ˆ2ï¼‰æµ‹è¯•æœåŠ¡æ³¨å†Œä¸­å¿ƒ"></a>ï¼ˆ2ï¼‰æµ‹è¯•æœåŠ¡æ³¨å†Œä¸­å¿ƒ</h5><p>æ‰“å¼€é“¾æ¥<a href="http://127.0.0.1:8761/ï¼Œå³å¯æŸ¥çœ‹åˆ°æ³¨å†ŒæœåŠ¡ä¸­å¿ƒEureka">http://127.0.0.1:8761/ï¼Œå³å¯æŸ¥çœ‹åˆ°æ³¨å†ŒæœåŠ¡ä¸­å¿ƒEureka</a></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191356386.png" alt="image-20210919135602819"></p><h5 id="ï¼ˆ3ï¼‰æµ‹è¯•æ•°æ®å¾®æœåŠ¡"><a href="#ï¼ˆ3ï¼‰æµ‹è¯•æ•°æ®å¾®æœåŠ¡" class="headerlink" title="ï¼ˆ3ï¼‰æµ‹è¯•æ•°æ®å¾®æœåŠ¡"></a>ï¼ˆ3ï¼‰æµ‹è¯•æ•°æ®å¾®æœåŠ¡</h5><p>æ‰“å¼€é“¾æ¥<a href="http://127.0.0.1:8001/products">http://127.0.0.1:8001/products</a> å’Œ <a href="http://127.0.0.1:8002/products">http://127.0.0.1:8002/products</a> éƒ½å¯ä»¥è®¿é—®åˆ°è¿”å›çš„æ•°æ®</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191358031.png" alt="image-20210919135818137"></p><h5 id="ï¼ˆ4ï¼‰æµ‹è¯•è§†å›¾å¾®æœåŠ¡"><a href="#ï¼ˆ4ï¼‰æµ‹è¯•è§†å›¾å¾®æœåŠ¡" class="headerlink" title="ï¼ˆ4ï¼‰æµ‹è¯•è§†å›¾å¾®æœåŠ¡"></a>ï¼ˆ4ï¼‰æµ‹è¯•è§†å›¾å¾®æœåŠ¡</h5><p>æ‰“å¼€é“¾æ¥<a href="http://127.0.0.1:8012/products">http://127.0.0.1:8012/products</a> å’Œ <a href="http://127.0.0.1:8013/products">http://127.0.0.1:8013/products</a> å¯ä»¥è®¿é—®åˆ°è§†å›¾é¡µé¢ï¼Œå¹¶ä¸”å¯ä»¥å‘ç°è§†å›¾å¾®æœåŠ¡ä¼šéšæœºé€‰æ‹©ç«¯å£è®¿é—®æ•°æ®å¾®æœåŠ¡å®ç°è´Ÿè½½å‡è¡¡</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191401332.png" alt="image-20210919140106927"></p><h5 id="ï¼ˆ5ï¼‰æµ‹è¯•æœåŠ¡é“¾è·¯è¿½è¸ª"><a href="#ï¼ˆ5ï¼‰æµ‹è¯•æœåŠ¡é“¾è·¯è¿½è¸ª" class="headerlink" title="ï¼ˆ5ï¼‰æµ‹è¯•æœåŠ¡é“¾è·¯è¿½è¸ª"></a>ï¼ˆ5ï¼‰æµ‹è¯•æœåŠ¡é“¾è·¯è¿½è¸ª</h5><p>æ‰“å¼€é“¾æ¥<a href="http://127.0.0.1:8050/zipkin/dependency/">http://127.0.0.1:8050/zipkin/dependency/</a> å³å¯è®¿é—®åˆ°</p><p>Zipkiné“¾è·¯è·Ÿè¸ªæœåŠ¡é¡µé¢ï¼Œå³å¯çœ‹åˆ°å¾®æœåŠ¡é—´çš„è®¿é—®å…³ç³»</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191404204.png" alt="image-20210919140414948"></p><h5 id="ï¼ˆ6ï¼‰æµ‹è¯•Busæ¶ˆæ¯æ€»çº¿"><a href="#ï¼ˆ6ï¼‰æµ‹è¯•Busæ¶ˆæ¯æ€»çº¿" class="headerlink" title="ï¼ˆ6ï¼‰æµ‹è¯•Busæ¶ˆæ¯æ€»çº¿"></a>ï¼ˆ6ï¼‰æµ‹è¯•Busæ¶ˆæ¯æ€»çº¿</h5><p>å¯è®¿é—®<a href="http://127.0.0.1:8030/version/devæŸ¥çœ‹åˆ°é…ç½®æœåŠ¡å™¨çš„ä¿¡æ¯">http://127.0.0.1:8030/version/devæŸ¥çœ‹åˆ°é…ç½®æœåŠ¡å™¨çš„ä¿¡æ¯</a></p><p>è®¿é—®è§†å›¾æŸ¥çœ‹å½“å‰ç‰ˆæœ¬å·</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191407817.png" alt="image-20210919140727703"></p><p>ä¿®æ”¹é…ç½®æœåŠ¡å™¨gitä¸Šçš„ç‰ˆæœ¬å·ï¼Œè¿™é‡Œæˆ‘çš„ä»“åº“åœ°å€ä¸º<a href="https://github.com/Autovy/SpringCloudConfig/">https://github.com/Autovy/SpringCloudConfig/</a></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191411510.png" alt="image-20210919141137143"></p><p>å¯åŠ¨è§†å›¾å¾®æœåŠ¡ä¸­çš„FreshConfigUtilä½¿ç”¨ post çš„æ–¹å¼è®¿é—® <a href="http://localhost:8012/actuator/bus-refresh">http://localhost:8012/actuator/bus-refresh</a> åœ°å€ï¼Œæ›´æ–°é…ç½®ä¿¡æ¯</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191414604.png" alt="image-20210919141416336"></p><p>æœ€åå†æŸ¥çœ‹è§†å›¾ä¸Šçš„æ›´æ–°</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191415873.png" alt="image-20210919141503558"></p><p>å¯ä»¥è®¿é—®RabbitMQé¡µé¢ï¼š<a href="http://127.0.0.1:15672/ï¼ŒæŸ¥çœ‹é˜Ÿåˆ—ï¼Œè¿æ¥ï¼Œè¿˜æœ‰äº¤æ¢æœº">http://127.0.0.1:15672/ï¼ŒæŸ¥çœ‹é˜Ÿåˆ—ï¼Œè¿æ¥ï¼Œè¿˜æœ‰äº¤æ¢æœº</a></p><h5 id="ï¼ˆ7ï¼‰æµ‹è¯•Hystrixæ–­è·¯å™¨åŠå…¶ç›‘æ§"><a href="#ï¼ˆ7ï¼‰æµ‹è¯•Hystrixæ–­è·¯å™¨åŠå…¶ç›‘æ§" class="headerlink" title="ï¼ˆ7ï¼‰æµ‹è¯•Hystrixæ–­è·¯å™¨åŠå…¶ç›‘æ§"></a>ï¼ˆ7ï¼‰æµ‹è¯•Hystrixæ–­è·¯å™¨åŠå…¶ç›‘æ§</h5><p>æ‰“å¼€é“¾æ¥<a href="http://localhost:8020/hystrixå³å¯è¿›å…¥Hystrixæ–­è·¯å™¨çš„ç›‘æ§å…¥å£">http://localhost:8020/hystrixå³å¯è¿›å…¥Hystrixæ–­è·¯å™¨çš„ç›‘æ§å…¥å£</a></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191417418.png" alt="image-20210919141754328"></p><p>æ¡†å†…è¾“å…¥<a href="http://localhost:8012/actuator/hystrix.streamå³å¯å¯¹8012ç«¯å£çš„è§†å›¾å¾®æœåŠ¡è¿›è¡Œç›‘æ§">http://localhost:8012/actuator/hystrix.streamå³å¯å¯¹8012ç«¯å£çš„è§†å›¾å¾®æœåŠ¡è¿›è¡Œç›‘æ§</a></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191419460.png" alt="image-20210919141940229"></p><p>æ¡†å†…è¾“å…¥<a href="http://localhost:8021/turbine.streamå³å¯å®ç°å¯¹æ•´ä¸ªé›†ç¾¤çš„è§†å›¾å¾®æœåŠ¡è¿›è¡Œç›‘æ§">http://localhost:8021/turbine.streamå³å¯å®ç°å¯¹æ•´ä¸ªé›†ç¾¤çš„è§†å›¾å¾®æœåŠ¡è¿›è¡Œç›‘æ§</a></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191421059.png" alt="image-20210919142137829"></p><p><strong>åœæ­¢æ•°æ®å¾®æœåŠ¡</strong>ProductDataServiceApplicationé›†ç¾¤ï¼Œè§¦å‘æ–­è·¯å™¨ï¼š</p><p>è®¿é—®è§†å›¾å¯å¾—</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191429890.png" alt="image-20210919142903819"></p><p>è®¿é—®å•ä¸ªå¾®æœåŠ¡ç›‘æ§é¡µé¢å¯å¾—</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191432572.png" alt="image-20210919143250565"></p><p>è®¿é—®èšåˆé›†ç¾¤å¾®æœåŠ¡ç›‘æ§é¡µé¢å¯å¾—</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191431299.png" alt="image-20210919143120242"></p><h5 id="ï¼ˆ8ï¼‰ç½‘å…³æµ‹è¯•"><a href="#ï¼ˆ8ï¼‰ç½‘å…³æµ‹è¯•" class="headerlink" title="ï¼ˆ8ï¼‰ç½‘å…³æµ‹è¯•"></a>ï¼ˆ8ï¼‰ç½‘å…³æµ‹è¯•</h5><p>å¯ä»¥åœ¨zuulçš„é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹å¾®æœåŠ¡çš„è®¿é—®è·¯ç”±ï¼Œæˆ‘ç»‘å®šçš„è·¯ç”±å¦‚ä¸‹ï¼š</p><p><a href="http://localhost:8060/api-data/products">http://localhost:8060/api-data/products</a> ï¼šè®¿é—®æ•°æ®å¾®æœåŠ¡é›†ç¾¤</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191358031.png" alt="image-20210919135818137"></p><p><a href="http://localhost:8060/api-view/products">http://localhost:8060/api-view/products</a> ï¼šè®¿é—®è§†å›¾å¾®æœåŠ¡é›†ç¾¤</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109191426987.png" alt="image-20210919142625877"></p><p>å¯ä»¥å‘ç°å…¶è®¿é—®é›†ç¾¤çš„ç«¯å£ä¹Ÿæ˜¯è´Ÿè½½å‡è¡¡çš„</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109140841902.png&quot; alt=&quot;pngkey.com-java-logo-png-2232144&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="Java" scheme="https://autovy.github.io/categories/Java/"/>
    
    
      <category term="å…¥é—¨æ•™ç¨‹" scheme="https://autovy.github.io/tags/%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/"/>
    
      <category term="Java" scheme="https://autovy.github.io/tags/Java/"/>
    
      <category term="æ¡†æ¶å­¦ä¹ " scheme="https://autovy.github.io/tags/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="åç«¯" scheme="https://autovy.github.io/tags/%E5%90%8E%E7%AB%AF/"/>
    
      <category term="SpringBoot" scheme="https://autovy.github.io/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>Go|Goè¯­è¨€ä¿®ç‚¼æ‰‹å†Œ</title>
    <link href="https://autovy.github.io/2021/09/08/Go/Go%E8%AF%AD%E8%A8%80%E4%BF%AE%E7%82%BC%E6%89%8B%E5%86%8C/"/>
    <id>https://autovy.github.io/2021/09/08/Go/Go%E8%AF%AD%E8%A8%80%E4%BF%AE%E7%82%BC%E6%89%8B%E5%86%8C/</id>
    <published>2021-09-08T06:30:00.000Z</published>
    <updated>2021-09-08T12:59:38.337Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109070837021.jpeg" alt="img"></p><p>Goçš„å‰ç¥¥ç‰©Gopherä¹Ÿå¤ªå¯çˆ±äº†å­ï¼ï¼ï¼</p><span id="more"></span><p>å‚è€ƒæ–‡ç« ï¼š</p><p>Goè¯­è¨€æ ‡å‡†åº“ï¼š<a href="https://studygolang.com/pkgdoc">https://studygolang.com/pkgdoc</a></p><p>Goæ¡ˆä¾‹ä»£ç ï¼š<a href="https://gobyexample-cn.github.io/">https://gobyexample-cn.github.io/</a></p><p>Goè¯­è¨€å­¦ä¹ æ‰‹å†Œï¼š<a href="https://www.topgoer.com/">https://www.topgoer.com/</a></p><h3 id="HelloGo"><a href="#HelloGo" class="headerlink" title="HelloGo"></a>HelloGo</h3><h4 id="1-Golangçš„ä¸»è¦ç‰¹å¾"><a href="#1-Golangçš„ä¸»è¦ç‰¹å¾" class="headerlink" title="1.Golangçš„ä¸»è¦ç‰¹å¾"></a>1.Golangçš„ä¸»è¦ç‰¹å¾</h4><ul><li><p>è‡ªåŠ¨ç«‹å³å›æ”¶</p></li><li><p>æ›´ä¸°å¯Œçš„å†…ç½®ç±»å‹</p></li><li><p>å‡½æ•°å¤šè¿”å›å€¼</p></li><li><p>é”™è¯¯å¤„ç†</p></li><li><p>åŒ¿åå‡½æ•°å’Œé—­åŒ…</p></li><li><p>ç±»å‹å’Œæ¥å£</p></li><li><p>å¹¶å‘ç¼–ç¨‹</p></li><li><p>åå°„</p></li><li><p>è¯­è¨€äº¤äº’æ€§</p></li></ul><h4 id="2-ç¬¬ä¸€ä¸ªGoç¨‹åº"><a href="#2-ç¬¬ä¸€ä¸ªGoç¨‹åº" class="headerlink" title="2.ç¬¬ä¸€ä¸ªGoç¨‹åº"></a>2.ç¬¬ä¸€ä¸ªGoç¨‹åº</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¦å¯¼å…¥mainåŒ…æ‰èƒ½è¿è¡Œmainå‡½æ•°</span></span><br><span class="line"><span class="comment">// è€Œä¸”ä¸€ä¸ªé¡¹ç›®ä¸­åªèƒ½æœ‰ä¸€ä¸ªæ–‡ä»¶å¯¼å…¥mainåŒ…ä½¿ç”¨mainå‡½æ•°ï¼ˆç±»ä¼¼äºCè¯­è¨€ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Hello</span><span class="params">()</span></span>  &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;HelloGo&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="3-Goçš„å€¼è¿ç®—"><a href="#3-Goçš„å€¼è¿ç®—" class="headerlink" title="3.Goçš„å€¼è¿ç®—"></a>3.Goçš„å€¼è¿ç®—</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Value æ•°æ®å€¼çš„ä¸€äº›è¿ç®—</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Value</span><span class="params">()</span></span>  &#123;</span><br><span class="line"></span><br><span class="line">fmt.Println(<span class="string">&quot;go&quot;</span>+<span class="string">&quot;lang&quot;</span>)</span><br><span class="line">fmt.Println(<span class="string">&quot;go&quot;</span>,<span class="string">&quot;lang&quot;</span>)</span><br><span class="line">fmt.Println(<span class="string">&quot;1+1=&quot;</span>, <span class="number">1</span>+<span class="number">1</span>)</span><br><span class="line">fmt.Println(<span class="string">&quot;7.0/3.0&quot;</span>)</span><br><span class="line"></span><br><span class="line">fmt.Println(<span class="literal">true</span> &amp;&amp; <span class="literal">false</span>)</span><br><span class="line">fmt.Println(<span class="literal">true</span> || <span class="literal">false</span>)</span><br><span class="line">fmt.Println(!<span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109070857530.png" alt="image-20210907085705239"></p><h3 id="å˜é‡ä¸å¸¸é‡"><a href="#å˜é‡ä¸å¸¸é‡" class="headerlink" title="å˜é‡ä¸å¸¸é‡"></a>å˜é‡ä¸å¸¸é‡</h3><h4 id="1-å˜é‡"><a href="#1-å˜é‡" class="headerlink" title="1.å˜é‡"></a>1.å˜é‡</h4><h5 id="ï¼ˆ1ï¼‰æ ‡å‡†å£°æ˜"><a href="#ï¼ˆ1ï¼‰æ ‡å‡†å£°æ˜" class="headerlink" title="ï¼ˆ1ï¼‰æ ‡å‡†å£°æ˜"></a>ï¼ˆ1ï¼‰æ ‡å‡†å£°æ˜</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Goè¯­è¨€ç”¨varå£°æ˜å˜é‡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// goæ¨æ–­å˜é‡ç±»å‹</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="string">&quot;TestString&quot;</span></span><br><span class="line">fmt.Println(a)</span><br><span class="line"></span><br><span class="line"><span class="comment">//  å˜é‡ååå£°æ˜å˜é‡ç±»å‹</span></span><br><span class="line"><span class="keyword">var</span> b, c <span class="keyword">int</span> = <span class="number">1</span>, <span class="number">2</span></span><br><span class="line">fmt.Println(b, c)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> d = <span class="literal">true</span></span><br><span class="line">fmt.Println(d)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜å˜é‡èµ‹ç»™é»˜è®¤å€¼</span></span><br><span class="line"><span class="keyword">var</span> e <span class="keyword">int</span></span><br><span class="line">fmt.Println(e)</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ2ï¼‰æ‰¹é‡å£°æ˜"><a href="#ï¼ˆ2ï¼‰æ‰¹é‡å£°æ˜" class="headerlink" title="ï¼ˆ2ï¼‰æ‰¹é‡å£°æ˜"></a>ï¼ˆ2ï¼‰æ‰¹é‡å£°æ˜</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> (</span><br><span class="line">    a <span class="keyword">string</span></span><br><span class="line">    b <span class="keyword">int</span></span><br><span class="line">    c <span class="keyword">bool</span></span><br><span class="line">    d <span class="keyword">float32</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ3ï¼‰çŸ­å˜é‡å£°æ˜"><a href="#ï¼ˆ3ï¼‰çŸ­å˜é‡å£°æ˜" class="headerlink" title="ï¼ˆ3ï¼‰çŸ­å˜é‡å£°æ˜"></a>ï¼ˆ3ï¼‰çŸ­å˜é‡å£°æ˜</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŒ–ç®€å†™æ³•å£°æ˜å­—ç¬¦ä¸²å˜é‡fï¼ˆç›¸å½“äº var f string = &quot;apple&quot;ï¼‰</span></span><br><span class="line">f := <span class="string">&quot;apple&quot;</span></span><br><span class="line">fmt.Println(f)</span><br></pre></td></tr></table></figure><h4 id="2-å¸¸é‡"><a href="#2-å¸¸é‡" class="headerlink" title="2.å¸¸é‡"></a>2.å¸¸é‡</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å£°æ˜æ’å®šå€¼</span></span><br><span class="line"><span class="keyword">const</span> s <span class="keyword">string</span> = <span class="string">&quot;constant&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Constants</span><span class="params">()</span></span>  &#123;</span><br><span class="line">fmt.Println(s)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> n  = <span class="number">500000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> d = <span class="number">3e20</span> / n</span><br><span class="line"></span><br><span class="line">fmt.Println(d)</span><br><span class="line"><span class="comment">// è½¬æ¢ç±»å‹</span></span><br><span class="line">fmt.Println(<span class="keyword">int64</span>(d))</span><br><span class="line"><span class="comment">// æ•°å­¦è¿ç®—</span></span><br><span class="line">fmt.Println(math.Sin(n))</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¸¸é‡çš„å£°æ˜åªæ˜¯å°†å˜é‡å£°æ˜ä¸­çš„<code>var</code>æ›´æ”¹ä¸º<code>const</code></p><h3 id="åŸºæœ¬æ•°æ®ç»“æ„"><a href="#åŸºæœ¬æ•°æ®ç»“æ„" class="headerlink" title="åŸºæœ¬æ•°æ®ç»“æ„"></a>åŸºæœ¬æ•°æ®ç»“æ„</h3><h4 id="1-æ•°ç»„Array"><a href="#1-æ•°ç»„Array" class="headerlink" title="1.æ•°ç»„Array"></a>1.æ•°ç»„Array</h4><h5 id="ï¼ˆ1ï¼‰å£°æ˜é»˜è®¤æ•°ç»„"><a href="#ï¼ˆ1ï¼‰å£°æ˜é»˜è®¤æ•°ç»„" class="headerlink" title="ï¼ˆ1ï¼‰å£°æ˜é»˜è®¤æ•°ç»„"></a>ï¼ˆ1ï¼‰å£°æ˜é»˜è®¤æ•°ç»„</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å£°æ˜é»˜è®¤æ•°ç»„</span></span><br><span class="line"><span class="keyword">var</span> a [<span class="number">5</span>]<span class="keyword">int</span></span><br><span class="line">fmt.Println(a)</span><br><span class="line"><span class="comment">// æ•°ç»„å…ƒç´ èµ‹å€¼</span></span><br><span class="line">a[<span class="number">4</span>] = <span class="number">100</span></span><br><span class="line">fmt.Println(a)</span><br><span class="line">fmt.Println(a[<span class="number">4</span>])</span><br><span class="line">fmt.Println(<span class="built_in">len</span>(a))</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ2ï¼‰å£°æ˜å¹¶åˆå§‹åŒ–æ•°ç»„"><a href="#ï¼ˆ2ï¼‰å£°æ˜å¹¶åˆå§‹åŒ–æ•°ç»„" class="headerlink" title="ï¼ˆ2ï¼‰å£°æ˜å¹¶åˆå§‹åŒ–æ•°ç»„"></a>ï¼ˆ2ï¼‰å£°æ˜å¹¶åˆå§‹åŒ–æ•°ç»„</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å£°æ˜å¹¶åˆå§‹åŒ–æ•°ç»„</span></span><br><span class="line">b:= [<span class="number">5</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line"><span class="comment">// ...å³è®©ç¨‹åºè‡ªåŠ¨è¯»å–æ•°ç»„å¤§å°</span></span><br><span class="line">c:= [...]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>&#125;</span><br><span class="line">fmt.Println(b, c)</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ3ï¼‰å£°æ˜äºŒç»´æ•°ç»„"><a href="#ï¼ˆ3ï¼‰å£°æ˜äºŒç»´æ•°ç»„" class="headerlink" title="ï¼ˆ3ï¼‰å£°æ˜äºŒç»´æ•°ç»„"></a>ï¼ˆ3ï¼‰å£°æ˜äºŒç»´æ•°ç»„</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å£°æ˜äºŒç»´æ•°ç»„</span></span><br><span class="line"><span class="keyword">var</span> twoD [<span class="number">2</span>][<span class="number">3</span>]<span class="keyword">int</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">2</span>; i++&#123;</span><br><span class="line">    <span class="keyword">for</span> j:=<span class="number">0</span>; j &lt; <span class="number">3</span>; j++ &#123;</span><br><span class="line">    twoD[i][j] = i + j</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fmt.Println(twoD)</span><br></pre></td></tr></table></figure><h4 id="2-åˆ‡ç‰‡Slice"><a href="#2-åˆ‡ç‰‡Slice" class="headerlink" title="2.åˆ‡ç‰‡Slice"></a>2.åˆ‡ç‰‡Slice</h4><h5 id="ï¼ˆ1ï¼‰åˆ‡ç‰‡ç®€ä»‹"><a href="#ï¼ˆ1ï¼‰åˆ‡ç‰‡ç®€ä»‹" class="headerlink" title="ï¼ˆ1ï¼‰åˆ‡ç‰‡ç®€ä»‹"></a>ï¼ˆ1ï¼‰åˆ‡ç‰‡ç®€ä»‹</h5><ul><li>åˆ‡ç‰‡æ˜¯ Go ä¸­çš„ä¸€ç§å…³é”®æ•°æ®ç±»å‹ï¼ˆå¼•ç”¨ç±»å‹ï¼‰ï¼Œå®ƒä¸ºåºåˆ—æä¾›äº†æ¯”æ•°ç»„æ›´å¼ºå¤§çš„æ¥å£</li><li>åˆ‡ç‰‡çš„é•¿åº¦å¯ä»¥æ”¹å˜ï¼Œå› æ­¤ï¼Œåˆ‡ç‰‡æ˜¯ä¸€ä¸ªå¯å˜çš„æ•°ç»„</li><li>åˆ‡ç‰‡éå†æ–¹å¼å’Œæ•°ç»„ä¸€æ ·ï¼Œå¯ä»¥ç”¨len()æ±‚é•¿åº¦ã€‚è¡¨ç¤ºå¯ç”¨å…ƒç´ æ•°é‡ï¼Œè¯»å†™æ“ä½œä¸èƒ½è¶…è¿‡è¯¥é™åˆ¶</li></ul><h5 id="ï¼ˆ2ï¼‰åˆ‡ç‰‡ä¸€èˆ¬å£°æ˜"><a href="#ï¼ˆ2ï¼‰åˆ‡ç‰‡ä¸€èˆ¬å£°æ˜" class="headerlink" title="ï¼ˆ2ï¼‰åˆ‡ç‰‡ä¸€èˆ¬å£°æ˜"></a>ï¼ˆ2ï¼‰åˆ‡ç‰‡ä¸€èˆ¬å£°æ˜</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å£°æ˜åˆ‡ç‰‡ï¼ˆè®©æ•°ç»„é•¿åº¦ä¸ºç©ºå³å½¢æˆåˆ‡ç‰‡ï¼‰</span></span><br><span class="line"><span class="keyword">var</span> s1 []<span class="keyword">int</span></span><br><span class="line">s2 := []<span class="keyword">int</span>&#123;<span class="number">2</span>,<span class="number">4</span>,<span class="number">5</span>&#125;</span><br><span class="line">fmt.Println(s1, s2)</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ3ï¼‰makeåˆ›å»º"><a href="#ï¼ˆ3ï¼‰makeåˆ›å»º" class="headerlink" title="ï¼ˆ3ï¼‰makeåˆ›å»º"></a>ï¼ˆ3ï¼‰makeåˆ›å»º</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å£°æ˜é0é•¿åº¦çš„ç©ºç‰‡ï¼Œéœ€è¦ç”¨å†…ç½®çš„makeå‡½æ•°</span></span><br><span class="line"><span class="comment">// make([]type, len, cap):lenï¼ˆé•¿åº¦ï¼‰ï¼Œcapï¼ˆå®¹é‡å³ä¸ºåˆ‡ç‰‡æœ€é•¿é•¿åº¦ï¼Œå¯é€‰ï¼‰</span></span><br><span class="line"><span class="comment">// capå¯ä»¥æ±‚å‡ºsliceæœ€å¤§æ‰©å¼ å®¹é‡ï¼Œä¸èƒ½è¶…å‡ºæ•°ç»„é™åˆ¶ã€‚len(slice) &gt;= len(array)ï¼Œå…¶ä¸­arrayæ˜¯sliceå¼•ç”¨çš„æ•°ç»„</span></span><br><span class="line">s3 := <span class="built_in">make</span>([]<span class="keyword">string</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line">fmt.Println(s3)</span><br><span class="line">fmt.Println(<span class="built_in">len</span>(s3),<span class="built_in">cap</span>(s3))</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ4ï¼‰åˆ‡ç‰‡èµ‹å€¼ä¸è¿½åŠ "><a href="#ï¼ˆ4ï¼‰åˆ‡ç‰‡èµ‹å€¼ä¸è¿½åŠ " class="headerlink" title="ï¼ˆ4ï¼‰åˆ‡ç‰‡èµ‹å€¼ä¸è¿½åŠ "></a>ï¼ˆ4ï¼‰åˆ‡ç‰‡èµ‹å€¼ä¸è¿½åŠ </h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ‡ç‰‡èµ‹å€¼ï¼ˆè™½ç„¶åˆ‡ç‰‡å¯ä»¥è‡ªåŠ¨æ‰©å®¹ï¼Œä½†æ˜¯å–ç´¢å¼•æ—¶ä¸ä¼šæ‰©å®¹ï¼‰</span></span><br><span class="line">s3[<span class="number">0</span>] = <span class="string">&quot;a&quot;</span></span><br><span class="line">s3[<span class="number">4</span>] = <span class="string">&quot;b&quot;</span></span><br><span class="line">fmt.Println(s3)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘åˆ‡ç‰‡ä¸­è¿½åŠ å…ƒç´ ï¼ˆå¿…é¡»æ¥å—è¿”å›å€¼ï¼Œåœ¨è¿½åŠ æ—¶å¯èƒ½ä½¿åˆ‡ç‰‡çš„å®¹é‡å¢å¤§ï¼‰</span></span><br><span class="line">s3 = <span class="built_in">append</span>(s3, <span class="string">&quot;d&quot;</span>)</span><br><span class="line">s3 = <span class="built_in">append</span>(s3, <span class="string">&quot;e&quot;</span>,<span class="string">&quot;f&quot;</span>)</span><br><span class="line"><span class="comment">// åˆ‡ç‰‡å¯ä»¥è¿½åŠ å…¶ä»–åˆ‡ç‰‡æˆ–æ•°ç»„ä½¿ç”¨...è§£å‹ç¼©</span></span><br><span class="line">s3 = <span class="built_in">append</span>(s3, s3...)</span><br><span class="line">fmt.Println(s3)</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ5ï¼‰åˆ‡ç‰‡å¤åˆ¶"><a href="#ï¼ˆ5ï¼‰åˆ‡ç‰‡å¤åˆ¶" class="headerlink" title="ï¼ˆ5ï¼‰åˆ‡ç‰‡å¤åˆ¶"></a>ï¼ˆ5ï¼‰åˆ‡ç‰‡å¤åˆ¶</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ‡ç‰‡å¤åˆ¶</span></span><br><span class="line">c := <span class="built_in">make</span>([]<span class="keyword">string</span>, <span class="built_in">len</span>(s3))</span><br><span class="line"><span class="built_in">copy</span>(c, s3)</span><br><span class="line">fmt.Println(c)</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ6ï¼‰ç”±æ•°ç»„æˆ–åˆ‡ç‰‡è·å¾—åˆ‡ç‰‡"><a href="#ï¼ˆ6ï¼‰ç”±æ•°ç»„æˆ–åˆ‡ç‰‡è·å¾—åˆ‡ç‰‡" class="headerlink" title="ï¼ˆ6ï¼‰ç”±æ•°ç»„æˆ–åˆ‡ç‰‡è·å¾—åˆ‡ç‰‡"></a>ï¼ˆ6ï¼‰ç”±æ•°ç»„æˆ–åˆ‡ç‰‡è·å¾—åˆ‡ç‰‡</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”±æ•°ç»„æˆ–åˆ‡ç‰‡è·å¾—åˆ‡ç‰‡</span></span><br><span class="line"><span class="comment">// è·å¾—s3çš„5ï¼Œ6å…ƒç´ </span></span><br><span class="line">l := s3[<span class="number">5</span>:<span class="number">7</span>]</span><br><span class="line">fmt.Println(l)</span><br><span class="line"><span class="comment">// å»æ‰åˆ‡ç‰‡æœ€åä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">l = s3[:<span class="built_in">len</span>(s3)<span class="number">-1</span>]</span><br><span class="line">fmt.Println(l)</span><br></pre></td></tr></table></figure><h4 id="3-Map"><a href="#3-Map" class="headerlink" title="3.Map"></a>3.Map</h4><h5 id="ï¼ˆ1ï¼‰mapçš„åˆ›å»º"><a href="#ï¼ˆ1ï¼‰mapçš„åˆ›å»º" class="headerlink" title="ï¼ˆ1ï¼‰mapçš„åˆ›å»º"></a>ï¼ˆ1ï¼‰mapçš„åˆ›å»º</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºç©ºåœ°å›¾ï¼ˆé”®ç±»å‹ä¸ºstringï¼Œå€¼ç±»å‹ä¸ºintï¼‰</span></span><br><span class="line">m := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</span><br><span class="line">m1 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">string</span>)</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ2ï¼‰mapåˆå§‹åŒ–"><a href="#ï¼ˆ2ï¼‰mapåˆå§‹åŒ–" class="headerlink" title="ï¼ˆ2ï¼‰mapåˆå§‹åŒ–"></a>ï¼ˆ2ï¼‰mapåˆå§‹åŒ–</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mapåˆå§‹åŒ–</span></span><br><span class="line">n := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>&#123;<span class="string">&quot;foo&quot;</span>:<span class="string">&quot;str1&quot;</span>, <span class="string">&quot;bar&quot;</span>:<span class="string">&quot;str2&quot;</span>&#125;</span><br><span class="line">fmt.Println(n)</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ3ï¼‰mapèµ‹å€¼ä¸å–å€¼"><a href="#ï¼ˆ3ï¼‰mapèµ‹å€¼ä¸å–å€¼" class="headerlink" title="ï¼ˆ3ï¼‰mapèµ‹å€¼ä¸å–å€¼"></a>ï¼ˆ3ï¼‰mapèµ‹å€¼ä¸å–å€¼</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mapé”®å€¼å¯¹èµ‹å€¼</span></span><br><span class="line">m[<span class="string">&quot;k1&quot;</span>] = <span class="number">7</span></span><br><span class="line">m[<span class="string">&quot;k2&quot;</span>] = <span class="number">10</span></span><br><span class="line"><span class="comment">// mapçš„é”®ä¸ºæ•´å‹æ—¶åŒºåˆ«äºæ•°ç»„</span></span><br><span class="line">m1[<span class="number">1</span>] = <span class="string">&quot;test1&quot;</span></span><br><span class="line">m1[<span class="number">10</span>] = <span class="string">&quot;test2&quot;</span></span><br><span class="line">fmt.Println(m)</span><br><span class="line">fmt.Println(m1)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å–å€¼</span></span><br><span class="line">v1 := m[<span class="string">&quot;k1&quot;</span>]</span><br><span class="line">fmt.Println(v1)</span><br></pre></td></tr></table></figure><p>ä¸å­˜åœ¨å–å€¼çš„è¿”å›ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸å­˜åœ¨çš„é”®å€¼é»˜è®¤è¿”å›ä¸º0ï¼ŒåŠ ä¸Š_,è¿”å›fasleï¼ˆä¸‹åˆ’çº¿ç”¨æ¥å¿½ç•¥ç»“æœï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºé‚£ä¸ªä½ç½®æœ¬åº”èµ‹ç»™æŸä¸ªå€¼ï¼Œä½†æ˜¯å’±ä»¬ä¸éœ€è¦è¿™ä¸ªå€¼ï¼‰</span></span><br><span class="line">prs := m[<span class="string">&quot;k2&quot;</span>]</span><br><span class="line">_,prs2 := m[<span class="string">&quot;k2&quot;</span>]</span><br><span class="line">fmt.Println(prs, prs2)</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109070940900.png" alt="image-20210907094003976"></p><h5 id="ï¼ˆ4ï¼‰mapåˆ é™¤æ“ä½œ"><a href="#ï¼ˆ4ï¼‰mapåˆ é™¤æ“ä½œ" class="headerlink" title="ï¼ˆ4ï¼‰mapåˆ é™¤æ“ä½œ"></a>ï¼ˆ4ï¼‰mapåˆ é™¤æ“ä½œ</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ é™¤ï¼ˆmapé™å®šï¼Œä¸å­˜åœ¨çš„é”®è‡ªåŠ¨ç•¥è¿‡ä¸æŠ¥é”™ï¼‰</span></span><br><span class="line"><span class="built_in">delete</span>(m, <span class="string">&quot;k2&quot;</span>)</span><br><span class="line">fmt.Println(m)</span><br></pre></td></tr></table></figure><h3 id="åŸºæœ¬æµç¨‹æ§åˆ¶"><a href="#åŸºæœ¬æµç¨‹æ§åˆ¶" class="headerlink" title="åŸºæœ¬æµç¨‹æ§åˆ¶"></a>åŸºæœ¬æµç¨‹æ§åˆ¶</h3><h4 id="1-ifè¯­å¥"><a href="#1-ifè¯­å¥" class="headerlink" title="1.ifè¯­å¥"></a>1.ifè¯­å¥</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">If</span><span class="params">(str <span class="keyword">string</span>)</span></span>  &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ifè¯­å¥</span></span><br><span class="line"><span class="keyword">if</span> str==<span class="string">&quot;IfA&quot;</span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;aæ¡ä»¶&quot;</span>)</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;å…¶ä»–æ¡ä»¶&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜å¯ä»¥å…ˆäºæ¡ä»¶</span></span><br><span class="line"><span class="keyword">if</span> str = <span class="string">&quot;IfA&quot;</span>; str==<span class="string">&quot;IfA&quot;</span>&#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;aæ¡ä»¶æ»¡è¶³&quot;</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-switchè¯­å¥"><a href="#2-switchè¯­å¥" class="headerlink" title="2.switchè¯­å¥"></a>2.switchè¯­å¥</h4><h5 id="ï¼ˆ1ï¼‰ä½¿ç”¨å˜é‡ä½œä¸ºåˆ¤å®šæ¡ä»¶"><a href="#ï¼ˆ1ï¼‰ä½¿ç”¨å˜é‡ä½œä¸ºåˆ¤å®šæ¡ä»¶" class="headerlink" title="ï¼ˆ1ï¼‰ä½¿ç”¨å˜é‡ä½œä¸ºåˆ¤å®šæ¡ä»¶"></a>ï¼ˆ1ï¼‰ä½¿ç”¨å˜é‡ä½œä¸ºåˆ¤å®šæ¡ä»¶</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// switchåŸºæœ¬æ¡ˆä¾‹,ä½¿ç”¨å˜é‡ä½œä¸ºåˆ¤å®šæ¡ä»¶</span></span><br><span class="line">i := <span class="number">2</span></span><br><span class="line">fmt.Println(<span class="string">&quot;write&quot;</span>, i, <span class="string">&quot;as&quot;</span>)</span><br><span class="line">    <span class="keyword">switch</span> i &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">    fmt.Println(<span class="string">&quot;one&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">    fmt.Println(<span class="string">&quot;two&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">    fmt.Println(<span class="string">&quot;three&quot;</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ2ï¼‰ä½¿ç”¨å‡½æ•°è¿”å›çš„å˜é‡å€¼ä½œä¸ºexpression"><a href="#ï¼ˆ2ï¼‰ä½¿ç”¨å‡½æ•°è¿”å›çš„å˜é‡å€¼ä½œä¸ºexpression" class="headerlink" title="ï¼ˆ2ï¼‰ä½¿ç”¨å‡½æ•°è¿”å›çš„å˜é‡å€¼ä½œä¸ºexpression"></a>ï¼ˆ2ï¼‰ä½¿ç”¨å‡½æ•°è¿”å›çš„å˜é‡å€¼ä½œä¸ºexpression</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨å‡½æ•°è¿”å›çš„å˜é‡å€¼ä½œä¸ºexpression</span></span><br><span class="line"><span class="comment">// Weekdayè¿”å›å‘¨æ•°ï¼ˆweekdayç±»å‹ï¼‰</span></span><br><span class="line"><span class="keyword">switch</span> time.Now().Weekday()&#123;</span><br><span class="line">    <span class="keyword">case</span> time.Saturday, time.Sunday:</span><br><span class="line">    fmt.Println(<span class="string">&quot;weekend&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">    fmt.Println(<span class="string">&quot;weekday&quot;</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ3ï¼‰ä½¿ç”¨å‡½æ•°è¿”å›å€¼çš„å˜é‡ä½œä¸ºconstant-expression"><a href="#ï¼ˆ3ï¼‰ä½¿ç”¨å‡½æ•°è¿”å›å€¼çš„å˜é‡ä½œä¸ºconstant-expression" class="headerlink" title="ï¼ˆ3ï¼‰ä½¿ç”¨å‡½æ•°è¿”å›å€¼çš„å˜é‡ä½œä¸ºconstant-expression"></a>ï¼ˆ3ï¼‰ä½¿ç”¨å‡½æ•°è¿”å›å€¼çš„å˜é‡ä½œä¸ºconstant-expression</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨å‡½æ•°è¿”å›å€¼çš„å˜é‡ä½œä¸ºconstant-expression</span></span><br><span class="line">t := time.Now()</span><br><span class="line"><span class="keyword">switch</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">case</span> t.Hour() &gt;= <span class="number">6</span> &amp;&amp; t.Hour() &lt; <span class="number">8</span>:</span><br><span class="line">    fmt.Println(<span class="string">&quot;æ¸…æ™¨&quot;</span>)</span><br><span class="line">    <span class="keyword">case</span> t.Hour() &gt;= <span class="number">8</span> &amp;&amp; t.Hour() &lt; <span class="number">12</span>:</span><br><span class="line">    fmt.Println(<span class="string">&quot;æ—©ä¸Š&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">    fmt.Println(<span class="string">&quot;å…¶ä»–æ—¶é—´&quot;</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-forè¯­å¥"><a href="#3-forè¯­å¥" class="headerlink" title="3.forè¯­å¥"></a>3.forè¯­å¥</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">For</span><span class="params">()</span></span>  &#123;</span><br><span class="line"></span><br><span class="line">i := <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åªè¦iå°äºç­‰äº3å°±ä¸€ç›´æ‰§è¡Œå¾ªç¯</span></span><br><span class="line"><span class="keyword">for</span> i &lt;= <span class="number">3</span>&#123;</span><br><span class="line">fmt.Println(i)</span><br><span class="line">i = i + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»å…¸forè¯­å¥åˆå§‹/æ¡ä»¶/åå¾ªç¯</span></span><br><span class="line"><span class="keyword">for</span> j := <span class="number">7</span>; j &lt;= <span class="number">9</span>; j++&#123;</span><br><span class="line">fmt.Println(j)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ— æ¡ä»¶forå¾ªç¯ç­‰å¾…breakç»ˆæ­¢</span></span><br><span class="line"><span class="keyword">for</span>&#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;loop&quot;</span>)</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> n:= <span class="number">0</span>; n &lt;= <span class="number">5</span>; n++&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤æ•°è¿›å…¥ä¸‹ä¸ªå¾ªç¯</span></span><br><span class="line"><span class="keyword">if</span> n%<span class="number">2</span> == <span class="number">0</span> &#123;</span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(n)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-Rangeè¯­å¥"><a href="#4-Rangeè¯­å¥" class="headerlink" title="4.Rangeè¯­å¥"></a>4.Rangeè¯­å¥</h4><h5 id="ï¼ˆ1ï¼‰Rangeç®€ä»‹"><a href="#ï¼ˆ1ï¼‰Rangeç®€ä»‹" class="headerlink" title="ï¼ˆ1ï¼‰Rangeç®€ä»‹"></a>ï¼ˆ1ï¼‰Rangeç®€ä»‹</h5><ul><li>rangeç±»ä¼¼è¿­ä»£å™¨æ“ä½œï¼Œè¿”å› (ç´¢å¼•, å€¼) æˆ– (é”®, å€¼)</li><li>range æ ¼å¼å¯ä»¥å¯¹ sliceã€mapã€æ•°ç»„ã€å­—ç¬¦ä¸²ç­‰è¿›è¡Œè¿­ä»£å¾ªç¯</li></ul><h5 id="ï¼ˆ2ï¼‰æ•°ç»„éå†"><a href="#ï¼ˆ2ï¼‰æ•°ç»„éå†" class="headerlink" title="ï¼ˆ2ï¼‰æ•°ç»„éå†"></a>ï¼ˆ2ï¼‰æ•°ç»„éå†</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">nums := []<span class="keyword">int</span>&#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">sum := <span class="number">0</span></span><br><span class="line"><span class="comment">// éå†æ•°ç»„</span></span><br><span class="line"><span class="comment">//rangeä¼šæä¾›ç´¢å¼•å’Œå€¼ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸éœ€è¦ç´¢å¼•æ‰€ä»¥ç”¨å ä½ç¬¦ä»£æ›¿</span></span><br><span class="line"><span class="keyword">for</span> _, num := <span class="keyword">range</span> nums&#123;</span><br><span class="line">sum += num</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(sum)</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ3ï¼‰mapéå†"><a href="#ï¼ˆ3ï¼‰mapéå†" class="headerlink" title="ï¼ˆ3ï¼‰mapéå†"></a>ï¼ˆ3ï¼‰mapéå†</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// éå†map</span></span><br><span class="line">kvs := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>&#123;<span class="string">&quot;a&quot;</span>:<span class="string">&quot;Ava&quot;</span>, <span class="string">&quot;b&quot;</span>:<span class="string">&quot;Bella&quot;</span>, <span class="string">&quot;c&quot;</span>:<span class="string">&quot;Carol&quot;</span>, <span class="string">&quot;d&quot;</span>:<span class="string">&quot;Diana&quot;</span>, <span class="string">&quot;e&quot;</span>:<span class="string">&quot;Eileen&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> k, v := <span class="keyword">range</span> kvs&#123;</span><br><span class="line">fmt.Printf(<span class="string">&quot;%s : %s\n&quot;</span>, k, v)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// éå†é”®</span></span><br><span class="line"><span class="keyword">for</span> k := <span class="keyword">range</span> kvs&#123;</span><br><span class="line">fmt.Println(k)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// éå†å€¼</span></span><br><span class="line"><span class="keyword">for</span> _,v := <span class="keyword">range</span> kvs&#123;</span><br><span class="line">fmt.Println(v)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h3><h4 id="1-å¤šå‚æ•°"><a href="#1-å¤šå‚æ•°" class="headerlink" title="1.å¤šå‚æ•°"></a>1.å¤šå‚æ•°</h4><h5 id="ï¼ˆ1ï¼‰ä¸¤å‚æ•°"><a href="#ï¼ˆ1ï¼‰ä¸¤å‚æ•°" class="headerlink" title="ï¼ˆ1ï¼‰ä¸¤å‚æ•°"></a>ï¼ˆ1ï¼‰ä¸¤å‚æ•°</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡½æ•°æ¥å—ä¸¤ä¸ªintå‚æ•°ï¼Œè¿”å›å€¼ä¸ºint</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">plus</span><span class="params">(a <span class="keyword">int</span>, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ2ï¼‰åŒç±»å‹å¤šå‚æ•°"><a href="#ï¼ˆ2ï¼‰åŒç±»å‹å¤šå‚æ•°" class="headerlink" title="ï¼ˆ2ï¼‰åŒç±»å‹å¤šå‚æ•°"></a>ï¼ˆ2ï¼‰åŒç±»å‹å¤šå‚æ•°</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¥å—å¤šä¸ªåŒç±»å‹å‚æ•°æ—¶</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">plusPlus</span><span class="params">(a, b, c <span class="keyword">int</span>)</span> <span class="title">string</span></span>&#123;</span><br><span class="line"><span class="comment">// ä½¿ç”¨strconvåŒ…å°†æ•´å‹è½¬æ¢æˆå­—ç¬¦ä¸²ï¼ˆå¼ºåˆ¶ç±»å‹è½¬æ¢ä¼šå‡ºç°ä¹±ç ï¼‰</span></span><br><span class="line">a1 := strconv.Itoa(a)</span><br><span class="line">b1 := strconv.Itoa(b)</span><br><span class="line">c1 := strconv.Itoa(c)</span><br><span class="line"><span class="keyword">return</span> a1 + b1 + c1</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ3ï¼‰å¯å˜å‚æ•°"><a href="#ï¼ˆ3ï¼‰å¯å˜å‚æ•°" class="headerlink" title="ï¼ˆ3ï¼‰å¯å˜å‚æ•°"></a>ï¼ˆ3ï¼‰å¯å˜å‚æ•°</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯å˜å‚æ•°ï¼ˆä¸å®šæ•°é‡å‚æ•°ï¼‰,åªèƒ½ä½œä¸ºæœ€åçš„å‚æ•°é¡¹</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum</span><span class="params">(str <span class="keyword">string</span>, nums ...<span class="keyword">int</span>)</span></span>  &#123;</span><br><span class="line"></span><br><span class="line">fmt.Println(str, nums)</span><br><span class="line">total := <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _,num := <span class="keyword">range</span> nums&#123;</span><br><span class="line">total += num</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fmt.Println(total)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="2-å¤šè¿”å›å€¼"><a href="#2-å¤šè¿”å›å€¼" class="headerlink" title="2.å¤šè¿”å›å€¼"></a>2.å¤šè¿”å›å€¼</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¤šä¸ªè¿”å›å€¼çš„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">vals</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">add := a + b</span><br><span class="line">sub := a - b</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> add, sub</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-é—­åŒ…å‡½æ•°"><a href="#3-é—­åŒ…å‡½æ•°" class="headerlink" title="3.é—­åŒ…å‡½æ•°"></a>3.é—­åŒ…å‡½æ•°</h4><h5 id="ï¼ˆ1ï¼‰å£°æ˜"><a href="#ï¼ˆ1ï¼‰å£°æ˜" class="headerlink" title="ï¼ˆ1ï¼‰å£°æ˜"></a>ï¼ˆ1ï¼‰å£°æ˜</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŒ¿åå‡½æ•°å½¢æˆé—­åŒ…</span></span><br><span class="line"><span class="comment">// åŒ¿åå‡½æ•°å¸¸ç”¨äºèµ‹ç»™å˜é‡ï¼Œåƒæ™®é€šå˜é‡ä¸€æ ·ä¼ é€’æ“ä½œ</span></span><br><span class="line"><span class="comment">// é—­åŒ…æœ€ç»ˆæ•ˆæœå°±æ˜¯å°†é—­åŒ…èµ‹äºˆå˜é‡åï¼Œé€šè¿‡è°ƒç”¨å˜é‡è°ƒç”¨é—­åŒ…å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">intSeq</span><span class="params">()</span> <span class="title">func</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line"></span><br><span class="line">i := <span class="number">0</span></span><br><span class="line"><span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">i++</span><br><span class="line"><span class="keyword">return</span> i</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ2ï¼‰è°ƒç”¨"><a href="#ï¼ˆ2ï¼‰è°ƒç”¨" class="headerlink" title="ï¼ˆ2ï¼‰è°ƒç”¨"></a>ï¼ˆ2ï¼‰è°ƒç”¨</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å˜é‡èµ‹äºˆé—­åŒ…ï¼Œå˜é‡å¯ä»¥ä½œä¸ºå‡½æ•°ä½¿ç”¨</span></span><br><span class="line">nextInt := intSeq()</span><br><span class="line"><span class="comment">// intSeq()è¾“å‡ºçš„æ˜¯åŸå¯¹è±¡æŒ‡é’ˆ</span></span><br><span class="line">fmt.Println(intSeq())</span><br><span class="line">fmt.Println(nextInt())</span><br><span class="line">fmt.Println(nextInt())</span><br><span class="line">nextInt2 := intSeq()</span><br><span class="line">fmt.Println(nextInt2())</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ3ï¼‰ç»“æœ"><a href="#ï¼ˆ3ï¼‰ç»“æœ" class="headerlink" title="ï¼ˆ3ï¼‰ç»“æœ"></a>ï¼ˆ3ï¼‰ç»“æœ</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109071006085.png" alt="image-20210907100638778"></p><h4 id="4-é€’å½’å‡½æ•°"><a href="#4-é€’å½’å‡½æ•°" class="headerlink" title="4.é€’å½’å‡½æ•°"></a>4.é€’å½’å‡½æ•°</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€’å½’è®¡ç®—é˜¶ä¹˜</span></span><br><span class="line"><span class="comment">// é€’å½’å‡½æ•°ç‰¹å¾</span></span><br><span class="line"><span class="comment">// 1.å­é—®é¢˜é¡»ä¸åŸå§‹é—®é¢˜ä¸ºåŒæ ·çš„äº‹ï¼Œä¸”æ›´ä¸ºç®€å•ã€‚</span></span><br><span class="line"><span class="comment">// 2.ä¸èƒ½æ— é™åˆ¶åœ°è°ƒç”¨æœ¬èº«ï¼Œé¡»æœ‰ä¸ªå‡ºå£ï¼ŒåŒ–ç®€ä¸ºéé€’å½’çŠ¶å†µå¤„ç†ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fact</span><span class="params">(n <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> n == <span class="number">0</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> n * fact(n<span class="number">-1</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æŒ‡é’ˆ"><a href="#æŒ‡é’ˆ" class="headerlink" title="æŒ‡é’ˆ"></a>æŒ‡é’ˆ</h3><h4 id="1-å‡½æ•°ä¸­çš„æŒ‡é’ˆå‚æ•°"><a href="#1-å‡½æ•°ä¸­çš„æŒ‡é’ˆå‚æ•°" class="headerlink" title="1.å‡½æ•°ä¸­çš„æŒ‡é’ˆå‚æ•°"></a>1.å‡½æ•°ä¸­çš„æŒ‡é’ˆå‚æ•°</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ™®é€šå‚æ•°æ˜¯å°†å€¼ä¼ é€’ç»™å‡½æ•°ï¼Œç›¸å½“äºå¤åˆ¶äº†å‰¯æœ¬</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">zeroval</span><span class="params">(ival <span class="keyword">int</span>)</span></span>  &#123;</span><br><span class="line"></span><br><span class="line">ival = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨æŒ‡é’ˆä½œä¸ºå‚æ•°ï¼Œå‡½æ•°ç›´æ¥æ“ä½œå‚æ•°çš„å†…å­˜åœ°å€</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">zeroptr</span><span class="params">(iptr *<span class="keyword">int</span>)</span></span>  &#123;</span><br><span class="line"></span><br><span class="line">fmt.Println(iptr)</span><br><span class="line"><span class="comment">// å¼•ç”¨å½“å‰åœ°å€çš„å€¼å¹¶ä¿®æ”¹</span></span><br><span class="line">*iptr = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-è°ƒç”¨ä¸è¿è¡Œç»“æœ"><a href="#2-è°ƒç”¨ä¸è¿è¡Œç»“æœ" class="headerlink" title="2.è°ƒç”¨ä¸è¿è¡Œç»“æœ"></a>2.è°ƒç”¨ä¸è¿è¡Œç»“æœ</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">i := <span class="number">1</span></span><br><span class="line"></span><br><span class="line">zeroval(i)</span><br><span class="line">fmt.Println(i)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å–å˜é‡åœ°å€ä½œä¸ºå‚æ•°</span></span><br><span class="line">zeroptr(&amp;i)</span><br><span class="line">fmt.Println(i)</span><br><span class="line">fmt.Println(&amp;i)</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109071015209.png" alt="image-20210907101514269"></p><h3 id="ç»“æ„ä½“"><a href="#ç»“æ„ä½“" class="headerlink" title="ç»“æ„ä½“"></a>ç»“æ„ä½“</h3><h4 id="1-ç»“æ„ä½“ç®€ä»‹"><a href="#1-ç»“æ„ä½“ç®€ä»‹" class="headerlink" title="1.ç»“æ„ä½“ç®€ä»‹"></a>1.ç»“æ„ä½“ç®€ä»‹</h4><p>Goè¯­è¨€ä¸­æ²¡æœ‰â€œç±»â€çš„æ¦‚å¿µï¼Œä¹Ÿä¸æ”¯æŒâ€œç±»â€çš„ç»§æ‰¿ç­‰é¢å‘å¯¹è±¡çš„æ¦‚å¿µã€‚Goè¯­è¨€ä¸­é€šè¿‡ç»“æ„ä½“çš„å†…åµŒå†é…åˆæ¥å£æ¯”é¢å‘å¯¹è±¡å…·æœ‰æ›´é«˜çš„æ‰©å±•æ€§å’Œçµæ´»æ€§</p><h4 id="2-ç»“æ„ä½“å®ä¾‹åŒ–"><a href="#2-ç»“æ„ä½“å®ä¾‹åŒ–" class="headerlink" title="2.ç»“æ„ä½“å®ä¾‹åŒ–"></a>2.ç»“æ„ä½“å®ä¾‹åŒ–</h4><h5 id="ï¼ˆ1ï¼‰å£°æ˜ç»“æ„ä½“"><a href="#ï¼ˆ1ï¼‰å£°æ˜ç»“æ„ä½“" class="headerlink" title="ï¼ˆ1ï¼‰å£°æ˜ç»“æ„ä½“"></a>ï¼ˆ1ï¼‰å£°æ˜ç»“æ„ä½“</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»“æ„ä½“æ˜¯å­—æ®µçš„ç±»å‹åŒ–é›†åˆï¼Œå®ƒä»¬å¯ä»¥å°†æ•°æ®ç»„åˆåœ¨ä¸€èµ·å½¢æˆè®°å½•</span></span><br><span class="line"><span class="keyword">type</span> person <span class="keyword">struct</span> &#123;</span><br><span class="line"></span><br><span class="line">name <span class="keyword">string</span></span><br><span class="line">age <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ2ï¼‰ç»“æ„ä½“å®ä¾‹åŒ–"><a href="#ï¼ˆ2ï¼‰ç»“æ„ä½“å®ä¾‹åŒ–" class="headerlink" title="ï¼ˆ2ï¼‰ç»“æ„ä½“å®ä¾‹åŒ–"></a>ï¼ˆ2ï¼‰ç»“æ„ä½“å®ä¾‹åŒ–</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»“æ„ä½“å®ä¾‹åŒ–æ–¹æ³•</span></span><br><span class="line">fmt.Println(person&#123;<span class="string">&quot;Bob&quot;</span>, <span class="number">20</span>&#125;)</span><br><span class="line">s := person&#123;name: <span class="string">&quot;Sean&quot;</span>, age: <span class="number">50</span>&#125;</span><br><span class="line">fmt.Println(s.name)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœ</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109071025874.png" alt="image-20210907102546338"></p><h5 id="ï¼ˆ3ï¼‰ç»“æ„ä½“åœ°å€"><a href="#ï¼ˆ3ï¼‰ç»“æ„ä½“åœ°å€" class="headerlink" title="ï¼ˆ3ï¼‰ç»“æ„ä½“åœ°å€"></a>ï¼ˆ3ï¼‰ç»“æ„ä½“åœ°å€</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»“æ„ä½“åœ°å€</span></span><br><span class="line">fmt.Println(&amp;person&#123;name: <span class="string">&quot;Ava&quot;</span>&#125;)</span><br><span class="line">sp := &amp;s</span><br><span class="line">fmt.Println(sp)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœ</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109071034851.png" alt="image-20210907103421612"></p><h4 id="3-æ„é€ å‡½æ•°"><a href="#3-æ„é€ å‡½æ•°" class="headerlink" title="3.æ„é€ å‡½æ•°"></a>3.æ„é€ å‡½æ•°</h4><h5 id="ï¼ˆ1ï¼‰æ„é€ æ–¹æ³•"><a href="#ï¼ˆ1ï¼‰æ„é€ æ–¹æ³•" class="headerlink" title="ï¼ˆ1ï¼‰æ„é€ æ–¹æ³•"></a>ï¼ˆ1ï¼‰æ„é€ æ–¹æ³•</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// newPersonç»™å®šçš„åç§°ä¸€ä¸ªæ–°çš„personç»“æ„ä½“</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newPerson</span><span class="params">(name <span class="keyword">string</span>)</span> *<span class="title">person</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜æ–°çš„ç»“æ„ä½“å¹¶èµ‹å€¼</span></span><br><span class="line">p := person&#123;name:name&#125;</span><br><span class="line">p.age = <span class="number">42</span></span><br><span class="line"><span class="comment">// è¿”å›æ–°ç»“æ„ä½“çš„ä½ç½®</span></span><br><span class="line"><span class="keyword">return</span> &amp;p</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ2ï¼‰è°ƒç”¨ä¸ç»“æœ"><a href="#ï¼ˆ2ï¼‰è°ƒç”¨ä¸ç»“æœ" class="headerlink" title="ï¼ˆ2ï¼‰è°ƒç”¨ä¸ç»“æœ"></a>ï¼ˆ2ï¼‰è°ƒç”¨ä¸ç»“æœ</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fmt.Println(newPerson(<span class="string">&quot;Bella&quot;</span>))</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœ</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109071039908.png" alt="image-20210907103904793"></p><h4 id="4-ç»“æ„ä½“æ–¹æ³•"><a href="#4-ç»“æ„ä½“æ–¹æ³•" class="headerlink" title="4.ç»“æ„ä½“æ–¹æ³•"></a>4.ç»“æ„ä½“æ–¹æ³•</h4><ul><li>å¯¹äºæ™®é€šå‡½æ•°ï¼Œæ¥æ”¶è€…ä¸ºå€¼ç±»å‹æ—¶ï¼Œä¸èƒ½å°†æŒ‡é’ˆç±»å‹çš„æ•°æ®ç›´æ¥ä¼ é€’ï¼Œåä¹‹äº¦ç„¶</li><li>å¯¹äºæ–¹æ³•ï¼ˆå¦‚structçš„æ–¹æ³•ï¼‰ï¼Œæ¥æ”¶è€…ä¸ºå€¼ç±»å‹æ—¶ï¼Œå¯ä»¥ç›´æ¥ç”¨æŒ‡é’ˆç±»å‹çš„å˜é‡è°ƒç”¨æ–¹æ³•</li><li>ä¸ºäº†å‡å°‘å†…å­˜å¼€é”€ï¼Œä¸€èˆ¬ç”¨æŒ‡é’ˆç±»å‹ä½œä¸ºæ¥æ”¶è€…ï¼Œç”¨æŒ‡é’ˆå˜é‡è°ƒç”¨æ–¹æ³•</li></ul><h5 id="ï¼ˆ1ï¼‰å®šä¹‰ç»“æ„ä½“"><a href="#ï¼ˆ1ï¼‰å®šä¹‰ç»“æ„ä½“" class="headerlink" title="ï¼ˆ1ï¼‰å®šä¹‰ç»“æ„ä½“"></a>ï¼ˆ1ï¼‰å®šä¹‰ç»“æ„ä½“</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰ç»“æ„ä½“çš„æ–¹æ³•</span></span><br><span class="line"><span class="keyword">type</span> rect <span class="keyword">struct</span> &#123;</span><br><span class="line">width, height <span class="keyword">int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ2ï¼‰æŒ‡é’ˆæ¥æ”¶ç±»å‹æ–¹æ³•"><a href="#ï¼ˆ2ï¼‰æŒ‡é’ˆæ¥æ”¶ç±»å‹æ–¹æ³•" class="headerlink" title="ï¼ˆ2ï¼‰æŒ‡é’ˆæ¥æ”¶ç±»å‹æ–¹æ³•"></a>ï¼ˆ2ï¼‰æŒ‡é’ˆæ¥æ”¶ç±»å‹æ–¹æ³•</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŒ‡é’ˆæ¥æ”¶å™¨ç±»å‹</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *rect)</span> <span class="title">area</span><span class="params">()</span> <span class="title">int</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> r.width * r.height</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è°ƒç”¨ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å€¼ç±»å‹è°ƒç”¨æ–¹æ³•</span></span><br><span class="line">fmt.Println(<span class="string">&quot;area&quot;</span>, r.area())</span><br><span class="line"><span class="comment">// æŒ‡é’ˆç±»å‹è°ƒç”¨æ–¹æ³•</span></span><br><span class="line">rp := &amp;r</span><br><span class="line">fmt.Println(<span class="string">&quot;area&quot;</span>, rp.area())</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109071105125.png" alt="image-20210907110512031"></p><h5 id="ï¼ˆ3ï¼‰å€¼æ¥æ”¶ç±»å‹æ–¹æ³•"><a href="#ï¼ˆ3ï¼‰å€¼æ¥æ”¶ç±»å‹æ–¹æ³•" class="headerlink" title="ï¼ˆ3ï¼‰å€¼æ¥æ”¶ç±»å‹æ–¹æ³•"></a>ï¼ˆ3ï¼‰å€¼æ¥æ”¶ç±»å‹æ–¹æ³•</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å€¼æ¥æ”¶å™¨ç±»å‹</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r rect)</span> <span class="title">perim</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">2</span> * r.width + <span class="number">2</span> * r.height</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è°ƒç”¨ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å€¼ç±»å‹è°ƒç”¨æ–¹æ³•</span></span><br><span class="line">fmt.Println(<span class="string">&quot;perim&quot;</span>, r.perim())</span><br><span class="line"><span class="comment">// æŒ‡é’ˆç±»å‹è°ƒç”¨æ–¹æ³•</span></span><br><span class="line">fmt.Println(<span class="string">&quot;perim&quot;</span>, rp.perim())</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109071108661.png" alt="image-20210907110638342"></p><h3 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h3><h4 id="1-æ¥å£ç®€ä»‹"><a href="#1-æ¥å£ç®€ä»‹" class="headerlink" title="1.æ¥å£ç®€ä»‹"></a>1.æ¥å£ç®€ä»‹</h4><ul><li>æ¥å£ï¼ˆinterfaceï¼‰å®šä¹‰äº†ä¸€ä¸ªå¯¹è±¡çš„è¡Œä¸ºè§„èŒƒï¼Œåªå®šä¹‰è§„èŒƒä¸å®ç°ï¼Œç”±å…·ä½“çš„å¯¹è±¡æ¥å®ç°è§„èŒƒçš„ç»†èŠ‚</li><li>interfaceæ˜¯ä¸€ç»„methodçš„é›†åˆï¼Œæ˜¯duck-type programmingçš„ä¸€ç§ä½“ç°ã€‚æ¥å£åšçš„äº‹æƒ…å°±åƒæ˜¯å®šä¹‰ä¸€ä¸ªåè®®ï¼ˆè§„åˆ™ï¼‰</li></ul><h4 id="2-æ¥å£çš„å®ç°"><a href="#2-æ¥å£çš„å®ç°" class="headerlink" title="2.æ¥å£çš„å®ç°"></a>2.æ¥å£çš„å®ç°</h4><h5 id="ï¼ˆ1ï¼‰å®šä¹‰æ¥å£"><a href="#ï¼ˆ1ï¼‰å®šä¹‰æ¥å£" class="headerlink" title="ï¼ˆ1ï¼‰å®šä¹‰æ¥å£"></a>ï¼ˆ1ï¼‰å®šä¹‰æ¥å£</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// goè¯­è¨€æå€¡é¢å‘æ¥å£ç¼–ç¨‹</span></span><br><span class="line"><span class="comment">// æ¥å£æ˜¯ä¸€ç§æŠ½è±¡ç±»å‹ï¼Œå®šä¹‰å¯¹è±¡çš„è¡Œä¸ºè§„èŒƒ</span></span><br><span class="line"><span class="keyword">type</span> Gemoetry <span class="keyword">interface</span> &#123;</span><br><span class="line">area() <span class="keyword">float64</span></span><br><span class="line">perim() <span class="keyword">float64</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ2ï¼‰æ„å»ºç»“æ„ä½“ï¼ˆç”¨äºç”Ÿæˆå¯¹è±¡ï¼‰"><a href="#ï¼ˆ2ï¼‰æ„å»ºç»“æ„ä½“ï¼ˆç”¨äºç”Ÿæˆå¯¹è±¡ï¼‰" class="headerlink" title="ï¼ˆ2ï¼‰æ„å»ºç»“æ„ä½“ï¼ˆç”¨äºç”Ÿæˆå¯¹è±¡ï¼‰"></a>ï¼ˆ2ï¼‰æ„å»ºç»“æ„ä½“ï¼ˆç”¨äºç”Ÿæˆå¯¹è±¡ï¼‰</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ„å»ºç»“æ„ä½“</span></span><br><span class="line"><span class="keyword">type</span> rect2 <span class="keyword">struct</span> &#123;</span><br><span class="line">width, height <span class="keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> circle <span class="keyword">struct</span> &#123;</span><br><span class="line">radius <span class="keyword">float64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ3ï¼‰ç»“æ„ä½“çš„æ–¹æ³•å®ç°æ¥å£"><a href="#ï¼ˆ3ï¼‰ç»“æ„ä½“çš„æ–¹æ³•å®ç°æ¥å£" class="headerlink" title="ï¼ˆ3ï¼‰ç»“æ„ä½“çš„æ–¹æ³•å®ç°æ¥å£"></a>ï¼ˆ3ï¼‰ç»“æ„ä½“çš„æ–¹æ³•å®ç°æ¥å£</h5><p>åªè¦å¯¹è±¡å®ç°äº†æ¥å£ä¸­æ‰€æœ‰çš„æ–¹æ³•ï¼Œå°±æ˜¯å®ç°äº†è¿™ä¸ªæ¥å£</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åªè¦å¯¹è±¡å®ç°äº†æ¥å£ä¸­æ‰€æœ‰çš„æ–¹æ³•ï¼Œå°±æ˜¯å®ç°äº†è¿™ä¸ªæ¥å£ï¼ˆä¸éœ€è¦æ˜¾æ€§å£°æ˜ï¼‰</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r rect2)</span> <span class="title">area</span><span class="params">()</span> <span class="title">float64</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> r.width * r.height</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r rect2)</span> <span class="title">perim</span><span class="params">()</span> <span class="title">float64</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">2</span>*r.width + <span class="number">2</span>*r.height</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c circle)</span> <span class="title">area</span><span class="params">()</span> <span class="title">float64</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> math.Pi * c.radius * c.radius</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c circle)</span> <span class="title">perim</span><span class="params">()</span> <span class="title">float64</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">2</span> * math.Pi * c.radius</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ4ï¼‰-ç»“æ„ä½“å®ä¾‹åŒ–ç”Ÿæˆå¯¹è±¡"><a href="#ï¼ˆ4ï¼‰-ç»“æ„ä½“å®ä¾‹åŒ–ç”Ÿæˆå¯¹è±¡" class="headerlink" title="ï¼ˆ4ï¼‰ ç»“æ„ä½“å®ä¾‹åŒ–ç”Ÿæˆå¯¹è±¡"></a>ï¼ˆ4ï¼‰ ç»“æ„ä½“å®ä¾‹åŒ–ç”Ÿæˆå¯¹è±¡</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®ç°æ¥å£åï¼Œæ¥å£ç±»å‹å˜é‡å¯ä»¥å­˜å‚¨æ‰€æœ‰å®ç°è¯¥æ¥å£çš„å®ä¾‹</span></span><br><span class="line"><span class="keyword">var</span> x Gemoetry</span><br><span class="line"></span><br><span class="line">x = rect2&#123;width: <span class="number">3</span>, height: <span class="number">4</span>&#125;</span><br><span class="line">fmt.Println(x.area())</span><br><span class="line">fmt.Println(x.perim())</span><br><span class="line"></span><br><span class="line">x = circle&#123;radius:<span class="number">5</span>&#125;</span><br><span class="line">fmt.Println(x.area())</span><br><span class="line">fmt.Println(x.perim())</span><br></pre></td></tr></table></figure><h3 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" class="headerlink" title="å¼‚å¸¸å¤„ç†"></a>å¼‚å¸¸å¤„ç†</h3><p>goè¯­è¨€é€šè¿‡æ˜¾å¼çš„è¿”å›å€¼ä¼ é€’é”™è¯¯</p><h4 id="1-å†…ç½®æ¥å£è¿”å›é”™è¯¯ä¿¡æ¯"><a href="#1-å†…ç½®æ¥å£è¿”å›é”™è¯¯ä¿¡æ¯" class="headerlink" title="1.å†…ç½®æ¥å£è¿”å›é”™è¯¯ä¿¡æ¯"></a>1.å†…ç½®æ¥å£è¿”å›é”™è¯¯ä¿¡æ¯</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‚æ•°argï¼Œè¿”å›å€¼ç±»å‹intï¼Œerror</span></span><br><span class="line"><span class="comment">// ä½¿ç”¨å†…ç½®æ¥å£è¿”å›é”™è¯¯ä¿¡æ¯</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f1</span><span class="params">(arg <span class="keyword">int</span>)</span><span class="params">(<span class="keyword">int</span>, error)</span></span>  &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> arg == <span class="number">42</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>, errors.New(<span class="string">&quot;can&#x27;t work&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> arg + <span class="number">3</span>, <span class="literal">nil</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-è‡ªå®šä¹‰ç»“æ„ä½“"><a href="#2-è‡ªå®šä¹‰ç»“æ„ä½“" class="headerlink" title="2.è‡ªå®šä¹‰ç»“æ„ä½“"></a>2.è‡ªå®šä¹‰ç»“æ„ä½“</h4><h5 id="ï¼ˆ1ï¼‰å®šä¹‰ç»“æ„ä½“-1"><a href="#ï¼ˆ1ï¼‰å®šä¹‰ç»“æ„ä½“-1" class="headerlink" title="ï¼ˆ1ï¼‰å®šä¹‰ç»“æ„ä½“"></a>ï¼ˆ1ï¼‰å®šä¹‰ç»“æ„ä½“</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‡ªå®šä¹‰ç»“æ„ä½“å®ç° Error ()æ–¹æ³•ï¼Œå¯ä»¥æ˜¾ç¤ºè¡¨ç¤ºé”™è¯¯</span></span><br><span class="line"><span class="keyword">type</span> argError <span class="keyword">struct</span>&#123;</span><br><span class="line">arg <span class="keyword">int</span></span><br><span class="line">prob <span class="keyword">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ2ï¼‰å®šä¹‰ç»“æ„ä½“æ–¹æ³•"><a href="#ï¼ˆ2ï¼‰å®šä¹‰ç»“æ„ä½“æ–¹æ³•" class="headerlink" title="ï¼ˆ2ï¼‰å®šä¹‰ç»“æ„ä½“æ–¹æ³•"></a>ï¼ˆ2ï¼‰å®šä¹‰ç»“æ„ä½“æ–¹æ³•</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰ç»“æ„ä½“çš„æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(e *argError)</span> <span class="title">Error</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> fmt.Sprintf(<span class="string">&quot;%d - %s&quot;</span>, e.arg, e.prob)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ3ï¼‰å¼‚å¸¸æµ‹è¯•æ–¹æ³•"><a href="#ï¼ˆ3ï¼‰å¼‚å¸¸æµ‹è¯•æ–¹æ³•" class="headerlink" title="ï¼ˆ3ï¼‰å¼‚å¸¸æµ‹è¯•æ–¹æ³•"></a>ï¼ˆ3ï¼‰å¼‚å¸¸æµ‹è¯•æ–¹æ³•</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‚æ•°argï¼Œè¿”å›å€¼ç±»å‹intï¼Œerror</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f2</span><span class="params">(arg <span class="keyword">int</span>)</span><span class="params">(<span class="keyword">int</span>, error)</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> arg == <span class="number">42</span>&#123;</span><br><span class="line"><span class="comment">// å®ä¾‹åŒ–argErrorè¿”å›æŒ‡é’ˆerrorï¼ˆæ‰§è¡Œå‡½æ•°Errorï¼‰</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>, &amp;argError&#123;arg, <span class="string">&quot;cam&#x27;t work with it&quot;</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> arg + <span class="number">3</span>, <span class="literal">nil</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ4ï¼‰æµ‹è¯•ç”¨ä¾‹"><a href="#ï¼ˆ4ï¼‰æµ‹è¯•ç”¨ä¾‹" class="headerlink" title="ï¼ˆ4ï¼‰æµ‹è¯•ç”¨ä¾‹"></a>ï¼ˆ4ï¼‰æµ‹è¯•ç”¨ä¾‹</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">r,e = f2(<span class="number">42</span>)</span><br><span class="line">fmt.Println(r, e)</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109072134201.png" alt="image-20210907213437028"></p><h3 id="å¹¶å‘ç¼–ç¨‹"><a href="#å¹¶å‘ç¼–ç¨‹" class="headerlink" title="å¹¶å‘ç¼–ç¨‹"></a>å¹¶å‘ç¼–ç¨‹</h3><h4 id="1-Goroutinesï¼ˆåç¨‹ï¼‰"><a href="#1-Goroutinesï¼ˆåç¨‹ï¼‰" class="headerlink" title="1.Goroutinesï¼ˆåç¨‹ï¼‰"></a>1.Goroutinesï¼ˆåç¨‹ï¼‰</h4><h5 id="ï¼ˆ1ï¼‰åç¨‹ç®€ä»‹"><a href="#ï¼ˆ1ï¼‰åç¨‹ç®€ä»‹" class="headerlink" title="ï¼ˆ1ï¼‰åç¨‹ç®€ä»‹"></a>ï¼ˆ1ï¼‰åç¨‹ç®€ä»‹</h5><ul><li><code>go func()</code>è¿™ç§å½¢å¼å³å¯å®ç°åˆ›å»ºä¸€ä¸ªæ–°çš„åç¨‹æ‰§è¡Œå‡½æ•°</li><li>ä¸€èˆ¬å‡½æ•°è°ƒç”¨æ˜¯é˜»å¡ä¸»çº¿ç¨‹çš„ï¼Œå³ä¸ºåŒæ­¥ï¼›è€Œä½¿ç”¨åç¨‹è°ƒç”¨å‡½æ•°ï¼Œåˆ™ä¼šä¸ä¸»çº¿ç¨‹ï¼Œå…¶ä»–åç¨‹ä¸€èµ·è¿è¡Œï¼Œåˆ™æ˜¯ä¸€ä¸ªå¼‚æ­¥çš„è¿‡ç¨‹</li><li>åœ¨å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œä¸èƒ½ç”¨é¡ºåºæ‰§è¡Œè¯­å¥çš„åŒæ­¥æ€ç»´ã€‚åœ¨å¤šä¸ªç¨‹åºåŒæ—¶è¿è¡Œæ—¶ï¼Œè¦è€ƒè™‘åˆ°å„ä¸ªåç¨‹å¼€å§‹çš„æ—¶é—´å’Œç»“æŸçš„æ—¶é—´å†³å®šçš„è¿è¡Œç»“æœï¼Œå„ä¸ªåç¨‹å¯¹åŒä¸€æ•°æ®çš„åŒæ—¶æ“ä½œï¼Œå„ä¸ªåç¨‹ä»»åŠ¡åŒæ­¥ï¼Œä»¥åŠä¸»çº¿ç¨‹ç»“æŸåä¼šå…³é—­å…¶ä»–åç¨‹ï¼ˆä¸ç®¡å…¶ä»»åŠ¡æ˜¯å¦æ‰§è¡Œå®Œæ¯•ï¼‰çš„é—®é¢˜</li></ul><h5 id="ï¼ˆ2ï¼‰è¿è¡Œæ¡ˆä¾‹"><a href="#ï¼ˆ2ï¼‰è¿è¡Œæ¡ˆä¾‹" class="headerlink" title="ï¼ˆ2ï¼‰è¿è¡Œæ¡ˆä¾‹"></a>ï¼ˆ2ï¼‰è¿è¡Œæ¡ˆä¾‹</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">(from <span class="keyword">string</span>)</span></span>  &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">5</span>; i++&#123;</span><br><span class="line">fmt.Println(from, <span class="string">&quot;:&quot;</span>, i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Goroutines</span><span class="params">()</span></span>  &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸€èˆ¬è°ƒç”¨åŒæ­¥è¿è¡Œ</span></span><br><span class="line">f(<span class="string">&quot;direct&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†å‡½æ•°æ”¾åˆ°goroutineè¿è¡Œï¼ˆGoç¨‹åºä¼šæ™ºèƒ½åœ°å°† goroutine ä¸­çš„ä»»åŠ¡åˆç†åœ°åˆ†é…ç»™æ¯ä¸ªCPUï¼‰</span></span><br><span class="line"><span class="keyword">go</span> f(<span class="string">&quot;goroutine&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸ºåŒ¿åå‡½æ•°å¯åŠ¨ä¸€ä¸ªgoroutineï¼ˆæœ€åå®Œæˆè°ƒç”¨ï¼‰</span></span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">(msg <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">fmt.Println(msg)</span><br><span class="line">&#125;(<span class="string">&quot;going&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¿…é¡»è®¾ç½®ç­‰å¾…ï¼Œä½¿ä¸»çº¿ç¨‹é˜»å¡ï¼Œå¦åˆ™main()æ‰§è¡Œå®Œågoroutineä¹Ÿä¸€åŒç»“æŸäº†</span></span><br><span class="line">time.Sleep(time.Millisecond)</span><br><span class="line">fmt.Println(<span class="string">&quot;done&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109080742743.png" alt="image-20210908074235644"></p><h4 id="2-Channelsï¼ˆé€šé“ï¼‰"><a href="#2-Channelsï¼ˆé€šé“ï¼‰" class="headerlink" title="2.Channelsï¼ˆé€šé“ï¼‰"></a>2.Channelsï¼ˆé€šé“ï¼‰</h4><h5 id="ï¼ˆ1ï¼‰é€šé“ç®€ä»‹"><a href="#ï¼ˆ1ï¼‰é€šé“ç®€ä»‹" class="headerlink" title="ï¼ˆ1ï¼‰é€šé“ç®€ä»‹"></a>ï¼ˆ1ï¼‰é€šé“ç®€ä»‹</h5><ul><li>é€šè¿‡goroutineså¯ä»¥å®ç°å‡½æ•°å¹¶å‘è¿è¡Œï¼Œè€Œè¿™äº›å¹¶å‘æ‰§è¡Œçš„å‡½æ•°å¯ä»¥é€šè¿‡channelsäº¤æ¢æ•°æ®</li><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œé€šé“æ˜¯æ— ç¼“å†²çš„ï¼ˆé˜»å¡é€šé“ï¼‰ï¼Œæ— ç¼“å†²çš„é€šé“å¿…é¡»æœ‰æ¥æ”¶æ‰èƒ½å‘é€</li><li>ä½¿ç”¨makeå‡½æ•°åˆå§‹åŒ–é€šé“çš„æ—¶å€™ä¸ºå…¶æŒ‡å®šé€šé“çš„å®¹é‡å³å¯ç”Ÿæˆæœ‰ç¼“å†²é€šé“</li></ul><h5 id="ï¼ˆ2ï¼‰é€šé“çš„å‘é€ä¸æ¥æ”¶"><a href="#ï¼ˆ2ï¼‰é€šé“çš„å‘é€ä¸æ¥æ”¶" class="headerlink" title="ï¼ˆ2ï¼‰é€šé“çš„å‘é€ä¸æ¥æ”¶"></a>ï¼ˆ2ï¼‰é€šé“çš„å‘é€ä¸æ¥æ”¶</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// channelæ˜¯ä¸€ç§ç±»å‹ï¼Œä¸€ç§å¼•ç”¨ç±»å‹</span></span><br><span class="line"><span class="comment">// å£°æ˜å¹¶åˆå§‹åŒ–channelï¼ˆå£°æ˜çš„é€šé“åéœ€è¦ä½¿ç”¨makeå‡½æ•°åˆå§‹åŒ–ä¹‹åæ‰èƒ½ä½¿ç”¨ï¼‰</span></span><br><span class="line">messages := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>)</span><br><span class="line">fmt.Println(reflect.TypeOf(messages), messages)</span><br><span class="line"></span><br><span class="line"><span class="comment">// goroutinesä¸­å‡½æ•°å°†ä¿¡æ¯å‘é€åˆ°messagesé€šé“</span></span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;messages &lt;- <span class="string">&quot;ping&quot;</span>&#125;()</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¥æ”¶ä¿¡æ¯</span></span><br><span class="line">msg := &lt;-messages</span><br><span class="line">fmt.Println(reflect.TypeOf(msg), msg)</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109080812902.png" alt="image-20210908081215613"></p><h5 id="ï¼ˆ3ï¼‰æ— ç¼“å†²é€šé“"><a href="#ï¼ˆ3ï¼‰æ— ç¼“å†²é€šé“" class="headerlink" title="ï¼ˆ3ï¼‰æ— ç¼“å†²é€šé“"></a>ï¼ˆ3ï¼‰æ— ç¼“å†²é€šé“</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é»˜è®¤æƒ…å†µä¸‹ï¼Œé€šé“æ˜¯æ— ç¼“å†²çš„ï¼ˆé˜»å¡é€šé“ï¼‰ï¼Œæ— ç¼“å†²çš„é€šé“å¿…é¡»æœ‰æ¥æ”¶æ‰èƒ½å‘é€</span></span><br><span class="line">ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>)</span><br><span class="line">ch &lt;- <span class="number">10</span></span><br><span class="line">fmt.Println(<span class="string">&quot;å‘é€æˆåŠŸ&quot;</span>)</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109080814350.png" alt="image-20210908081412049"></p><p>æ— ç¼“å†²é€šé“åŸç†å›¾ï¼š</p><p>æ— ç¼“å†²ç›¸å½“äºå°åŒºæ²¡æœ‰å¿«é€’ç‚¹ï¼Œå¿«é€’å‘˜å¿…é¡»äº²è‡ªæŠŠè¿™ä¸ªç‰©å“é€åˆ°ä½ çš„æ‰‹ä¸Š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109080815152.png" alt="img"></p><h5 id="ï¼ˆ4ï¼‰æœ‰ç¼“å†²é€šé“"><a href="#ï¼ˆ4ï¼‰æœ‰ç¼“å†²é€šé“" class="headerlink" title="ï¼ˆ4ï¼‰æœ‰ç¼“å†²é€šé“"></a>ï¼ˆ4ï¼‰æœ‰ç¼“å†²é€šé“</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨makeå‡½æ•°åˆå§‹åŒ–é€šé“çš„æ—¶å€™ä¸ºå…¶æŒ‡å®šé€šé“çš„å®¹é‡å³å¯ç”Ÿæˆæœ‰ç¼“å†²é€šé“</span></span><br><span class="line"><span class="comment">// æœ‰ç¼“å†²é€šé“ï¼ˆç›¸å½“äºè®¾ç½®äº†å¿«é€’ç‚¹ï¼‰</span></span><br><span class="line">ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, <span class="number">2</span>)</span><br><span class="line">ch &lt;- <span class="number">10</span></span><br><span class="line">ch &lt;- <span class="number">20</span></span><br><span class="line">fmt.Println(<span class="string">&quot;å‘é€æˆåŠŸ&quot;</span>)</span><br></pre></td></tr></table></figure><p>æœ‰ç¼“å†²é€šé“åŸç†å›¾ï¼š</p><p>æœ‰ç¼“å†²é€šé“ç›¸å½“äºå°åŒºæœ‰ä¸ªèœé¸Ÿé©¿ç«™ï¼ˆéå¹¿å‘Šï¼‰æˆ–ä»£æ”¶ç‚¹å¸®ä½ å­˜å¿«é€’ï¼Œéœ€è¦æ—¶å†å»å–å¿«é€’</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109080819934.png" alt="img"></p><h5 id="ï¼ˆ5ï¼‰ä¿¡é“åŒæ­¥"><a href="#ï¼ˆ5ï¼‰ä¿¡é“åŒæ­¥" class="headerlink" title="ï¼ˆ5ï¼‰ä¿¡é“åŒæ­¥"></a>ï¼ˆ5ï¼‰ä¿¡é“åŒæ­¥</h5><p>åœ¨åç¨‹ä¸­å­˜åœ¨ç€ä¸»çº¿ç¨‹ç»“æŸåä¸ç®¡å­åç¨‹æœ‰æ²¡æœ‰å®Œæˆä»»åŠ¡ä»ç„¶è®©å…¶å¼ºåˆ¶ä¸‹ç­çš„é—®é¢˜</p><p>è™½ç„¶å¯ä»¥é€šè¿‡æ—¶é—´å»¶è¿Ÿè®©ä¸»çº¿ç¨‹å—¯ç­‰ï¼Œä½†æ˜¯è¿™ç§ç¡¬æ€§å¤„ç†æ–¹å¼æµªè´¹èµ„æº</p><p>é€šè¿‡ä¿¡é“ï¼Œæˆ‘ä»¬å¯ä»¥è®©ä¸»çº¿ç¨‹ç­‰å¾…å­åç¨‹å‘é€ä»»åŠ¡å®Œæˆçš„ä¿¡å·å†ç»“æŸè‡ªå·±çš„ç”Ÿå‘½</p><p>å­åç¨‹ä»»åŠ¡ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¿¡é“åŒæ­¥</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">worker</span><span class="params">(done <span class="keyword">chan</span> <span class="keyword">bool</span>)</span></span>&#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;working&quot;</span>)</span><br><span class="line">time.Sleep(time.Second)</span><br><span class="line">fmt.Println(<span class="string">&quot;done&quot;</span>)</span><br><span class="line">    <span class="comment">// å‘é€ä»»åŠ¡å®Œæˆçš„ä¿¡å·åˆ°é€šé“</span></span><br><span class="line">done &lt;- <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸»çº¿ç¨‹çš„è¿è¡Œï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¿¡é“åŒæ­¥</span></span><br><span class="line">done := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">bool</span>, <span class="number">1</span>)</span><br><span class="line"><span class="keyword">go</span> worker(done)</span><br><span class="line"><span class="comment">// é˜»å¡æ¥æ”¶ï¼Œç­‰å¾…goroutineå®Œæˆ</span></span><br><span class="line">&lt;- done</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ6ï¼‰å•å‘é€šé“"><a href="#ï¼ˆ6ï¼‰å•å‘é€šé“" class="headerlink" title="ï¼ˆ6ï¼‰å•å‘é€šé“"></a>ï¼ˆ6ï¼‰å•å‘é€šé“</h5><p>å°†é€šé“ä½œä¸ºå‚æ•°åœ¨å¤šä¸ªä»»åŠ¡å‡½æ•°é—´ä¼ é€’æ—¶ï¼Œé™åˆ¶é€šé“åœ¨å‡½æ•°ä¸­åªèƒ½å‘é€æˆ–åªèƒ½æ¥æ”¶</p><p>å•å‘é€šé“é€šä¿¡æ–¹æ³•ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‘é€é€šé“ chan &lt;- int æ¥æ”¶é€šé“ &lt;- chan int</span></span><br><span class="line"><span class="comment">// å‘é€ä¿¡æ¯åˆ°pingsé€šé“</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ping</span><span class="params">(pings <span class="keyword">chan</span>&lt;-<span class="keyword">string</span>, msg <span class="keyword">string</span>)</span></span>  &#123;</span><br><span class="line">pings &lt;- msg</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¥æ”¶pingsé€šé“çš„ä¿¡æ¯ï¼Œ å‘é€åˆ°pongsé€šé“</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">pong</span><span class="params">(pings &lt;-<span class="keyword">chan</span> <span class="keyword">string</span>, pongs <span class="keyword">chan</span>&lt;-<span class="keyword">string</span>)</span></span>  &#123;</span><br><span class="line"></span><br><span class="line">msg := &lt;-pings</span><br><span class="line">pongs &lt;- msg</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å•å‘é€šé“çš„ä½¿ç”¨ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å•å‘ä¿¡é“</span></span><br><span class="line">pings := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>, <span class="number">1</span>)</span><br><span class="line">pongs := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>, <span class="number">1</span>)</span><br><span class="line"><span class="comment">// å‘é€ä¿¡æ¯åˆ°pingsé€šé“</span></span><br><span class="line">ping(pings, <span class="string">&quot;passed message&quot;</span>)</span><br><span class="line"><span class="comment">// æ¥æ”¶pingsé€šé“çš„ä¿¡æ¯ï¼Œ å‘é€åˆ°pongsé€šé“</span></span><br><span class="line">pong(pings, pongs)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¥æ”¶pongsä¿¡é“ä¿¡æ¯å¹¶å‘é€</span></span><br><span class="line">fmt.Println(&lt;-pongs)</span><br></pre></td></tr></table></figure><h4 id="3-é€šé“æ“ä½œ"><a href="#3-é€šé“æ“ä½œ" class="headerlink" title="3.é€šé“æ“ä½œ"></a>3.é€šé“æ“ä½œ</h4><h5 id="ï¼ˆ1ï¼‰é€šé“å…³é—­"><a href="#ï¼ˆ1ï¼‰é€šé“å…³é—­" class="headerlink" title="ï¼ˆ1ï¼‰é€šé“å…³é—­"></a>ï¼ˆ1ï¼‰é€šé“å…³é—­</h5><p>é€šé“å…³é—­è¿™ä¸ªä¿¡æ¯ä¹Ÿå¯ä»¥è¢«æ¥æ”¶åˆ°</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Close</span><span class="params">()</span></span>  &#123;</span><br><span class="line"></span><br><span class="line">jobs := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, <span class="number">5</span>)</span><br><span class="line">done := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">bool</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å·¥ä½œåç¨‹æ¥æ”¶æ¥è‡ªCloseåç¨‹çš„ä¿¡æ¯ï¼Œå½“æ¥å—å®Œæ¯•åå…³é—­jobsé€šé“</span></span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line"><span class="comment">// æ¥å—åˆ°moreä¸ºfasleè¯´æ˜é€šé“è¢«å…³é—­äº†ï¼Œå‘é€ä¿¡æ¯çš„ä»»åŠ¡å·²ç»ç»“æŸ</span></span><br><span class="line">j, more := &lt;-jobs</span><br><span class="line"><span class="keyword">if</span> more &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;received job&quot;</span>, j)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;received all jobs&quot;</span>)</span><br><span class="line"><span class="comment">// å®Œæˆå…¨éƒ¨ä»»åŠ¡åé€šçŸ¥closeåç¨‹</span></span><br><span class="line">done &lt;- <span class="literal">true</span></span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘jobsé€šé“å‘é€ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">for</span> j := <span class="number">1</span>; j &lt;= <span class="number">3</span>; j++&#123;</span><br><span class="line">jobs &lt;- j</span><br><span class="line">fmt.Println(<span class="string">&quot;sent job&quot;</span>, j)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…³é—­é€šé“</span></span><br><span class="line"><span class="built_in">close</span>(jobs)</span><br><span class="line">fmt.Println(<span class="string">&quot;sent all job&quot;</span>)</span><br><span class="line"><span class="comment">// closeåç¨‹æ¥æ”¶åˆ°å®Œæˆçš„ä¿¡å·å…³é—­closeåç¨‹</span></span><br><span class="line"><span class="comment">// ä½¿å¾—ä¸»åç¨‹èƒ½éšå·¥ä½œåç¨‹åŒæ­¥ç»“æŸ,å¯ä»¥é˜²æ­¢ä¸»åç¨‹è¿è¡Œå®Œæˆäº†,å·¥ä½œåç¨‹æœªå®Œæˆæ¥æ”¶å°±ä¸€èµ·éšä¸»åç¨‹å…³é—­çš„æƒ…å†µ</span></span><br><span class="line">&lt;-done</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109081521451.png" alt="image-20210908152110310"></p><h5 id="ï¼ˆ2ï¼‰é€šé“æ•°æ®éå†"><a href="#ï¼ˆ2ï¼‰é€šé“æ•°æ®éå†" class="headerlink" title="ï¼ˆ2ï¼‰é€šé“æ•°æ®éå†"></a>ï¼ˆ2ï¼‰é€šé“æ•°æ®éå†</h5><p>é€šè¿‡rangeè¯­å¥ä¹Ÿå¯ä»¥éå†é€šé“çš„æ•°æ®ï¼Œä½†æ˜¯è¦å…ˆå…³é—­æ‰é€šé“</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ChannelsRange</span><span class="params">()</span></span>  &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šé“æ•°æ®éå†</span></span><br><span class="line">queue := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>, <span class="number">3</span>)</span><br><span class="line">queue &lt;- <span class="string">&quot;one&quot;</span></span><br><span class="line">queue &lt;- <span class="string">&quot;two&quot;</span></span><br><span class="line"><span class="comment">// éå†å‰è¦å…ˆå…³é—­é€šé“(è®©å¾ªç¯çš„è¿­ä»£åœ¨2åç»“æŸ)</span></span><br><span class="line"><span class="built_in">close</span>(queue)</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šé“å…³é—­åä»ç„¶å¯ä»¥æ¥æ”¶åˆ°ä¿¡æ¯(æ— æ³•å‘é€ä¿¡æ¯)</span></span><br><span class="line"><span class="keyword">for</span> elem := <span class="keyword">range</span> queue&#123;</span><br><span class="line">fmt.Println(elem)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="4-select"><a href="#4-select" class="headerlink" title="4.select"></a>4.select</h4><h5 id="ï¼ˆ1ï¼‰åŒæ—¶å“åº”å¤šä¸ªé€šé“çš„æ“ä½œ"><a href="#ï¼ˆ1ï¼‰åŒæ—¶å“åº”å¤šä¸ªé€šé“çš„æ“ä½œ" class="headerlink" title="ï¼ˆ1ï¼‰åŒæ—¶å“åº”å¤šä¸ªé€šé“çš„æ“ä½œ"></a>ï¼ˆ1ï¼‰åŒæ—¶å“åº”å¤šä¸ªé€šé“çš„æ“ä½œ</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">c1 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>)</span><br><span class="line">c2 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼€å¯ä»»åŠ¡1</span></span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">time.Sleep(<span class="number">1</span> * time.Second)</span><br><span class="line">c1 &lt;- <span class="string">&quot;one&quot;</span></span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼€å¯ä»»åŠ¡2</span></span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span>&#123;</span><br><span class="line">time.Sleep(<span class="number">2</span> * time.Second)</span><br><span class="line">c2 &lt;- <span class="string">&quot;two&quot;</span></span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨selectå¯ä»¥åŒæ—¶å“åº”å¤šä¸ªé€šé“çš„æ“ä½œï¼Œä»è€Œå®ç°ä»å¤šä¸ªé€šé“æ¥æ”¶æ•°æ®ï¼ˆæœ¬è´¨ä¹Ÿæ˜¯å¯¹å„ä¸ªé€šé“æ‰«æï¼‰</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">2</span>; i++&#123;</span><br><span class="line"><span class="keyword">select</span> &#123;</span><br><span class="line"><span class="keyword">case</span> msg1 := &lt;- c1:</span><br><span class="line">fmt.Println(msg1)</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> msg2 := &lt;- c2:</span><br><span class="line">fmt.Println(msg2)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109080853240.png" alt="image-20210908085306965"></p><h5 id="ï¼ˆ2ï¼‰éé˜»å¡å‘é€æ¥æ”¶"><a href="#ï¼ˆ2ï¼‰éé˜»å¡å‘é€æ¥æ”¶" class="headerlink" title="ï¼ˆ2ï¼‰éé˜»å¡å‘é€æ¥æ”¶"></a>ï¼ˆ2ï¼‰éé˜»å¡å‘é€æ¥æ”¶</h5><p>è¿™é‡Œæ‰€è°“çš„éé˜»å¡æ˜¯æŒ‡é€šè¿‡selectçš„defaultè®©ä¸»çº¿ç¨‹è¿›å…¥é»˜è®¤åˆ†æ”¯</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨selectå®ç°é€šé“éé˜»å¡å‘é€æ¥æ”¶</span></span><br><span class="line">messages := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>)</span><br><span class="line">signals := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">bool</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// éé˜»å¡æ¥æ”¶</span></span><br><span class="line"><span class="keyword">select</span>&#123;</span><br><span class="line"><span class="comment">// æˆåŠŸè¯»åˆ°æ•°æ®åˆ°msg</span></span><br><span class="line"><span class="keyword">case</span> msg := &lt;-messages:</span><br><span class="line">fmt.Println(<span class="string">&quot;received message&quot;</span>, msg)</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">fmt.Println(<span class="string">&quot;no message received&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">msg := <span class="string">&quot;hi&quot;</span></span><br><span class="line"><span class="comment">// éé˜»å¡å‘é€</span></span><br><span class="line"><span class="keyword">select</span>&#123;</span><br><span class="line"><span class="comment">// æˆåŠŸå‘é€æ•°æ®åˆ°messages</span></span><br><span class="line"><span class="keyword">case</span> messages &lt;- msg:</span><br><span class="line">fmt.Println(<span class="string">&quot;sent message&quot;</span>, msg)</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">fmt.Println(<span class="string">&quot;no message sent&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> msg := &lt;- messages:</span><br><span class="line">fmt.Println(<span class="string">&quot;received message&quot;</span>, msg)</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> sig := &lt;- signals:</span><br><span class="line">fmt.Println(<span class="string">&quot;received signal&quot;</span>, sig)</span><br><span class="line"></span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">fmt.Println(<span class="string">&quot;no activity&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109080905553.png" alt="image-20210908090500412"></p><h5 id="ï¼ˆ3ï¼‰è¶…æ—¶æ“ä½œ"><a href="#ï¼ˆ3ï¼‰è¶…æ—¶æ“ä½œ" class="headerlink" title="ï¼ˆ3ï¼‰è¶…æ—¶æ“ä½œ"></a>ï¼ˆ3ï¼‰è¶…æ—¶æ“ä½œ</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¶…æ—¶å¯¹äºä¸€ä¸ªéœ€è¦è¿æ¥å¤–éƒ¨èµ„æºï¼Œæˆ–è€…æœ‰è€—æ—¶è¾ƒé•¿çš„æ“ä½œçš„ç¨‹åºè€Œè¨€æ˜¯å¾ˆé‡è¦çš„</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Timeouts</span><span class="params">()</span></span>  &#123;</span><br><span class="line"></span><br><span class="line">c1 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>, <span class="number">1</span>)</span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">time.Sleep(<span class="number">2</span> * time.Second)</span><br><span class="line">c1 &lt;- <span class="string">&quot;res 1&quot;</span></span><br><span class="line"></span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> &#123;</span><br><span class="line"><span class="comment">// ç­‰å¾…ç»“æœ</span></span><br><span class="line"><span class="keyword">case</span> res := &lt;- c1:</span><br><span class="line">fmt.Println(res)</span><br><span class="line"><span class="comment">// ç­‰å¾…è¶…æ—¶åå‘é€çš„å€¼</span></span><br><span class="line"><span class="keyword">case</span> &lt;-time.After(<span class="number">1</span> * time.Second):</span><br><span class="line">fmt.Println(<span class="string">&quot;timeout 1&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-å®šæ—¶å™¨"><a href="#5-å®šæ—¶å™¨" class="headerlink" title="5.å®šæ—¶å™¨"></a>5.å®šæ—¶å™¨</h4><h5 id="ï¼ˆ1ï¼‰å®šæ—¶å™¨Timer"><a href="#ï¼ˆ1ï¼‰å®šæ—¶å™¨Timer" class="headerlink" title="ï¼ˆ1ï¼‰å®šæ—¶å™¨Timer"></a>ï¼ˆ1ï¼‰å®šæ—¶å™¨Timer</h5><p>å®šæ—¶å™¨çš„ä½œç”¨ä¸time.Sleepç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯time.Sleepç¡¬æ€§è§„å®šç­‰å¾…ä¸€å®šæ—¶é—´æ‰èƒ½ç»§ç»­è¿›ç¨‹,è€Œå®šæ—¶å™¨å¯ä»¥åœ¨è§¦å‘å‰å–æ¶ˆæ‰</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Timer</span><span class="params">()</span></span>  &#123;</span><br><span class="line"><span class="comment">// å®šæ—¶å™¨è¡¨ç¤ºåœ¨æœªæ¥æŸä¸€æ—¶åˆ»çš„ç‹¬ç«‹äº‹ä»¶</span></span><br><span class="line">time1 := time.NewTimer(<span class="number">2</span> * time.Second)</span><br><span class="line"></span><br><span class="line"><span class="comment">// é˜»å¡ç›´åˆ°å®šæ—¶å™¨çš„é€šé“Cå‘é€å®šæ—¶å™¨å¤±æ•ˆçš„å€¼</span></span><br><span class="line">&lt;- time1.C</span><br><span class="line">fmt.Println(<span class="string">&quot;Timer 1 fired&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨å®šæ—¶å™¨ä¸time.Sleepä¸åŒä¹‹å¤„åœ¨äº:</span></span><br><span class="line"><span class="comment">// time.Sleepç¡¬æ€§è§„å®šç­‰å¾…ä¸€å®šæ—¶é—´æ‰èƒ½ç»§ç»­è¿›ç¨‹,è€Œå®šæ—¶å™¨å¯ä»¥åœ¨è§¦å‘å‰å–æ¶ˆæ‰</span></span><br><span class="line">time2 := time.NewTimer(time.Second)</span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">&lt;- time2.C</span><br><span class="line">fmt.Println(<span class="string">&quot;Time 2 fired&quot;</span>)</span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœæ­¢å®šæ—¶å™¨</span></span><br><span class="line">stop2 := time2.Stop()</span><br><span class="line"><span class="keyword">if</span> stop2 &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;Timer 2 stopped&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">time.Sleep(<span class="number">2</span> * time.Second)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109081529584.png" alt="image-20210908152938454"></p><h5 id="ï¼ˆ2ï¼‰æ‰“ç‚¹å™¨Ticker"><a href="#ï¼ˆ2ï¼‰æ‰“ç‚¹å™¨Ticker" class="headerlink" title="ï¼ˆ2ï¼‰æ‰“ç‚¹å™¨Ticker"></a>ï¼ˆ2ï¼‰æ‰“ç‚¹å™¨Ticker</h5><p>å®šæ—¶å™¨ç”¨äºæ‰§è¡Œä¸€æ¬¡æ—¶ä½¿ç”¨,è€Œæ‰“ç‚¹å™¨ç”¨äºåœ¨å›ºå®šæ—¶é—´é—´éš”é‡å¤æ‰§è¡Œè€Œå‡†å¤‡</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Ticker</span><span class="params">()</span></span>  &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰æ‰“ç‚¹å™¨</span></span><br><span class="line">ticker := time.NewTicker(<span class="number">500</span> * time.Millisecond)</span><br><span class="line">done := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">bool</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// ä¸æ–­è¿è¡Œ,ç›´åˆ°ä»ä¸»åç¨‹æ¥æ”¶åˆ°done</span></span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line"><span class="keyword">select</span> &#123;</span><br><span class="line"><span class="keyword">case</span> &lt;- done:</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line"><span class="keyword">case</span> t := &lt;- ticker.C:</span><br><span class="line">fmt.Println(<span class="string">&quot;Tick at&quot;</span>, t)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“ç‚¹å™¨ä¸€å…±è¿è¡Œ2000ms,æ¯ä¸€æ¬¡500ms,å¯ä»¥ç²—ç•¥ç®—å‡ºè¿è¡Œ4æ¬¡</span></span><br><span class="line">time.Sleep(<span class="number">2000</span> * time.Millisecond)</span><br><span class="line"><span class="comment">// åœæ­¢æ‰“ç‚¹å™¨å¹¶ç»“æŸå­åç¨‹</span></span><br><span class="line">ticker.Stop()</span><br><span class="line">done &lt;- <span class="literal">true</span></span><br><span class="line">fmt.Println(<span class="string">&quot;Ticker stopped&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109081532259.png" alt="image-20210908153237860"></p><h5 id="ï¼ˆ3ï¼‰é€Ÿç‡é™åˆ¶"><a href="#ï¼ˆ3ï¼‰é€Ÿç‡é™åˆ¶" class="headerlink" title="ï¼ˆ3ï¼‰é€Ÿç‡é™åˆ¶"></a>ï¼ˆ3ï¼‰é€Ÿç‡é™åˆ¶</h5><p>é€Ÿç‡é™åˆ¶æ˜¯æ§åˆ¶æœåŠ¡èµ„æºåˆ©ç”¨å’Œè´¨é‡çš„é‡è¦æœºåˆ¶ã€‚ åŸºäºåç¨‹ã€é€šé“å’Œæ‰“ç‚¹å™¨ï¼ŒGo ä¼˜é›…çš„æ”¯æŒé€Ÿç‡é™åˆ¶</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">RateLimiting</span><span class="params">()</span></span>  &#123;</span><br><span class="line"></span><br><span class="line">requests := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, <span class="number">5</span>)</span><br><span class="line"><span class="keyword">for</span> i:= <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++&#123;</span><br><span class="line">requests &lt;- i</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">close</span>(requests)</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€Ÿç‡é™åˆ¶è°ƒåº¦å™¨è®¾ç½®</span></span><br><span class="line">    <span class="comment">// tickæ˜¯NewTickerçš„å°è£…ï¼Œåªæä¾›å¯¹Tickerçš„é€šé“çš„è®¿é—®</span></span><br><span class="line">limiter := time.Tick(<span class="number">200</span> * time.Millisecond)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> req := <span class="keyword">range</span> requests&#123;</span><br><span class="line"><span class="comment">// è®©è¯·æ±‚æ¯200msæ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">&lt;-limiter</span><br><span class="line">fmt.Println(<span class="string">&quot;request&quot;</span>, req, time.Now())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€Ÿç‡é™åˆ¶æ–¹æ¡ˆå…è®¸çŸ­æš‚çš„å¹¶å‘è¯·æ±‚ï¼Œå¹¶åŒæ—¶ä¿ç•™æ€»ä½“é€Ÿç‡é™åˆ¶</span></span><br><span class="line"><span class="comment">// å¡«å……é€šé“è¡¨ç¤ºå…è®¸çš„çˆ†å‘</span></span><br><span class="line">burstyLimiter := <span class="built_in">make</span>(<span class="keyword">chan</span> time.Time, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¯200msæ–°çš„å€¼åˆ°burstyLimiterä¸­ï¼Œç›´åˆ°è¾¾åˆ° 3 ä¸ªçš„é™åˆ¶ã€‚</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">3</span>; i++&#123;</span><br><span class="line">burstyLimiter &lt;- time.Now()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> t := <span class="keyword">range</span> time.Tick(<span class="number">200</span> * time.Millisecond)&#123;</span><br><span class="line">burstyLimiter &lt;- t</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨¡æ‹Ÿ5ä¸ªä¼ å…¥è¯·æ±‚</span></span><br><span class="line">busstyRequests := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, <span class="number">5</span>)</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++&#123;</span><br><span class="line">busstyRequests &lt;- i</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">close</span>(busstyRequests)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å—ç›ŠäºburstyLimiter çš„çˆ†å‘ï¼ˆburstsï¼‰èƒ½åŠ›ï¼Œå‰ 3 ä¸ªè¯·æ±‚å¯ä»¥å¿«é€Ÿå®Œæˆ</span></span><br><span class="line"><span class="keyword">for</span> req := <span class="keyword">range</span> busstyRequests&#123;</span><br><span class="line">&lt;- burstyLimiter</span><br><span class="line">fmt.Println(<span class="string">&quot;request&quot;</span>, req, time.Now())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="6-Goroutineæ± "><a href="#6-Goroutineæ± " class="headerlink" title="6.Goroutineæ± "></a>6.Goroutineæ± </h4><p>å·¥ä½œæ± å®è´¨ä¸Šæ—¶ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹ï¼Œå…¶å¯ä»¥æœ‰æ•ˆæ§åˆ¶gorouineçš„æ•°é‡</p><p>å·¥ä½œæ± ä¸­æœ‰å·¥äººï¼ˆå¤„ç†å·¥ä½œçš„åç¨‹ï¼‰ï¼Œæœ‰ä¸¤æ¡æµæ°´çº¿ï¼ˆä¼ é€’å·¥ä½œçš„é€šé“ä¸ä¼ é€’ç»“æœçš„é€šé“ï¼‰</p><h5 id="ï¼ˆ1ï¼‰åˆ›å»ºå·¥ä½œæ± "><a href="#ï¼ˆ1ï¼‰åˆ›å»ºå·¥ä½œæ± " class="headerlink" title="ï¼ˆ1ï¼‰åˆ›å»ºå·¥ä½œæ± "></a>ï¼ˆ1ï¼‰åˆ›å»ºå·¥ä½œæ± </h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‚æ•°ï¼šä»»åŠ¡ç¼–å·idï¼Œä»é€šé“æ¥æ”¶å·¥ä½œjobsï¼Œå‘é€ç»“æœåˆ°resé€šé“</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">workers</span><span class="params">(id <span class="keyword">int</span>, jobs &lt;-<span class="keyword">chan</span> <span class="keyword">int</span>, res <span class="keyword">chan</span>&lt;- <span class="keyword">int</span> )</span></span>  &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> j := <span class="keyword">range</span> jobs&#123;</span><br><span class="line"></span><br><span class="line">fmt.Println(<span class="string">&quot;worker&quot;</span>, id, <span class="string">&quot;started job&quot;</span>, j)</span><br><span class="line">time.Sleep(time.Second)</span><br><span class="line">fmt.Println(<span class="string">&quot;worker&quot;</span>, id, <span class="string">&quot;finnished job&quot;</span>, j)</span><br><span class="line">res &lt;- j * <span class="number">2</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ2ï¼‰ä½¿ç”¨å·¥ä½œæ± "><a href="#ï¼ˆ2ï¼‰ä½¿ç”¨å·¥ä½œæ± " class="headerlink" title="ï¼ˆ2ï¼‰ä½¿ç”¨å·¥ä½œæ± "></a>ï¼ˆ2ï¼‰ä½¿ç”¨å·¥ä½œæ± </h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">WorkerPools</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">const</span> numJob = <span class="number">5</span></span><br><span class="line">jobs := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, numJob)</span><br><span class="line">results := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>, numJob)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸‰ä¸ªworkerä»»åŠ¡ï¼ˆåˆå§‹æ—¶é˜»å¡çš„ï¼Œå› ä¸ºè¿˜æ²¡æœ‰ä¼ é€’ä»»åŠ¡ï¼‰</span></span><br><span class="line"><span class="comment">// ä¸‰ä¸ªworkersä»»åŠ¡å¹¶è¡Œæ‰§è¡Œï¼ˆå³å·¥ä½œæ± æœ‰ä¸‰ä½å·¥å…·äººï¼Œä¸¤æ¡æµæ°´çº¿ï¼‰</span></span><br><span class="line"><span class="keyword">for</span> w := <span class="number">1</span>; w &lt;= <span class="number">3</span>; w++&#123;</span><br><span class="line"><span class="keyword">go</span> workers(w, jobs, results)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘é€ä¿¡æ¯åˆ°jobs</span></span><br><span class="line"><span class="keyword">for</span> j := <span class="number">1</span>; j &lt;= numJob; j++&#123;</span><br><span class="line">jobs &lt;- j</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å…³é—­é€šé“ï¼Œè¡¨ç¤ºå‘é€å®Œæ¯•</span></span><br><span class="line"><span class="built_in">close</span>(jobs)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ”¶é›†workerçš„è¿”å›å€¼ï¼Œç¡®ä¿æ‰€æœ‰workeråç¨‹éƒ½å·²ç»å®Œæˆ</span></span><br><span class="line"><span class="keyword">for</span> a := <span class="number">1</span>; a &lt;= numJob; a++&#123;</span><br><span class="line">&lt;-results</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109081546666.png" alt="image-20210908154642399"></p><h4 id="7-Sync"><a href="#7-Sync" class="headerlink" title="7.Sync"></a>7.Sync</h4><h5 id="ï¼ˆ1ï¼‰WaitGroup"><a href="#ï¼ˆ1ï¼‰WaitGroup" class="headerlink" title="ï¼ˆ1ï¼‰WaitGroup"></a>ï¼ˆ1ï¼‰WaitGroup</h5><p>åœ¨å‰é¢çš„ä¾‹å­ä¸­</p><ul><li>ä¸ºäº†åŒæ­¥å­åç¨‹ä¸ä¸»çº¿ç¨‹æˆ‘ä»¬é€šè¿‡ä¼ é€’doneæ¥è®©ä¸»çº¿ç¨‹ç­‰ç­‰å­åç¨‹</li><li>ä¸ºäº†è®©ä¸»çº¿ç¨‹ç­‰å¾…å·¥ä½œæ± å†…çš„å­åç¨‹å®Œæˆä»»åŠ¡æˆ‘ä»¬é€šè¿‡æ”¶é›†è¿”å›ç»“æœæ¥å®ç°åŒæ­¥</li><li>è¿™æ¬¡æˆ‘ä»¬ç”¨ sync.WaitGroupæ¥å®ç°å¹¶å‘ä»»åŠ¡çš„åŒæ­¥ï¼Œå…¶å†…éƒ¨ç»´æŠ¤ç€ä¸€ä¸ªè®¡æ•°å™¨ï¼ˆæ¯ä¸ªè®¡æ•°å™¨å¯¹åº”ä¸€ä¸ªå¹¶å‘ä»»åŠ¡ï¼‰</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// sync.WaitGroupæ¥å®ç°å¹¶å‘ä»»åŠ¡çš„åŒæ­¥ï¼Œå…¶å†…éƒ¨ç»´æŠ¤ç€ä¸€ä¸ªè®¡æ•°å™¨ï¼ˆæ¯ä¸ªè®¡æ•°å™¨å¯¹åº”ä¸€ä¸ªå¹¶å‘ä»»åŠ¡ï¼‰</span></span><br><span class="line"><span class="comment">// WaitGroup å¿…é¡»é€šè¿‡æŒ‡é’ˆä¼ é€’ç»™å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">workerA</span><span class="params">(id <span class="keyword">int</span>, wg *sync.WaitGroup)</span></span>  &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å»¶è¿Ÿè°ƒç”¨wgçš„Doneæ–¹æ³•ï¼ˆç›¸å½“äºç›´åˆ°returnåæ‰æ‰§è¡Œï¼‰ï¼Œè®¡æ•°å™¨å‡1ï¼ˆå½“è®¡æ•°å™¨ä¸º0ï¼Œè¡¨æ˜æ‰€æœ‰çš„å¹¶å‘ä»»åŠ¡å®Œæˆï¼‰</span></span><br><span class="line"><span class="keyword">defer</span> wg.Done()</span><br><span class="line">fmt.Printf(<span class="string">&quot;Worker %d starting\n&quot;</span>, id)</span><br><span class="line">time.Sleep(time.Second)</span><br><span class="line">fmt.Printf(<span class="string">&quot;Worker %d done\n&quot;</span>, id)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">WaitGroup</span><span class="params">()</span></span>  &#123;</span><br><span class="line"><span class="comment">// WaitGroup ç”¨äºç­‰å¾…è¯¥å‡½æ•°å¯åŠ¨çš„æ‰€æœ‰åç¨‹</span></span><br><span class="line"><span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++ &#123;</span><br><span class="line"><span class="comment">// é€’å¢wgè®¡æ•°å™¨</span></span><br><span class="line">wg.Add(<span class="number">1</span>)</span><br><span class="line"><span class="comment">// å¯åŠ¨å¤šä¸ªåç¨‹ä»»åŠ¡ï¼Œå¹¶ä¼ é€’å…¶wgè®¡æ•°å™¨</span></span><br><span class="line"><span class="keyword">go</span> workerA(i, &amp;wg)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é˜»å¡ï¼ˆä¸»åç¨‹ï¼‰è‡³è®¡æ•°å™¨å˜ä¸º0ï¼ˆæ‰€æœ‰å¹¶å‘åç¨‹å·²å®Œæˆï¼‰ç»“æŸ</span></span><br><span class="line">wg.Wait()</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109081630685.png" alt="image-20210908163034514"></p><h4 id="8-å¹¶å‘å®‰å…¨"><a href="#8-å¹¶å‘å®‰å…¨" class="headerlink" title="8.å¹¶å‘å®‰å…¨"></a>8.å¹¶å‘å®‰å…¨</h4><p>åœ¨å·¥ä½œæ± ä¸­æˆ‘ä»¬ä½¿ç”¨é€šé“ä¹‹é—´çš„é€šä¿¡ç®¡ç†çŠ¶æ€ï¼Œä¸‹é¢æˆ‘ä»¬ä½¿ç”¨atomicåŸå­æŠ€æœ¯å’Œäº’æ–¥é”æŠ€æœ¯ç®¡ç†çŠ¶æ€ä¿è¯å¹¶å‘å®‰å…¨</p><p>è¿™é‡Œä»¥å¤šåç¨‹å¹¶å‘è®¿é—®åŒä¸€å˜é‡ä½œä¸ºå¹¶å‘å®‰å…¨é—®é¢˜çš„æ¡ˆä¾‹</p><h5 id="ï¼ˆ1ï¼‰äº’æ–¥é”"><a href="#ï¼ˆ1ï¼‰äº’æ–¥é”" class="headerlink" title="ï¼ˆ1ï¼‰äº’æ–¥é”"></a>ï¼ˆ1ï¼‰äº’æ–¥é”</h5><p>åœ¨ä¸€ä¸ªåç¨‹æ“ä½œå¯¹èµ„æºä¸Šé”ï¼Œå…¶ä»–åç¨‹æ— æ³•è®¿é—®åˆ°è¯¥èµ„æºï¼Œä¿è¯äº†</p><p>åªæœ‰ä¸€ä¸ªåç¨‹å¯ä»¥è®¿é—®å…±äº«èµ„æº</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Mutexes</span><span class="params">()</span></span>  &#123;</span><br><span class="line"><span class="comment">// è®¿é—®å¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> state = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">int</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// mutexåŒæ­¥å¯¹stateçš„è®¿é—®</span></span><br><span class="line"><span class="keyword">var</span> mutex = &amp;sync.Mutex&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿½è¸ªè¯»å†™æ“ä½œçš„æ•°é‡</span></span><br><span class="line"><span class="keyword">var</span> readOps <span class="keyword">uint64</span></span><br><span class="line"><span class="keyword">var</span> writeOps <span class="keyword">uint64</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> r := <span class="number">0</span>; r &lt; <span class="number">100</span>; r++&#123;</span><br><span class="line"><span class="comment">// å¯åŠ¨100ä¸ªåç¨‹åšè¯»å–æ“ä½œï¼Œæ¯ä¸ªåç¨‹ä»¥æ¯ 1ms ä¸€æ¬¡çš„é¢‘ç‡æ¥é‡å¤è¯»å– state</span></span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">total := <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span>&#123;</span><br><span class="line"><span class="comment">// ç”Ÿæˆé”®å¯¹mapè¿›è¡Œè®¿é—®ï¼ˆç”Ÿæˆåœ¨5ä¹‹é—´çš„éšæœºæ•°ï¼‰</span></span><br><span class="line">key := rand.Intn(<span class="number">5</span>)</span><br><span class="line"><span class="comment">// äº’æ–¥é”ä¿è¯è¯¥åç¨‹å¯¹mapç‹¬å è®¿é—®</span></span><br><span class="line">mutex.Lock()</span><br><span class="line"><span class="comment">// è¯»å–é€‰å®šé”®çš„å€¼</span></span><br><span class="line">total += state[key]</span><br><span class="line"><span class="comment">// è§£å¼€äº’æ–¥é”</span></span><br><span class="line">mutex.Unlock()</span><br><span class="line"><span class="comment">// è¯»æ“ä½œå¢åŠ 1</span></span><br><span class="line">atomic.AddUint64(&amp;readOps, <span class="number">1</span>)</span><br><span class="line">time.Sleep(time.Millisecond)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> w := <span class="number">0</span>; w &lt; <span class="number">10</span>; w++&#123;</span><br><span class="line"><span class="comment">// å¯åŠ¨10ä¸ªåç¨‹æ¨¡æ‹Ÿå†™å…¥æ“ä½œ</span></span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// ä¸è¯»å–çš„åç¨‹ç±»ä¼¼</span></span><br><span class="line">key := rand.Intn(<span class="number">5</span>)</span><br><span class="line">val := rand.Intn(<span class="number">100</span>)</span><br><span class="line">mutex.Lock()</span><br><span class="line">state[key] = val</span><br><span class="line">mutex.Unlock()</span><br><span class="line"><span class="comment">// å†™æ“ä½œå¢åŠ 1</span></span><br><span class="line">atomic.AddUint64(&amp;writeOps, <span class="number">1</span>)</span><br><span class="line">time.Sleep(time.Millisecond)</span><br><span class="line"></span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è®©è¿™ 10 ä¸ªåç¨‹å¯¹ state å’Œ mutex çš„æ“ä½œæŒç»­ 1 sï¼ˆä¸»è¿›ç¨‹é˜»å¡ï¼‰</span></span><br><span class="line">time.Sleep(time.Second)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å±•ç¤ºæœ€ç»ˆæ“ä½œæ•°</span></span><br><span class="line">readOpsFinal := atomic.LoadUint64(&amp;readOps)</span><br><span class="line">fmt.Println(<span class="string">&quot;readOps:&quot;</span>, readOpsFinal)</span><br><span class="line">writeOpsFianl := atomic.LoadUint64(&amp;writeOps)</span><br><span class="line">fmt.Println(<span class="string">&quot;writeOps:&quot;</span>, writeOpsFianl)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…³é—­å¯¹stateçš„æ“ä½œï¼Œå±•ç¤ºæœ€åç»“æŸæ—¶çš„state</span></span><br><span class="line">mutex.Lock()</span><br><span class="line">fmt.Println(<span class="string">&quot;state:&quot;</span>, state)</span><br><span class="line">mutex.Unlock()</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109081711312.png" alt="image-20210908171059061"></p><h5 id="ï¼ˆ2ï¼‰atomicï¼ˆåŸå­æ“ä½œï¼‰"><a href="#ï¼ˆ2ï¼‰atomicï¼ˆåŸå­æ“ä½œï¼‰" class="headerlink" title="ï¼ˆ2ï¼‰atomicï¼ˆåŸå­æ“ä½œï¼‰"></a>ï¼ˆ2ï¼‰atomicï¼ˆåŸå­æ“ä½œï¼‰</h5><p>åŠ é”æ“ä½œå› ä¸ºæ¶‰åŠå†…æ ¸æ€çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ä¼šæ¯”è¾ƒè€—æ—¶ã€ä»£ä»·æ¯”è¾ƒé«˜ã€‚é’ˆå¯¹åŸºæœ¬æ•°æ®ç±»å‹æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨åŸå­æ“ä½œæ¥ä¿è¯å¹¶å‘å®‰å…¨</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Atomic</span><span class="params">()</span></span>  &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®åŸå­è®¡æ•°å™¨</span></span><br><span class="line"><span class="keyword">var</span> ops <span class="keyword">uint64</span></span><br><span class="line"><span class="comment">// è®¾ç½®éåŸå­è®¡æ•°å™¨</span></span><br><span class="line"><span class="keyword">var</span> opn <span class="keyword">uint64</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// waitgroupç­‰å¾…åç¨‹å®Œæˆå·¥ä½œ</span></span><br><span class="line"><span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">50</span>; i++&#123;</span><br><span class="line"><span class="comment">// å¢åŠ åç¨‹è®¡æ•°å™¨</span></span><br><span class="line">wg.Add(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼€å¯åç¨‹è¿›è¡ŒåŸå­æ“ä½œ</span></span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> c := <span class="number">0</span>; c &lt; <span class="number">1000</span>; c++&#123;</span><br><span class="line"><span class="comment">// åŸå­æ“ä½œå¢åŠ è®¡æ•°å™¨æ•°å€¼ï¼Œå„åç¨‹æ“ä½œåŒä¸€æ•°æ®æ—¶ä¹‹é—´ä¸ä¼šäº’ç›¸å¹²æ‰°</span></span><br><span class="line">atomic.AddUint64(&amp;ops, <span class="number">1</span>)</span><br><span class="line"><span class="comment">// éåŸå­è®¡æ•°ï¼Œå„åç¨‹ç›¸äº’å¹²æ‰°</span></span><br><span class="line">opn++</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¢åŠ æ“ä½œç»“æŸåï¼Œåç¨‹è®¡æ•°å™¨-1</span></span><br><span class="line">wg.Done()</span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰å¾…ç›´åˆ°æ‰€æœ‰åç¨‹å®Œæˆ</span></span><br><span class="line">wg.Wait()</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®‰å…¨è®¿é—®opsï¼ˆæ­¤æ—¶æ— åç¨‹å†™å…¥å†…å®¹ï¼‰</span></span><br><span class="line"><span class="comment">// æ­¤å¤–atomic.LoadUint64 ä¹‹ç±»çš„å‡½æ•°ï¼Œåœ¨åŸå­æ›´æ–°çš„åŒæ—¶å®‰å…¨åœ°è¯»å–å®ƒä»¬</span></span><br><span class="line">fmt.Println(<span class="string">&quot;ops&quot;</span>, ops)</span><br><span class="line">fmt.Println(<span class="string">&quot;opn&quot;</span>, opn)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109081652041.png" alt="image-20210908165217871"></p><h5 id="ï¼ˆ3ï¼‰çŠ¶æ€åç¨‹"><a href="#ï¼ˆ3ï¼‰çŠ¶æ€åç¨‹" class="headerlink" title="ï¼ˆ3ï¼‰çŠ¶æ€åç¨‹"></a>ï¼ˆ3ï¼‰çŠ¶æ€åç¨‹</h5><p>äº’æ–¥é”ä¸­é€šè¿‡é”å®šè®©stateè·¨å¤šä¸ªgoåç¨‹åŒæ­¥è®¿é—®<br>è¿™é‡Œæˆ‘ä»¬é€šè¿‡å†…å»ºåç¨‹å’Œé€šé“åŒæ­¥çš„ç‰¹æ€§æ¥å®ç°åŒæ ·çš„æ•ˆæœ<br>é€šè¿‡é€šä¿¡ä½¿æ¯ä¸ªæ•°æ®ä»…è¢«å•ä¸ªåç¨‹æ‰€æ‹¥æœ‰ï¼Œå³é€šè¿‡é€šä¿¡å®ç°å…±äº«å†…å­˜</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»“æ„ä½“å°è£…å†™å…¥ä¸è¯»å–çš„è¯·æ±‚</span></span><br><span class="line"><span class="keyword">type</span> readOp <span class="keyword">struct</span> &#123;</span><br><span class="line">key <span class="keyword">int</span></span><br><span class="line">resp <span class="keyword">chan</span> <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> writeOp <span class="keyword">struct</span> &#123;</span><br><span class="line">key <span class="keyword">int</span></span><br><span class="line">value <span class="keyword">int</span></span><br><span class="line">resp <span class="keyword">chan</span> <span class="keyword">bool</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">SatefulGoroutines</span><span class="params">()</span></span>  &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> readOps <span class="keyword">uint64</span></span><br><span class="line"><span class="keyword">var</span> writeOps <span class="keyword">uint64</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºreadOpï¼ŒwriteOpç±»å‹çš„é€šé“</span></span><br><span class="line"><span class="comment">// å…¶ä»–åç¨‹å°†é€šè¿‡ reads å’Œ writes é€šé“æ¥å‘å¸ƒ è¯» å’Œ å†™ è¯·æ±‚</span></span><br><span class="line">reads := <span class="built_in">make</span>(<span class="keyword">chan</span> readOp)</span><br><span class="line">writes := <span class="built_in">make</span>(<span class="keyword">chan</span> writeOp)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‹¥æœ‰stateçš„åç¨‹ï¼ˆç§æœ‰ï¼‰ï¼Œå…¶å¯ä»¥ä¸æ–­æ¥æ”¶è¯»å†™é€šé“çš„ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// stateä¸ºè¯¥åç¨‹ç§æœ‰ï¼Œå…¶ä»–åç¨‹ï¼ˆåŒ…æ‹¬ä¸»åç¨‹éƒ½ä¸èƒ½è®¿é—®ï¼‰</span></span><br><span class="line"><span class="keyword">var</span> state = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">int</span>)</span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line"><span class="keyword">select</span>&#123;</span><br><span class="line"><span class="comment">// å…¶ä»–åç¨‹è¿›è¡Œè¯»æ“ä½œï¼Œè¿”å›mapé”®å¯¹åº”çš„å€¼</span></span><br><span class="line"><span class="keyword">case</span> read := &lt;-reads:</span><br><span class="line">read.resp &lt;- state[read.key]</span><br><span class="line"><span class="comment">// å…¶ä»–åç¨‹è¿›è¡Œå†™æ“ä½œï¼Œè¿”å›æˆåŠŸ</span></span><br><span class="line"><span class="keyword">case</span> write := &lt;-writes:</span><br><span class="line">state[write.key] = write.value</span><br><span class="line">write.resp &lt;- <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯åŠ¨100ä¸ªåç¨‹é€šè¿‡readsé€šé“å‘èµ·è¯»è¯·æ±‚</span></span><br><span class="line"><span class="keyword">for</span> r := <span class="number">0</span>; r &lt; <span class="number">100</span>; r++&#123;</span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span>&#123;</span><br><span class="line"><span class="comment">// æ„é€ readè¯·æ±‚</span></span><br><span class="line">read := readOp&#123;</span><br><span class="line">key: rand.Intn(<span class="number">5</span>),</span><br><span class="line">resp: <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">int</span>),</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// readè¯·æ±‚å‘é€readsé€šé“ä¸­è¿›è¡Œè¯»æ“ä½œ</span></span><br><span class="line">reads &lt;- read</span><br><span class="line"><span class="comment">// é€šè¿‡ç»™å®šçš„respé€šé“æ¥æ”¶ç»“æœ</span></span><br><span class="line">&lt;- read.resp</span><br><span class="line">atomic.AddUint64(&amp;readOps, <span class="number">1</span>)</span><br><span class="line">time.Sleep(time.Millisecond)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥ç›¸åŒæ–¹æ³•å¯åŠ¨10ä¸ªå†™æ“ä½œ</span></span><br><span class="line"><span class="keyword">for</span> w := <span class="number">0</span>; w &lt; <span class="number">10</span>; w++&#123;</span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span>&#123;</span><br><span class="line">write := writeOp&#123;</span><br><span class="line">key: rand.Intn(<span class="number">5</span>),</span><br><span class="line">value: rand.Intn(<span class="number">100</span>),</span><br><span class="line">resp: <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">bool</span>),</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">writes &lt;- write</span><br><span class="line">&lt;- write.resp</span><br><span class="line">atomic.AddUint64(&amp;writeOps, <span class="number">1</span>)</span><br><span class="line">time.Sleep(time.Millisecond)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®©åç¨‹ä»¬è·‘1sï¼ˆé˜»å¡ä¸»åç¨‹ï¼‰</span></span><br><span class="line">time.Sleep(time.Second)</span><br><span class="line">readOpsFinal := atomic.LoadUint64(&amp;readOps)</span><br><span class="line">fmt.Println(<span class="string">&quot;readOps&quot;</span>, readOpsFinal)</span><br><span class="line">writeOpsFinal := atomic.LoadUint64(&amp;writeOps)</span><br><span class="line">fmt.Println(<span class="string">&quot;writeOps&quot;</span>, writeOpsFinal)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109081719227.png" alt="image-20210908171921079"></p><h3 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h3><h4 id="1-è‡ªå®šä¹‰æ’åº"><a href="#1-è‡ªå®šä¹‰æ’åº" class="headerlink" title="1.è‡ªå®šä¹‰æ’åº"></a>1.è‡ªå®šä¹‰æ’åº</h4><p>è¿™é‡Œè‡ªå®šä¹‰æŒ‰å­—ç¬¦ä¸²é•¿åº¦æ’åº</p><p>åŒè¿‡å®ç°goæä¾›çš„sort.Interfaceæ¥å£æ¥å®ç°</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‡ªå®šä¹‰å‡½æ•°å®ç°è‡ªå®šä¹‰æ’åº</span></span><br><span class="line"><span class="keyword">type</span> byLength []<span class="keyword">string</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ç°byLengthç»“æ„ä½“çš„å¯¹è±¡æ˜¯å®ç°äº†sort.Interfaceæ¥å£çš„æ‰€æœ‰æ–¹æ³•</span></span><br><span class="line"><span class="comment">// è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ sort åŒ…çš„é€šç”¨ Sort æ–¹æ³•äº†</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s byLength)</span>  <span class="title">Len</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">len</span>(s)</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s byLength)</span> <span class="title">Swap</span><span class="params">(i, j <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">s[i], s[j] = s[j], s[i]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// lessæ–¹æ³•æ§åˆ¶å®é™…çš„è‡ªå®šä¹‰æ’åºé€»è¾‘</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s byLength)</span> <span class="title">Less</span><span class="params">(i, j <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line"><span class="comment">// æŒ‰é•¿åº¦æ’åºå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">return</span> <span class="built_in">len</span>(s[i]) &lt; <span class="built_in">len</span>(s[j])</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Sorting</span><span class="params">()</span></span>  &#123;</span><br><span class="line">asoul := []<span class="keyword">string</span>&#123;<span class="string">&quot;Ava&quot;</span>, <span class="string">&quot;Bella&quot;</span>, <span class="string">&quot;Eileen&quot;</span>,<span class="string">&quot;Carol&quot;</span>, <span class="string">&quot;Diana&quot;</span>&#125;</span><br><span class="line"><span class="comment">// å°†asoulå¼ºè½¬æ¢ä¸ºbyLengthç±»å‹</span></span><br><span class="line"><span class="comment">// Sortè°ƒç”¨å®ç°ç»“æ„çš„å¯¹è±¡</span></span><br><span class="line">sort.Sort(byLength(asoul))</span><br><span class="line">fmt.Println(asoul)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109081723322.png" alt="image-20210908172335154"></p><h3 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h3><h4 id="1-åŸºæœ¬æ¦‚å¿µ"><a href="#1-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="1.åŸºæœ¬æ¦‚å¿µ"></a>1.åŸºæœ¬æ¦‚å¿µ</h4><p>JSONçš„ç¼–ç è§£ç å³åºåˆ—åŒ–ä¸ååºåˆ—åŒ–</p><p>æˆ‘ä»¬å¸¸ç”¨byteå’Œstringä½œä¸ºæ•°æ®å’Œjsonè¡¨ç¤ºå½¢å¼çš„ä¸­ä»‹</p><p>ç¼–ç è¿‡ç¨‹ï¼šgoçš„å…¶ä»–æ•°æ®ç±»å‹ -&gt; byteï¼ˆå­—èŠ‚æ•°ç»„ï¼‰ -&gt; json</p><p> è§£ç è¿‡ç¨‹ï¼šjson -&gt; byteï¼ˆå­—èŠ‚æ•°ç»„ï¼‰ -&gt; goçš„å…¶ä»–æ•°æ®ç±»å‹ï¼ˆmap[string]interface{} / è‡ªå®šä¹‰ç±»å‹ï¼‰</p><h4 id="2-æ„é€ ç»“æ„ä½“"><a href="#2-æ„é€ ç»“æ„ä½“" class="headerlink" title="2.æ„é€ ç»“æ„ä½“"></a>2.æ„é€ ç»“æ„ä½“</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ„é€ jsonç±»å‹çš„ç»“æ„ä½“</span></span><br><span class="line"><span class="comment">// å¿…é¡»ä»¥å¤§å†™å­—æ¯å¼€å¤´çš„å­—æ®µæ‰æ˜¯å¯å¯¼å‡ºçš„ã€‚</span></span><br><span class="line"><span class="keyword">type</span> res <span class="keyword">struct</span> &#123;</span><br><span class="line">Page <span class="keyword">int</span></span><br><span class="line">Fruits []<span class="keyword">string</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-ç¼–ç "><a href="#3-ç¼–ç " class="headerlink" title="3.ç¼–ç "></a>3.ç¼–ç </h4><p>å°†Goçš„æ•°æ®è½¬æ¢ä¸ºJSONï¼Œgoçš„æ•°æ®åœ¨ç¼–ç åæ˜¯byte[]ç±»å‹ï¼Œæ‰€ä»¥è¦è½¬æ¢æˆstringç±»å‹æ‰èƒ½æ‰“å°å‡ºå­—ç¬¦ä¸²</p><h5 id="ï¼ˆ1ï¼‰mapç±»å‹ç¼–ç "><a href="#ï¼ˆ1ï¼‰mapç±»å‹ç¼–ç " class="headerlink" title="ï¼ˆ1ï¼‰mapç±»å‹ç¼–ç "></a>ï¼ˆ1ï¼‰mapç±»å‹ç¼–ç </h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mapç±»å‹jsonç¼–ç </span></span><br><span class="line">mapD := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>&#123;<span class="string">&quot;apple&quot;</span>:<span class="number">5</span>, <span class="string">&quot;lettuce&quot;</span>:<span class="number">7</span>&#125;</span><br><span class="line">mapB, _ := json.Marshal(mapD)</span><br><span class="line">fmt.Println(<span class="keyword">string</span>(mapB))</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109081736704.png" alt="image-20210908173628386"></p><h5 id="ï¼ˆ2ï¼‰è‡ªå®šä¹‰ç±»å‹ç¼–ç "><a href="#ï¼ˆ2ï¼‰è‡ªå®šä¹‰ç±»å‹ç¼–ç " class="headerlink" title="ï¼ˆ2ï¼‰è‡ªå®šä¹‰ç±»å‹ç¼–ç "></a>ï¼ˆ2ï¼‰è‡ªå®šä¹‰ç±»å‹ç¼–ç </h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»“æ„ä½“å®ä¾‹åŒ–</span></span><br><span class="line"><span class="comment">// ç»“æ„ä½“å®ä¾‹åŒ–èµ‹å€¼æ—¶ï¼Œå¯ä»¥èµ‹äºˆåœ°å€ä¹Ÿå¯ä»¥èµ‹äºˆå€¼ï¼ˆå¾—åˆ°ä¸€æ ·çš„ç»“æœï¼‰</span></span><br><span class="line"><span class="comment">// ä½†æ˜¯èµ‹äºˆåœ°å€å¯ä»¥å‡å°‘ç³»ç»Ÿå¼€é”€</span></span><br><span class="line">res1D := &amp;res&#123;</span><br><span class="line">Page: <span class="number">1</span>,</span><br><span class="line">Fruits: []<span class="keyword">string</span>&#123;<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;peach&quot;</span>, <span class="string">&quot;pear&quot;</span>&#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// jsonå¯è‡ªåŠ¨ç¼–ç è‡ªå®šä¹‰ç±»å‹ï¼Œç¼–ç çš„è¾“å‡ºåªæœ‰å¯å¯¼å‡ºçš„å­—æ®µ</span></span><br><span class="line">res1B, _ := json.Marshal(res1D)</span><br><span class="line">fmt.Println(<span class="keyword">string</span>(res1B))</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109081734771.png" alt="image-20210908173448648"></p><h4 id="4-è§£ç "><a href="#4-è§£ç " class="headerlink" title="4.è§£ç "></a>4.è§£ç </h4><p>å°†JSONè½¬æ¢ä¸ºGoè¯­è¨€å¯ä»¥è¯»å–çš„æ•°æ®ç±»å‹ï¼Œ</p><h5 id="ï¼ˆ1ï¼‰mapç±»å‹æ¥æ”¶"><a href="#ï¼ˆ1ï¼‰mapç±»å‹æ¥æ”¶" class="headerlink" title="ï¼ˆ1ï¼‰mapç±»å‹æ¥æ”¶"></a>ï¼ˆ1ï¼‰mapç±»å‹æ¥æ”¶</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è§£ç è¿‡ç¨‹</span></span><br><span class="line"><span class="comment">// æ„é€ json</span></span><br><span class="line">byt := []<span class="keyword">byte</span>(<span class="string">`&#123;&quot;num&quot;:6.13, &quot;strs&quot;:[&quot;a&quot;, &quot;b&quot;]&#125;`</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æä¾›JsonåŒ…å­˜æ”¾è§£ç æ•°æ®çš„å˜é‡ï¼ˆé”®ä¸ºstringï¼Œå€¼ä¸ºä»»æ„çš„mapï¼‰</span></span><br><span class="line"><span class="keyword">var</span> dat <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹æ•°æ®è¿›è¡Œè§£ç </span></span><br><span class="line"><span class="comment">// ifè¯­å¥è¿›è¡Œé”™è¯¯æ£€æŸ¥</span></span><br><span class="line"><span class="keyword">if</span> err := json.Unmarshal(byt, &amp;dat); err != <span class="literal">nil</span>&#123;</span><br><span class="line"><span class="built_in">panic</span>(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¾“å‡ºè§£ç åçš„dat</span></span><br><span class="line">fmt.Println(dat)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸ºäº†ä½¿ç”¨mapä¸­çš„å€¼ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œæ°å½“çš„ç±»å‹è½¬æ¢</span></span><br><span class="line">num := dat[<span class="string">&quot;num&quot;</span>].(<span class="keyword">float64</span>)</span><br><span class="line">fmt.Println(num)</span><br><span class="line"><span class="comment">// è®¿é—®åµŒå¥—çš„å€¼</span></span><br><span class="line">strs := dat[<span class="string">&quot;strs&quot;</span>].([]<span class="keyword">interface</span>&#123;&#125;)</span><br><span class="line">str1 := strs[<span class="number">1</span>].(<span class="keyword">string</span>)</span><br><span class="line">fmt.Println(str1)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109081743780.png" alt="image-20210908174316707"></p><h5 id="ï¼ˆ2ï¼‰è‡ªå®šä¹‰æ•°æ®ç±»å‹æ¥æ”¶"><a href="#ï¼ˆ2ï¼‰è‡ªå®šä¹‰æ•°æ®ç±»å‹æ¥æ”¶" class="headerlink" title="ï¼ˆ2ï¼‰è‡ªå®šä¹‰æ•°æ®ç±»å‹æ¥æ”¶"></a>ï¼ˆ2ï¼‰è‡ªå®šä¹‰æ•°æ®ç±»å‹æ¥æ”¶</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°†jsonè§£ç ä¸ºè‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼ˆå¢åŠ ç±»å‹å®‰å…¨æ€§ï¼‰,æ¨èçš„è§£ç æ–¹å¼</span></span><br><span class="line"><span class="comment">// ``å¯ä»¥å®šä¹‰å­—ç¬¦ä¸²ï¼Œä¸”å…¶å†…å¯ä»¥æœ‰åŒå¼•å·&quot;&quot;</span></span><br><span class="line">str := <span class="string">`&#123;&quot;page&quot;: 1, &quot;fruits&quot;: [&quot;apple&quot;, &quot;peach&quot;]&#125;`</span></span><br><span class="line">fmt.Println(reflect.TypeOf(str))</span><br><span class="line"></span><br><span class="line">res := res&#123;&#125;</span><br><span class="line"><span class="comment">// å°†strè½¬æ¢ä¸ºbyteæ•°ç»„ç±»å‹ï¼Œåå°†å…¶è§£ç æ”¾åœ¨resç±»å‹çš„ç»“æ„ä½“ä¸­</span></span><br><span class="line">json.Unmarshal([]<span class="keyword">byte</span>(str), &amp;res)</span><br><span class="line">fmt.Println(res)</span><br><span class="line">fmt.Println(res.Fruits[<span class="number">0</span>])</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109081744858.png" alt="image-20210908174428706"></p><h5 id="ï¼ˆ3ï¼‰Encodeæ¥æ”¶"><a href="#ï¼ˆ3ï¼‰Encodeæ¥æ”¶" class="headerlink" title="ï¼ˆ3ï¼‰Encodeæ¥æ”¶"></a>ï¼ˆ3ï¼‰Encodeæ¥æ”¶</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æˆ‘ä»¬è¿˜å¯ä»¥å°†os.Stdout ä¸€æ ·ç›´æ¥å°† JSON ç¼–ç æµä¼ è¾“åˆ° os.Writer ç”šè‡³ HTTP å“åº”ä½“</span></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªå°†æ•°æ®å†™å…¥*Encoderï¼ˆå¯ä»¥æ¥æ”¶ä¿¡æ¯ï¼‰</span></span><br><span class="line">enc := json.NewEncoder(os.Stdout)</span><br><span class="line">d := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>&#123;<span class="string">&quot;apple&quot;</span>: <span class="number">5</span>, <span class="string">&quot;lettuce&quot;</span>: <span class="number">7</span>&#125;</span><br><span class="line"><span class="comment">// å°†jsonç¼–ç å†™å…¥è¾“å‡ºæµè¾“å‡º</span></span><br><span class="line">enc.Encode(d)</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109081745019.png" alt="image-20210908174505894"></p><h3 id="å•å…ƒæµ‹è¯•"><a href="#å•å…ƒæµ‹è¯•" class="headerlink" title="å•å…ƒæµ‹è¯•"></a>å•å…ƒæµ‹è¯•</h3><h4 id="1-å•å…ƒæµ‹è¯•å‘½åè§„åˆ™"><a href="#1-å•å…ƒæµ‹è¯•å‘½åè§„åˆ™" class="headerlink" title="1.å•å…ƒæµ‹è¯•å‘½åè§„åˆ™"></a>1.å•å…ƒæµ‹è¯•å‘½åè§„åˆ™</h4><ul><li>æ–‡ä»¶åå¿…é¡»ä»¥xx_test.goå‘½å</li><li>æ–¹æ³•å¿…é¡»æ˜¯Testå¼€å¤´</li><li>æ–¹æ³•å‚æ•°å¿…é¡» t *testing.T</li><li>æµ‹è¯•ä¾‹ä¸è¢«æµ‹è¯•å¯¹è±¡è¦æ”¾åœ¨ä¸€ä¸ªåŒ…ä¸­</li><li>ä½¿ç”¨go testæ‰§è¡Œå•å…ƒæµ‹è¯•ï¼ˆideaå¯ä»¥ç›´æ¥è¿è¡Œæµ‹è¯•ä¾‹ï¼‰</li></ul><h4 id="2-è¢«æµ‹å¯¹è±¡"><a href="#2-è¢«æµ‹å¯¹è±¡" class="headerlink" title="2.è¢«æµ‹å¯¹è±¡"></a>2.è¢«æµ‹å¯¹è±¡</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// IntMin ä¸»ç¨‹åº</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">IntMin</span><span class="params">(a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> a &lt; b&#123;</span><br><span class="line"><span class="keyword">return</span> a</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">return</span> b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-ä¸€èˆ¬æµ‹è¯•ä¾‹"><a href="#3-ä¸€èˆ¬æµ‹è¯•ä¾‹" class="headerlink" title="3.ä¸€èˆ¬æµ‹è¯•ä¾‹"></a>3.ä¸€èˆ¬æµ‹è¯•ä¾‹</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// TestIntMinBasic æµ‹è¯•ç¨‹åº</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestIntMinBasic</span><span class="params">(t *testing.T)</span></span>  &#123;</span><br><span class="line"></span><br><span class="line">ans := IntMin(<span class="number">2</span>, <span class="number">-2</span>)</span><br><span class="line"><span class="keyword">if</span> ans != <span class="number">-2</span>&#123;</span><br><span class="line"><span class="comment">// t.Error*ä¼šæŠ¥å‘Šæµ‹è¯•å¤±è´¥çš„ä¿¡æ¯ï¼Œç„¶åç«‹å³ç»ˆæ­¢æµ‹è¯•</span></span><br><span class="line"><span class="comment">// t.Fail*ä¼šæŠ¥å‘Šæµ‹è¯•å¤±è´¥çš„ä¿¡æ¯ï¼Œç„¶åç«‹å³ç»ˆæ­¢æµ‹è¯•</span></span><br><span class="line">t.Errorf(<span class="string">&quot;IntMin(2, -2) = %d; want -2&quot;</span>, ans)</span><br><span class="line">&#125; <span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line">fmt.Println(ans)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-è¡¨é©±åŠ¨æµ‹è¯•ä¾‹"><a href="#4-è¡¨é©±åŠ¨æµ‹è¯•ä¾‹" class="headerlink" title="4.è¡¨é©±åŠ¨æµ‹è¯•ä¾‹"></a>4.è¡¨é©±åŠ¨æµ‹è¯•ä¾‹</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// TestIntMinTableDriven å•å…ƒæµ‹è¯•å¯ä»¥é‡å¤ï¼Œæ‰€ä»¥ä¼šç»å¸¸ä½¿ç”¨è¡¨é©±åŠ¨é£æ ¼ç¼–å†™å•å…ƒæµ‹è¯•</span></span><br><span class="line"><span class="comment">// è¡¨ä¸­åˆ—å‡ºäº†è¾“å…¥æ•°æ®ï¼Œé¢„æœŸè¾“å‡ºï¼Œä½¿ç”¨å¾ªç¯ï¼Œéå†å¹¶æ‰§è¡Œæµ‹è¯•é€»è¾‘</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestIntMinTableDriven</span><span class="params">(t *testing.T)</span></span>  &#123;</span><br><span class="line"><span class="keyword">var</span> tests = []<span class="keyword">struct</span> &#123;</span><br><span class="line">a, b <span class="keyword">int</span></span><br><span class="line">want <span class="keyword">int</span></span><br><span class="line">&#125;&#123;</span><br><span class="line">&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>&#125;,</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>&#125;,</span><br><span class="line">&#123;<span class="number">2</span>, <span class="number">-2</span>, <span class="number">-2</span>&#125;,</span><br><span class="line">&#123;<span class="number">0</span>, <span class="number">-1</span>, <span class="number">-1</span>&#125;,</span><br><span class="line">&#123;<span class="number">-1</span>, <span class="number">0</span>, <span class="number">-1</span>&#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _, tt := <span class="keyword">range</span> tests &#123;</span><br><span class="line"></span><br><span class="line">testname := fmt.Sprintf(<span class="string">&quot;%d, %d&quot;</span>, tt.a, tt.b)</span><br><span class="line"><span class="comment">// t.Runè¿è¡Œä¸€ä¸ªå­æµ‹è¯•ï¼Œæ¯ä¸€ä¸ªå­æµ‹è¯•å¯¹åº”è¡¨ä¸­ä¸€è¡Œæ•°æ®</span></span><br><span class="line">t.Run(testname, <span class="function"><span class="keyword">func</span><span class="params">(t *testing.T)</span></span>&#123;</span><br><span class="line">ans := IntMin(tt.a, tt.b)</span><br><span class="line"><span class="keyword">if</span> ans != tt.want&#123;</span><br><span class="line">t.Errorf(<span class="string">&quot;got %d, want %d&quot;</span>, ans, tt.want)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="HTTPå®¢æˆ·ç«¯"><a href="#HTTPå®¢æˆ·ç«¯" class="headerlink" title="HTTPå®¢æˆ·ç«¯"></a>HTTPå®¢æˆ·ç«¯</h3><h4 id="1-GETè¯·æ±‚"><a href="#1-GETè¯·æ±‚" class="headerlink" title="1.GETè¯·æ±‚"></a>1.GETè¯·æ±‚</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// goå‘æœåŠ¡ç«¯å‘é€GETè¯·æ±‚</span></span><br><span class="line"></span><br><span class="line">resp1, err := http.Get(<span class="string">&quot;https://search.bilibili.com/&quot;</span>)</span><br><span class="line"><span class="comment">// æ•æ‰é”™è¯¯</span></span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span>&#123;</span><br><span class="line"><span class="built_in">panic</span>(err)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å»¶è¿Ÿå…³é—­è¯·æ±‚æœåŠ¡</span></span><br><span class="line"><span class="keyword">defer</span> resp1.Body.Close()</span><br><span class="line"></span><br><span class="line">fmt.Println(resp1)</span><br><span class="line"><span class="comment">// æ‰“å°è¿”å›çš„è¯·æ±‚çŠ¶æ€</span></span><br><span class="line">fmt.Println(<span class="string">&quot;Response status&quot;</span>, resp1.Status)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“å°å“åº”çš„å†…å®¹</span></span><br><span class="line"><span class="comment">// ä½¿ç”¨ioutilè¯»å–æ•°æ®ï¼ˆè¯»å–è¿”å›çš„æ˜¯å­—èŠ‚æ•°ç»„ï¼‰</span></span><br><span class="line">body, err := ioutil.ReadAll(resp1.Body)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">fmt.Println(err)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(<span class="keyword">string</span>(body))</span><br></pre></td></tr></table></figure><h4 id="2-å¸¦å‚æ•°GETè¯·æ±‚"><a href="#2-å¸¦å‚æ•°GETè¯·æ±‚" class="headerlink" title="2.å¸¦å‚æ•°GETè¯·æ±‚"></a>2.å¸¦å‚æ•°GETè¯·æ±‚</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// goå‘æœåŠ¡ç«¯å‘é€å¸¦å‚æ•°GETè¯·æ±‚</span></span><br><span class="line">apiurl := <span class="string">&quot;https://search.bilibili.com/all&quot;</span></span><br><span class="line"><span class="comment">// æ„é€ getè¯·æ±‚è¡¨å•</span></span><br><span class="line">data := url.Values&#123;&#125;</span><br><span class="line">data.Set(<span class="string">&quot;keyword&quot;</span>, <span class="string">&quot;Autovy&quot;</span>)</span><br><span class="line">data.Set(<span class="string">&quot;from_source&quot;</span>, <span class="string">&quot;webtop_search&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“åˆå‚æ•°æ„é€ è¯·æ±‚ç»“æ„ä½“</span></span><br><span class="line">u, err := url.ParseRequestURI(apiurl)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">fmt.Println(err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// urlç¼–ç </span></span><br><span class="line">u.RawQuery = data.Encode()</span><br><span class="line"><span class="comment">// ç”Ÿæˆå¸¦å‚æ•°url</span></span><br><span class="line">fmt.Println(u.String())</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿›è¡Œhttpè¯·æ±‚ï¼ˆä¸‹é¢çš„æ­¥éª¤ä¸ä¸€èˆ¬çš„getè¯·æ±‚ä¸€è‡´ï¼‰</span></span><br><span class="line"><span class="comment">// å…¶å®ä¹Ÿå¯ä»¥æŠŠå¸¦å‚æ•°çš„urlç›´æ¥è¿›è¡Œè¯·æ±‚ğŸ˜…</span></span><br><span class="line">resp2, err := http.Get(u.String())</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;post failed, err:%v\n&quot;</span>, err)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">defer</span> resp2.Body.Close()</span><br><span class="line"></span><br><span class="line">b, err := ioutil.ReadAll(resp2.Body)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;get resp failed,err:%v\n&quot;</span>, err)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(<span class="keyword">string</span>(b))</span><br></pre></td></tr></table></figure><h4 id="3-POSTè¯·æ±‚"><a href="#3-POSTè¯·æ±‚" class="headerlink" title="3.POSTè¯·æ±‚"></a>3.POSTè¯·æ±‚</h4><h5 id="ï¼ˆ1ï¼‰å‘é€from-data"><a href="#ï¼ˆ1ï¼‰å‘é€from-data" class="headerlink" title="ï¼ˆ1ï¼‰å‘é€from-data"></a>ï¼ˆ1ï¼‰å‘é€from-data</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ„é€ è¡¨å•</span></span><br><span class="line">data2 := url.Values&#123;</span><br><span class="line"><span class="string">&quot;name&quot;</span>:       &#123;<span class="string">&quot;Autovy&quot;</span>&#125;,</span><br><span class="line"><span class="string">&quot;occupation&quot;</span>: &#123;<span class="string">&quot;programmar&quot;</span>&#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘é€è¡¨å•</span></span><br><span class="line">resp, err := http.PostForm(<span class="string">&quot;https://httpbin.org/post&quot;</span>, data2)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ•æ‰å¼‚å¸¸</span></span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="built_in">panic</span>(err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§£ç è¿”å›çš„ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">var</span> res <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">json.NewDecoder(resp.Body).Decode(&amp;res)</span><br><span class="line">fmt.Println(res[<span class="string">&quot;form&quot;</span>])</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109082013606.png" alt="image-20210908201313448"></p><h5 id="ï¼ˆ2ï¼‰å‘é€json"><a href="#ï¼ˆ2ï¼‰å‘é€json" class="headerlink" title="ï¼ˆ2ï¼‰å‘é€json"></a>ï¼ˆ2ï¼‰å‘é€json</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ„é€ jsonæ•°æ®</span></span><br><span class="line">values := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span>&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;Ava&quot;</span>, <span class="string">&quot;occupation&quot;</span>: <span class="string">&quot;Gamer&quot;</span>&#125;</span><br><span class="line">json_data, err := json.Marshal(values)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="built_in">panic</span>(err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// postå‘é€jsonæ•°æ®</span></span><br><span class="line">resp3, err := http.Post(<span class="string">&quot;https://httpbin.org/post&quot;</span>, <span class="string">&quot;application/json&quot;</span>, bytes.NewBuffer(json_data))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="built_in">panic</span>(err)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§£ç è¿”å›ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">var</span> res2 <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">json.NewDecoder(resp3.Body).Decode(&amp;res2)</span><br><span class="line">fmt.Println(res2[<span class="string">&quot;json&quot;</span>])</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109082013186.png" alt="image-20210908201329065"></p><h3 id="HTTPæœåŠ¡ç«¯"><a href="#HTTPæœåŠ¡ç«¯" class="headerlink" title="HTTPæœåŠ¡ç«¯"></a>HTTPæœåŠ¡ç«¯</h3><p>æœåŠ¡ç«¯æ„é€ å¤„ç†è¯·æ±‚çš„å‡½æ•°handler</p><p>handler å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œhttp.ResponseWriter å’Œ http.Request</p><h4 id="1-æ™®é€šæœåŠ¡"><a href="#1-æ™®é€šæœåŠ¡" class="headerlink" title="1.æ™®é€šæœåŠ¡"></a>1.æ™®é€šæœåŠ¡</h4><h5 id="ï¼ˆ1ï¼‰å¤„ç†httpè¯·æ±‚"><a href="#ï¼ˆ1ï¼‰å¤„ç†httpè¯·æ±‚" class="headerlink" title="ï¼ˆ1ï¼‰å¤„ç†httpè¯·æ±‚"></a>ï¼ˆ1ï¼‰å¤„ç†httpè¯·æ±‚</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  æˆ‘ä»¬éœ€è¦è¯»å–çš„ HTTP è¯·æ±‚ header ä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œå¹¶å°†ä»–ä»¬è¾“å‡ºè‡³ response body</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">headers</span><span class="params">(w http.ResponseWriter, req *http.Request)</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> name, headers := <span class="keyword">range</span> req.Header &#123;</span><br><span class="line"><span class="keyword">for</span> _, h := <span class="keyword">range</span> headers &#123;</span><br><span class="line">fmt.Fprintf(w, <span class="string">&quot;%v: %v\n&quot;</span>, name, h)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ2ï¼‰å‡½æ•°æ³¨å†Œåˆ°è·¯ç”±"><a href="#ï¼ˆ2ï¼‰å‡½æ•°æ³¨å†Œåˆ°è·¯ç”±" class="headerlink" title="ï¼ˆ2ï¼‰å‡½æ•°æ³¨å†Œåˆ°è·¯ç”±"></a>ï¼ˆ2ï¼‰å‡½æ•°æ³¨å†Œåˆ°è·¯ç”±</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http.HandleFunc(<span class="string">&quot;/headers&quot;</span>, headers)</span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆ‘ä»¬è°ƒç”¨ ListenAndServe å¹¶å¸¦ä¸Šç«¯å£å’Œ handlerã€‚nilè¡¨ç¤ºä½¿ç”¨æˆ‘ä»¬åˆšåˆšè®¾ç½®çš„é»˜è®¤è·¯ç”±å™¨</span></span><br><span class="line">http.ListenAndServe(<span class="string">&quot;:8090&quot;</span>, <span class="literal">nil</span>)</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109081934116.png" alt="image-20210908193457887"></p><h4 id="2-æ¥å—GETè¯·æ±‚å‚æ•°"><a href="#2-æ¥å—GETè¯·æ±‚å‚æ•°" class="headerlink" title="2.æ¥å—GETè¯·æ±‚å‚æ•°"></a>2.æ¥å—GETè¯·æ±‚å‚æ•°</h4><h5 id="ï¼ˆ1ï¼‰å¤„ç†getè¯·æ±‚"><a href="#ï¼ˆ1ï¼‰å¤„ç†getè¯·æ±‚" class="headerlink" title="ï¼ˆ1ï¼‰å¤„ç†getè¯·æ±‚"></a>ï¼ˆ1ï¼‰å¤„ç†getè¯·æ±‚</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¤„ç†å¸¦å‚æ•°çš„getè¯·æ±‚</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getHandler</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span>  &#123;</span><br><span class="line"><span class="comment">// å»¶è¿Ÿå…³é—­å“åº”</span></span><br><span class="line"><span class="keyword">defer</span> r.Body.Close()</span><br><span class="line"><span class="comment">// æ¥å—urlçš„å‚æ•°</span></span><br><span class="line">data := r.URL.Query()</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡ºå†…å®¹åˆ°é¡µé¢</span></span><br><span class="line">answer := <span class="string">`&#123;&quot;status&quot; : &quot;ok&quot;&#125;`</span></span><br><span class="line">w.Write([]<span class="keyword">byte</span>(answer))</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–è¯·æ±‚é“¾æ¥ä¸­çš„å‚æ•°</span></span><br><span class="line">fmt.Fprintln( w ,data.Get(<span class="string">&quot;name&quot;</span>))</span><br><span class="line">fmt.Fprintln( w ,data.Get(<span class="string">&quot;age&quot;</span>))</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ2ï¼‰å‡½æ•°æ³¨å†Œåˆ°è·¯ç”±-1"><a href="#ï¼ˆ2ï¼‰å‡½æ•°æ³¨å†Œåˆ°è·¯ç”±-1" class="headerlink" title="ï¼ˆ2ï¼‰å‡½æ•°æ³¨å†Œåˆ°è·¯ç”±"></a>ï¼ˆ2ï¼‰å‡½æ•°æ³¨å†Œåˆ°è·¯ç”±</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http.HandleFunc(<span class="string">&quot;/get&quot;</span>, getHandler)</span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆ‘ä»¬è°ƒç”¨ ListenAndServe å¹¶å¸¦ä¸Šç«¯å£å’Œ handlerã€‚nilè¡¨ç¤ºä½¿ç”¨æˆ‘ä»¬åˆšåˆšè®¾ç½®çš„é»˜è®¤è·¯ç”±å™¨</span></span><br><span class="line">http.ListenAndServe(<span class="string">&quot;:8090&quot;</span>, <span class="literal">nil</span>)</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109081941217.png" alt="image-20210908194148189"></p><h4 id="3-æ¥å—POSTè¯·æ±‚å‚æ•°"><a href="#3-æ¥å—POSTè¯·æ±‚å‚æ•°" class="headerlink" title="3.æ¥å—POSTè¯·æ±‚å‚æ•°"></a>3.æ¥å—POSTè¯·æ±‚å‚æ•°</h4><h5 id="ï¼ˆ1ï¼‰å¤„ç†postè¯·æ±‚å‡½æ•°"><a href="#ï¼ˆ1ï¼‰å¤„ç†postè¯·æ±‚å‡½æ•°" class="headerlink" title="ï¼ˆ1ï¼‰å¤„ç†postè¯·æ±‚å‡½æ•°"></a>ï¼ˆ1ï¼‰å¤„ç†postè¯·æ±‚å‡½æ•°</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// postè¯·æ±‚</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">postHandler</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span>  &#123;</span><br><span class="line"><span class="keyword">defer</span> r.Body.Close()</span><br><span class="line"><span class="comment">// è¯·æ±‚ç±»å‹ä¸ºapplication/x-www-form-urlencodedæ—¶è§£æformæ•°æ®</span></span><br><span class="line">r.ParseForm()</span><br><span class="line"><span class="comment">// æ‰“å°formæ•°æ®</span></span><br><span class="line">fmt.Println(r.PostForm)</span><br><span class="line">fmt.Println(r.PostForm.Get(<span class="string">&quot;name&quot;</span>), r.PostForm.Get(<span class="string">&quot;age&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. è¯·æ±‚ç±»å‹æ˜¯application/jsonæ—¶ä»r.Bodyè¯»å–æ•°æ®</span></span><br><span class="line">b, err := ioutil.ReadAll(r.Body)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">fmt.Println(err)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fmt.Fprintln(w, <span class="keyword">string</span>(b))</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ2ï¼‰å‡½æ•°æ³¨å†Œåˆ°è·¯ç”±-2"><a href="#ï¼ˆ2ï¼‰å‡½æ•°æ³¨å†Œåˆ°è·¯ç”±-2" class="headerlink" title="ï¼ˆ2ï¼‰å‡½æ•°æ³¨å†Œåˆ°è·¯ç”±"></a>ï¼ˆ2ï¼‰å‡½æ•°æ³¨å†Œåˆ°è·¯ç”±</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http.HandleFunc(<span class="string">&quot;/post&quot;</span>, postHandler)</span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆ‘ä»¬è°ƒç”¨ ListenAndServe å¹¶å¸¦ä¸Šç«¯å£å’Œ handlerã€‚nilè¡¨ç¤ºä½¿ç”¨æˆ‘ä»¬åˆšåˆšè®¾ç½®çš„é»˜è®¤è·¯ç”±å™¨</span></span><br><span class="line">http.ListenAndServe(<span class="string">&quot;:8090&quot;</span>, <span class="literal">nil</span>)</span><br></pre></td></tr></table></figure><h5 id="ï¼ˆ3ï¼‰è¯·æ±‚ç±»å‹ä¸ºapplication-x-www-form-urlencoded"><a href="#ï¼ˆ3ï¼‰è¯·æ±‚ç±»å‹ä¸ºapplication-x-www-form-urlencoded" class="headerlink" title="ï¼ˆ3ï¼‰è¯·æ±‚ç±»å‹ä¸ºapplication/x-www-form-urlencoded"></a>ï¼ˆ3ï¼‰è¯·æ±‚ç±»å‹ä¸ºapplication/x-www-form-urlencoded</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109070739852.png" alt="image-20210907073940923"></p><p>è¿è¡Œç»“æœï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109070740152.png" alt="image-20210907074031817"></p><h5 id="ï¼ˆ3ï¼‰è¯·æ±‚ç±»å‹ä¸ºapplication-json"><a href="#ï¼ˆ3ï¼‰è¯·æ±‚ç±»å‹ä¸ºapplication-json" class="headerlink" title="ï¼ˆ3ï¼‰è¯·æ±‚ç±»å‹ä¸ºapplication/json"></a>ï¼ˆ3ï¼‰è¯·æ±‚ç±»å‹ä¸ºapplication/json</h5><p>æœåŠ¡ç«¯å¯ä»¥è¿›è¡Œååºåˆ—åŒ–æ“ä½œå¾—åˆ°jsonå†…çš„æ•°æ®</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109070744119.png" alt="image-20210907074448963"></p><h3 id="ç»“æŸ"><a href="#ç»“æŸ" class="headerlink" title="ç»“æŸ"></a>ç»“æŸ</h3><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109082024169.jpg" alt="cute"></p><p>å¿«ä¹ç”Ÿæ´»ï¼Œå¿«ä¹å·¥ä½œï¼Œå¿«ä¹å­¦ä¹ </p><p><code>os.Exit(1)</code></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109070837021.jpeg&quot; alt=&quot;img&quot;&gt;&lt;/p&gt;
&lt;p&gt;Goçš„å‰ç¥¥ç‰©Gopherä¹Ÿå¤ªå¯çˆ±äº†å­ï¼ï¼ï¼&lt;/p&gt;
    
    </summary>
    
    
      <category term="Go" scheme="https://autovy.github.io/categories/Go/"/>
    
    
      <category term="å…¥é—¨æ•™ç¨‹" scheme="https://autovy.github.io/tags/%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/"/>
    
      <category term="åç«¯" scheme="https://autovy.github.io/tags/%E5%90%8E%E7%AB%AF/"/>
    
      <category term="Go" scheme="https://autovy.github.io/tags/Go/"/>
    
      <category term="é¢å‘æ¥å£" scheme="https://autovy.github.io/tags/%E9%9D%A2%E5%90%91%E6%8E%A5%E5%8F%A3/"/>
    
      <category term="å¹¶å‘ç¼–ç¨‹" scheme="https://autovy.github.io/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>PHP|è¯¾é¢˜ç”³æŠ¥ç³»ç»Ÿå¼€å‘(Vue+TP)</title>
    <link href="https://autovy.github.io/2021/07/15/PHP/PHP-%E8%AF%BE%E9%A2%98%E7%94%B3%E6%8A%A5%E7%B3%BB%E7%BB%9F%E5%BC%80%E5%8F%91(Vue+TP)/"/>
    <id>https://autovy.github.io/2021/07/15/PHP/PHP-%E8%AF%BE%E9%A2%98%E7%94%B3%E6%8A%A5%E7%B3%BB%E7%BB%9F%E5%BC%80%E5%8F%91(Vue+TP)/</id>
    <published>2021-07-15T06:30:00.000Z</published>
    <updated>2021-09-04T15:21:24.613Z</updated>
    
    <content type="html"><![CDATA[<img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109042317087.png" alt="image-20210904231657416" style="zoom:150%;"><p>æ”¯æŒå›½äº§ğŸ˜‡</p><span id="more"></span><h3 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h3><h4 id="1-é¡¹ç›®å¯åŠ¨"><a href="#1-é¡¹ç›®å¯åŠ¨" class="headerlink" title="1.é¡¹ç›®å¯åŠ¨"></a>1.é¡¹ç›®å¯åŠ¨</h4><h5 id="å®‰è£…ä¾èµ–åŒ…"><a href="#å®‰è£…ä¾èµ–åŒ…" class="headerlink" title="å®‰è£…ä¾èµ–åŒ…"></a>å®‰è£…ä¾èµ–åŒ…</h5><p>Vueçš„ä¾èµ–æ–‡ä»¶æ˜¯package.jsonï¼Œå…¶åˆ†ä¸ºä¸¤éƒ¨åˆ†</p><ul><li><p>å…¨éƒ¨å®‰è£…ï¼ˆä¸€èˆ¬ç”¨è¿™ä¸ªï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>åªå®‰è£…dependenciesé‡Œçš„å†…å®¹ï¼ˆç”Ÿäº§ç¯å¢ƒä¾èµ–ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --dependencies</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>åªå®‰è£…devDependenciesï¼ˆå¼€å‘ç¯å¢ƒä¾èµ–ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --devDependencies</span><br></pre></td></tr></table></figure></li></ul><h5 id="åˆ é™¤å…¨éƒ¨ä¾èµ–"><a href="#åˆ é™¤å…¨éƒ¨ä¾èµ–" class="headerlink" title="åˆ é™¤å…¨éƒ¨ä¾èµ–"></a>åˆ é™¤å…¨éƒ¨ä¾èµ–</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall</span><br></pre></td></tr></table></figure><h5 id="ç”Ÿæˆä¾èµ–æ–‡ä»¶package-json"><a href="#ç”Ÿæˆä¾èµ–æ–‡ä»¶package-json" class="headerlink" title="ç”Ÿæˆä¾èµ–æ–‡ä»¶package.json"></a>ç”Ÿæˆä¾èµ–æ–‡ä»¶package.json</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br></pre></td></tr></table></figure><h5 id="å¯åŠ¨é¡¹ç›®"><a href="#å¯åŠ¨é¡¹ç›®" class="headerlink" title="å¯åŠ¨é¡¹ç›®"></a>å¯åŠ¨é¡¹ç›®</h5><p>å¯åŠ¨é¡¹ç›®çš„å‘½ä»¤éœ€è¦çœ‹package.jsonæ–‡ä»¶</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041953941.png" alt="image-20210904195358015"></p><p>æ‰€ä»¥è¦ç”¨<code>npm run dev</code>å¯åŠ¨é¡¹ç›®</p><h4 id="2-ç™»å½•é¡µé¢è§£æ"><a href="#2-ç™»å½•é¡µé¢è§£æ" class="headerlink" title="2.ç™»å½•é¡µé¢è§£æ"></a>2.ç™»å½•é¡µé¢è§£æ</h4><h5 id="refè®¿é—®å­ç»„ä»¶å®ä¾‹ä¸å…ƒç´ "><a href="#refè®¿é—®å­ç»„ä»¶å®ä¾‹ä¸å…ƒç´ " class="headerlink" title="refè®¿é—®å­ç»„ä»¶å®ä¾‹ä¸å…ƒç´ "></a>refè®¿é—®å­ç»„ä»¶å®ä¾‹ä¸å…ƒç´ </h5><p>vueçš„refæœ‰ç±»ä¼¼äºhtmlçš„idçš„åŠŸèƒ½ï¼Œå¯ä»¥ç”¨æ¥ç»™jsè®¿é—®å­ç»„ä»¶å®ä¾‹æˆ–å…ƒç´ </p><p><strong>html</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">base-input</span> <span class="attr">ref</span>=<span class="string">&quot;usernameInput&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">base-input</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>Vue</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.$refs.usernameInput </span><br></pre></td></tr></table></figure><p>è¿™æ ·å³å¯è®¿é—®åˆ°è¾“å…¥æ¡†çš„å†…å®¹</p><h5 id="ç»„ä»¶çš„å±æ€§å’Œæ–¹æ³•"><a href="#ç»„ä»¶çš„å±æ€§å’Œæ–¹æ³•" class="headerlink" title="ç»„ä»¶çš„å±æ€§å’Œæ–¹æ³•"></a>ç»„ä»¶çš„å±æ€§å’Œæ–¹æ³•</h5><p><strong>html</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">Form</span> <span class="attr">ref</span>=<span class="string">&quot;loginForm&quot;</span> <span class="attr">:model</span>=<span class="string">&quot;form&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">FormItem</span> <span class="attr">prop</span>=<span class="string">&quot;user_name&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.user_name&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥ç”¨æˆ·å&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">&quot;prepend&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Icon</span> <span class="attr">:size</span>=<span class="string">&quot;16&quot;</span> <span class="attr">type</span>=<span class="string">&quot;person&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Icon</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">FormItem</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Form</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>Vue</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> data () &#123;</span><br><span class="line">           form: &#123;</span><br><span class="line">               user_name: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">               password: <span class="string">&#x27;&#x27;</span></span><br><span class="line">              &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡<code>:model=&quot;form&quot;</code>çš„åŒå‘ç»‘å®šï¼Œç›¸å½“äºè§†å›¾ä¸Šçš„æ•°æ®ä¸Vueå¯¹è±¡ä¸Šçš„æ•°æ®æ˜¯åŒæ­¥å˜åŒ–çš„</p><h4 id="3-httpè¯·æ±‚"><a href="#3-httpè¯·æ±‚" class="headerlink" title="3.httpè¯·æ±‚"></a>3.httpè¯·æ±‚</h4><p>å‚è€ƒï¼š<a href="https://stackoverflow.com/questions/54955426/how-to-use-async-await-in-vue-js">How to use async/await in Vue.js?</a></p><h5 id="Vueå¼‚æ­¥æ›´æ–°"><a href="#Vueå¼‚æ­¥æ›´æ–°" class="headerlink" title="Vueå¼‚æ­¥æ›´æ–°"></a>Vueå¼‚æ­¥æ›´æ–°</h5><p>å¼‚æ­¥å³å‡ ä¸ªç¨‹åºåŒæ—¶å¼€å§‹ï¼Œä¸ä¼šå‡ºç°é˜»å¡çš„ç°è±¡ï¼ŒVueè¿›è¡Œç½‘ç»œè¯·æ±‚æ—¶ä¼šå‡ºç°å¼‚æ­¥ç°è±¡å¯¼è‡´å‡½æ•°æ‰§è¡Œä¸åŒ</p><p><strong>åŒæ­¥ï¼ˆæŒ‰åºæ‰§è¡Œï¼Œé˜»å¡ç°è±¡ï¼‰</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">created ()&#123;</span><br><span class="line">    <span class="built_in">this</span>.getA()</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">    <span class="built_in">this</span>.getB() </span><br><span class="line">&#125;,</span><br><span class="line">methods : &#123;</span><br><span class="line">    getA ()&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    getB ()&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td></tr></table></figure><p><strong>å¼‚æ­¥ï¼ˆå¤šä¸ªå‡½æ•°åŒæ—¶å¼€å§‹ï¼Œç»“æŸæ—¶é—´å†³å®šå‡ºç°é¡ºåºï¼‰</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">created ()&#123;</span><br><span class="line">    <span class="built_in">this</span>.getA()</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">    <span class="built_in">this</span>.getB() </span><br><span class="line">&#125;,</span><br><span class="line">methods : &#123;</span><br><span class="line">    getA ()&#123;</span><br><span class="line">        $axios.post(<span class="string">`/getA`</span>,params)&#123;</span><br><span class="line">        .then(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    getB ()&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">3</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h5 id="è®©ç¨‹åºåŒæ­¥"><a href="#è®©ç¨‹åºåŒæ­¥" class="headerlink" title="è®©ç¨‹åºåŒæ­¥"></a>è®©ç¨‹åºåŒæ­¥</h5><p>å¯ä»¥é€šè¿‡thenæˆ–async/awaitä½¿å‡½æ•°åŒæ­¥</p><p><strong>then</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">created () &#123;</span><br><span class="line">    <span class="built_in">this</span>.getA().then(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">            <span class="built_in">this</span>.getB()</span><br><span class="line">        &#125;)</span><br><span class="line">&#125;,</span><br><span class="line">methods : &#123;</span><br><span class="line">    getA () &#123;</span><br><span class="line">        <span class="keyword">return</span> $axios.post(<span class="string">`/getA`</span>,params);</span><br><span class="line">    &#125;,</span><br><span class="line">    getB ()&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>async/await</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> created ()&#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="built_in">this</span>.getA()</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">    <span class="built_in">this</span>.getB() </span><br><span class="line">&#125;,</span><br><span class="line">methods : &#123;</span><br><span class="line">    getA : <span class="keyword">async</span>() =&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> $axios.post(<span class="string">`/getA`</span>,params);</span><br><span class="line">    &#125;,</span><br><span class="line">    getB : <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="created"><a href="#created" class="headerlink" title="created()"></a>created()</h5><p>ä¸éœ€è¦è®©è¿è¡ŒåŒæ­¥ï¼Œåªéœ€è¦ä¿è¯æœ€åç»“æŸçš„å‡½æ•°ï¼ˆç½‘ç»œè¯·æ±‚å‡½æ•°ï¼‰æ­£ç¡®èµ‹å€¼å³å¯</p><p>é‡‡ç”¨å¼‚æ­¥çš„å‡½æ•°å…ˆé€šè¿‡createdï¼ˆç›¸å½“äºjsé¡µé¢åŠ è½½å³æ‰§è¡Œï¼‰æ‰§è¡Œå®Œaxiosï¼Œèµ‹å€¼ç»™dataä¸­çš„æ•°æ®</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.getLists();</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">methods: &#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">getLists</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> url = <span class="built_in">this</span>.$base.url.ExpertFinishGetLists;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// cookieè·å–ç”¨æˆ·è·³è½¬åˆ°å¤šå°‘é¡µ</span></span><br><span class="line">    <span class="keyword">let</span> page = <span class="built_in">parseInt</span>(Cookies.get(<span class="string">&#x27;page&#x27;</span>))</span><br><span class="line">    <span class="keyword">if</span> (page) &#123;</span><br><span class="line">      <span class="built_in">this</span>.params.page = page</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">this</span>.$post(url,<span class="built_in">this</span>.params).then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.data = res.data;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//è·å–æƒé™æ ‘</span></span><br><span class="line">    </span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h3 id="ThinkPHP5"><a href="#ThinkPHP5" class="headerlink" title="ThinkPHP5"></a>ThinkPHP5</h3><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://www.soolco.com/post/62551_1_1.html">https://www.soolco.com/post/62551_1_1.html</a></p><h4 id="1-è·¯ç”±é…ç½®"><a href="#1-è·¯ç”±é…ç½®" class="headerlink" title="1.è·¯ç”±é…ç½®"></a>1.è·¯ç”±é…ç½®</h4><p>é…ç½®ä¸ºåœ¨thinkphp/publicæ–‡ä»¶</p><h5 id="phpstudyè®¾ç½®æ ¹ç›®å½•"><a href="#phpstudyè®¾ç½®æ ¹ç›®å½•" class="headerlink" title="phpstudyè®¾ç½®æ ¹ç›®å½•"></a>phpstudyè®¾ç½®æ ¹ç›®å½•</h5><p>ä¸€èˆ¬è®¾ä¸ºwwwæ–‡ä»¶ï¼ˆwebæœåŠ¡å™¨ä¸Šçš„nginxé…ç½®ä¹Ÿåªä¼šæŒ‡å‘è¿™ä¸ªæ–‡ä»¶ï¼‰</p><p>å…¶å…¥å£æ˜¯publicæ–‡ä»¶</p><h5 id="é…ç½®ä¼ªé™æ€"><a href="#é…ç½®ä¼ªé™æ€" class="headerlink" title="é…ç½®ä¼ªé™æ€"></a>é…ç½®ä¼ªé™æ€</h5><p>è®¿é—®PHPæ–‡ä»¶è¦å»æ‰thinkphpè·¯å¾„ä¸­çš„index.phpè¦é…ç½®ä¼ªé™æ€</p><p><strong>apacheä¼ªé™æ€è§„åˆ™</strong></p><p>ä¿®æ”¹apacheé…ç½®æ–‡ä»¶httpd.conf</p><p>å–æ¶ˆæ‰è¯¥è¡Œçš„æ³¨é‡Š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LoadModule rewrite_module modules/mod_rewrite.so</span><br></pre></td></tr></table></figure><p>å°†å°† <code>AllowOverride None</code>  ä¿®æ”¹ä¸ºï¼š <code>AllowOverride All</code></p><p>ä»¥å¼€å¯</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Directory</span> /&gt;</span></span><br><span class="line">    Options +Indexes +FollowSymLinks +ExecCGI</span><br><span class="line">    AllowOverride All</span><br><span class="line">    Order allow,deny</span><br><span class="line">    Allow from all</span><br><span class="line">    Require all granted</span><br><span class="line"><span class="tag">&lt;/<span class="name">Directory</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨thinkphp/publicå…¥å£æ–‡ä»¶æ·»åŠ  <code>.htaccess</code> æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">IfModule</span> <span class="attr">mod_rewrite.c</span>&gt;</span></span><br><span class="line">  Options +FollowSymlinks -Multiviews</span><br><span class="line">  RewriteEngine On</span><br><span class="line"></span><br><span class="line">  RewriteCond %&#123;REQUEST_FILENAME&#125; !-d</span><br><span class="line">  RewriteCond %&#123;REQUEST_FILENAME&#125; !-f</span><br><span class="line">  RewriteRule ^(.*)$ index.php/$1 [QSA,PT,L]</span><br><span class="line"><span class="tag">&lt;/<span class="name">IfModule</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨phpstudyçš„ç½‘ç«™è®¾ç½®ä¸­æ·»åŠ ä¼ªé™æ€è®¾ç½®ä»¥å¯¹åº”.htaccessæ–‡ä»¶</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109042256334.png" alt="image-20210904225150721"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">IfModule</span> <span class="attr">mod_rewrite.c</span>&gt;</span></span><br><span class="line">RewriteEngine On</span><br><span class="line">RewriteBase /</span><br><span class="line">RewriteRule ^index\.php$ - [L]</span><br><span class="line">RewriteCond %&#123;REQUEST_FILENAME&#125; !-f</span><br><span class="line">RewriteCond %&#123;REQUEST_FILENAME&#125; !-d</span><br><span class="line">RewriteRule . /index.php [L]</span><br><span class="line"><span class="tag">&lt;/<span class="name">IfModule</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>Nginxä¼ªé™æ€è§„åˆ™</strong></p><p>åœ¨thinkphp/publicå…¥å£æ–‡ä»¶æ·»åŠ  <code>nginx.htaccess</code> æ–‡ä»¶</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Check if a file exists, or route it to index.php.</span></span><br><span class="line"><span class="attribute">try_files</span> $uri $uri/ /exploit/index.php?$query_string;</span><br><span class="line"><span class="attribute">if</span> (!-e $request_filename) &#123;</span><br><span class="line">    <span class="attribute">rewrite</span> <span class="regexp"> ^(.*)$</span>  /index.php?s=<span class="variable">$1</span>  <span class="literal">last</span>;</span><br><span class="line">    break;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹é…ç½®æ–‡ä»¶</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109042256152.png" alt="image-20210904225437200"></p><p>åœ¨ locationä¸­å¢åŠ ifè¯­å¥æœ€ç»ˆä¸º</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">location</span> / &#123;</span><br><span class="line">           <span class="attribute">index</span> index.php index.html;</span><br><span class="line">           <span class="attribute">if</span> (!-e $request_filename) &#123;</span><br><span class="line">              <span class="attribute">rewrite</span> <span class="regexp"> ^(.*)$</span>  /index.php?s=/<span class="variable">$1</span>  <span class="literal">last</span>;</span><br><span class="line">              break;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="attribute">error_page</span> <span class="number">400</span> /error/<span class="number">400</span>.html;</span><br><span class="line">           <span class="attribute">error_page</span> <span class="number">403</span> /error/<span class="number">403</span>.html;</span><br><span class="line">           <span class="attribute">error_page</span> <span class="number">404</span> /error/<span class="number">404</span>.html;</span><br><span class="line">           <span class="attribute">error_page</span> <span class="number">500</span> /error/<span class="number">500</span>.html;</span><br><span class="line">           <span class="attribute">error_page</span> <span class="number">501</span> /error/<span class="number">501</span>.html;</span><br><span class="line">           <span class="attribute">error_page</span> <span class="number">502</span> /error/<span class="number">502</span>.html;</span><br><span class="line">           <span class="attribute">error_page</span> <span class="number">503</span> /error/<span class="number">503</span>.html;</span><br><span class="line">           <span class="attribute">error_page</span> <span class="number">504</span> /error/<span class="number">504</span>.html;</span><br><span class="line">           <span class="attribute">error_page</span> <span class="number">505</span> /error/<span class="number">505</span>.html;</span><br><span class="line">           <span class="attribute">error_page</span> <span class="number">506</span> /error/<span class="number">506</span>.html;</span><br><span class="line">           <span class="attribute">error_page</span> <span class="number">507</span> /error/<span class="number">507</span>.html;</span><br><span class="line">           <span class="attribute">error_page</span> <span class="number">509</span> /error/<span class="number">509</span>.html;</span><br><span class="line">           <span class="attribute">error_page</span> <span class="number">510</span> /error/<span class="number">510</span>.html;</span><br><span class="line">           <span class="attribute">include</span> D:/phpstudy_pro/WWW/ktsb/public/nginx.htaccess;</span><br><span class="line">           <span class="attribute">autoindex</span>  <span class="literal">off</span>;</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure><h4 id="2-æ•°æ®åº“å¯¼å…¥"><a href="#2-æ•°æ®åº“å¯¼å…¥" class="headerlink" title="2.æ•°æ®åº“å¯¼å…¥"></a>2.æ•°æ®åº“å¯¼å…¥</h4><h5 id="navicatæ‰§è¡Œsqlæ–‡ä»¶é”™è¯¯"><a href="#navicatæ‰§è¡Œsqlæ–‡ä»¶é”™è¯¯" class="headerlink" title="navicatæ‰§è¡Œsqlæ–‡ä»¶é”™è¯¯"></a>navicatæ‰§è¡Œsqlæ–‡ä»¶é”™è¯¯</h5><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109042258221.png" alt="image-20210904225833897"></p><p>å¯ä»¥å…³é—­ä»¥ä¸Šä¸¤ä¸ªé€‰é¡¹æŸ¥çœ‹æ‰§è¡Œé”™è¯¯</p><h5 id="æ•°æ®åº“ä¸¥æ ¼æ¨¡å¼ä¸éä¸¥æ ¼æ¨¡å¼"><a href="#æ•°æ®åº“ä¸¥æ ¼æ¨¡å¼ä¸éä¸¥æ ¼æ¨¡å¼" class="headerlink" title="æ•°æ®åº“ä¸¥æ ¼æ¨¡å¼ä¸éä¸¥æ ¼æ¨¡å¼"></a>æ•°æ®åº“ä¸¥æ ¼æ¨¡å¼ä¸éä¸¥æ ¼æ¨¡å¼</h5><p>ä¸¥æ ¼æ¨¡å¼ä¸‹</p><ul><li>ä¸æ”¯æŒå¯¹not nullå­—æ®µæ’å…¥nullå€¼</li><li>ä¸æ”¯æŒå¯¹è‡ªå¢é•¿å­—æ®µæ’å…¥â€å€¼</li><li>ä¸æ”¯æŒtextå­—æ®µæœ‰é»˜è®¤å€¼</li><li>åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹timestampç±»å‹çš„å­—æ®µä¸å…è®¸ â€˜0000-00-00â€™ ä½œä¸ºæœ‰æ•ˆæ—¥æœŸ</li></ul><h5 id="æ•°æ®åº“æ¨¡å¼ä¿®æ”¹"><a href="#æ•°æ®åº“æ¨¡å¼ä¿®æ”¹" class="headerlink" title="æ•°æ®åº“æ¨¡å¼ä¿®æ”¹"></a>æ•°æ®åº“æ¨¡å¼ä¿®æ”¹</h5><p>è¿è¡Œå‘½ä»¤æŸ¥çœ‹æ¨¡å¼</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;sql_mode&#x27;</span></span><br></pre></td></tr></table></figure><p>æ˜¾ç¤ºå‡ºæ¨¡å¼çš„é¡¹</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109042306119.png" alt="image-20210904230558730"></p><p>æ‰€ä»¥éœ€è¦ç§»é™¤<code>NO_ZERO_IN_DATE,NO_ZERO_DATE</code>ï¼Œæœ€ç»ˆå˜ä¸º</p><p><code>STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION</code></p><p>å¯ä»¥åœ¨rootæƒé™ä¸‹è¿è¡Œå‘½ä»¤</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> sql_mode <span class="operator">=</span> <span class="string">&#x27;ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION&#x27;</span>;</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥åœ¨phpstudyç¯å¢ƒä¸‹ä¿®æ”¹ä¸ºéä¸¥æ ¼æ¨¡å¼</p><p>â€‹        <img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109042309767.png" alt="image-20210716155625246"></p>]]></content>
    
    <summary type="html">
    
      &lt;img src=&quot;https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109042317087.png&quot; alt=&quot;image-20210904231657416&quot; style=&quot;zoom:150%;&quot;&gt;

&lt;p&gt;æ”¯æŒå›½äº§ğŸ˜‡&lt;/p&gt;
    
    </summary>
    
    
      <category term="php" scheme="https://autovy.github.io/categories/php/"/>
    
    
      <category term="å¼€å‘å®æˆ˜" scheme="https://autovy.github.io/tags/%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/"/>
    
      <category term="æ¡†æ¶å­¦ä¹ " scheme="https://autovy.github.io/tags/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="åç«¯" scheme="https://autovy.github.io/tags/%E5%90%8E%E7%AB%AF/"/>
    
      <category term="å‰ç«¯" scheme="https://autovy.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="thinkphp" scheme="https://autovy.github.io/tags/thinkphp/"/>
    
      <category term="Vue" scheme="https://autovy.github.io/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>Java|åŸºäºSSMè¯„è®ºç®¡ç†ç³»ç»Ÿå¼€å‘</title>
    <link href="https://autovy.github.io/2021/06/30/Java/Java-%E5%9F%BA%E4%BA%8ESSM%E8%AF%84%E8%AE%BA%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E5%BC%80%E5%8F%91/"/>
    <id>https://autovy.github.io/2021/06/30/Java/Java-%E5%9F%BA%E4%BA%8ESSM%E8%AF%84%E8%AE%BA%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E5%BC%80%E5%8F%91/</id>
    <published>2021-06-30T06:30:00.000Z</published>
    <updated>2021-09-04T10:19:27.828Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041811913.png" alt="img"></p><span id="more"></span><h3 id="Mavenå¯¼å…¥ä¾èµ–"><a href="#Mavenå¯¼å…¥ä¾èµ–" class="headerlink" title="Mavenå¯¼å…¥ä¾èµ–"></a>Mavenå¯¼å…¥ä¾èµ–</h3><h4 id="1-è§£å†³ä¾èµ–æ ‡çº¢é—®é¢˜"><a href="#1-è§£å†³ä¾èµ–æ ‡çº¢é—®é¢˜" class="headerlink" title="1.è§£å†³ä¾èµ–æ ‡çº¢é—®é¢˜"></a>1.è§£å†³ä¾èµ–æ ‡çº¢é—®é¢˜</h4><p><code>java.lang.ClassNotFoundException: Cannot find class: XXX</code></p><ul><li>åœ¨Mavenä»“åº“æŸ¥æ‰¾æ˜¯å¦æœ‰å¯¹åº”ç‰ˆæœ¬</li><li>å¯ä»¥åˆ é™¤æ ‡çº¢çš„ç‰ˆæœ¬ç²—æš´è§£å†³</li><li>å¦‚æœä»æ— æ³•è§£å†³å¯ä»¥æ‰‹åŠ¨ä¸‹è½½å¯¼å…¥è¯¥jar</li></ul><h4 id="2-è§£å†³ç¨‹åºæ–‡ä»¶åŒ…å¼•ç”¨é—®é¢˜"><a href="#2-è§£å†³ç¨‹åºæ–‡ä»¶åŒ…å¼•ç”¨é—®é¢˜" class="headerlink" title="2.è§£å†³ç¨‹åºæ–‡ä»¶åŒ…å¼•ç”¨é—®é¢˜"></a>2.è§£å†³ç¨‹åºæ–‡ä»¶åŒ…å¼•ç”¨é—®é¢˜</h4><ul><li><p>é€šè¿‡é‡å†™æ„å»ºé¡¹ç›®æŸ¥çœ‹å¯¼å…¥çš„é”™è¯¯</p></li><li><p>å‚çœ‹å¤–éƒ¨åº“çš„åŒ…ä¸Mavenæ·»åŠ çš„åŒ…æ˜¯å¦æœ‰é‡å¤å†²çª</p></li><li><p>ä½¿ç”¨ideaä¿®å¤ï¼Œå°†Mavenå¯¹åº”çš„åŒ…æ·»åŠ åˆ°ç±»è·¯å¾„</p></li></ul><p>3.SSMå¸¸ç”¨ä¾èµ–åŒ…</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!--Spring--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.2.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.2.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.2.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.2.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.2.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.2.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- mysql --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.14<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- mybatis --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- jsp --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>taglibs<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>standard<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- servlet --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- json --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.2.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h3><h4 id="1-æ•´ä½“æ¶æ„"><a href="#1-æ•´ä½“æ¶æ„" class="headerlink" title="1.æ•´ä½“æ¶æ„"></a>1.æ•´ä½“æ¶æ„</h4><h4 id="2-ä¸»ç¨‹åºåˆ†å±‚"><a href="#2-ä¸»ç¨‹åºåˆ†å±‚" class="headerlink" title="2.ä¸»ç¨‹åºåˆ†å±‚"></a>2.ä¸»ç¨‹åºåˆ†å±‚</h4><p>ä¸šåŠ¡é€»è¾‘ï¼š</p><p> <strong>Controllerâ€“&gt;serviceæ¥å£â€“&gt;serviceImplâ€“&gt;daoæ¥å£â€“&gt;daoImplâ€“&gt;mapperâ€“&gt;db</strong></p><p>æ‰§è¡Œæµç¨‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041811913.png" alt="img"></p><p>è€Œ<code>bean/pojo</code>åˆ™æ˜¯å®ä½“ç±»ä½œä¸ºå„å±‚æ¬¡å¤„ç†ä¼ é€’çš„å¯¹è±¡ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041811687.png" alt="image-20210629104056016"></p><h3 id="ç›¸å…³é…ç½®æ–‡ä»¶"><a href="#ç›¸å…³é…ç½®æ–‡ä»¶" class="headerlink" title="ç›¸å…³é…ç½®æ–‡ä»¶"></a>ç›¸å…³é…ç½®æ–‡ä»¶</h3><h4 id="1-web-xml"><a href="#1-web-xml" class="headerlink" title="1.web.xml"></a>1.web.xml</h4><p>ä¸€èˆ¬æ”¾åœ¨webæ–‡ä»¶å¤¹çš„WEB-INFæ–‡ä»¶ä¸‹ï¼Œç”¨äºé…ç½®SSMæ•´ä½“çš„æ¡†æ¶é…ç½®ï¼Œä»¥ä¸‹æ˜¯å¸¸ç”¨çš„é…ç½®é¡¹</p><p>1.å¯åŠ¨Springå®¹å™¨</p><p>æŒ‡å‘applicationContext.xmlé…ç½®æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2.springmvcçš„å‰ç«¯æ§åˆ¶å™¨ï¼Œæ‹¦æˆªæ‰€æœ‰è¯·æ±‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- spring mvcæ ¸å¿ƒï¼šåˆ†å‘servlet --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>mvc-dispatcher<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- spring mvcçš„é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springMVC.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>mvc-dispatcher<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><p>3.å­—ç¬¦ç¼–ç è¿‡æ»¤å™¨</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 3ã€å­—ç¬¦ç¼–ç è¿‡æ»¤å™¨ï¼Œä¸€å®šè¦æ”¾åœ¨æ‰€æœ‰è¿‡æ»¤å™¨ä¹‹å‰ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceRequestEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceResponseEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><p>4.Rest APIé…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 4ã€ä½¿ç”¨Resté£æ ¼çš„URIï¼Œå°†é¡µé¢æ™®é€šçš„postè¯·æ±‚è½¬ä¸ºæŒ‡å®šçš„deleteæˆ–è€…putè¯·æ±‚ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><p>5.æ•°æ®åŒ…è§£æé…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--HttpPutFormContentFilterï¼šå°†è¯·æ±‚ä½“ä¸­çš„æ•°æ®è§£æåŒ…è£…æˆä¸€ä¸ªmap --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HttpPutFormContentFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.HttpPutFormContentFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>HttpPutFormContentFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2-applicationContext-xml"><a href="#2-applicationContext-xml" class="headerlink" title="2.applicationContext.xml"></a>2.applicationContext.xml</h4><p>æ•´åˆspringå’Œmybatisé…ç½®ï¼Œä¸€èˆ¬ç”¨äºé…ç½®æ•°æ®åº“è¿æ¥å’Œæ•°æ®åº“å®ä½“ç±»ï¼Œmapperå®ä½“ç±»ï¼ˆå¯ç”¨äºè‡ªåŠ¨è£…é…ï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span> <span class="attr">xmlns:jdbc</span>=<span class="string">&quot;http://www.springframework.org/schema/jdbc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="tag"><span class="string">     http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">     http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">     http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">     http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">     http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">     http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®æ³¨è§£ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ•°æ®åº“é…ç½®ä¿¡æ¯ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>jdbc:mysql://localhost:3306/mybatis?useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>admin<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>123456<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ‰«æXMLé…ç½®æ–‡ä»¶ï¼šæ•°æ®åº“è¿æ¥å¯¹è±¡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSession&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å¯¹åº”å®ä½“ç±» --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;typeAliasesPackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;pojo&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æŸ¥æ‰¾æ˜ å°„é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mapper/*.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ‰«æMapperç±»ï¼šæ˜ å°„æ–¹æ³• --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.comments.mapper&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="3-springmvc-xml"><a href="#3-springmvc-xml" class="headerlink" title="3.springmvc.xml"></a>3.springmvc.xml</h4><p>ä¸»è¦ç”¨äºç®¡ç†æ˜ å°„å…³ç³»å’Œè§†å›¾çš„å®šä½</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span> <span class="attr">xmlns:jdbc</span>=<span class="string">&quot;http://www.springframework.org/schema/jdbc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®æ³¨è§£ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ‰«æControlleræ³¨è§£ï¼Œå¹¶çº³å…¥Springç®¡ç† --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.app.controller&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span></span></span><br><span class="line"><span class="tag">                                <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ³¨è§£é©±åŠ¨ï¼Œä½¿è®¿é—®è·¯å¾„ä¸æ–¹æ³•æ¯”é…é€šè¿‡æ³¨è§£é…ç½® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®é™æ€é¡µé¢ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è§†å›¾å®šä½ --&gt;</span></span><br><span class="line">    &lt;bean</span><br><span class="line">            class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;viewClass&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">value</span>=<span class="string">&quot;org.springframework.web.servlet.view.JstlView&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/jsp/&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="4-é…ç½®æ–‡ä»¶å¤„ç†æµç¨‹"><a href="#4-é…ç½®æ–‡ä»¶å¤„ç†æµç¨‹" class="headerlink" title="4.é…ç½®æ–‡ä»¶å¤„ç†æµç¨‹"></a>4.é…ç½®æ–‡ä»¶å¤„ç†æµç¨‹</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041811953.png" alt="SSMæ¡†æ¶çš„æ•´åˆä¸ä½¿ç”¨â€”â€”å®ç°ç®€å•çš„è½¬è´¦ç³»ç»Ÿ"></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041812536.png" alt="image-20210904181218197"></p><h3 id="Beanå±‚"><a href="#Beanå±‚" class="headerlink" title="Beanå±‚"></a>Beanå±‚</h3><p>é¦–å…ˆåˆ›å»ºå®ä½“å±‚ï¼Œå®ä½“å±‚æ˜¯å„å±‚æ¬¡ç”¨äºè¾“å…¥è¾“å‡ºå¤„ç†çš„æ•°æ®å¯¹è±¡å¯ä»¥å‚ç…§æ•°æ®åº“è®¾è®¡æ‰€éœ€çš„å¯¹è±¡ä¸å±æ€§</p><h4 id="1-Java-Beanæ¦‚å¿µ"><a href="#1-Java-Beanæ¦‚å¿µ" class="headerlink" title="1.Java Beanæ¦‚å¿µ"></a>1.Java Beanæ¦‚å¿µ</h4><p>JavaBeansæ˜¯Javaä¸€ç§ç‰¹æ®Šçš„ç±»ï¼Œæ—¢å¯ä»¥æ˜¯å•ç‹¬çš„ç±»å‹ï¼Œä¹Ÿå¯ä»¥å°†å¤šä¸ªå¯¹è±¡å°è£…åˆ°ä¸€ä¸ªç±»ä¸­ã€‚</p><p>åœ¨ç³»ç»Ÿè®¾è®¡ä¸­ï¼Œå…¶å¸¸å¸¸å¯¹åº”æ•°æ®åº“çš„å­—æ®µæŠ½è±¡</p><p>åŒºåˆ«äºå…¶ä»–çš„ç±»ï¼ŒBeanä¸€å®šä¼šæœ‰æä¾›getterå’Œsetteræ–¹æ³•è®¿é—®å¯¹è±¡çš„æ¯ä¸€ä¸ªç§æœ‰å±æ€§</p><h4 id="2-Java-Beanæ„é€ æ–¹æ³•"><a href="#2-Java-Beanæ„é€ æ–¹æ³•" class="headerlink" title="2.Java Beanæ„é€ æ–¹æ³•"></a>2.Java Beanæ„é€ æ–¹æ³•</h4><h5 id="æ‰‹åŠ¨ç¼–ç "><a href="#æ‰‹åŠ¨ç¼–ç " class="headerlink" title="æ‰‹åŠ¨ç¼–ç "></a>æ‰‹åŠ¨ç¼–ç </h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">long</span> id;</span><br><span class="line"><span class="keyword">private</span> String content;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">long</span> id)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.id = id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getContent</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> content;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setContent</span><span class="params">(String content)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.content = content;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="æ•°æ®åº“ç”Ÿæˆ"><a href="#æ•°æ®åº“ç”Ÿæˆ" class="headerlink" title="æ•°æ®åº“ç”Ÿæˆ"></a>æ•°æ®åº“ç”Ÿæˆ</h5><p>Ideaå¯ä»¥é€šè¿‡æ•°æ®åº“å·¥å…·ç”ŸæˆBeanå®ä½“ç±»</p><p>è¿æ¥å¥½æ•°æ®åº“ï¼ˆæ³¨æ„æŸäº›ç‰ˆæœ¬çš„mysqléœ€è¦å¡«å†™æ—¶åŒºï¼Œä¸€èˆ¬æˆ‘ä¼šå¡«ä¸ºGMTï¼‰</p><p>ä¾æ®æ•°æ®è¡¨ç”ŸæˆBean</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041650556.png" alt="image-20210904165034192"></p><h5 id="Lombokæ’ä»¶è¡¥å…¨"><a href="#Lombokæ’ä»¶è¡¥å…¨" class="headerlink" title="Lombokæ’ä»¶è¡¥å…¨"></a>Lombokæ’ä»¶è¡¥å…¨</h5><p>é€šè¿‡lombokå·¥å…·ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨Beanå±æ€§æ·»åŠ ç›¸å…³æ³¨è§£ï¼Œideaä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬ç”Ÿæˆgetterå’Œsetteræ–¹æ³•</p><ul><li>ideaä¸­å®‰è£…æ’ä»¶Lombokï¼ˆæœ€æ–°ç‰ˆideaå·²æ†ç»‘ï¼‰</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041657535.png" alt="image-20210904165746685"></p><ul><li>mavenä¸­å¼•å…¥lombokåŒ…</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.16.20<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç¼–å†™Beanä¸æ³¨è§£</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@Getter</span><br><span class="line">@Setter</span><br><span class="line">private long id;</span><br><span class="line"></span><br><span class="line">@Getter</span><br><span class="line">@Setter</span><br><span class="line">private String content;</span><br></pre></td></tr></table></figure><ul><li><p>è‡ªåŠ¨ç”Ÿæˆæ–¹æ³•</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041703886.png" alt="image-20210904170341335"></p></li></ul><h3 id="Daoå±‚"><a href="#Daoå±‚" class="headerlink" title="Daoå±‚"></a>Daoå±‚</h3><h4 id="1-æ„å»ºSQL"><a href="#1-æ„å»ºSQL" class="headerlink" title="1.æ„å»ºSQL"></a>1.æ„å»ºSQL</h4><ul><li>1.xmlæ˜ å°„æ–‡ä»¶æ³•</li></ul><p>Daoå±‚ï¼ˆå³Mapperå±‚ï¼‰å†…æœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼ŒMapperæ–‡ä»¶åˆ›å»ºæ–¹æ³•å¯¹åº”åˆ°xmlæ–‡ä»¶æ˜ å°„sqlè¯­å¥å¤„ç†å®ä½“ç±»</p><p><strong>xmlæ–‡ä»¶</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- è¿™é‡ŒnamespaceæŒ‡å‘CategoryMapperå³å¯å°†sqlè¯­å¥ä¸Mapperä¸­çš„æ–¹æ³•ç»‘å®š --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å•ç‹¬ä½¿ç”¨xmlæ˜ å°„sqlè¯­å¥æ—¶ï¼ŒæŒ‡å‘æ˜¯å®ä½“ç±»--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.app.mapper.CategoryMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;add&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Category&quot;</span> &gt;</span></span><br><span class="line">        insert into category_ ( name ) values (#&#123;name&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;delete&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Category&quot;</span> &gt;</span></span><br><span class="line">        delete from category_ where id= #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;get&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;_int&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.app.pojo.Category&quot;</span>&gt;</span></span><br><span class="line">        select * from   category_  where id= #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Category&quot;</span> &gt;</span></span><br><span class="line">        update category_ set name=#&#123;name&#125; where id=#&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;list&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.app.pojo.Category&quot;</span>&gt;</span></span><br><span class="line">        select * from   category_</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>Mapperæ–‡ä»¶</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.app.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.app.pojo.Category;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">// sqlæ–¹æ³•æ˜ å°„ï¼ˆå¯ä»¥ç”¨æ³¨è§£ï¼Œä¹Ÿå¯ä»¥ä¸æ˜ å°„åˆ°Category.xmlæ–‡ä»¶ï¼‰</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">CategoryMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">add</span><span class="params">(Category category)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Category <span class="title">get</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">update</span><span class="params">(Category category)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Category&gt; <span class="title">list</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">count</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>2.æ³¨è§£æ³•</p><p>ç›´æ¥é€šè¿‡æ³¨è§£å°†æ–¹æ³•æ˜ å°„åˆ°sqlè¯­å¥ï¼ˆç®€å•é¡¹ç›®æ¨èè¿™ä¸ªï¼‰</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ˜ å°„åŠ¨æ€çš„sqlè¯­å¥</span></span><br><span class="line"><span class="keyword">public</span>  <span class="class"><span class="keyword">interface</span> <span class="title">CategoryMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ–¹æ³•å†…å¡«å†™çš„æ˜¯CategoryDynaSqlProviderç±»ä¸­å®šä¹‰çš„åŠ¨æ€sql</span></span><br><span class="line">    <span class="meta">@InsertProvider(type = CategoryDynaSqlProvider.class, method = &quot;add&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">int</span> <span class="title">add</span><span class="params">(Category category)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteProvider(type = CategoryDynaSqlProvider.class, method = &quot;delete&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SelectProvider(type = CategoryDynaSqlProvider.class, method = &quot;get&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Category <span class="title">get</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@UpdateProvider(type = CategoryDynaSqlProvider.class, method = &quot;update&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">update</span><span class="params">(Category category)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SelectProvider(type =  CategoryDynaSqlProvider.class, method = &quot;list&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Category&gt; <span class="title">list</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>3.åŠ¨æ€sqlæ³•</li></ul><p>ç”¨Javaè¡¨ç¤ºsqlè¯­å¥ï¼Œè¾¾åˆ°sqlè¯­å¥åŠ¨æ€åŒ–æ•ˆæœ</p><p><strong>SqlProvideræ–‡ä»¶</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ—å‡ºæ‰€æœ‰ç”¨æˆ·æ•°æ®</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">list</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> SQL()</span><br><span class="line">            .SELECT(<span class="string">&quot;*&quot;</span>)</span><br><span class="line">            .FROM(<span class="string">&quot;users&quot;</span>)</span><br><span class="line">            .toString();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å¾—æŒ‡å®šidç”¨æˆ·æ•°æ®</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">get</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> SQL()</span><br><span class="line">            .SELECT(<span class="string">&quot;*&quot;</span>)</span><br><span class="line">            .FROM(<span class="string">&quot;users&quot;</span>)</span><br><span class="line">            .WHERE(<span class="string">&quot;id=#&#123;id&#125;&quot;</span>)</span><br><span class="line">            .toString();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å¾—æŒ‡å®šåå­—ç”¨æˆ·æ•°æ®</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getname</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> SQL()</span><br><span class="line">            .SELECT(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">            .FROM(<span class="string">&quot;users&quot;</span>)</span><br><span class="line">            .WHERE(<span class="string">&quot;name=#&#123;name&#125;&quot;</span>)</span><br><span class="line">            .toString();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¢åŠ ç”¨æˆ·</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">add</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> SQL()</span><br><span class="line">            .INSERT_INTO(<span class="string">&quot;users&quot;</span>)</span><br><span class="line">            .VALUES(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;#&#123;name&#125;&quot;</span>)</span><br><span class="line">            .VALUES(<span class="string">&quot;password&quot;</span>,<span class="string">&quot;#&#123;password&#125;&quot;</span>)</span><br><span class="line">            .VALUES(<span class="string">&quot;role&quot;</span>,<span class="string">&quot;#&#123;role&#125;&quot;</span>)</span><br><span class="line">            .toString();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°ç”¨æˆ·</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">update</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> SQL()</span><br><span class="line">            .UPDATE(<span class="string">&quot;users&quot;</span>)</span><br><span class="line">            .SET(<span class="string">&quot;name=#&#123;name&#125;&quot;</span>)</span><br><span class="line">            .SET(<span class="string">&quot;password=#&#123;password&#125;&quot;</span>)</span><br><span class="line">            .SET(<span class="string">&quot;role=#&#123;role&#125;&quot;</span>)</span><br><span class="line">            .WHERE(<span class="string">&quot;id=#&#123;id&#125;&quot;</span>)</span><br><span class="line">            .toString();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤ç”¨æˆ·</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">delete</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> SQL()</span><br><span class="line">            .DELETE_FROM(<span class="string">&quot;users&quot;</span>)</span><br><span class="line">            .WHERE(<span class="string">&quot;id=#&#123;id&#125;&quot;</span>)</span><br><span class="line">            .toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Mapperæ–‡ä»¶</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ•°æ®åº“Userè¡¨æ“ä½œ</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ’å…¥ç”¨æˆ·</span></span><br><span class="line">    <span class="meta">@InsertProvider(type=UsersSqlProvider.class,method=&quot;add&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">add</span><span class="params">(Users users)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ é™¤ç”¨æˆ·</span></span><br><span class="line">    <span class="meta">@DeleteProvider(type=UsersSqlProvider.class,method=&quot;delete&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯»æ‰¾ç”¨æˆ·</span></span><br><span class="line">    <span class="meta">@SelectProvider(type=UsersSqlProvider.class,method=&quot;get&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Users <span class="title">get</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯»æ‰¾ç”¨æˆ·(æŒ‰åå­—)</span></span><br><span class="line">    <span class="meta">@SelectProvider(type=UsersSqlProvider.class,method=&quot;getname&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Users <span class="title">getname</span><span class="params">(String name)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ›´æ–°ç”¨æˆ·</span></span><br><span class="line">    <span class="meta">@UpdateProvider(type=UsersSqlProvider.class,method=&quot;update&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">update</span><span class="params">(Users users)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ—å‡ºæ‰€æœ‰ç”¨æˆ·</span></span><br><span class="line">    <span class="meta">@SelectProvider(type=UsersSqlProvider.class,method=&quot;list&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Users&gt; <span class="title">list</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-Mapperçš„è‡ªåŠ¨è£…é…"><a href="#2-Mapperçš„è‡ªåŠ¨è£…é…" class="headerlink" title="2.Mapperçš„è‡ªåŠ¨è£…é…"></a>2.Mapperçš„è‡ªåŠ¨è£…é…</h4><p>applicationContexté…ç½®æ‰«æMpaperç±»ï¼ŒSpringè‡ªåŠ¨è£…é…Mapperç±»</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">&lt;!-- æ‰«æXMLé…ç½®æ–‡ä»¶ï¼šæ•°æ®åº“è¿æ¥å¯¹è±¡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSession&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å¯¹åº”å®ä½“ç±» --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;typeAliasesPackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;pojo&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æŸ¥æ‰¾æ˜ å°„é…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:com/comments/mapper/*.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">   </span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ‰«æMapperç±»ï¼šæ˜ å°„æ–¹æ³• --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.comments.mapper&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="3-Mapperæµ‹è¯•"><a href="#3-Mapperæµ‹è¯•" class="headerlink" title="3.Mapperæµ‹è¯•"></a>3.Mapperæµ‹è¯•</h4><p>mapperå±‚æµ‹è¯•æ–¹æ³•ï¼šå…¶ç”¨ä¸serivceå±‚çš„å®ç°ç±»ä¸€æ ·çš„æ–¹æ³•å¯¹mapperå±‚è¿›è¡Œè°ƒç”¨ï¼Œä»è€Œå®ç°å¯¹mapperå±‚çš„æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="comment">// åŠ è½½é…ç½®æ–‡ä»¶è¿›è¡Œæµ‹è¯•</span></span><br><span class="line"><span class="meta">@ContextConfiguration(locations = &#123;&quot;classpath:applicationContext.xml&quot;, &quot;classpath:springMVC.xml&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserMapperTest</span> <span class="keyword">extends</span> <span class="title">TestCase</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ³¨è§£è£…é…è¦æµ‹è¯•çš„Mapperç±»</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ—å‡ºç”¨æˆ·æµ‹è¯•</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testList</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        List&lt;Users&gt; user = userMapper.list();</span><br><span class="line">        <span class="keyword">for</span>(Users u :user)&#123;</span><br><span class="line">            System.out.println(u.getName());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ’å…¥ç”¨æˆ·æµ‹è¯•</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testInsert</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        Users user = <span class="keyword">new</span> Users();</span><br><span class="line">        user.setName(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">        user.setPassword(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        user.setRole(<span class="string">&quot;vistor&quot;</span>);</span><br><span class="line">        userMapper.add(user);</span><br><span class="line">        testList();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Serivceå±‚"><a href="#Serivceå±‚" class="headerlink" title="Serivceå±‚"></a>Serivceå±‚</h3><p>æœåŠ¡å±‚æœ‰serivceæ¥å£å’Œserivceimlmplå®ç°ä¸¤ä¸ªæ–‡ä»¶ï¼Œè¯¥å±‚ä¸»è¦ç”¨äºè°ƒç”¨daoå±‚ä¸æ•°æ®åº“äº¤äº’å¹¶ä¸ºcontrollerå±‚æä¾›æœåŠ¡</p><h4 id="1-serivceæ¥å£"><a href="#1-serivceæ¥å£" class="headerlink" title="1.serivceæ¥å£"></a>1.serivceæ¥å£</h4><ul><li>å…¶å‡½æ•°æ„æˆä¸mapperæ–‡ä»¶ç±»ä¼¼ï¼ˆéƒ½æ˜¯ä¸€äº›å¢åˆ æ”¹æŸ¥çš„æ–¹æ³•ï¼‰ï¼Œserivceå†…çš„å‡½æ•°å¯ä»¥ä»¥ä¸€äº›éœ€è¦ç”¨æˆ·å¡«å†™çš„å­—æ®µä½œä¸ºå‚æ•°</li><li>ä½†æ˜¯mapperæ˜¯é¢å‘daoå±‚ä½¿ç”¨çš„ï¼ˆä¸æ•°æ®åº“è”ç³»ï¼‰</li><li>è€Œserivceæ˜¯é¢å‘controllerå±‚ä½¿ç”¨çš„ï¼ˆä¸ç”¨æˆ·ç«¯è”ç³»ï¼‰</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UsersæœåŠ¡æ¥å£</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UsersService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ—å‡ºæ‰€æœ‰ç”¨æˆ·</span></span><br><span class="line">    <span class="function">List&lt;Users&gt; <span class="title">list</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ’å…¥ç”¨æˆ·</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(String name, String password, String role)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ é™¤ç”¨æˆ·</span></span><br><span class="line">     <span class="function"><span class="keyword">int</span> <span class="title">delete</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯»æ‰¾ç”¨æˆ·</span></span><br><span class="line">    <span class="function">Users <span class="title">get</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯»æ‰¾ç”¨æˆ·(æŒ‰åå­—)</span></span><br><span class="line">   <span class="function">Users <span class="title">getname</span><span class="params">(String name)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ›´æ–°ç”¨æˆ·</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> id ,String name, String password)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-serivceimlmplå®ç°ç±»"><a href="#2-serivceimlmplå®ç°ç±»" class="headerlink" title="2.serivceimlmplå®ç°ç±»"></a>2.serivceimlmplå®ç°ç±»</h4><ul><li>serivceæ¥å£çš„å…·ä½“å®ç°</li><li>æ³¨è§£Serviceï¼ˆç±»ä¼¼äº@Componentï¼Œ@Controllerï¼‰</li><li>å°†ç±»è‡ªåŠ¨æ³¨å†Œåˆ°Springå®¹å™¨ï¼Œè€Œä¸éœ€è¦å®šä¹‰bean</li><li>æ§åˆ¶ç±»å¯ä»¥ç›´æ¥é€šè¿‡æ¥å£è°ƒç”¨åˆ°å…¶å®ç°ç±»ä¸­çš„æ–¹æ³•</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UsersServiceImpl</span> <span class="keyword">implements</span> <span class="title">UsersService</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    UserMapper userMapper;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ—å‡ºæ‰€æœ‰ç”¨æˆ·</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Users&gt; <span class="title">list</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        List&lt;Users&gt; user = userMapper.list();</span><br><span class="line">        <span class="keyword">for</span>(Users u :user)&#123;</span><br><span class="line">            System.out.println(u.getName());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ’å…¥ç”¨æˆ·</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">add</span><span class="params">(String name, String password, String role)</span></span>&#123;</span><br><span class="line">            Users users =  <span class="keyword">new</span> Users();</span><br><span class="line">            users.setName(name);</span><br><span class="line">            users.setPassword(password);</span><br><span class="line">            users.setRole(role);</span><br><span class="line">            userMapper.add(users);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ é™¤ç”¨æˆ·</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">delete</span><span class="params">(<span class="keyword">int</span> id)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        userMapper.delete(id);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯»æ‰¾ç”¨æˆ·</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Users <span class="title">get</span><span class="params">(<span class="keyword">int</span> id)</span></span>&#123;</span><br><span class="line">       Users user = userMapper.get(id);</span><br><span class="line">       <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯»æ‰¾ç”¨æˆ·(æŒ‰åå­—)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Users <span class="title">getname</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">       Users user =  userMapper.getname(name);</span><br><span class="line">       <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ’å…¥ç”¨æˆ·</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> id ,String name, String password)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        Users users =  userMapper.get(id);</span><br><span class="line">        users.setName(name);</span><br><span class="line">        users.setPassword(password);</span><br><span class="line">        userMapper.update(users);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-Serivceçš„è‡ªåŠ¨è£…é…"><a href="#3-Serivceçš„è‡ªåŠ¨è£…é…" class="headerlink" title="3.Serivceçš„è‡ªåŠ¨è£…é…"></a>3.Serivceçš„è‡ªåŠ¨è£…é…</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ‰«æControlleræ³¨è§£ï¼Œå¹¶çº³å…¥Springç®¡ç† --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.comments.controller&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">&quot;annotation&quot;</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">expression</span>=<span class="string">&quot;org.springframework.stereotype.Controller&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ‰«æservice --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.comments.service&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="4-Serivceå±‚æµ‹è¯•"><a href="#4-Serivceå±‚æµ‹è¯•" class="headerlink" title="4.Serivceå±‚æµ‹è¯•"></a>4.Serivceå±‚æµ‹è¯•</h4><p>åŠ è½½é…ç½®æ–‡ä»¶ï¼Œå¹¶è£…é…æœåŠ¡å¯¹è±¡è¿›è¡Œæµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Serviceå±‚æµ‹è¯•æ–¹æ³•</span></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="comment">// åŠ è½½é…ç½®æ–‡ä»¶è¿›è¡Œæµ‹è¯•</span></span><br><span class="line"><span class="meta">@ContextConfiguration(locations = &#123;&quot;classpath:applicationContext.xml&quot;, &quot;classpath:springMVC.xml&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UsersServiceImplTest</span> <span class="keyword">extends</span> <span class="title">TestCase</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(<span class="keyword">this</span>.getClass());</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UsersService usersService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testList</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        usersService.list();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">testInsert</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        <span class="keyword">int</span> res = usersService.add(<span class="string">&quot;ç²¾çµ&quot;</span>,<span class="string">&quot;test&quot;</span>,<span class="string">&quot;vistor&quot;</span>);</span><br><span class="line">        System.out.println(res);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">testGet1</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line"></span><br><span class="line">        Users user = usersService.get(<span class="number">2</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">testGet2</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line"></span><br><span class="line">         Users user = usersService.getname(<span class="string">&quot;1111&quot;</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span>  <span class="title">testupdate</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> res = usersService.update(<span class="number">2</span>,<span class="string">&quot;test&quot;</span>,<span class="string">&quot;12345&quot;</span>);</span><br><span class="line">        System.out.println(res);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Jsonæ¶ˆæ¯ä½“"><a href="#Jsonæ¶ˆæ¯ä½“" class="headerlink" title="Jsonæ¶ˆæ¯ä½“"></a>Jsonæ¶ˆæ¯ä½“</h3><h4 id="1-è‡ªå®šä¹‰Jsonæ¶ˆæ¯ä½“"><a href="#1-è‡ªå®šä¹‰Jsonæ¶ˆæ¯ä½“" class="headerlink" title="1.è‡ªå®šä¹‰Jsonæ¶ˆæ¯ä½“"></a>1.è‡ªå®šä¹‰Jsonæ¶ˆæ¯ä½“</h4><p>å»ºç«‹utilæ–‡ä»¶æ”¾å…¥JsonMsgç±»ï¼Œç”¨äºè®¾ç½®Jsonè¿”å›å¯¹è±¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">jsonmsg</span><span class="params">(String staut, String msg)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    JSONObject jsonObject = <span class="keyword">new</span> JSONObject();</span><br><span class="line">    jsonObject.put(staut, msg);</span><br><span class="line">    <span class="keyword">return</span> jsonObject.toJSONString();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-Fastjson"><a href="#2-Fastjson" class="headerlink" title="2.Fastjson"></a>2.Fastjson</h4><p>Fastjson æ˜¯ä¸€ä¸ª Java åº“ï¼Œå¯ä»¥å°† Java å¯¹è±¡è½¬æ¢ä¸º JSON æ ¼å¼ï¼Œå½“ç„¶å®ƒä¹Ÿå¯ä»¥å°† JSON å­—ç¬¦ä¸²è½¬æ¢ä¸º Java å¯¹è±¡</p><ul><li>æ·»åŠ mavenä¾èµ–</li><li>ä½¿ç”¨æ³¨è§£è·å¾—ç›¸åº”çš„JSONField / åˆ›å»ºJSONå¯¹è±¡è¾“å‡º</li></ul><h3 id="Controllerå±‚"><a href="#Controllerå±‚" class="headerlink" title="Controllerå±‚"></a>Controllerå±‚</h3><p>è´Ÿè´£è°ƒç”¨æœåŠ¡å±‚çš„æ–¹æ³•ï¼Œå¹¶æ˜ å°„è·¯å¾„æä¾›ç»™å®¢æˆ·ç«¯ä½¿ç”¨</p><h4 id="1-è¯·æ±‚æ˜ å°„"><a href="#1-è¯·æ±‚æ˜ å°„" class="headerlink" title="1.è¯·æ±‚æ˜ å°„"></a>1.è¯·æ±‚æ˜ å°„</h4><ul><li>è·¯å¾„æ˜ å°„</li><li>è¯·æ±‚æ–¹å¼</li><li>Controlleré»˜è®¤ä»¥è¿”å›å€¼å»å¯»æ‰¾èµ„æºï¼Œå¦‚æœé…ç½®äº†jspåˆ™ä¼šå¯»æ‰¾å¯¹åº”jspï¼ŒåŠ ä¸Š@ResponseBodyæ³¨è§£åˆ™ç›´æ¥è¾“å‡ºè¿”å›çš„å†…å®¹ï¼ˆå¦‚jsonï¼‰</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å¾—æŒ‡å®šç”¨æˆ·</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/list/&#123;id&#125;&quot;, method = RequestMethod.GET, produces = &quot;application/json; charset=utf-8&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getuser</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> <span class="keyword">int</span> id)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    Users res = usersService.get(id);</span><br><span class="line">    <span class="keyword">return</span> JSONObject.toJSONString(res);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="2-è¯·æ±‚æ•°æ®è·å–"><a href="#2-è¯·æ±‚æ•°æ®è·å–" class="headerlink" title="2.è¯·æ±‚æ•°æ®è·å–"></a>2.è¯·æ±‚æ•°æ®è·å–</h4><ul><li><p>æ•°æ®è¿‡æ»¤åˆ¤æ–­</p></li><li><p>è¯·æ±‚415é—®é¢˜çš„è§£å†³</p><p>Javaåç«¯ä¸èƒ½å¯¹POSTæˆ–PUTå‘æ¥çš„form-data,x-www-form-urlencodedçš„æ•°æ®è¿›è¡Œå¤„ç†è€Œå‡ºç°çš„é—®é¢˜</p><p>@RequestBodyåªèƒ½å¤„ç†é€šè¿‡jsonå‘é€çš„è¯·æ±‚</p></li><li><p>POSTè¯·æ±‚è·å¾—æ•°æ®ç±»å‹ä¸æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–°å¢ç”¨æˆ·</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/insert&quot;, method = RequestMethod.POST, produces = &quot;application/json; charset=utf-8&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">insert</span><span class="params">(<span class="meta">@RequestParam</span> Map&lt;String,String&gt; params)</span></span>&#123;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// jsonæ¶ˆæ¯</span></span><br><span class="line">    JsonMsg json = <span class="keyword">new</span> JsonMsg();</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// è·å¾—è¦æ›´æ–°ç”¨æˆ·è¯·æ±‚æ•°æ®</span></span><br><span class="line">    String name = params.get(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">    String password = params.get(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">    String role = params.get(<span class="string">&quot;role&quot;</span>);</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// æ•°æ®åº“æŸ¥è¯¢åç§°</span></span><br><span class="line">    Users users =  usersService.getname(name);</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">if</span>(users == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="comment">// å‚æ•°é½å…¨åˆ¤æ–­</span></span><br><span class="line">        <span class="keyword">if</span> (name != <span class="keyword">null</span> &amp;&amp; password != <span class="keyword">null</span> &amp;&amp; role != <span class="keyword">null</span>) &#123;</span><br><span class="line">            usersService.add(name, password, role);</span><br><span class="line">            <span class="keyword">return</span> json.jsonmsg(<span class="string">&quot;200&quot;</span>, <span class="string">&quot;æ–°å¢ç”¨æˆ·æˆåŠŸ&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> json.jsonmsg(<span class="string">&quot;400&quot;</span>, <span class="string">&quot;å‚æ•°ä¸é½å…¨&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">   <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> json.jsonmsg(<span class="string">&quot;400&quot;</span>, <span class="string">&quot;ç”¨æˆ·åå·²é‡å¤&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="3-ä¸­æ–‡ä¹±ç é—®é¢˜"><a href="#3-ä¸­æ–‡ä¹±ç é—®é¢˜" class="headerlink" title="3.ä¸­æ–‡ä¹±ç é—®é¢˜"></a>3.ä¸­æ–‡ä¹±ç é—®é¢˜</h4><ul><li><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://blog.csdn.net/kalision/article/details/46441081">å½»åº•è§£å†³Spring MVC ä¸­æ–‡ä¹±ç </a></p></li><li><p>è¿‡æ»¤å™¨</p><p>åœ¨web.xmlè®¾ç½®ç¼–ç è¿‡æ»¤å™¨è§£å†³ç¼–ç é—®é¢˜</p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ç¼–ç è¿‡æ»¤å™¨ --&gt;</span><br><span class="line">&lt;filter&gt;</span><br><span class="line">    &lt;filter-name&gt;characterEncodingFilter&lt;&#x2F;filter-name&gt;</span><br><span class="line">    &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;&#x2F;filter-class&gt;</span><br><span class="line">    &lt;init-param&gt;</span><br><span class="line">        &lt;param-name&gt;encoding&lt;&#x2F;param-name&gt;</span><br><span class="line">        &lt;param-value&gt;UTF-8&lt;&#x2F;param-value&gt;</span><br><span class="line">    &lt;&#x2F;init-param&gt;</span><br><span class="line">    &lt;init-param&gt;</span><br><span class="line">        &lt;param-name&gt;forceEncoding&lt;&#x2F;param-name&gt;</span><br><span class="line">        &lt;param-value&gt;true&lt;&#x2F;param-value&gt;</span><br><span class="line">    &lt;&#x2F;init-param&gt;</span><br><span class="line">&lt;&#x2F;filter&gt;</span><br><span class="line">&lt;filter-mapping&gt;</span><br><span class="line">    &lt;filter-name&gt;characterEncodingFilter&lt;&#x2F;filter-name&gt;</span><br><span class="line">    &lt;url-pattern&gt;&#x2F;*&lt;&#x2F;url-pattern&gt;</span><br><span class="line">&lt;&#x2F;filter-mapping&gt;</span><br></pre></td></tr></table></figure><ul><li>produceså±æ€§</li></ul><p>@RequestMappingæ³¨è§£å¯ä»¥è®¾ç½®å‘é€å’Œæ¥æ”¶æ•°æ®ç±»å‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/delete/&#123;id&#125;&quot;, method = RequestMethod.DELETE, produces = &quot;application/json; charset=utf-8&quot;)</span></span><br></pre></td></tr></table></figure><h4 id="4-Controllerè‡ªåŠ¨è£…é…"><a href="#4-Controllerè‡ªåŠ¨è£…é…" class="headerlink" title="4.Controllerè‡ªåŠ¨è£…é…"></a>4.Controllerè‡ªåŠ¨è£…é…</h4><p>å¦‚æœä»…ä»…æ˜¯è¿”å›jsonå¯ä»¥é…ç½®é©±åŠ¨ï¼Œå¦‚æœæœ‰jspé¡µé¢åˆ™éœ€è¦é…ç½®é™æ€é¡µé¢å¹¶ä¸”è§†å›¾å®šä½</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ³¨è§£é©±åŠ¨ï¼Œä½¿è®¿é—®è·¯å¾„ä¸æ–¹æ³•åŒ¹é…é€šè¿‡æ³¨è§£é…ç½® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é…ç½®é™æ€é¡µé¢ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- è§†å›¾å®šä½ --&gt;</span></span><br><span class="line">&lt;bean</span><br><span class="line">        class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;viewClass&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">value</span>=<span class="string">&quot;org.springframework.web.servlet.view.JstlView&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/jsp/&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="5-Controllerå±‚æµ‹è¯•"><a href="#5-Controllerå±‚æµ‹è¯•" class="headerlink" title="5.Controllerå±‚æµ‹è¯•"></a>5.Controllerå±‚æµ‹è¯•</h4><ul><li>ä½¿ç”¨mockæ¨¡æ‹Ÿç”¨æˆ·è¿›è¡Œæµ‹è¯•ï¼ˆæ¯”è¾ƒå¤æ‚ï¼Œä¸€èˆ¬ä¸å»ºè®®ä½¿ç”¨ï¼‰</li><li>è¿è¡ŒtomcatæœåŠ¡å™¨åï¼Œä½¿ç”¨æµè§ˆå™¨+postmanè¿›è¡Œæµ‹è¯•</li><li><code>System.out.println</code>æ§åˆ¶å°è¾“å‡º</li></ul><h3 id="WebæœåŠ¡å™¨æ·»åŠ "><a href="#WebæœåŠ¡å™¨æ·»åŠ " class="headerlink" title="WebæœåŠ¡å™¨æ·»åŠ "></a>WebæœåŠ¡å™¨æ·»åŠ </h3><h4 id="1-æ·»åŠ WEBå·¥ä»¶"><a href="#1-æ·»åŠ WEBå·¥ä»¶" class="headerlink" title="1.æ·»åŠ WEBå·¥ä»¶"></a>1.æ·»åŠ WEBå·¥ä»¶</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041759524.png" alt="image-20210904175428011"></p><h4 id="2-é…ç½®tomcatæœåŠ¡å™¨"><a href="#2-é…ç½®tomcatæœåŠ¡å™¨" class="headerlink" title="2.é…ç½®tomcatæœåŠ¡å™¨"></a>2.é…ç½®tomcatæœåŠ¡å™¨</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041759825.png" alt="image-20210904175840362"></p><p>æ·»åŠ åˆšæ‰åˆ›å»ºçš„å·¥ä»¶ï¼ˆæ³¨æ„ä¿®æ”¹ä¸Šä¸‹æ–‡ï¼Œè¿™é‡Œå½±å“è®¿é—®çš„urlï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041819887.png" alt="image-20210904180030909"></p><h4 id="3-æµ‹è¯•æœåŠ¡å™¨"><a href="#3-æµ‹è¯•æœåŠ¡å™¨" class="headerlink" title="3.æµ‹è¯•æœåŠ¡å™¨"></a>3.æµ‹è¯•æœåŠ¡å™¨</h4><p>å‡ºç°ç«¯å£å†²çªï¼Œå¯ä»¥ä¿®æ”¹httpç«¯å£å’ŒJMXç«¯å£ï¼Œä½†è¦æ³¨æ„ä¿®æ”¹tomcatçš„server.xmlæ–‡ä»¶ä¸ºå¯¹åº”çš„httpç«¯å£</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041819682.png" alt="image-20210904180518251"></p><p>ä¹Ÿå¯ä»¥æ‰¾åˆ°æ­£åœ¨è¿è¡Œçš„ç«¯å£ï¼Œç„¶åå…³é—­å…¶è¿›ç¨‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -aon|findstr 8080</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">taskkill -f -pid è¿›ç¨‹ç¼–å·</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041811913.png&quot; alt=&quot;img&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="Java" scheme="https://autovy.github.io/categories/Java/"/>
    
    
      <category term="å¼€å‘å®æˆ˜" scheme="https://autovy.github.io/tags/%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/"/>
    
      <category term="Java" scheme="https://autovy.github.io/tags/Java/"/>
    
      <category term="æ¡†æ¶å­¦ä¹ " scheme="https://autovy.github.io/tags/%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="åç«¯" scheme="https://autovy.github.io/tags/%E5%90%8E%E7%AB%AF/"/>
    
      <category term="SSM" scheme="https://autovy.github.io/tags/SSM/"/>
    
  </entry>
  
  <entry>
    <title>å¼€å‘å·¥å…·|Linuxå­¦ä¹ æ‰‹å†Œ</title>
    <link href="https://autovy.github.io/2021/06/27/Tool/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7-Linux%E5%AD%A6%E4%B9%A0%E6%89%8B%E5%86%8C/"/>
    <id>https://autovy.github.io/2021/06/27/Tool/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7-Linux%E5%AD%A6%E4%B9%A0%E6%89%8B%E5%86%8C/</id>
    <published>2021-06-27T06:30:00.000Z</published>
    <updated>2022-02-27T09:23:35.417Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040952867.png" alt="image-20210904095248687"></p><span id="more"></span><h3 id="Linuxç®€ä»‹"><a href="#Linuxç®€ä»‹" class="headerlink" title="Linuxç®€ä»‹"></a>Linuxç®€ä»‹</h3><h4 id="1-Linuxå‘è¡Œç‰ˆ"><a href="#1-Linuxå‘è¡Œç‰ˆ" class="headerlink" title="1.Linuxå‘è¡Œç‰ˆ"></a>1.Linuxå‘è¡Œç‰ˆ</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040949495.jpeg" alt="img"></p><p>Linuxå‘è¡Œç‰ˆ = Liunxæ ¸å¿ƒ +åº”ç”¨è½¯ä»¶</p><h4 id="2-Liunxå†…æ ¸æ¶æ„"><a href="#2-Liunxå†…æ ¸æ¶æ„" class="headerlink" title="2.Liunxå†…æ ¸æ¶æ„"></a>2.Liunxå†…æ ¸æ¶æ„</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040949098.jpeg" alt="img"></p><p>Liunxå†…æ ¸æœ‰5ä¸ªå­ç³»ç»Ÿï¼š</p><ul><li>Process Schedulerï¼Œè¿›ç¨‹ç®¡ç†ã€è¿›ç¨‹è°ƒåº¦ã€‚è´Ÿè´£ç®¡ç† CPU èµ„æºï¼Œä»¥ä¾¿è®©å„ä¸ªè¿›ç¨‹å¯ä»¥ä»¥å°½é‡å…¬å¹³çš„æ–¹å¼è®¿é—® CPUã€‚</li><li>Memory Managerï¼Œå†…å­˜ç®¡ç†ã€‚è´Ÿè´£ç®¡ç† Memoryï¼ˆå†…å­˜ï¼‰èµ„æºï¼Œä»¥ä¾¿è®©å„ä¸ªè¿›ç¨‹å¯ä»¥å®‰å…¨çš„å…±äº«æœºå™¨çš„å†…å­˜èµ„æºã€‚</li><li>VFSï¼ˆVirtual File Systemï¼‰ï¼Œè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿã€‚Linux å†…æ ¸å°†ä¸åŒåŠŸèƒ½çš„å¤–éƒ¨è®¾å¤‡æŠ½è±¡ä¸ºå¯ä»¥é€šè¿‡ç»Ÿä¸€çš„æ–‡ä»¶æ“ä½œæ¥å£ï¼ˆopenã€closeã€readã€write ç­‰ï¼‰æ¥è®¿é—®ã€‚è¿™å°±æ˜¯ Linuxç³»ç»Ÿâ€œä¸€åˆ‡çš†æ˜¯æ–‡ä»¶â€çš„ä½“ç°</li><li>è®¾å¤‡é©±åŠ¨ï¼Œè´Ÿè´£ç®¡ç†ç¬¬ä¸‰æ–¹è®¾å¤‡æ¥å…¥/ç»ˆç«¯</li><li>Networkï¼Œç½‘ç»œå­ç³»ç»Ÿã€‚è´Ÿè´£ç®¡ç†ç³»ç»Ÿçš„ç½‘ç»œè®¾å¤‡ï¼Œå¹¶å®ç°å¤šç§å¤šæ ·çš„ç½‘ç»œæ ‡å‡†</li></ul><h3 id="LinuxåŸºæœ¬æ“ä½œ"><a href="#LinuxåŸºæœ¬æ“ä½œ" class="headerlink" title="LinuxåŸºæœ¬æ“ä½œ"></a>LinuxåŸºæœ¬æ“ä½œ</h3><h4 id="1-å¼€æœºå…³æœº"><a href="#1-å¼€æœºå…³æœº" class="headerlink" title="1.å¼€æœºå…³æœº"></a>1.å¼€æœºå…³æœº</h4><p>å¼€å¯ä¼šå¯åŠ¨è®¸å¤šç¨‹åºï¼Œåœ¨windowså«åšâ€œæœåŠ¡â€œï¼ˆserviceï¼‰ï¼Œåœ¨Linuxå«åšâ€œå®ˆæŠ¤è¿›ç¨‹â€ï¼ˆdaemonï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040949420.png" alt="Linuxå¼€æœºå¯åŠ¨è„šæœ¬ - è½¬1"></p><p>åŒæ­¥æ•°æ®å‘½ä»¤ï¼šsyncï¼ˆå¸¸å¸¸ç”¨äºå¼ºåˆ¶å…³æœºå‰ï¼‰</p><p>å…³æœºå‘½ä»¤ï¼šshutdown</p><p>é‡å¯å‘½ä»¤ï¼šreboot</p><h4 id="2-åŸºæœ¬ç›®å½•ç»“æ„"><a href="#2-åŸºæœ¬ç›®å½•ç»“æ„" class="headerlink" title="2.åŸºæœ¬ç›®å½•ç»“æ„"></a>2.åŸºæœ¬ç›®å½•ç»“æ„</h4><p>åŸºæœ¬çŸ¥è¯†ï¼š</p><ul><li>Liunxä¸€åˆ‡çš†æ–‡ä»¶</li><li>æ ¹ç›®å½•/ï¼Œæ‰€æœ‰æ–‡ä»¶éƒ½æŒ‚è½½åœ¨è¿™ä¸ªèŠ‚ç‚¹ä¸‹</li><li>ls æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶</li></ul><p>Liunxç›®å½•ç»“æ„ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040949471.png" alt="img"></p><p>æ¯”è¾ƒå¸¸ç”¨çš„å¦‚ä¸‹ï¼š</p><ul><li>/etc ï¼š è¯¥ç›®å½•å¯ç”¨æ¥å­˜æ”¾æ‰€æœ‰ç³»ç»Ÿç®¡ç†éœ€è¦çš„é…ç½®æ–‡ä»¶å’Œå­ç›®å½•</li><li>/homeï¼šç”¨æˆ·ä¸»ç›®å½•ï¼ˆåœ¨liunxï¼Œæ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„ç›®å½•ï¼‰</li><li>/opt : ä¸»æœºé¢å¤–å®‰è£…è½¯ä»¶å­˜æ”¾çš„ä½ç½®</li><li>/root : ç³»ç»Ÿç®¡ç†å‘˜ç”¨æˆ·ä¸»ç›®å½•</li><li>/usrï¼šç”¨æˆ·çš„åº”ç”¨ç¨‹åºå’Œæ–‡ä»¶éƒ½æ”¾åœ¨è¿™ä¸ªç›®å½•ï¼Œç±»ä¼¼äºWindowsçš„program filesç›®å½•</li><li>/tmp ï¼šå­˜æ”¾ä¸´æ—¶æ–‡ä»¶ï¼Œç”¨å®Œå³ä¸¢çš„æ–‡ä»¶å¦‚å®‰è£…åŒ…</li><li>/var : å­˜æ”¾ä¸æ–­æ‰©å……çš„ä¸œè¥¿ï¼Œä¹ æƒ¯äºæ”¾é‚£äº›ç»å¸¸è¢«ä¿®æ”¹çš„ç›®å½•</li></ul><h3 id="Liunxç›®å½•ç®¡ç†"><a href="#Liunxç›®å½•ç®¡ç†" class="headerlink" title="Liunxç›®å½•ç®¡ç†"></a>Liunxç›®å½•ç®¡ç†</h3><h4 id="1-æ–‡ä»¶ç®¡ç†åŸºæœ¬å‘½ä»¤"><a href="#1-æ–‡ä»¶ç®¡ç†åŸºæœ¬å‘½ä»¤" class="headerlink" title="1.æ–‡ä»¶ç®¡ç†åŸºæœ¬å‘½ä»¤"></a>1.æ–‡ä»¶ç®¡ç†åŸºæœ¬å‘½ä»¤</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040949194.png" alt="img"></p><p>æ¯”è¾ƒå¸¸ç”¨çš„å¦‚ä¸‹ï¼š</p><ul><li>ls: åˆ—å‡ºç›®å½•</li><li>cdï¼šåˆ‡æ¢ç›®å½•</li><li>pwdï¼šæ˜¾ç¤ºç›®å‰çš„ç›®å½•</li><li>mkdirï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç›®å½•</li><li>rmdirï¼šåˆ é™¤ä¸€ä¸ªç©ºçš„ç›®å½•</li><li>cpï¼šå¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•</li><li>rmï¼šç§»é™¤æ–‡ä»¶æˆ–ç›®å½•</li><li>mvï¼šç§»åŠ¨æ–‡ä»¶ä¸ç›®å½•ï¼Œæˆ–ä¿®æ”¹æ–‡ä»¶ä¸ç›®å½•çš„åç§°</li><li>touchï¼šåˆ›å»ºæ–‡ä»¶</li></ul><h4 id="2-lså‘½ä»¤"><a href="#2-lså‘½ä»¤" class="headerlink" title="2.lså‘½ä»¤"></a>2.lså‘½ä»¤</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040949481.png" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p><h4 id="3-mkdirå‘½ä»¤"><a href="#3-mkdirå‘½ä»¤" class="headerlink" title="3.mkdirå‘½ä»¤"></a>3.mkdirå‘½ä»¤</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040949299.png" alt="img"></p><h4 id="4-rmå‘½ä»¤"><a href="#4-rmå‘½ä»¤" class="headerlink" title="4.rmå‘½ä»¤"></a>4.rmå‘½ä»¤</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040949353.png" alt="img"></p><h3 id="Linuxæ–‡ä»¶ç®¡ç†"><a href="#Linuxæ–‡ä»¶ç®¡ç†" class="headerlink" title="Linuxæ–‡ä»¶ç®¡ç†"></a>Linuxæ–‡ä»¶ç®¡ç†</h3><h4 id="1-æ–‡ä»¶å±æ€§"><a href="#1-æ–‡ä»¶å±æ€§" class="headerlink" title="1.æ–‡ä»¶å±æ€§"></a>1.æ–‡ä»¶å±æ€§</h4><p>æ–‡ä»¶å±æ€§å­—ç¬¦ä¸²:<br><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040949841.png" alt="img"></p><p>æ–‡ä»¶æƒé™å­—ç¬¦ä¸²ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040949192.png" alt="363003_1227493859FdXT"></p><p>æ–‡ä»¶ç±»å‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040949930.png" alt="linuxæ–‡ä»¶ç±»å‹å’Œæƒé™- xd_xumaomao - åšå®¢å›­"></p><p>å¸¸ç”¨çš„å¦‚ä¸‹ï¼š</p><ul><li><code>-</code>ï¼šæ™®é€šæ–‡ä»¶</li><li><code>d</code>ï¼šç›®å½•æ–‡ä»¶</li><li><code>l</code>ï¼šè¿æ¥æ–‡ä»¶ï¼ˆç›¸å½“äºWindowsçš„å¿«æ·æ–¹å¼ï¼‰</li></ul><p>æ–‡ä»¶æƒé™ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040949379.png" alt="img"></p><p>åœ¨æ–‡ä»¶å±æ€§ä¸­æ¯ç»„æƒé™æŒ‰<code>rwx</code>è¿™æ ·çš„é¡ºåºæ˜¾ç¤ºï¼Œè€Œ<code>-</code>è¡¨ç¤ºæ²¡æœ‰è¯¥æƒé™</p><h4 id="2-chgrp-amp-chownå‘½ä»¤"><a href="#2-chgrp-amp-chownå‘½ä»¤" class="headerlink" title="2.chgrp&amp;chownå‘½ä»¤"></a>2.chgrp&amp;chownå‘½ä»¤</h4><p>æ›´æ”¹æ–‡ä»¶å±ç»„ï¼ˆæ–‡ä»¶æ‰€å±ç”¨æˆ·ç»„ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">charg -R å±ç»„å æ–‡ä»¶å</span><br></pre></td></tr></table></figure><p>æ›´æ”¹æ–‡ä»¶å±ä¸»ï¼ˆæ–‡ä»¶æ‰€æœ‰è€…ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown -R å±ä¸»å æ–‡ä»¶å</span><br></pre></td></tr></table></figure><p>åŒæ—¶ä¿®æ”¹æ–‡ä»¶çš„å±ç»„å’Œå±ä¸»</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown -R å±ä¸»å:å±ç»„å æ–‡ä»¶å</span><br></pre></td></tr></table></figure><h4 id="3-chmodå‘½ä»¤"><a href="#3-chmodå‘½ä»¤" class="headerlink" title="3.chmodå‘½ä»¤"></a>3.chmodå‘½ä»¤</h4><p>chmodå¯ä»¥è®¾ç½®æ–‡ä»¶è®¿é—®æƒé™ï¼Œæœ‰ä¸¤ç§è®¾ç½®æ–¹æ³•ï¼šæ•°å­—ï¼ˆå¸¸ç”¨ï¼‰å’Œç¬¦å·</p><p>Linuxæ–‡ä»¶çš„åŸºæœ¬æƒé™æœ‰9ä¸ªï¼Œåˆ†åˆ«æ˜¯owner/group/others ä¸‰ç§èº«ä»½åˆ†åˆ«çš„rwxæƒé™ï¼ˆ9ä¸ªæƒé™ä¸‰ä¸ªä¸‰ä¸ªä¸ºä¸€ç»„ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040949807.png" alt="img"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">ä½¿ç”¨æ ¼å¼</span></span><br><span class="line">chmod æƒé™æ•°å­—ç»„ æ–‡ä»¶å</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">å¼€æ”¾æ‰€æœ‰æƒé™ç»™æ‰€æœ‰äºº</span></span><br><span class="line">chmod 777 root</span><br></pre></td></tr></table></figure><h4 id="4-æ–‡ä»¶å†…å®¹æŸ¥çœ‹"><a href="#4-æ–‡ä»¶å†…å®¹æŸ¥çœ‹" class="headerlink" title="4.æ–‡ä»¶å†…å®¹æŸ¥çœ‹"></a>4.æ–‡ä»¶å†…å®¹æŸ¥çœ‹</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040949445.png" alt="å¤ºå‘½é›·å…¬ç‹—---linux NO:11 linuxçš„æ–‡æœ¬æ–‡ä»¶æŸ¥çœ‹å‘½ä»¤- å¤ºå‘½é›·å…¬ç‹—- åšå®¢å›­"></p><ul><li>nlï¼šæ˜¾ç¤ºæ–‡ä»¶ä¸­çš„æ—¶å€™æ ‡æ³¨è¡Œå·</li><li>lessä¸moreç±»ä¼¼ï¼Œæœ‰åˆ†é¡µçš„åŠŸèƒ½ï¼Œä½†æ˜¯å¯ä»¥å¾€å‰ç¿»é¡µï¼ˆç©ºæ ¼ä¸‹ç¿»é¡µï¼ŒpageDownï¼ŒpageUpä»£è¡¨ç¿»åŠ¨é¡µé¢ï¼‰</li><li>åœ¨lessæŸ¥çœ‹æ¨¡å¼ä¸‹ï¼šqå‘½ä»¤é€€å‡ºï¼Œ<code>/</code>å‘½ä»¤å‘ä¸‹æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œ<code>?</code>å‘ä¸‹æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œ<code>n</code>ç»§ç»­æœå¯»ä¸‹ä¸€ä¸ªï¼Œ<code>N</code>å‘ä¸Šå¯»æ‰¾</li></ul><h3 id="Linuxé“¾æ¥"><a href="#Linuxé“¾æ¥" class="headerlink" title="Linuxé“¾æ¥"></a>Linuxé“¾æ¥</h3><h4 id="1-é“¾æ¥ç±»å‹"><a href="#1-é“¾æ¥ç±»å‹" class="headerlink" title="1.é“¾æ¥ç±»å‹"></a>1.é“¾æ¥ç±»å‹</h4><p>Linuxçš„é“¾æ¥åˆ†ä¸ºä¸¤ç§ï¼š  </p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040949118.png" alt="linuxä¹‹è½¯è¿æ¥ç¡¬é“¾æ¥- osc_3uvms8cwçš„ä¸ªäººç©ºé—´- OSCHINA - ä¸­æ–‡å¼€æºæŠ€æœ¯äº¤æµç¤¾åŒº"></p><ul><li>è½¯é“¾æ¥ï¼šç±»ä¼¼ä¸windowsä¸‹çš„å¿«æ·æ–¹å¼ï¼Œåˆ é™¤äº†æºæ–‡ä»¶ï¼Œå¿«æ·æ–¹å¼ä¹Ÿè®¿é—®ä¸äº†</li><li>ç¡¬é“¾æ¥ï¼šå…è®¸ä¸€ä¸ªæ–‡ä»¶æœ‰å¤šä¸ªè·¯å¾„ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡è¿™ç§æœºåˆ¶å»ºç«‹ç¡¬é“¾æ¥åˆ°ä¸€äº›é‡è¦æ–‡ä»¶ä¸Šï¼Œé˜²æ­¢è¯¯åˆ </li></ul><h4 id="2-åˆ›å»ºé“¾æ¥"><a href="#2-åˆ›å»ºé“¾æ¥" class="headerlink" title="2.åˆ›å»ºé“¾æ¥"></a>2.åˆ›å»ºé“¾æ¥</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ä¸ºf1æ–‡ä»¶åˆ›å»ºä¸€ä¸ªç¡¬é“¾æ¥f2</span></span><br><span class="line">ln f1 f2</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¸ºf1æ–‡ä»¶åˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥ï¼ˆç¬¦å·é“¾æ¥ï¼‰f3</span></span><br><span class="line">ln -s f1 f3</span><br></pre></td></tr></table></figure><h4 id="3-é“¾æ¥ç›¸å…³æµ‹è¯•"><a href="#3-é“¾æ¥ç›¸å…³æµ‹è¯•" class="headerlink" title="3.é“¾æ¥ç›¸å…³æµ‹è¯•"></a>3.é“¾æ¥ç›¸å…³æµ‹è¯•</h4><p>æ–‡ä»¶å†…å®¹ä¿®æ”¹ï¼š</p><p>åŸæ–‡ä»¶çš„å†…å®¹ï¼Œå…¶ç¡¬é“¾æ¥çš„å†…å®¹ï¼Œå…¶è½¯è¿æ¥è®¿é—®çš„å†…å®¹éƒ½æ˜¯ä¿æŒä¸€è‡´çš„ï¼Œä¿®æ”¹å…¶ä¸­ä¹‹ä¸€å…¶ä»–ä¸¤é¡¹è®¿é—®çš„å†…å®¹ä¹Ÿä¼šç›¸åº”å˜åŒ–</p><p>æ–‡ä»¶åˆ é™¤ï¼š</p><p>åˆ é™¤åŸæ–‡ä»¶åï¼Œç¡¬é“¾æ¥ä¾æ—§å¯ä»¥è®¿é—®ï¼Œè€Œè½¯é“¾æ¥æ— æ³•æ‰“å¼€ï¼ˆå¿«æ·æ–¹å¼å¤±æ•ˆï¼‰</p><h3 id="Vimç¼–è¾‘å™¨"><a href="#Vimç¼–è¾‘å™¨" class="headerlink" title="Vimç¼–è¾‘å™¨"></a>Vimç¼–è¾‘å™¨</h3><h4 id="1-Vimç®€ä»‹"><a href="#1-Vimç®€ä»‹" class="headerlink" title="1.Vimç®€ä»‹"></a>1.Vimç®€ä»‹</h4><ul><li>Vimæ˜¯ä¸€ç§æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œæœ‰ä»£ç è¡¥å…¨ï¼Œç¼–è¯‘åŠé”™è¯¯è·³è½¬ç­‰æ–¹ä¾¿ç¼–ç¨‹çš„åŠŸèƒ½</li><li>Vimå¯ä»¥é€šè¿‡å‚åŠ å®ç°IDEä¸€æ ·çš„åŠŸèƒ½</li><li>VimåŸºæœ¬ä½¿ç”¨ï¼šæŸ¥çœ‹å†…å®¹ï¼Œç¼–è¾‘å†…å®¹ï¼Œä¿å­˜å†…å®¹</li></ul><h4 id="2-Vimä¸‰æ¨¡å¼"><a href="#2-Vimä¸‰æ¨¡å¼" class="headerlink" title="2.Vimä¸‰æ¨¡å¼"></a>2.Vimä¸‰æ¨¡å¼</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040949256.jpeg" alt="Linux ä¹‹Vim å‘½ä»¤ä½¿ç”¨ï¼ˆè¯¦ç»†æ€»ç»“ï¼‰ - çŸ¥ä¹"></p><ul><li>å‘½ä»¤æ¨¡å¼åªèƒ½æŸ¥çœ‹æ–‡æœ¬ï¼Œå¯ä»¥é€šè¿‡é”®ç›˜è¾“å…¥åˆ‡æ¢åˆ°è¾“å…¥æ¨¡å¼å’Œåº•éƒ¨å‘½ä»¤è¡Œæ¨¡å¼</li><li>è¾“å…¥æ¨¡å¼å¯ä»¥ç¼–è¾‘æ–‡ä»¶</li><li>æœ«è¡Œæ¨¡å¼å³å‘½ä»¤è¡Œæ¨¡å¼å¯ä»¥æ‰§è¡Œé€€å‡ºï¼Œä¿å­˜æ–‡ä»¶ç­‰æ“ä½œ</li></ul><h4 id="3-å‘½ä»¤æ¨¡å¼"><a href="#3-å‘½ä»¤æ¨¡å¼" class="headerlink" title="3.å‘½ä»¤æ¨¡å¼"></a>3.å‘½ä»¤æ¨¡å¼</h4><ul><li><code>æ•°å­—+ç©ºæ ¼</code> ï¼šæ¨ªå‘ç§»åŠ¨å…‰æ ‡ï¼Œå‘å³ç§»åŠ¨nä¸ªå­—</li><li><code>æ•°å­—+å›è½¦</code>ï¼šçºµå‘ç§»åŠ¨å…‰æ ‡ï¼Œå‘ä¸‹ç§»åŠ¨nè¡Œ</li><li><code>/word</code>ï¼šå‘å…‰æ ‡ä¸‹å¯»æ‰¾åä¸ºwordçš„å­—ç¬¦ä¸²</li><li><code>?word</code>ï¼šå‘å…‰æ ‡ä¸‹å¯»æ‰¾åä¸ºwordçš„å­—ç¬¦ä¸²</li><li><code>n/N</code>:è¿›è¡Œä¸‹ç¿»é¡µå’Œä¸‹ç¿»é¡µï¼ˆnè¡¨ç¤ºé‡å¤ä¸Šä¸€ä¸ªæœå¯»åŠ¨ä½œï¼ŒNåˆ™æ˜¯åå‘äºä¸Šä¸€ä¸ªæœå¯»åŠ¨ä½œï¼‰</li><li><code>u</code>ï¼šé‡å¤ä¸Šä¸€ä¸ªæ“ä½œ</li></ul><h4 id="4-è¾“å…¥æ¨¡å¼"><a href="#4-è¾“å…¥æ¨¡å¼" class="headerlink" title="4.è¾“å…¥æ¨¡å¼"></a>4.è¾“å…¥æ¨¡å¼</h4><p>è¾“å…¥æ¨¡å¼å¸¸ç”¨æŒ‰é”®ï¼š</p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202202271721696.png" alt="image-20220227172148042" style="zoom: 67%;"><h4 id="5-å‘½ä»¤è¡Œæ¨¡å¼"><a href="#5-å‘½ä»¤è¡Œæ¨¡å¼" class="headerlink" title="5.å‘½ä»¤è¡Œæ¨¡å¼"></a>5.å‘½ä»¤è¡Œæ¨¡å¼</h4><p>å¸¸ç”¨å‘½ä»¤ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202202271722004.png" alt="image-20220227172248760"></p><p><code>:ZZ</code>ï¼šä¸å­˜å‚¨ç›´æ¥ç¦»å¼€ï¼ˆctrl + zï¼‰</p><p><code>:set nu</code>ï¼šè®¾ç½®è¡Œå·ï¼Œæ‰“å¼€æ–‡æœ¬æ¯ä¸€è¡Œéƒ½æ˜¾ç¤ºè¡Œå·</p><p>æ³¨æ„å¦‚æœè¾“å…¥çš„å‘½ä»¤ä¸å­˜åœ¨ä¼šè¿”å›127é”™è¯¯ï¼Œè€Œä¸”ä¼šå›åˆ°vimç•Œé¢</p><h3 id="Linuxè´¦å·ç®¡ç†"><a href="#Linuxè´¦å·ç®¡ç†" class="headerlink" title="Linuxè´¦å·ç®¡ç†"></a>Linuxè´¦å·ç®¡ç†</h3><p>è´¦å·ç®¡ç†å®è´¨æ˜¯å¯¹<code>/etc/passwd</code>æ–‡ä»¶çš„æ›´æ–°</p><h4 id="1-æ·»åŠ ç”¨æˆ·"><a href="#1-æ·»åŠ ç”¨æˆ·" class="headerlink" title="1.æ·»åŠ ç”¨æˆ·"></a>1.æ·»åŠ ç”¨æˆ·</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd -é€‰é¡¹ ç”¨æˆ·å</span><br></pre></td></tr></table></figure><p>useradd ç›¸å…³é€‰é¡¹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040950318.png" alt="op"></p><p>å¸¸ç”¨<code>-m</code>è‡ªåŠ¨ä¸ºç”¨æˆ·åœ¨homeä¸‹åˆ›å»ºç›®å½•</p><p>å¯ä»¥åœ¨/etc/passwdæ–‡ä»¶å¤¹ä¸‹æŸ¥çœ‹ç”¨æˆ·ç›¸å…³çš„é…ç½®ä¿¡æ¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/passwd</span><br></pre></td></tr></table></figure><h4 id="2-åˆ é™¤ç”¨æˆ·"><a href="#2-åˆ é™¤ç”¨æˆ·" class="headerlink" title="2.åˆ é™¤ç”¨æˆ·"></a>2.åˆ é™¤ç”¨æˆ·</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">userdel -é€‰é¡¹ ç”¨æˆ·å</span><br></pre></td></tr></table></figure><p>å¸¸ç”¨<code>-r</code>é€‰é¡¹è‡ªåŠ¨åˆ é™¤ç”¨æˆ·åœ¨homeä¸‹çš„ç”¨æˆ·ç›®å½•</p><h4 id="3-ä¿®æ”¹ç”¨æˆ·"><a href="#3-ä¿®æ”¹ç”¨æˆ·" class="headerlink" title="3.ä¿®æ”¹ç”¨æˆ·"></a>3.ä¿®æ”¹ç”¨æˆ·</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -é€‰é¡¹ ä¿®æ”¹å†…å®¹ ç”¨æˆ·å</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040950615.png" alt="é€‰é¡¹"></p><h4 id="4-åˆ‡æ¢ç”¨æˆ·"><a href="#4-åˆ‡æ¢ç”¨æˆ·" class="headerlink" title="4.åˆ‡æ¢ç”¨æˆ·"></a>4.åˆ‡æ¢ç”¨æˆ·</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su + ç”¨æˆ·å</span><br></pre></td></tr></table></figure><p>åˆ‡æ¢åˆ°rootç”¨æˆ·ï¼š<code>sudo su</code></p><p>ä¿®æ”¹ä¸»æœºåï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hostname ä¿®æ”¹çš„åç§°</span><br></pre></td></tr></table></figure><h4 id="5-ç”¨æˆ·å£ä»¤ç®¡ç†å‘½ä»¤"><a href="#5-ç”¨æˆ·å£ä»¤ç®¡ç†å‘½ä»¤" class="headerlink" title="5.ç”¨æˆ·å£ä»¤ç®¡ç†å‘½ä»¤"></a>5.ç”¨æˆ·å£ä»¤ç®¡ç†å‘½ä»¤</h4><p>åˆ›å»º/ä¿®æ”¹ç”¨æˆ·çš„å¯†ç </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd é€‰é¡¹ ç”¨æˆ·å</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040950354.png" alt="é€‰é¡¹"></p><h3 id="Linuxç”¨æˆ·ç»„ç®¡ç†"><a href="#Linuxç”¨æˆ·ç»„ç®¡ç†" class="headerlink" title="Linuxç”¨æˆ·ç»„ç®¡ç†"></a>Linuxç”¨æˆ·ç»„ç®¡ç†</h3><p>ç»„çš„å¢åŠ ï¼Œåˆ é™¤å’Œä¿®æ”¹å®é™…ä¸Šå°±æ˜¯å¯¹<code>/etc/group</code>æ–‡ä»¶çš„æ›´æ–°</p><h4 id="1-åˆ›å»ºç”¨æˆ·ç»„"><a href="#1-åˆ›å»ºç”¨æˆ·ç»„" class="headerlink" title="1.åˆ›å»ºç”¨æˆ·ç»„"></a>1.åˆ›å»ºç”¨æˆ·ç»„</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ç”¨æˆ·ç»„ç»„çš„idè‡ªå¢1</span></span><br><span class="line">groupadd ç»„å</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> æŒ‡å®šidåˆ›å»ºç”¨æˆ·ç»„</span></span><br><span class="line">groupadd -g 233 ç»„å</span><br></pre></td></tr></table></figure><h4 id="2-åˆ é™¤ç”¨æˆ·ç»„"><a href="#2-åˆ é™¤ç”¨æˆ·ç»„" class="headerlink" title="2.åˆ é™¤ç”¨æˆ·ç»„"></a>2.åˆ é™¤ç”¨æˆ·ç»„</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> åˆ é™¤ç”¨æˆ·ç»„</span></span><br><span class="line">groupdel ç»„å</span><br></pre></td></tr></table></figure><h4 id="3-ä¿®æ”¹ç”¨æˆ·ç»„"><a href="#3-ä¿®æ”¹ç”¨æˆ·ç»„" class="headerlink" title="3.ä¿®æ”¹ç”¨æˆ·ç»„"></a>3.ä¿®æ”¹ç”¨æˆ·ç»„</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> åŸºæœ¬æ ·å¼</span></span><br><span class="line">groupmod é€‰é¡¹ ä¿®æ”¹å†…å®¹ ç»„å</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ¡ˆä¾‹</span></span><br><span class="line">groupmod -g 666 -n newname ç»„å</span><br></pre></td></tr></table></figure><h4 id="4-åˆ‡æ¢ç”¨æˆ·ç»„"><a href="#4-åˆ‡æ¢ç”¨æˆ·ç»„" class="headerlink" title="4.åˆ‡æ¢ç”¨æˆ·ç»„"></a>4.åˆ‡æ¢ç”¨æˆ·ç»„</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ç™»å½•çš„å½“å‰ç”¨æˆ·åˆ‡æ¢åˆ°rootç»„</span></span><br><span class="line">newgrp root</span><br></pre></td></tr></table></figure><h4 id="5-ç”¨æˆ·ç®¡ç†ç›¸å…³æ–‡ä»¶"><a href="#5-ç”¨æˆ·ç®¡ç†ç›¸å…³æ–‡ä»¶" class="headerlink" title="5.ç”¨æˆ·ç®¡ç†ç›¸å…³æ–‡ä»¶"></a>5.ç”¨æˆ·ç®¡ç†ç›¸å…³æ–‡ä»¶</h4><p><code>/etc/passwd</code>æ–‡ä»¶ï¼š</p><p><strong>å…·ä½“æ ¼å¼</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç”¨æˆ·å:å£ä»¤ï¼ˆä¸å¯è§ä¸€èˆ¬æ˜¾ç¤ºä¸ºxï¼‰:ç”¨æˆ·æ ‡è¯†å·:ç»„æ ‡è¯†å·:æ³¨é‡Šæ€§æè¿°:ä¸»ç›®å½•:ç™»å½•Shell</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040950861.jpeg" alt="è¯¦è§£Linuxä¸­/etc/passwdæ–‡ä»¶è¯¦è§£Linuxä¸­/etc/passwdæ–‡ä»¶"></p><p>è¯¥æ–‡ä»¶çš„æ¯ä¸€è¡Œéƒ½ä»£è¡¨ä¸€ä¸ªç”¨æˆ·ï¼Œå¯ä»¥æŸ¥çœ‹ç”¨æˆ·ä¸»ç›®å½•ä½ç½®ï¼Œå¹¶æŸ¥çœ‹å±äºå“ªä¸€ä¸ªç»„</p><p><code>/etc/shadow</code>æ–‡ä»¶ï¼š</p><p>ç”¨æˆ·å¯†ç åŠ å¯†åå­˜æ”¾åœ¨/etc/shadowæ–‡ä»¶ï¼Œä¸passwdæ–‡ä»¶ä¸€ä¸€å¯¹åº”</p><p><strong>å…·ä½“æ ¼å¼</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç™»å½•å:åŠ å¯†å£ä»¤:æœ€åä¸€æ¬¡ä¿®æ”¹æ—¶é—´:æœ€å°æ—¶é—´é—´éš”:æœ€å¤§æ—¶é—´é—´éš”:è­¦å‘Šæ—¶é—´:ä¸æ´»åŠ¨æ—¶é—´:å¤±æ•ˆæ—¶é—´:æ ‡å¿—</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040950761.jpeg" alt="img"></p><p><code>/etc/group</code>æ–‡ä»¶ï¼š</p><p><strong>å…·ä½“æ ¼å¼</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç»„å:å£ä»¤:ç»„ID:ç»„å†…ç”¨æˆ·åˆ—è¡¨</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040950338.jpeg" alt="img"></p><h3 id="ç£ç›˜ç®¡ç†"><a href="#ç£ç›˜ç®¡ç†" class="headerlink" title="ç£ç›˜ç®¡ç†"></a>ç£ç›˜ç®¡ç†</h3><h4 id="1-dfå‘½ä»¤"><a href="#1-dfå‘½ä»¤" class="headerlink" title="1.dfå‘½ä»¤"></a>1.dfå‘½ä»¤</h4><p>åˆ—å‡ºæ–‡ä»¶ç³»ç»Ÿæ•´ä½“çš„ç£ç›˜ä½¿ç”¨é‡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æ™®é€šæŸ¥çœ‹</span></span><br><span class="line">df</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å†…å­˜è½¬æ¢ä¸ºM</span></span><br><span class="line">df -h</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041103972.png" alt="img"></p><h4 id="2-duå‘½ä»¤"><a href="#2-duå‘½ä»¤" class="headerlink" title="2.duå‘½ä»¤"></a>2.duå‘½ä»¤</h4><p>æ£€æŸ¥ç£ç›˜ç©ºé—´ä½¿ç”¨é‡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹å½“å‰ç›®å½•å†…å­˜å ç”¨</span></span><br><span class="line">du </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ£€æŸ¥æ ¹ç›®å½•æ¯ä¸ªç›®å½•æ‰€å ç”¨çš„å®¹é‡</span></span><br><span class="line">du -sm /*</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040950313.png" alt="img"></p><h4 id="3-mount-amp-umountå‘½ä»¤"><a href="#3-mount-amp-umountå‘½ä»¤" class="headerlink" title="3.mount&amp;umountå‘½ä»¤"></a>3.mount&amp;umountå‘½ä»¤</h4><p>å¯ç±»æ¯”äºUç›˜çš„ä½¿ç”¨</p><p>mountï¼šæŒ‚è½½è®¾å¤‡</p><p>umountï¼šå¸è½½è®¾å¤‡</p><h3 id="è¿›ç¨‹ç®¡ç†"><a href="#è¿›ç¨‹ç®¡ç†" class="headerlink" title="è¿›ç¨‹ç®¡ç†"></a>è¿›ç¨‹ç®¡ç†</h3><h4 id="1-è¿›ç¨‹ä»‹ç»"><a href="#1-è¿›ç¨‹ä»‹ç»" class="headerlink" title="1.è¿›ç¨‹ä»‹ç»"></a>1.è¿›ç¨‹ä»‹ç»</h4><ul><li>åœ¨Liunxä¸­ï¼Œæ¯ä¸ªç¨‹åºéƒ½æ˜¯æœ‰è‡ªå·±çš„ä¸€ä¸ªè¿›ç¨‹ï¼Œæ¯ä¸€ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªidå·</li><li>æ¯ä¸€ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªçˆ¶è¿›ç¨‹</li><li>è¿›ç¨‹æœ‰ä¸¤ç§å­˜åœ¨æ–¹å¼ï¼šå‰å°è¿è¡Œï¼ˆç¨‹åºï¼‰ï¼Œåå°è¿è¡Œï¼ˆæœåŠ¡ï¼‰</li></ul><h4 id="2-è¿›ç¨‹ä¸çº¿ç¨‹"><a href="#2-è¿›ç¨‹ä¸çº¿ç¨‹" class="headerlink" title="2.è¿›ç¨‹ä¸çº¿ç¨‹"></a>2.è¿›ç¨‹ä¸çº¿ç¨‹</h4><ul><li>è¿›ç¨‹å°±æ˜¯åº”ç”¨ç¨‹åºçš„å¯åŠ¨å®ä¾‹ï¼Œè€Œçº¿ç¨‹ä»å±äºè¿›ç¨‹ï¼Œæ˜¯ç¨‹åºçš„å®é™…æ‰§è¡Œè€…</li><li>ä¸€ä¸ªè¿›ç¨‹è‡³å°‘åŒ…å«ä¸€ä¸ªä¸»çº¿ç¨‹ï¼Œä¹Ÿå¯ä»¥æœ‰æ›´å¤šçš„å­çº¿ç¨‹</li><li>å¯¹æ“ä½œç³»ç»Ÿæ¥è¯´ï¼Œçº¿ç¨‹æ˜¯æœ€å°çš„æ‰§è¡Œå•å…ƒï¼Œè¿›ç¨‹æ˜¯æœ€å°çš„èµ„æºç®¡ç†å•å…ƒ</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040950452.webp" alt="img"></p><h4 id="3-ä»»åŠ¡æ‰§è¡Œæ–¹å¼"><a href="#3-ä»»åŠ¡æ‰§è¡Œæ–¹å¼" class="headerlink" title="3.ä»»åŠ¡æ‰§è¡Œæ–¹å¼"></a>3.ä»»åŠ¡æ‰§è¡Œæ–¹å¼</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040950096.png" alt="img"></p><ul><li>ä¸²è¡Œæ˜¯æŒ‡å¤šä¸ªä»»åŠ¡æ—¶ï¼Œå„ä¸ªä»»åŠ¡æŒ‰é¡ºåºæ‰§è¡Œï¼Œå®Œæˆä¸€ä¸ªä¹‹åæ‰èƒ½è¿›è¡Œä¸‹ä¸€ä¸ª</li><li>å¹¶è¡ŒæŒ‡çš„æ˜¯å¤šä¸ªä»»åŠ¡å¯ä»¥åŒæ—¶æ‰§è¡Œï¼Œå¼‚æ­¥æ˜¯å¤šä¸ªä»»åŠ¡å¹¶è¡Œçš„å‰ææ¡ä»¶</li><li>å¹¶å‘æ˜¯æŒ‡ä¸¤ä¸ªæˆ–å¤šä¸ªäº‹ä»¶åœ¨åŒä¸€æ—¶é—´é—´éš”å†…å‘ç”Ÿï¼Œå¸¸ç”¨äºå¤šçº¿ç¨‹ç¼–ç¨‹ä¸­</li></ul><h4 id="4-åŒæ­¥å¼‚æ­¥é˜»å¡"><a href="#4-åŒæ­¥å¼‚æ­¥é˜»å¡" class="headerlink" title="4.åŒæ­¥å¼‚æ­¥é˜»å¡"></a>4.åŒæ­¥å¼‚æ­¥é˜»å¡</h4><p>åŒæ­¥ä¸å¼‚æ­¥å…³æ³¨çš„æ˜¯<strong>æ¶ˆæ¯é€šä¿¡æœºåˆ¶</strong>ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040950691.png" alt="img"></p><ul><li>ç”±è°ƒç”¨æ–¹ç›²ç›®ä¸»åŠ¨é—®è¯¢çš„æ–¹å¼æ˜¯åŒæ­¥è°ƒç”¨</li><li>ç”±è¢«è°ƒç”¨æ–¹ä¸»åŠ¨é€šçŸ¥è°ƒç”¨æ–¹ä»»åŠ¡å·²å®Œæˆçš„æ–¹å¼æ˜¯å¼‚æ­¥è°ƒç”¨</li><li>åŒæ­¥å¼‚æ­¥æ˜¯å¯¹ç³»ç»Ÿå†…æ ¸è€Œè¨€ï¼ˆæ˜¯å¦ä¸»åŠ¨é€šçŸ¥åº”ç”¨å±‚ï¼‰</li></ul><p>é˜»å¡å’Œéé˜»å¡å…³æ³¨çš„æ˜¯<strong>ç¨‹åºåœ¨ç­‰å¾…è°ƒç”¨ç»“æœ</strong>æ—¶çš„çŠ¶æ€ï¼š</p><p><img src="https://pic3.zhimg.com/80/v2-6507ab3517814b1b84fbff9a3eb31842_720w.png" alt="img"></p><ul><li>è¢«æŒ‚èµ·æ— æ³•æ‰§è¡Œå…¶ä»–æ“ä½œçš„åˆ™æ˜¯é˜»å¡å‹</li><li>è¢«ç«‹å³ã€ŒæŠ½ç¦»ã€å»å®Œæˆå…¶ä»–ã€Œä»»åŠ¡ã€çš„åˆ™æ˜¯éé˜»å¡å‹çš„</li><li>é˜»å¡å’Œéé˜»å¡å¯¹åº”ç”¨å±‚è€Œè¨€ï¼ˆåº”ç”¨æ˜¯å¦å»åšå…¶ä»–äº‹æƒ…ï¼‰</li></ul><h4 id="5-pså‘½ä»¤"><a href="#5-pså‘½ä»¤" class="headerlink" title="5.pså‘½ä»¤"></a>5.pså‘½ä»¤</h4><p><code>ps</code>æŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸­æ­£åœ¨æ‰§è¡Œçš„å„ç§è¿›ç¨‹</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040950813.png" alt="Linuxå­¦ä¹ ä¹‹è·¯(ä¸‰) â€”â€” Linuxé«˜çº§ç³»ç»Ÿç®¡ç†å‘½ä»¤"></p><p>å¸¸ç”¨æ¡ˆä¾‹ï¼š</p><p>æŸ¥çœ‹mysqlçš„æ‰€æœ‰è¿›ç¨‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -aux|grep mysql</span><br></pre></td></tr></table></figure><ul><li><code>ps -aux</code> ï¼šæŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹ä¿¡æ¯</li><li><code>|</code> ï¼šLinuxç®¡é“ç¬¦ï¼Œè¿‡æ»¤ä¸Šä¸€æ¡å‘½ä»¤è¾“å‡ºçš„ä¿¡æ¯</li><li><code>grep</code> ï¼šæŸ¥æ‰¾æ–‡ä»¶ä¸­ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä¸²</li></ul><p>æŸ¥çœ‹çˆ¶è¿›ç¨‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef|grep mysql</span><br></pre></td></tr></table></figure><p>æ˜¾ç¤ºè¿›ç¨‹æ ‘</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> -pæ˜¾ç¤ºçˆ¶idï¼Œ-uæ˜¾ç¤ºç”¨æˆ·ç»„</span></span><br><span class="line">pstree -pu</span><br></pre></td></tr></table></figure><h4 id="6-killå‘½ä»¤"><a href="#6-killå‘½ä»¤" class="headerlink" title="6.killå‘½ä»¤"></a>6.killå‘½ä»¤</h4><p>å¼ºåˆ¶ç»“æŸè¯¥è¿›ç¨‹ï¼Œç±»ä¼¼ä¸windowsç»“æŸä»»åŠ¡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill -9 è¿›ç¨‹id</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040952867.png&quot; alt=&quot;image-20210904095248687&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="å¼€å‘å·¥å…·" scheme="https://autovy.github.io/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="å…¥é—¨æ•™ç¨‹" scheme="https://autovy.github.io/tags/%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/"/>
    
      <category term="å¼€å‘å·¥å…·" scheme="https://autovy.github.io/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
      <category term="Linux" scheme="https://autovy.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>ç¡¬ä»¶å¼€å‘|stm32ä½¿ç”¨æ¡ˆä¾‹</title>
    <link href="https://autovy.github.io/2021/06/18/Hardware/%E7%A1%AC%E4%BB%B6%E5%AD%A6%E4%B9%A0-stm32%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B/"/>
    <id>https://autovy.github.io/2021/06/18/Hardware/%E7%A1%AC%E4%BB%B6%E5%AD%A6%E4%B9%A0-stm32%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B/</id>
    <published>2021-06-18T06:30:00.000Z</published>
    <updated>2021-09-05T08:41:34.428Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041048103.png" alt="image-20210904104854742"></p><span id="more"></span><h3 id="GPIOåº“å¯¼å…¥"><a href="#GPIOåº“å¯¼å…¥" class="headerlink" title="GPIOåº“å¯¼å…¥"></a>GPIOåº“å¯¼å…¥</h3><p>æ·»åŠ <code>USE_STDPERIPH_DRIVER</code>åˆ°C/C++é…ç½®ä¸­</p><h3 id="ç‚¹äº®LED"><a href="#ç‚¹äº®LED" class="headerlink" title="ç‚¹äº®LED"></a>ç‚¹äº®LED</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stm32f10x.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªGPIOä¿¡æ¯ç»“æ„ä½“ï¼ˆé™æ€å˜é‡ï¼‰</span></span><br><span class="line"><span class="keyword">static</span> GPIO_InitTypeDef  GPIO_InitStructure;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 1.æ‰“å¼€GPIOBç»„çš„æ—¶é’Ÿï¼ˆé™ä½åŠŸè€—ï¼‰é€‰æ‹©å¯¹åº”å¤–è®¾ */</span></span><br><span class="line">RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOB, ENABLE);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é…ç½®å¼€å¯ç«¯å£å·</span></span><br><span class="line"><span class="comment">/* 2.é…ç½®ä¸ºè¾“å‡ºæ¨æŒ½ï¼ˆå¤šä¸ªIOä½¿ç”¨ä½æˆ–æ·»åŠ ï¼‰ */</span></span><br><span class="line">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0;<span class="comment">//å¼•è„šé€‰æ‹©</span></span><br><span class="line">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;<span class="comment">//ç«¯å£è¾“å‡ºé€Ÿç‡ï¼ˆåŠŸè€—ï¼‰</span></span><br><span class="line">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;<span class="comment">//ç«¯å£æ¨¡å¼ï¼šæ¨æŒ½è¾“å‡º</span></span><br><span class="line">GPIO_Init(GPIOB, &amp;GPIO_InitStructure);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é€‰æ‹©å¤–è®¾å¹¶æ§åˆ¶ç«¯å£å·è¾“å‡ºä¿¡å·</span></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">GPIO_ResetBits(GPIOB, GPIO_Pin_0);<span class="comment">// PB1ä½ç”µå¹³</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>å®šä¹‰GPIO_InitTypeDefç±»å‹ç»“æ„ä½“ï¼Œå¯ä¿®æ”¹å…¶ç«¯å£é…ç½®</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109051306282.png" alt="image-20210618200840443"></p></li><li><p>GPIO_Initå‡½æ•°é€‰æ‹©è¾“å‡ºå¤–è®¾ï¼Œå¹¶æŒ‡å‘ç«¯å£é…ç½®</p></li><li><p>GPIO_ResetBitsé€‰æ‹©å¤–è®¾ä¸ç«¯å£ï¼Œå¹¶è¾“å‡ºä½ç”µå¹³</p></li><li><p>GPIO_setBitsé€‰æ‹©å¤–è®¾ä¸ç«¯å£ï¼Œå¹¶è¾“å‡ºé«˜ç”µå¹³</p></li></ul><h3 id="èœ‚é¸£å™¨"><a href="#èœ‚é¸£å™¨" class="headerlink" title="èœ‚é¸£å™¨"></a>èœ‚é¸£å™¨</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stm32f10x.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªGPIOä¿¡æ¯ç»“æ„ä½“ï¼ˆé™æ€å˜é‡ï¼‰</span></span><br><span class="line"><span class="keyword">static</span> GPIO_InitTypeDef  GPIO_InitStructure;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delay</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> i = <span class="number">5000000</span>;</span><br><span class="line"><span class="keyword">while</span>(i--);<span class="comment">// æ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œåªæ˜¯ä¸ºäº†æ¶ˆè€—æ—¶é—´</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// èœ‚é¸£å™¨åˆå§‹åŒ–</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">BEEP_Init</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">/* 1.æ‰“å¼€GPIOBç»„çš„æ—¶é’Ÿï¼ˆé™ä½åŠŸè€—ï¼‰é€‰æ‹©å¯¹åº”å¤–è®¾ */</span></span><br><span class="line">RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 2.é…ç½®ä¸ºè¾“å‡ºæ¨æŒ½ï¼ˆå¤šä¸ªIOä½¿ç”¨ä½æˆ–æ·»åŠ ï¼‰ */</span></span><br><span class="line">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_1;<span class="comment">//å¼•è„šé€‰æ‹©</span></span><br><span class="line">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;<span class="comment">//ç«¯å£è¾“å‡ºé€Ÿç‡ï¼ˆåŠŸè€—ï¼‰</span></span><br><span class="line">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;<span class="comment">//ç«¯å£æ¨¡å¼ï¼šæ¨æŒ½è¾“å‡º</span></span><br><span class="line">GPIO_Init(GPIOA, &amp;GPIO_InitStructure);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.ç»™èœ‚é¸£å™¨åˆå§‹åŒ–ç”µå¹³ï¼ˆä¸å“ï¼‰</span></span><br><span class="line">GPIO_SetBits(GPIOA, GPIO_Pin_1);<span class="comment">// ä¸å“</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">BEEP_Init();<span class="comment">// åˆå§‹åŒ–èœ‚é¸£å™¨</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">GPIO_ResetBits(GPIOA, GPIO_Pin_1);</span><br><span class="line">delay();<span class="comment">// å»¶æ—¶ä¸€æ®µæ—¶é—´</span></span><br><span class="line"></span><br><span class="line">GPIO_SetBits(GPIOA, GPIO_Pin_1);</span><br><span class="line">delay();<span class="comment">// å»¶æ—¶ä¸€æ®µæ—¶é—´</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åˆ‡æ¢å¤–è®¾ä¸ºAåˆ™å¯ä»¥é€‰æ‹©åˆ°èœ‚é¸£å™¨ï¼ˆä»¥å¼€å‘æ¿æ‰‹å†Œä¸ºå‡†ï¼‰</li></ul><h3 id="æŒ‰é’®"><a href="#æŒ‰é’®" class="headerlink" title="æŒ‰é’®"></a>æŒ‰é’®</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stm32f10x.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªGPIOä¿¡æ¯ç»“æ„ä½“ï¼ˆé™æ€å˜é‡ï¼‰</span></span><br><span class="line"><span class="keyword">static</span> GPIO_InitTypeDef  GPIO_InitStructure;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LED_ALL GPIO_Pin_0|GPIO_Pin_1|GPIO_Pin_2|GPIO_Pin_3|GPIO_Pin_4|GPIO_Pin_5|GPIO_Pin_6|GPIO_Pin_7</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delay</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> i = <span class="number">5000000</span>;</span><br><span class="line"><span class="keyword">while</span>(i--);<span class="comment">// æ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œåªæ˜¯ä¸ºäº†æ¶ˆè€—æ—¶é—´</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// LEDåˆå§‹åŒ–</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">LED_Init</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">/* 1.æ‰“å¼€GPIOBç»„çš„æ—¶é’Ÿï¼ˆé™ä½åŠŸè€—ï¼‰ */</span></span><br><span class="line">RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOB|RCC_APB2Periph_AFIO, ENABLE);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 2.å…³é—­JTAGå¼•è„šæ˜ å°„ï¼ˆPA13/14/15 PB3/4ï¼‰  */</span></span><br><span class="line">    GPIO_PinRemapConfig(GPIO_Remap_SWJ_Disable, ENABLE);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 3.é…ç½®ä¸ºè¾“å‡ºæ¨æŒ½ï¼ˆå¤šä¸ªIOä½¿ç”¨ä½æˆ–æ·»åŠ ï¼‰ */</span></span><br><span class="line">GPIO_InitStructure.GPIO_Pin = LED_ALL;<span class="comment">//å¼•è„šé€‰æ‹©</span></span><br><span class="line">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;<span class="comment">//ç«¯å£è¾“å‡ºé€Ÿç‡ï¼ˆåŠŸè€—ï¼‰</span></span><br><span class="line">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;<span class="comment">//ç«¯å£æ¨¡å¼ï¼šæ¨æŒ½è¾“å‡º</span></span><br><span class="line">GPIO_Init(GPIOB, &amp;GPIO_InitStructure);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.åˆå§‹åŒ–ç”µå¹³ï¼ˆä¸äº®ï¼‰</span></span><br><span class="line">GPIO_SetBits(GPIOB, LED_ALL);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŒ‰é”®åˆå§‹åŒ–</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">KEY_Init</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">/* 1.æ‰“å¼€GPIOç»„çš„æ—¶é’Ÿï¼ˆé™ä½åŠŸè€—ï¼‰ */</span></span><br><span class="line">RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 2.é…ç½®ä¸ºè¾“å…¥ï¼ˆå¤šä¸ªIOä½¿ç”¨ä½æˆ–æ·»åŠ ï¼‰ */</span></span><br><span class="line">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_7;<span class="comment">//å¼•è„šé€‰æ‹©</span></span><br><span class="line">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class="line">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING;<span class="comment">// æŒ‰é’®å¼€å…³ä½¿ç”¨æµ®ç©ºè¾“å…¥æ¨¡å¼</span></span><br><span class="line">GPIO_Init(GPIOA, &amp;GPIO_InitStructure);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">LED_Init();<span class="comment">// åˆå§‹åŒ–LED</span></span><br><span class="line">KEY_Init();<span class="comment">// åˆå§‹åŒ–æŒ‰é”®</span></span><br><span class="line">GPIO_SetBits(GPIOB, GPIO_Pin_1);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_7)==<span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">GPIO_ResetBits(GPIOB, GPIO_Pin_1);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">GPIO_SetBits(GPIOB, GPIO_Pin_1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æµ®ç©ºè¾“å…¥_IN_FLOATING â€”â€”æµ®ç©ºè¾“å…¥ï¼ŒIOçš„ç”µå¹³çŠ¶æ€æ˜¯ä¸ç¡®å®šçš„ï¼Œå®Œå…¨ç”±å¤–éƒ¨è¾“å…¥å†³å®šï¼›å¦‚æœåœ¨è¯¥å¼•è„šæ‚¬ç©ºçš„æƒ…å†µä¸‹ï¼Œè¯»å–è¯¥ç«¯å£çš„ç”µå¹³æ˜¯ä¸ç¡®å®šçš„ï¼›</li><li>å¸¦ä¸Šæ‹‰è¾“å…¥IPUâ€”â€”IOå†…éƒ¨ä¸Šæ‹‰ç”µé˜»è¾“å…¥  ==æ‚¬ç©ºæ—¶ï¼Œå¤„äºé«˜ç”µå¹³çŠ¶æ€</li><li>å¸¦ä¸‹æ‹‰è¾“å…¥<em>IPDâ€”â€” IOå†…éƒ¨ä¸‹æ‹‰ç”µé˜»è¾“å…¥ ==æ‚¬ç©ºæ—¶ï¼Œå¤„äºä½ç”µå¹³çŠ¶æ€</em></li><li>æ¨¡æ‹Ÿè¾“å…¥AIN â€”â€”åº”ç”¨ADCæ¨¡æ‹Ÿè¾“å…¥ï¼Œæˆ–è€…ä½åŠŸè€—ä¸‹çœç”µ</li></ul><h3 id="ä¸²å£é€šä¿¡"><a href="#ä¸²å£é€šä¿¡" class="headerlink" title="ä¸²å£é€šä¿¡"></a>ä¸²å£é€šä¿¡</h3><h4 id="ï¼ˆ1ï¼‰ä¸²å£é€šä¿¡ç”µè·¯è¿æ¥"><a href="#ï¼ˆ1ï¼‰ä¸²å£é€šä¿¡ç”µè·¯è¿æ¥" class="headerlink" title="ï¼ˆ1ï¼‰ä¸²å£é€šä¿¡ç”µè·¯è¿æ¥"></a>ï¼ˆ1ï¼‰ä¸²å£é€šä¿¡ç”µè·¯è¿æ¥</h4><p>ä¸²å£é€šä¿¡ç”µè·¯è¿æ¥ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109051307840.png" alt="image-20210622112304168"></p><ul><li>12ï¼Œ78 ä¸ºè“ç‰™ä¸²å£ï¼ˆæ‰‹æœºappï¼‰</li><li>34ä¸ºä¸²å£è°ƒè¯•</li><li>56 stm32èŠ¯ç‰‡</li></ul><p>é€šè®¯å¯¹è±¡å°†ä¸¤è¾¹å¼•è„šçŸ­æ¥å³å¯</p><h4 id="ï¼ˆ2ï¼‰é‡å†™printfå‡½æ•°"><a href="#ï¼ˆ2ï¼‰é‡å†™printfå‡½æ•°" class="headerlink" title="ï¼ˆ2ï¼‰é‡å†™printfå‡½æ•°"></a>ï¼ˆ2ï¼‰é‡å†™printfå‡½æ•°</h4><p>é‡å†™printfå‡½æ•°ä½¿å…¶å¯ä»¥å°†æ–‡æœ¬è¾“å‡ºåˆ°ä¸²å£</p><p>è¾“å‡ºå­—ç¬¦ä¸²åˆ°ä¸²å£ï¼š</p><ul><li>é…ç½®ç›¸å…³åº“ï¼š</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109051307778.png" alt="image-20210622114338205"></p><ul><li>é‡æ–°å®šä¹‰fputcå‡½æ•°ï¼Œè®©printfè¾“å‡ºæ•°æ®åˆ°ä¸²å£1<img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109051307727.png" alt="image-20210622114454922"></li></ul><h4 id="ï¼ˆ3ï¼‰ä¸²å£å•å­—ç¬¦å‘é€"><a href="#ï¼ˆ3ï¼‰ä¸²å£å•å­—ç¬¦å‘é€" class="headerlink" title="ï¼ˆ3ï¼‰ä¸²å£å•å­—ç¬¦å‘é€"></a>ï¼ˆ3ï¼‰ä¸²å£å•å­—ç¬¦å‘é€</h4><p>ï¼ˆèŠ¯ç‰‡ä¸ä¸²å£é€šä¿¡ï¼‰</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stm32f10x.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//GPIOä¿¡æ¯ç»“æ„ä½“åˆå§‹åŒ–</span></span><br><span class="line"><span class="comment">// é…ç½®IOå£ç»“æ„ä½“</span></span><br><span class="line">GPIO_InitTypeDef   GPIO_InitStructure;</span><br><span class="line"><span class="comment">// é…ç½®ä¸­æ–­ç»“æ„ä½“</span></span><br><span class="line">EXTI_InitTypeDef   EXTI_InitStructure;</span><br><span class="line"><span class="comment">// é…ç½®ä¸­æ–­ä¼˜å…ˆçº§ç»“æ„ä½“</span></span><br><span class="line">NVIC_InitTypeDef   NVIC_InitStructure;</span><br><span class="line"><span class="comment">// é…ç½®ä¸²å£ç»“æ„é¢˜</span></span><br><span class="line">USART_InitTypeDef USART_InitStructure; </span><br><span class="line"></span><br><span class="line"><span class="comment">//è®¾ç½®ä¸²å£1--&gt;PA9+PA10</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">usart1_init</span><span class="params">(u32 bound)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1.ä½¿èƒ½GPIOå¤–è®¾ã€IOå¤ç”¨æ—¶é’Ÿã€USART2æ—¶é’Ÿ PA9 å’ŒPA10</span></span><br><span class="line">RCC_APB2PeriphClockCmd(RCC_APB2Periph_USART1, ENABLE);</span><br><span class="line">RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA | RCC_APB2Periph_AFIO, ENABLE);</span><br><span class="line">    </span><br><span class="line"><span class="comment">//2.é…ç½®GPIO + åˆå§‹åŒ–GPIO</span></span><br><span class="line">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_9; <span class="comment">//  PA2   TX</span></span><br><span class="line">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP;  <span class="comment">//å¤ç”¨æ¨æŒ½è¾“å‡º</span></span><br><span class="line">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class="line">GPIO_Init(GPIOA, &amp;GPIO_InitStructure);<span class="comment">//åˆå§‹åŒ–GPIO</span></span><br><span class="line"></span><br><span class="line">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_10; <span class="comment">//  PA3   RX</span></span><br><span class="line">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING;  <span class="comment">//æµ®ç©ºè¾“å…¥   PA10  RX</span></span><br><span class="line">GPIO_Init(GPIOA, &amp;GPIO_InitStructure);<span class="comment">//åˆå§‹åŒ–GPIO</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3.é…ç½®USART1 + åˆå§‹åŒ–USART1</span></span><br><span class="line">USART_InitStructure.USART_BaudRate = bound;<span class="comment">//æ³¢ç‰¹ç‡</span></span><br><span class="line">USART_InitStructure.USART_WordLength = USART_WordLength_8b;<span class="comment">//æ•°æ®ä½8ä½</span></span><br><span class="line">USART_InitStructure.USART_StopBits = USART_StopBits_1;<span class="comment">//åœæ­¢ä½1ä½</span></span><br><span class="line">USART_InitStructure.USART_Parity = USART_Parity_No;<span class="comment">//æ— å¥‡å¶æ£€éªŒ</span></span><br><span class="line">USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;<span class="comment">//æ— ç¡¬ä»¶æ•°æ®æµæ§åˆ¶</span></span><br><span class="line">USART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;<span class="comment">//æ”¶å‘æ¨¡å¼</span></span><br><span class="line">USART_Init(USART1, &amp;USART_InitStructure);<span class="comment">//æŠŠé…ç½®ä¿¡æ¯åŠ è½½åˆ°ä¸²å£2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//4.é…ç½®NVIC + åˆå§‹åŒ–NVIC </span></span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannel = USART1_IRQn;<span class="comment">//é€‰æ‹©ä¸²å£2çš„ä¸­æ–­</span></span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannelSubPriority = <span class="number">0</span>;<span class="comment">//è®¾ç½®æŠ¢å ä¼˜å…ˆçº§</span></span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = <span class="number">0</span>; <span class="comment">//è®¾ç½®å“åº”ä¼˜å…ˆçº§</span></span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;<span class="comment">//ä½¿èƒ½ä¸²å£2çš„ä¸­æ–­</span></span><br><span class="line">NVIC_Init(&amp;NVIC_InitStructure);<span class="comment">//æŠŠé…ç½®ä¿¡æ¯åŠ è½½åˆ°ä¸­æ–­</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//5.ä½¿èƒ½ä¸²å£ä¸­æ–­</span></span><br><span class="line">USART_ITConfig(USART1,USART_IT_RXNE,ENABLE);<span class="comment">//æ¥æ”¶åˆ°æ•°æ®è§¦å‘ä¸­æ–­</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//6.ä½¿èƒ½ä¸²å£</span></span><br><span class="line">USART_Cmd(USART1,ENABLE);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å•å­—ç¬¦å‘é€åˆ°ä¸²å£</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// é…ç½®ä¸²å£æ¯”ç‰¹ç‡</span></span><br><span class="line">usart1_init(<span class="number">9600</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘é€å­—ç¬¦åˆ°ä¸²å£1</span></span><br><span class="line">USART_SendData(USART1,<span class="string">&#x27;h&#x27;</span>);</span><br><span class="line"><span class="keyword">while</span>(USART_GetFlagStatus(USART1,USART_FLAG_TXE)==RESET);  </span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘é€å­—ç¬¦åˆ°ä¸²å£1</span></span><br><span class="line">USART_SendData(USART1,<span class="string">&#x27;e&#x27;</span>);</span><br><span class="line"><span class="keyword">while</span>(USART_GetFlagStatus(USART1,USART_FLAG_TXE)==RESET);  </span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘é€å­—ç¬¦åˆ°ä¸²å£1</span></span><br><span class="line">USART_SendData(USART1,<span class="string">&#x27;l&#x27;</span>);</span><br><span class="line"><span class="keyword">while</span>(USART_GetFlagStatus(USART1,USART_FLAG_TXE)==RESET);  </span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘é€å­—ç¬¦åˆ°ä¸²å£1</span></span><br><span class="line">USART_SendData(USART1,<span class="string">&#x27;l&#x27;</span>);</span><br><span class="line"><span class="keyword">while</span>(USART_GetFlagStatus(USART1,USART_FLAG_TXE)==RESET);  </span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘é€å­—ç¬¦åˆ°ä¸²å£1</span></span><br><span class="line">USART_SendData(USART1,<span class="string">&#x27;o&#x27;</span>);</span><br><span class="line"><span class="keyword">while</span>(USART_GetFlagStatus(USART1,USART_FLAG_TXE)==RESET);  </span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘é€å­—ç¬¦åˆ°ä¸²å£1</span></span><br><span class="line">USART_SendData(USART1,<span class="string">&#x27;\r&#x27;</span>);</span><br><span class="line"><span class="keyword">while</span>(USART_GetFlagStatus(USART1,USART_FLAG_TXE)==RESET);  </span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘é€å­—ç¬¦åˆ°ä¸²å£1</span></span><br><span class="line">USART_SendData(USART1,<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line"><span class="keyword">while</span>(USART_GetFlagStatus(USART1,USART_FLAG_TXE)==RESET);  </span><br><span class="line"></span><br><span class="line">delay();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ4ï¼‰ä½¿ç”¨printfå‘é€å­—ç¬¦ä¸²åˆ°ä¸²å£"><a href="#ï¼ˆ4ï¼‰ä½¿ç”¨printfå‘é€å­—ç¬¦ä¸²åˆ°ä¸²å£" class="headerlink" title="ï¼ˆ4ï¼‰ä½¿ç”¨printfå‘é€å­—ç¬¦ä¸²åˆ°ä¸²å£"></a>ï¼ˆ4ï¼‰ä½¿ç”¨printfå‘é€å­—ç¬¦ä¸²åˆ°ä¸²å£</h4><p>ï¼ˆèŠ¯ç‰‡ä¸ä¸²å£é€šä¿¡ï¼‰</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stm32f10x.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//GPIOä¿¡æ¯ç»“æ„ä½“åˆå§‹åŒ–</span></span><br><span class="line"><span class="comment">// é…ç½®IOå£ç»“æ„ä½“</span></span><br><span class="line">GPIO_InitTypeDef   GPIO_InitStructure;</span><br><span class="line"><span class="comment">// é…ç½®ä¸­æ–­ç»“æ„ä½“</span></span><br><span class="line">EXTI_InitTypeDef   EXTI_InitStructure;</span><br><span class="line"><span class="comment">// é…ç½®ä¸­æ–­ä¼˜å…ˆçº§ç»“æ„ä½“</span></span><br><span class="line">NVIC_InitTypeDef   NVIC_InitStructure;</span><br><span class="line"><span class="comment">// é…ç½®ä¸²å£ç»“æ„é¢˜</span></span><br><span class="line">USART_InitTypeDef USART_InitStructure; </span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡å®šä¹‰fputcå‡½æ•°---ã€‹æ¯æ¬¡å‘é€ä¸€ä¸ªå­—ç¬¦åˆ°</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fputc</span><span class="params">(<span class="keyword">int</span> ch, FILE *f)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//å‘é€å­—ç¬¦åˆ°ä¸²å£1</span></span><br><span class="line">USART_SendData(USART1,ch);</span><br><span class="line"><span class="keyword">while</span>(USART_GetFlagStatus(USART1,USART_FLAG_TXE)==RESET);  </span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> ch;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//è®¾ç½®ä¸²å£1--&gt;PA9+PA10</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">usart1_init</span><span class="params">(u32 bound)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1.ä½¿èƒ½GPIOå¤–è®¾ã€IOå¤ç”¨æ—¶é’Ÿã€USART2æ—¶é’Ÿ PA9 å’ŒPA10</span></span><br><span class="line">RCC_APB2PeriphClockCmd(RCC_APB2Periph_USART1, ENABLE);</span><br><span class="line">RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA | RCC_APB2Periph_AFIO, ENABLE);</span><br><span class="line">    </span><br><span class="line"><span class="comment">//2.é…ç½®GPIO + åˆå§‹åŒ–GPIO</span></span><br><span class="line">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_9; <span class="comment">//  PA2   TX</span></span><br><span class="line">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP;  <span class="comment">//å¤ç”¨æ¨æŒ½è¾“å‡º</span></span><br><span class="line">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class="line">GPIO_Init(GPIOA, &amp;GPIO_InitStructure);<span class="comment">//åˆå§‹åŒ–GPIO</span></span><br><span class="line"></span><br><span class="line">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_10; <span class="comment">//  PA3   RX</span></span><br><span class="line">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING;  <span class="comment">//æµ®ç©ºè¾“å…¥   PA10  RX</span></span><br><span class="line">GPIO_Init(GPIOA, &amp;GPIO_InitStructure);<span class="comment">//åˆå§‹åŒ–GPIO</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3.é…ç½®USART1 + åˆå§‹åŒ–USART1</span></span><br><span class="line">USART_InitStructure.USART_BaudRate = bound;<span class="comment">//æ³¢ç‰¹ç‡</span></span><br><span class="line">USART_InitStructure.USART_WordLength = USART_WordLength_8b;<span class="comment">//æ•°æ®ä½8ä½</span></span><br><span class="line">USART_InitStructure.USART_StopBits = USART_StopBits_1;<span class="comment">//åœæ­¢ä½1ä½</span></span><br><span class="line">USART_InitStructure.USART_Parity = USART_Parity_No;<span class="comment">//æ— å¥‡å¶æ£€éªŒ</span></span><br><span class="line">USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;<span class="comment">//æ— ç¡¬ä»¶æ•°æ®æµæ§åˆ¶</span></span><br><span class="line">USART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;<span class="comment">//æ”¶å‘æ¨¡å¼</span></span><br><span class="line">USART_Init(USART1, &amp;USART_InitStructure);<span class="comment">//æŠŠé…ç½®ä¿¡æ¯åŠ è½½åˆ°ä¸²å£2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//4.é…ç½®NVIC + åˆå§‹åŒ–NVIC </span></span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannel = USART1_IRQn;<span class="comment">//é€‰æ‹©ä¸²å£2çš„ä¸­æ–­</span></span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannelSubPriority = <span class="number">0</span>;<span class="comment">//è®¾ç½®æŠ¢å ä¼˜å…ˆçº§</span></span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = <span class="number">0</span>; <span class="comment">//è®¾ç½®å“åº”ä¼˜å…ˆçº§</span></span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;<span class="comment">//ä½¿èƒ½ä¸²å£2çš„ä¸­æ–­</span></span><br><span class="line">NVIC_Init(&amp;NVIC_InitStructure);<span class="comment">//æŠŠé…ç½®ä¿¡æ¯åŠ è½½åˆ°ä¸­æ–­</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//5.ä½¿èƒ½ä¸²å£ä¸­æ–­</span></span><br><span class="line">USART_ITConfig(USART1,USART_IT_RXNE,ENABLE);<span class="comment">//æ¥æ”¶åˆ°æ•°æ®è§¦å‘ä¸­æ–­</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//6.ä½¿èƒ½ä¸²å£</span></span><br><span class="line">USART_Cmd(USART1,ENABLE);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// printfå‘é€å­—ç¬¦ä¸²åˆ°ä¸²å£</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">usart1_init(<span class="number">9600</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123; </span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;good\r\n&quot;</span>);</span><br><span class="line">delay();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ5ï¼‰æ‰‹æœºè“ç‰™ä¸èŠ¯ç‰‡é€šä¿¡"><a href="#ï¼ˆ5ï¼‰æ‰‹æœºè“ç‰™ä¸èŠ¯ç‰‡é€šä¿¡" class="headerlink" title="ï¼ˆ5ï¼‰æ‰‹æœºè“ç‰™ä¸èŠ¯ç‰‡é€šä¿¡"></a>ï¼ˆ5ï¼‰æ‰‹æœºè“ç‰™ä¸èŠ¯ç‰‡é€šä¿¡</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stm32f10x.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//GPIOä¿¡æ¯ç»“æ„ä½“ä½“åˆå§‹åŒ–</span></span><br><span class="line">GPIO_InitTypeDef   GPIO_InitStructure;</span><br><span class="line">EXTI_InitTypeDef   EXTI_InitStructure;</span><br><span class="line">NVIC_InitTypeDef   NVIC_InitStructure;</span><br><span class="line">USART_InitTypeDef USART_InitStructure; <span class="comment">//ä¸²å£é…ç½®çš„ä¿¡æ¯ç»“æ„ä½“</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> data;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//led-ã€‹GPIOä¿¡æ¯ç»“æ„ä½“åˆå§‹åŒ–</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">led_init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//å…³é—­å¼•è„šJTAGå¤ç”¨åŠŸèƒ½--&gt;PA13ã€PA14ã€PA15ã€PB3ã€PB4</span></span><br><span class="line">RCC_APB2PeriphClockCmd( RCC_APB2Periph_AFIO | RCC_APB2Periph_GPIOA | RCC_APB2Periph_GPIOB, ENABLE);</span><br><span class="line">GPIO_PinRemapConfig(GPIO_Remap_SWJ_JTAGDisable, ENABLE);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* GPIOB Periph clock enable */</span></span><br><span class="line">RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOB, ENABLE);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Configure PD0 and PD2 in output pushpull mode */</span></span><br><span class="line">GPIO_InitStructure.GPIO_Pin = <span class="number">0xff</span> ;<span class="comment">//GPIO_Pin_0~GPIO_Pin_7</span></span><br><span class="line">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;<span class="comment">//è®¾ç½®è¿è¡Œé¢‘ç‡50MHz</span></span><br><span class="line">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP; <span class="comment">//è®¾ç½®æ¨æŒ½è¾“å‡º</span></span><br><span class="line">GPIO_Init(GPIOB, &amp;GPIO_InitStructure);</span><br><span class="line"></span><br><span class="line">GPIO_SetBits(GPIOB, <span class="number">0xff</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delay</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> i, j;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;<span class="number">1000</span>; i++)</span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">0</span>; j&lt;<span class="number">10000</span>; j++);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//è®¾ç½®ä¸²å£1--&gt;PA9+PA10</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">usart1_init</span><span class="params">(u32 bound)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1.ä½¿èƒ½GPIOå¤–è®¾ã€IOå¤ç”¨æ—¶é’Ÿã€USART2æ—¶é’Ÿ PA9 å’ŒPA10</span></span><br><span class="line">RCC_APB2PeriphClockCmd(RCC_APB2Periph_USART1, ENABLE);</span><br><span class="line">RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA | RCC_APB2Periph_AFIO, ENABLE);</span><br><span class="line">    </span><br><span class="line"><span class="comment">//2.é…ç½®GPIO + åˆå§‹åŒ–GPIO</span></span><br><span class="line">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_9; <span class="comment">//  PA2   TX</span></span><br><span class="line">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP;  <span class="comment">//å¤ç”¨æ¨æŒ½è¾“å‡º</span></span><br><span class="line">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class="line">GPIO_Init(GPIOA, &amp;GPIO_InitStructure);<span class="comment">//åˆå§‹åŒ–GPIO</span></span><br><span class="line"></span><br><span class="line">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_10; <span class="comment">//  PA3   RX</span></span><br><span class="line">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING;  <span class="comment">//æµ®ç©ºè¾“å…¥   PA10  RX</span></span><br><span class="line">GPIO_Init(GPIOA, &amp;GPIO_InitStructure);<span class="comment">//åˆå§‹åŒ–GPIO</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3.é…ç½®USART1 + åˆå§‹åŒ–USART1</span></span><br><span class="line">USART_InitStructure.USART_BaudRate = bound;<span class="comment">//æ³¢ç‰¹ç‡</span></span><br><span class="line">USART_InitStructure.USART_WordLength = USART_WordLength_8b;<span class="comment">//æ•°æ®ä½8ä½</span></span><br><span class="line">USART_InitStructure.USART_StopBits = USART_StopBits_1;<span class="comment">//åœæ­¢ä½1ä½</span></span><br><span class="line">USART_InitStructure.USART_Parity = USART_Parity_No;<span class="comment">//æ— å¥‡å¶æ£€éªŒ</span></span><br><span class="line">USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;<span class="comment">//æ— ç¡¬ä»¶æ•°æ®æµæ§åˆ¶</span></span><br><span class="line">USART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;<span class="comment">//æ”¶å‘æ¨¡å¼</span></span><br><span class="line">USART_Init(USART1, &amp;USART_InitStructure);<span class="comment">//æŠŠé…ç½®ä¿¡æ¯åŠ è½½åˆ°ä¸²å£2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//4.é…ç½®NVIC + åˆå§‹åŒ–NVIC </span></span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannel = USART1_IRQn;<span class="comment">//é€‰æ‹©ä¸²å£2çš„ä¸­æ–­</span></span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannelSubPriority = <span class="number">0</span>;<span class="comment">//è®¾ç½®æŠ¢å ä¼˜å…ˆçº§</span></span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = <span class="number">0</span>; <span class="comment">//è®¾ç½®å“åº”ä¼˜å…ˆçº§</span></span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;<span class="comment">//ä½¿èƒ½ä¸²å£2çš„ä¸­æ–­</span></span><br><span class="line">NVIC_Init(&amp;NVIC_InitStructure);<span class="comment">//æŠŠé…ç½®ä¿¡æ¯åŠ è½½åˆ°ä¸­æ–­</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//5.ä½¿èƒ½ä¸²å£ä¸­æ–­</span></span><br><span class="line">USART_ITConfig(USART1,USART_IT_RXNE,ENABLE);<span class="comment">//æ¥æ”¶åˆ°æ•°æ®è§¦å‘ä¸­æ–­</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//6.ä½¿èƒ½ä¸²å£</span></span><br><span class="line">USART_Cmd(USART1,ENABLE);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">usart1_init(<span class="number">9600</span>);</span><br><span class="line">led_init();</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">delay();</span><br><span class="line">        <span class="comment">// dataæ¥æ”¶æ¥è‡ªè“ç‰™é€šä¿¡çš„æ•°æ®ï¼ˆæ‰‹æœºappï¼‰</span></span><br><span class="line"><span class="keyword">if</span>(data == <span class="string">&#x27;A&#x27;</span>)</span><br><span class="line">&#123;</span><br><span class="line">GPIO_ResetBits(GPIOB, GPIO_Pin_0);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(data == <span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">&#123;</span><br><span class="line">GPIO_SetBits(GPIOB, GPIO_Pin_0);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸²å£1ä¸­æ–­æœåŠ¡å‡½æ•°ï¼ˆå¯ä»¥è®©ä¸»å‡½æ•°ä¸­æ–­å…¶ä»–äº‹ç‰©å›æ¥å¤„ç†ä¸²å£1ï¼Œä»è€Œæ¥æ”¶åˆ°è“ç‰™å‘é€çš„æ•°æ®dataï¼‰</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">USART1_IRQHandler</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¤æ–­ä¸­æ–­æ˜¯å¦äº§ç”Ÿ</span></span><br><span class="line"><span class="keyword">if</span>( USART_GetITStatus(USART1,USART_IT_RXNE) == SET )<span class="comment">//å¦‚æœæ¥æ”¶åˆ°æ•°æ®</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//æ¥æ”¶æ•°æ®</span></span><br><span class="line">data = USART_ReceiveData(USART1);<span class="comment">//æ¥æ”¶ä»USART2å‘é€è¿‡æ¥çš„ä¸­æ–­ï¼Œæ¯æ¬¡æ¥æ”¶1ä¸ªå­—èŠ‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>( USART_GetFlagStatus(USART1, USART_FLAG_TXE) == RESET);</span><br><span class="line"><span class="comment">//å‘é€å­—ç¬¦åˆ°ä¸²å£1</span></span><br><span class="line"><span class="comment">//USART_SendData(USART1,n);</span></span><br><span class="line"><span class="comment">//while(USART_GetFlagStatus(USART1,USART_FLAG_TXE)==RESET);  </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¸…ç©ºä¸­æ–­æ ‡å¿—ä½</span></span><br><span class="line">USART_ClearITPendingBit(USART1,USART_IT_RXNE);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ¶²æ™¶å±æ˜¾ç¤º"><a href="#æ¶²æ™¶å±æ˜¾ç¤º" class="headerlink" title="æ¶²æ™¶å±æ˜¾ç¤º"></a>æ¶²æ™¶å±æ˜¾ç¤º</h3><h4 id="ï¼ˆ1ï¼‰å·¥å…·å‡½æ•°ä¸æ–‡ä»¶"><a href="#ï¼ˆ1ï¼‰å·¥å…·å‡½æ•°ä¸æ–‡ä»¶" class="headerlink" title="ï¼ˆ1ï¼‰å·¥å…·å‡½æ•°ä¸æ–‡ä»¶"></a>ï¼ˆ1ï¼‰å·¥å…·å‡½æ•°ä¸æ–‡ä»¶</h4><h5 id="æ¶²æ™¶æ˜¾ç¤ºå·¥å…·åŒ…"><a href="#æ¶²æ™¶æ˜¾ç¤ºå·¥å…·åŒ…" class="headerlink" title="æ¶²æ™¶æ˜¾ç¤ºå·¥å…·åŒ…"></a>æ¶²æ™¶æ˜¾ç¤ºå·¥å…·åŒ…</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* oled.cæ–‡ä»¶å®ç°æ¶²æ™¶å±æ–‡å­—æ˜¾ç¤º */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;oled.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdlib.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;oledfont.h&quot;</span>   </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;SysTick.h&quot;</span></span></span><br><span class="line">     </span><br><span class="line">u8 OLED_GRAM[<span class="number">128</span>][<span class="number">8</span>]; </span><br><span class="line"></span><br><span class="line"><span class="comment">//æ›´æ–°æ˜¾å­˜åˆ°LCD </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OLED_Refresh_Gram</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">u8 i,n;    </span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++)  </span><br><span class="line">&#123;  </span><br><span class="line">OLED_WR_Byte (<span class="number">0xb0</span>+i,OLED_CMD);    <span class="comment">//è®¾ç½®é¡µåœ°å€ï¼ˆ0~7ï¼‰</span></span><br><span class="line">OLED_WR_Byte (<span class="number">0x00</span>,OLED_CMD);      <span class="comment">//è®¾ç½®æ˜¾ç¤ºä½ç½®â€”åˆ—ä½åœ°å€</span></span><br><span class="line">OLED_WR_Byte (<span class="number">0x10</span>,OLED_CMD);      <span class="comment">//è®¾ç½®æ˜¾ç¤ºä½ç½®â€”åˆ—é«˜åœ°å€   </span></span><br><span class="line"><span class="keyword">for</span>(n=<span class="number">0</span>;n&lt;<span class="number">128</span>;n++)OLED_WR_Byte(OLED_GRAM[n][i],OLED_DATA); </span><br><span class="line">&#125;   </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘SSD1306å†™å…¥ä¸€ä¸ªå­—èŠ‚ã€‚</span></span><br><span class="line"><span class="comment">//dat:è¦å†™å…¥çš„æ•°æ®/å‘½ä»¤</span></span><br><span class="line"><span class="comment">//cmd:æ•°æ®/å‘½ä»¤æ ‡å¿— 0,è¡¨ç¤ºå‘½ä»¤;1,è¡¨ç¤ºæ•°æ®;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OLED_WR_Byte</span><span class="params">(u8 dat,u8 cmd)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">u8 i;  </span><br><span class="line">OLED_RS=cmd; <span class="comment">//å†™å‘½ä»¤ </span></span><br><span class="line">OLED_CS=<span class="number">0</span>;  </span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++)</span><br><span class="line">&#123;  </span><br><span class="line">OLED_SCLK=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(dat&amp;<span class="number">0x80</span>)OLED_SDIN=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> OLED_SDIN=<span class="number">0</span>;</span><br><span class="line">OLED_SCLK=<span class="number">1</span>;</span><br><span class="line">dat&lt;&lt;=<span class="number">1</span>;   </span><br><span class="line">&#125; </span><br><span class="line">OLED_CS=<span class="number">1</span>;  </span><br><span class="line">OLED_RS=<span class="number">1</span>;     </span><br><span class="line">&#125; </span><br><span class="line">   </span><br><span class="line"><span class="comment">//å¼€å¯OLEDæ˜¾ç¤º    </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OLED_Display_On</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">OLED_WR_Byte(<span class="number">0X8D</span>,OLED_CMD);  <span class="comment">//SET DCDCå‘½ä»¤</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0X14</span>,OLED_CMD);  <span class="comment">//DCDC ON</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0XAF</span>,OLED_CMD);  <span class="comment">//DISPLAY ON</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…³é—­OLEDæ˜¾ç¤º     </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OLED_Display_Off</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">OLED_WR_Byte(<span class="number">0X8D</span>,OLED_CMD);  <span class="comment">//SET DCDCå‘½ä»¤</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0X10</span>,OLED_CMD);  <span class="comment">//DCDC OFF</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0XAE</span>,OLED_CMD);  <span class="comment">//DISPLAY OFF</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¸…å±å‡½æ•°,æ¸…å®Œå±,æ•´ä¸ªå±å¹•æ˜¯é»‘è‰²çš„!å’Œæ²¡ç‚¹äº®ä¸€æ ·!!!  </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OLED_Clear</span><span class="params">(<span class="keyword">void</span>)</span>  </span></span><br><span class="line"><span class="function"></span>&#123;  </span><br><span class="line">u8 i,n;  </span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++)<span class="keyword">for</span>(n=<span class="number">0</span>;n&lt;<span class="number">128</span>;n++)OLED_GRAM[n][i]=<span class="number">0X00</span>;  </span><br><span class="line">OLED_Refresh_Gram();<span class="comment">//æ›´æ–°æ˜¾ç¤º</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç”»ç‚¹ </span></span><br><span class="line"><span class="comment">//x:0~127</span></span><br><span class="line"><span class="comment">//y:0~63</span></span><br><span class="line"><span class="comment">//t:1 å¡«å…… 0,æ¸…ç©º   </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OLED_DrawPoint</span><span class="params">(u8 x,u8 y,u8 t)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">u8 pos,bx,temp=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(x&gt;<span class="number">127</span>||y&gt;<span class="number">63</span>)<span class="keyword">return</span>;<span class="comment">//è¶…å‡ºèŒƒå›´äº†.</span></span><br><span class="line">pos=<span class="number">7</span>-y/<span class="number">8</span>;</span><br><span class="line">bx=y%<span class="number">8</span>;</span><br><span class="line">temp=<span class="number">1</span>&lt;&lt;(<span class="number">7</span>-bx);</span><br><span class="line"><span class="keyword">if</span>(t)OLED_GRAM[x][pos]|=temp;</span><br><span class="line"><span class="keyword">else</span> OLED_GRAM[x][pos]&amp;=~temp;    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//x1,y1,x2,y2 å¡«å……åŒºåŸŸçš„å¯¹è§’åæ ‡</span></span><br><span class="line"><span class="comment">//ç¡®ä¿x1&lt;=x2;y1&lt;=y2 0&lt;=x1&lt;=127 0&lt;=y1&lt;=63  </span></span><br><span class="line"><span class="comment">//dot:0,æ¸…ç©º;1,å¡«å……  </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OLED_Fill</span><span class="params">(u8 x1,u8 y1,u8 x2,u8 y2,u8 dot)</span>  </span></span><br><span class="line"><span class="function"></span>&#123;  </span><br><span class="line">u8 x,y;  </span><br><span class="line"><span class="keyword">for</span>(x=x1;x&lt;=x2;x++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span>(y=y1;y&lt;=y2;y++)OLED_DrawPoint(x,y,dot);</span><br><span class="line">&#125;    </span><br><span class="line">OLED_Refresh_Gram();<span class="comment">//æ›´æ–°æ˜¾ç¤º</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åœ¨æŒ‡å®šä½ç½®æ˜¾ç¤ºä¸€ä¸ªå­—ç¬¦,åŒ…æ‹¬éƒ¨åˆ†å­—ç¬¦</span></span><br><span class="line"><span class="comment">//x:0~127</span></span><br><span class="line"><span class="comment">//y:0~63</span></span><br><span class="line"><span class="comment">//mode:0,åç™½æ˜¾ç¤º;1,æ­£å¸¸æ˜¾ç¤º </span></span><br><span class="line"><span class="comment">//size:é€‰æ‹©å­—ä½“ 16/12 </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OLED_ShowChar</span><span class="params">(u8 x,u8 y,u8 chr,u8 size,u8 mode)</span></span></span><br><span class="line"><span class="function"></span>&#123;          </span><br><span class="line">u8 temp,t,t1;</span><br><span class="line">u8 y0=y;</span><br><span class="line">u8 csize=(size/<span class="number">8</span>+((size%<span class="number">8</span>)?<span class="number">1</span>:<span class="number">0</span>))*(size/<span class="number">2</span>);<span class="comment">//å¾—åˆ°å­—ä½“ä¸€ä¸ªå­—ç¬¦å¯¹åº”ç‚¹é˜µé›†æ‰€å çš„å­—èŠ‚æ•°</span></span><br><span class="line">chr=chr-<span class="string">&#x27; &#x27;</span>;<span class="comment">//å¾—åˆ°åç§»åçš„å€¼ </span></span><br><span class="line">    <span class="keyword">for</span>(t=<span class="number">0</span>;t&lt;csize;t++)</span><br><span class="line">    &#123;   </span><br><span class="line"><span class="keyword">if</span>(size==<span class="number">12</span>)temp=asc2_1206[chr][t];  <span class="comment">//è°ƒç”¨1206å­—ä½“</span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(size==<span class="number">16</span>)temp=asc2_1608[chr][t];<span class="comment">//è°ƒç”¨1608å­—ä½“</span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(size==<span class="number">24</span>)temp=asc2_2412[chr][t];<span class="comment">//è°ƒç”¨2412å­—ä½“</span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span>;<span class="comment">//æ²¡æœ‰çš„å­—åº“</span></span><br><span class="line">        <span class="keyword">for</span>(t1=<span class="number">0</span>;t1&lt;<span class="number">8</span>;t1++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(temp&amp;<span class="number">0x80</span>)OLED_DrawPoint(x,y,mode);</span><br><span class="line"><span class="keyword">else</span> OLED_DrawPoint(x,y,!mode);</span><br><span class="line">temp&lt;&lt;=<span class="number">1</span>;</span><br><span class="line">y++;</span><br><span class="line"><span class="keyword">if</span>((y-y0)==size)</span><br><span class="line">&#123;</span><br><span class="line">y=y0;</span><br><span class="line">x++;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;   </span><br><span class="line">    &#125;          </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//m^nå‡½æ•°</span></span><br><span class="line"><span class="function">u32 <span class="title">mypow</span><span class="params">(u8 m,u8 n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">u32 result=<span class="number">1</span>; </span><br><span class="line"><span class="keyword">while</span>(n--)result*=m;    </span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;  </span><br><span class="line"><span class="comment">//æ˜¾ç¤º2ä¸ªæ•°å­—</span></span><br><span class="line"><span class="comment">//x,y :èµ·ç‚¹åæ ‡ </span></span><br><span class="line"><span class="comment">//len :æ•°å­—çš„ä½æ•°</span></span><br><span class="line"><span class="comment">//size:å­—ä½“å¤§å°</span></span><br><span class="line"><span class="comment">//mode:æ¨¡å¼0,å¡«å……æ¨¡å¼;1,å åŠ æ¨¡å¼</span></span><br><span class="line"><span class="comment">//num:æ•°å€¼(0~4294967295);   </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OLED_ShowNum</span><span class="params">(u8 x,u8 y,u32 num,u8 len,u8 size)</span></span></span><br><span class="line"><span class="function"></span>&#123;         </span><br><span class="line">u8 t,temp;</span><br><span class="line">u8 enshow=<span class="number">0</span>;   </span><br><span class="line"><span class="keyword">for</span>(t=<span class="number">0</span>;t&lt;len;t++)</span><br><span class="line">&#123;</span><br><span class="line">temp=(num/mypow(<span class="number">10</span>,len-t<span class="number">-1</span>))%<span class="number">10</span>;</span><br><span class="line"><span class="keyword">if</span>(enshow==<span class="number">0</span>&amp;&amp;t&lt;(len<span class="number">-1</span>))</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(temp==<span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">OLED_ShowChar(x+(size/<span class="number">2</span>)*t,y,<span class="string">&#x27; &#x27;</span>,size,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> enshow=<span class="number">1</span>; </span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"> OLED_ShowChar(x+(size/<span class="number">2</span>)*t,y,temp+<span class="string">&#x27;0&#x27;</span>,size,<span class="number">1</span>); </span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">//æ˜¾ç¤ºå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">//x,y:èµ·ç‚¹åæ ‡  </span></span><br><span class="line"><span class="comment">//size:å­—ä½“å¤§å° </span></span><br><span class="line"><span class="comment">//*p:å­—ç¬¦ä¸²èµ·å§‹åœ°å€ </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OLED_ShowString</span><span class="params">(u8 x,u8 y,<span class="keyword">const</span> u8 *p,u8 size)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>((*p&lt;=<span class="string">&#x27;~&#x27;</span>)&amp;&amp;(*p&gt;=<span class="string">&#x27; &#x27;</span>))<span class="comment">//åˆ¤æ–­æ˜¯ä¸æ˜¯éæ³•å­—ç¬¦!</span></span><br><span class="line">    &#123;       </span><br><span class="line">        <span class="keyword">if</span>(x&gt;(<span class="number">128</span>-(size/<span class="number">2</span>)))&#123;x=<span class="number">0</span>;y+=size;&#125;</span><br><span class="line">        <span class="keyword">if</span>(y&gt;(<span class="number">64</span>-size))&#123;y=x=<span class="number">0</span>;OLED_Clear();&#125;</span><br><span class="line">        OLED_ShowChar(x,y,*p,size,<span class="number">1</span>); </span><br><span class="line">        x+=size/<span class="number">2</span>;</span><br><span class="line">        p++;</span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆå§‹åŒ–SSD1306    </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OLED_Init</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;        </span><br><span class="line">GPIO_InitTypeDef  GPIO_InitStructure;</span><br><span class="line">    </span><br><span class="line">RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA|RCC_APB2Periph_GPIOC, ENABLE );</span><br><span class="line">  </span><br><span class="line">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_3|GPIO_Pin_4|GPIO_Pin_5|GPIO_Pin_6|GPIO_Pin_7;</span><br><span class="line">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;  <span class="comment">//æ¨æŒ½è¾“å‡º</span></span><br><span class="line">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class="line">GPIO_Init(GPIOA, &amp;GPIO_InitStructure);     </span><br><span class="line"> GPIO_SetBits(GPIOA,GPIO_Pin_4|GPIO_Pin_6|GPIO_Pin_3);<span class="comment">//æ‹‰é«˜ç”µå¹³</span></span><br><span class="line">  </span><br><span class="line">OLED_WR_Byte(<span class="number">0xAE</span>,OLED_CMD); <span class="comment">//å…³é—­æ˜¾ç¤º</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0xD5</span>,OLED_CMD); <span class="comment">//è®¾ç½®æ—¶é’Ÿåˆ†é¢‘å› å­,éœ‡è¡é¢‘ç‡</span></span><br><span class="line">OLED_WR_Byte(<span class="number">80</span>,OLED_CMD);   <span class="comment">//[3:0],åˆ†é¢‘å› å­;[7:4],éœ‡è¡é¢‘ç‡</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0xA8</span>,OLED_CMD); <span class="comment">//è®¾ç½®é©±åŠ¨è·¯æ•°</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0X3F</span>,OLED_CMD); <span class="comment">//é»˜è®¤0X3F(1/64) </span></span><br><span class="line">OLED_WR_Byte(<span class="number">0xD3</span>,OLED_CMD); <span class="comment">//è®¾ç½®æ˜¾ç¤ºåç§»</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0X00</span>,OLED_CMD); <span class="comment">//é»˜è®¤ä¸º0</span></span><br><span class="line"></span><br><span class="line">OLED_WR_Byte(<span class="number">0x40</span>,OLED_CMD); <span class="comment">//è®¾ç½®æ˜¾ç¤ºå¼€å§‹è¡Œ [5:0],è¡Œæ•°.</span></span><br><span class="line">    </span><br><span class="line">OLED_WR_Byte(<span class="number">0x8D</span>,OLED_CMD); <span class="comment">//ç”µè·æ³µè®¾ç½®</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0x14</span>,OLED_CMD); <span class="comment">//bit2ï¼Œå¼€å¯/å…³é—­</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0x20</span>,OLED_CMD); <span class="comment">//è®¾ç½®å†…å­˜åœ°å€æ¨¡å¼</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0x02</span>,OLED_CMD); <span class="comment">//[1:0],00ï¼Œåˆ—åœ°å€æ¨¡å¼;01ï¼Œè¡Œåœ°å€æ¨¡å¼;10,é¡µåœ°å€æ¨¡å¼;é»˜è®¤10;</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0xA1</span>,OLED_CMD); <span class="comment">//æ®µé‡å®šä¹‰è®¾ç½®,bit0:0,0-&gt;0;1,0-&gt;127;</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0xC0</span>,OLED_CMD); <span class="comment">//è®¾ç½®COMæ‰«ææ–¹å‘;bit3:0,æ™®é€šæ¨¡å¼;1,é‡å®šä¹‰æ¨¡å¼ COM[N-1]-&gt;COM0;N:é©±åŠ¨è·¯æ•°</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0xDA</span>,OLED_CMD); <span class="comment">//è®¾ç½®COMç¡¬ä»¶å¼•è„šé…ç½®</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0x12</span>,OLED_CMD); <span class="comment">//[5:4]é…ç½®</span></span><br><span class="line"> </span><br><span class="line">OLED_WR_Byte(<span class="number">0x81</span>,OLED_CMD); <span class="comment">//å¯¹æ¯”åº¦è®¾ç½®</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0xEF</span>,OLED_CMD); <span class="comment">//1~255;é»˜è®¤0X7F (äº®åº¦è®¾ç½®,è¶Šå¤§è¶Šäº®)</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0xD9</span>,OLED_CMD); <span class="comment">//è®¾ç½®é¢„å……ç”µå‘¨æœŸ</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0xf1</span>,OLED_CMD); <span class="comment">//[3:0],PHASE 1;[7:4],PHASE 2;</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0xDB</span>,OLED_CMD); <span class="comment">//è®¾ç½®VCOMH ç”µå‹å€ç‡</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0x30</span>,OLED_CMD); <span class="comment">//[6:4] 000,0.65*vcc;001,0.77*vcc;011,0.83*vcc;</span></span><br><span class="line"></span><br><span class="line">OLED_WR_Byte(<span class="number">0xA4</span>,OLED_CMD); <span class="comment">//å…¨å±€æ˜¾ç¤ºå¼€å¯;bit0:1,å¼€å¯;0,å…³é—­;(ç™½å±/é»‘å±)</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0xA6</span>,OLED_CMD); <span class="comment">//è®¾ç½®æ˜¾ç¤ºæ–¹å¼;bit0:1,åç›¸æ˜¾ç¤º;0,æ­£å¸¸æ˜¾ç¤º       </span></span><br><span class="line">OLED_WR_Byte(<span class="number">0xAF</span>,OLED_CMD); <span class="comment">//å¼€å¯æ˜¾ç¤º </span></span><br><span class="line">OLED_Clear();</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure><h5 id="ç²¾å‡†å»¶æ—¶å·¥å…·åŒ…"><a href="#ç²¾å‡†å»¶æ—¶å·¥å…·åŒ…" class="headerlink" title="ç²¾å‡†å»¶æ—¶å·¥å…·åŒ…"></a>ç²¾å‡†å»¶æ—¶å·¥å…·åŒ…</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*SysTick.cæ–‡ä»¶å®ç°ç²¾å‡†å»¶æ—¶å‡½æ•°*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;SysTick.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> u8  fac_us=<span class="number">0</span>;<span class="comment">//uså»¶æ—¶å€ä¹˜æ•°   </span></span><br><span class="line"><span class="keyword">static</span> u16 fac_ms=<span class="number">0</span>;<span class="comment">//mså»¶æ—¶å€ä¹˜æ•°</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆå§‹åŒ–å»¶è¿Ÿå‡½æ•°</span></span><br><span class="line"><span class="comment">//SYSTICKçš„æ—¶é’Ÿå›ºå®šä¸ºAHBæ—¶é’Ÿçš„1/8</span></span><br><span class="line"><span class="comment">//SYSCLK:ç³»ç»Ÿæ—¶é’Ÿé¢‘ç‡</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SysTick_Init</span><span class="params">(u8 SYSCLK)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">SysTick_CLKSourceConfig(SysTick_CLKSource_HCLK_Div8); </span><br><span class="line">fac_us=SYSCLK/<span class="number">8</span>;</span><br><span class="line">fac_ms=(u16)fac_us*<span class="number">1000</span>;   </span><br><span class="line">&#125;    </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delay_us</span><span class="params">(u32 nus)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">u32 temp;     </span><br><span class="line">SysTick-&gt;LOAD=nus*fac_us; <span class="comment">//æ—¶é—´åŠ è½½   </span></span><br><span class="line">SysTick-&gt;VAL=<span class="number">0x00</span>;        <span class="comment">//æ¸…ç©ºè®¡æ•°å™¨</span></span><br><span class="line">SysTick-&gt;CTRL|=SysTick_CTRL_ENABLE_Msk ;          <span class="comment">//å¼€å§‹å€’æ•° </span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">&#123;</span><br><span class="line">temp=SysTick-&gt;CTRL;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(temp&amp;<span class="number">0x01</span>&amp;&amp;!(temp&amp;(<span class="number">1</span>&lt;&lt;<span class="number">16</span>)));<span class="comment">//ç­‰å¾…æ—¶é—´åˆ°è¾¾   </span></span><br><span class="line">SysTick-&gt;CTRL&amp;=~SysTick_CTRL_ENABLE_Msk;       <span class="comment">//å…³é—­è®¡æ•°å™¨</span></span><br><span class="line">SysTick-&gt;VAL =<span class="number">0X00</span>;       <span class="comment">//æ¸…ç©ºè®¡æ•°å™¨ </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å»¶æ—¶nms</span></span><br><span class="line"><span class="comment">//æ³¨æ„nmsçš„èŒƒå›´</span></span><br><span class="line"><span class="comment">//SysTick-&gt;LOADä¸º24ä½å¯„å­˜å™¨,æ‰€ä»¥,æœ€å¤§å»¶æ—¶ä¸º:</span></span><br><span class="line"><span class="comment">//nms&lt;=0xffffff*8*1000/SYSCLK</span></span><br><span class="line"><span class="comment">//SYSCLKå•ä½ä¸ºHz,nmså•ä½ä¸ºms</span></span><br><span class="line"><span class="comment">//å¯¹72Mæ¡ä»¶ä¸‹,nms&lt;=1864 </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delay_ms</span><span class="params">(u16 nms)</span></span></span><br><span class="line"><span class="function"></span>&#123;     </span><br><span class="line">u32 temp;   </span><br><span class="line">SysTick-&gt;LOAD=(u32)nms*fac_ms;<span class="comment">//æ—¶é—´åŠ è½½(SysTick-&gt;LOADä¸º24bit)</span></span><br><span class="line">SysTick-&gt;VAL =<span class="number">0x00</span>;           <span class="comment">//æ¸…ç©ºè®¡æ•°å™¨</span></span><br><span class="line">SysTick-&gt;CTRL|=SysTick_CTRL_ENABLE_Msk ;          <span class="comment">//å¼€å§‹å€’æ•°  </span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">&#123;</span><br><span class="line">temp=SysTick-&gt;CTRL;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(temp&amp;<span class="number">0x01</span>&amp;&amp;!(temp&amp;(<span class="number">1</span>&lt;&lt;<span class="number">16</span>)));<span class="comment">//ç­‰å¾…æ—¶é—´åˆ°è¾¾   </span></span><br><span class="line">SysTick-&gt;CTRL&amp;=~SysTick_CTRL_ENABLE_Msk;       <span class="comment">//å…³é—­è®¡æ•°å™¨</span></span><br><span class="line">SysTick-&gt;VAL =<span class="number">0X00</span>;       <span class="comment">//æ¸…ç©ºè®¡æ•°å™¨      </span></span><br><span class="line">&#125; </span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ2ï¼‰æ•°å­—ä¸å­—æ¯æ˜¾ç¤º"><a href="#ï¼ˆ2ï¼‰æ•°å­—ä¸å­—æ¯æ˜¾ç¤º" class="headerlink" title="ï¼ˆ2ï¼‰æ•°å­—ä¸å­—æ¯æ˜¾ç¤º"></a>ï¼ˆ2ï¼‰æ•°å­—ä¸å­—æ¯æ˜¾ç¤º</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stm32f10x.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;SysTick.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;oled.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> num = <span class="number">1000</span>;</span><br><span class="line">u8 buf[<span class="number">10</span>] = <span class="string">&quot;ZhangSan&quot;</span>;</span><br><span class="line"></span><br><span class="line">SysTick_Init(<span class="number">72</span>);<span class="comment">// åˆå§‹åŒ–å»¶æ—¶ï¼ˆ72MHzèŠ¯ç‰‡ä¸»é¢‘ï¼‰</span></span><br><span class="line">OLED_Init();<span class="comment">//  åˆå§‹åŒ–OLED</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">OLED_ShowNum(<span class="number">0</span>,<span class="number">0</span>,num,<span class="number">4</span>,<span class="number">16</span>);<span class="comment">//æ˜¾ç¤ºæ•°å­— </span></span><br><span class="line">OLED_ShowString(<span class="number">0</span>,<span class="number">16</span>,buf,<span class="number">16</span>); </span><br><span class="line">OLED_ShowChar(<span class="number">50</span>,<span class="number">0</span>,<span class="string">&#x27;S&#x27;</span>, <span class="number">16</span>, <span class="number">1</span>);</span><br><span class="line">OLED_Refresh_Gram();    <span class="comment">//æ›´æ–°æ•°æ®åˆ°OLED  </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><p>è°ƒç”¨SysTick_Init()å‡½æ•°å»¶æ—¶è§„å®šçš„æ—¶é—´</p></li><li><p>è°ƒç”¨oled.cå®šä¹‰çš„OLED_ShowNumç­‰æ–¹æ³•</p></li><li><p>ç›¸å…³å‚æ•°å¯ä»¥æŸ¥çœ‹oled.cå†…çš„å®šä¹‰</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//x,y :èµ·ç‚¹åæ ‡</span></span><br><span class="line"><span class="comment">// num or char : è¦æ˜¾ç¤ºçš„æ•°æ®å†…å®¹æˆ–åœ°å€</span></span><br><span class="line"><span class="comment">// lenå­—é•¿ï¼ˆä¸€èˆ¬å¡«16ï¼‰</span></span><br><span class="line"><span class="comment">// sizeï¼šå­—ä½“å¤§å°ï¼ˆä¸€èˆ¬å¡«16ï¼‰</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="ï¼ˆ3ï¼‰æ±‰å­—æ˜¾ç¤º"><a href="#ï¼ˆ3ï¼‰æ±‰å­—æ˜¾ç¤º" class="headerlink" title="ï¼ˆ3ï¼‰æ±‰å­—æ˜¾ç¤º"></a>ï¼ˆ3ï¼‰æ±‰å­—æ˜¾ç¤º</h4><h5 id="å»¶æ—¶å·¥å…·åŒ…"><a href="#å»¶æ—¶å·¥å…·åŒ…" class="headerlink" title="å»¶æ—¶å·¥å…·åŒ…"></a>å»¶æ—¶å·¥å…·åŒ…</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;delay.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;sys.h&quot;</span></span></span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////////////////////////  </span></span><br><span class="line"><span class="comment">//å¦‚æœä½¿ç”¨ucos,åˆ™åŒ…æ‹¬ä¸‹é¢çš„å¤´æ–‡ä»¶å³å¯.</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> SYSTEM_SUPPORT_UCOS</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;includes.h&quot;</span><span class="comment">//ucos ä½¿ç”¨  </span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> u8  fac_us=<span class="number">0</span>;<span class="comment">//uså»¶æ—¶å€ä¹˜æ•°</span></span><br><span class="line"><span class="keyword">static</span> u16 fac_ms=<span class="number">0</span>;<span class="comment">//mså»¶æ—¶å€ä¹˜æ•°</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> OS_CRITICAL_METHOD <span class="comment">//å¦‚æœOS_CRITICAL_METHODå®šä¹‰äº†,è¯´æ˜ä½¿ç”¨ucosIIäº†.</span></span></span><br><span class="line"><span class="comment">//systickä¸­æ–­æœåŠ¡å‡½æ•°,ä½¿ç”¨ucosæ—¶ç”¨åˆ°</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SysTick_Handler</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">OSIntEnter();<span class="comment">//è¿›å…¥ä¸­æ–­</span></span><br><span class="line">    OSTimeTick();       <span class="comment">//è°ƒç”¨ucosçš„æ—¶é’ŸæœåŠ¡ç¨‹åº               </span></span><br><span class="line">    OSIntExit();        <span class="comment">//è§¦å‘ä»»åŠ¡åˆ‡æ¢è½¯ä¸­æ–­</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆå§‹åŒ–å»¶è¿Ÿå‡½æ•°</span></span><br><span class="line"><span class="comment">//å½“ä½¿ç”¨ucosçš„æ—¶å€™,æ­¤å‡½æ•°ä¼šåˆå§‹åŒ–ucosçš„æ—¶é’ŸèŠ‚æ‹</span></span><br><span class="line"><span class="comment">//SYSTICKçš„æ—¶é’Ÿå›ºå®šä¸ºHCLKæ—¶é’Ÿçš„1/8</span></span><br><span class="line"><span class="comment">//SYSCLK:ç³»ç»Ÿæ—¶é’Ÿ</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delay_init</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> OS_CRITICAL_METHOD <span class="comment">//å¦‚æœOS_CRITICAL_METHODå®šä¹‰äº†,è¯´æ˜ä½¿ç”¨ucosIIäº†.</span></span></span><br><span class="line">u32 reload;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">SysTick_CLKSourceConfig(SysTick_CLKSource_HCLK_Div8);<span class="comment">//é€‰æ‹©å¤–éƒ¨æ—¶é’Ÿ  HCLK/8</span></span><br><span class="line">fac_us=SystemCoreClock/<span class="number">8000000</span>;<span class="comment">//ä¸ºç³»ç»Ÿæ—¶é’Ÿçš„1/8  </span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> OS_CRITICAL_METHOD <span class="comment">//å¦‚æœOS_CRITICAL_METHODå®šä¹‰äº†,è¯´æ˜ä½¿ç”¨ucosIIäº†.</span></span></span><br><span class="line">reload=SystemCoreClock/<span class="number">8000000</span>;<span class="comment">//æ¯ç§’é’Ÿçš„è®¡æ•°æ¬¡æ•° å•ä½ä¸ºK   </span></span><br><span class="line">reload*=<span class="number">1000000</span>/OS_TICKS_PER_SEC;<span class="comment">//æ ¹æ®OS_TICKS_PER_SECè®¾å®šæº¢å‡ºæ—¶é—´</span></span><br><span class="line"><span class="comment">//reloadä¸º24ä½å¯„å­˜å™¨,æœ€å¤§å€¼:16777216,åœ¨72Mä¸‹,çº¦åˆ1.86så·¦å³</span></span><br><span class="line">fac_ms=<span class="number">1000</span>/OS_TICKS_PER_SEC;<span class="comment">//ä»£è¡¨ucoså¯ä»¥å»¶æ—¶çš„æœ€å°‘å•ä½   </span></span><br><span class="line">SysTick-&gt;CTRL|=SysTick_CTRL_TICKINT_Msk;   <span class="comment">//å¼€å¯SYSTICKä¸­æ–­</span></span><br><span class="line">SysTick-&gt;LOAD=reload; <span class="comment">//æ¯1/OS_TICKS_PER_SECç§’ä¸­æ–­ä¸€æ¬¡</span></span><br><span class="line">SysTick-&gt;CTRL|=SysTick_CTRL_ENABLE_Msk;   <span class="comment">//å¼€å¯SYSTICK    </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line">fac_ms=(u16)fac_us*<span class="number">1000</span>;<span class="comment">//éucosä¸‹,ä»£è¡¨æ¯ä¸ªmséœ€è¦çš„systickæ—¶é’Ÿæ•°   </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">&#125;    </span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> OS_CRITICAL_METHOD<span class="comment">//ä½¿ç”¨äº†ucos</span></span></span><br><span class="line"><span class="comment">//å»¶æ—¶nus</span></span><br><span class="line"><span class="comment">//nusä¸ºè¦å»¶æ—¶çš„usæ•°.       </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delay_us</span><span class="params">(u32 nus)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">u32 ticks;</span><br><span class="line">u32 told,tnow,tcnt=<span class="number">0</span>;</span><br><span class="line">u32 reload=SysTick-&gt;LOAD;<span class="comment">//LOADçš„å€¼     </span></span><br><span class="line">ticks=nus*fac_us; <span class="comment">//éœ€è¦çš„èŠ‚æ‹æ•°   </span></span><br><span class="line">tcnt=<span class="number">0</span>;</span><br><span class="line">told=SysTick-&gt;VAL;        <span class="comment">//åˆšè¿›å…¥æ—¶çš„è®¡æ•°å™¨å€¼</span></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">tnow=SysTick-&gt;VAL;</span><br><span class="line"><span class="keyword">if</span>(tnow!=told)</span><br><span class="line">&#123;    </span><br><span class="line"><span class="keyword">if</span>(tnow&lt;told)tcnt+=told-tnow;<span class="comment">//è¿™é‡Œæ³¨æ„ä¸€ä¸‹SYSTICKæ˜¯ä¸€ä¸ªé€’å‡çš„è®¡æ•°å™¨å°±å¯ä»¥äº†.</span></span><br><span class="line"><span class="keyword">else</span> tcnt+=reload-tnow+told;    </span><br><span class="line">told=tnow;</span><br><span class="line"><span class="keyword">if</span>(tcnt&gt;=ticks)<span class="keyword">break</span>;<span class="comment">//æ—¶é—´è¶…è¿‡/ç­‰äºè¦å»¶è¿Ÿçš„æ—¶é—´,åˆ™é€€å‡º.</span></span><br><span class="line">&#125;  </span><br><span class="line">&#125;;     </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å»¶æ—¶nms</span></span><br><span class="line"><span class="comment">//nms:è¦å»¶æ—¶çš„msæ•°</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delay_ms</span><span class="params">(u16 nms)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(OSRunning==TRUE)<span class="comment">//å¦‚æœoså·²ç»åœ¨è·‘äº†    </span></span><br><span class="line">&#123;  </span><br><span class="line"><span class="keyword">if</span>(nms&gt;=fac_ms)<span class="comment">//å»¶æ—¶çš„æ—¶é—´å¤§äºucosçš„æœ€å°‘æ—¶é—´å‘¨æœŸ </span></span><br><span class="line">&#123;</span><br><span class="line">   OSTimeDly(nms/fac_ms);<span class="comment">//ucoså»¶æ—¶</span></span><br><span class="line">&#125;</span><br><span class="line">nms%=fac_ms;<span class="comment">//ucoså·²ç»æ— æ³•æä¾›è¿™ä¹ˆå°çš„å»¶æ—¶äº†,é‡‡ç”¨æ™®é€šæ–¹å¼å»¶æ—¶    </span></span><br><span class="line">&#125;</span><br><span class="line">delay_us((u32)(nms*<span class="number">1000</span>));<span class="comment">//æ™®é€šæ–¹å¼å»¶æ—¶,æ­¤æ—¶ucosæ— æ³•å¯åŠ¨è°ƒåº¦.</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span><span class="comment">//ä¸ç”¨ucosæ—¶</span></span></span><br><span class="line"><span class="comment">//å»¶æ—¶nus</span></span><br><span class="line"><span class="comment">//nusä¸ºè¦å»¶æ—¶çš„usæ•°.       </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delay_us</span><span class="params">(u32 nus)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">u32 temp;     </span><br><span class="line">SysTick-&gt;LOAD=nus*fac_us; <span class="comment">//æ—¶é—´åŠ è½½   </span></span><br><span class="line">SysTick-&gt;VAL=<span class="number">0x00</span>;        <span class="comment">//æ¸…ç©ºè®¡æ•°å™¨</span></span><br><span class="line">SysTick-&gt;CTRL|=SysTick_CTRL_ENABLE_Msk ;          <span class="comment">//å¼€å§‹å€’æ•° </span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">&#123;</span><br><span class="line">temp=SysTick-&gt;CTRL;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(temp&amp;<span class="number">0x01</span>&amp;&amp;!(temp&amp;(<span class="number">1</span>&lt;&lt;<span class="number">16</span>)));<span class="comment">//ç­‰å¾…æ—¶é—´åˆ°è¾¾   </span></span><br><span class="line">SysTick-&gt;CTRL&amp;=~SysTick_CTRL_ENABLE_Msk;       <span class="comment">//å…³é—­è®¡æ•°å™¨</span></span><br><span class="line">SysTick-&gt;VAL =<span class="number">0X00</span>;       <span class="comment">//æ¸…ç©ºè®¡æ•°å™¨ </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å»¶æ—¶nms</span></span><br><span class="line"><span class="comment">//æ³¨æ„nmsçš„èŒƒå›´</span></span><br><span class="line"><span class="comment">//SysTick-&gt;LOADä¸º24ä½å¯„å­˜å™¨,æ‰€ä»¥,æœ€å¤§å»¶æ—¶ä¸º:</span></span><br><span class="line"><span class="comment">//nms&lt;=0xffffff*8*1000/SYSCLK</span></span><br><span class="line"><span class="comment">//SYSCLKå•ä½ä¸ºHz,nmså•ä½ä¸ºms</span></span><br><span class="line"><span class="comment">//å¯¹72Mæ¡ä»¶ä¸‹,nms&lt;=1864 </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delay_ms</span><span class="params">(u16 nms)</span></span></span><br><span class="line"><span class="function"></span>&#123;     </span><br><span class="line">u32 temp;   </span><br><span class="line">SysTick-&gt;LOAD=(u32)nms*fac_ms;<span class="comment">//æ—¶é—´åŠ è½½(SysTick-&gt;LOADä¸º24bit)</span></span><br><span class="line">SysTick-&gt;VAL =<span class="number">0x00</span>;           <span class="comment">//æ¸…ç©ºè®¡æ•°å™¨</span></span><br><span class="line">SysTick-&gt;CTRL|=SysTick_CTRL_ENABLE_Msk ;          <span class="comment">//å¼€å§‹å€’æ•°  </span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">&#123;</span><br><span class="line">temp=SysTick-&gt;CTRL;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(temp&amp;<span class="number">0x01</span>&amp;&amp;!(temp&amp;(<span class="number">1</span>&lt;&lt;<span class="number">16</span>)));<span class="comment">//ç­‰å¾…æ—¶é—´åˆ°è¾¾   </span></span><br><span class="line">SysTick-&gt;CTRL&amp;=~SysTick_CTRL_ENABLE_Msk;       <span class="comment">//å…³é—­è®¡æ•°å™¨</span></span><br><span class="line">SysTick-&gt;VAL =<span class="number">0X00</span>;       <span class="comment">//æ¸…ç©ºè®¡æ•°å™¨      </span></span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="æ¶²æ™¶æ˜¾ç¤ºå·¥å…·åŒ…-1"><a href="#æ¶²æ™¶æ˜¾ç¤ºå·¥å…·åŒ…-1" class="headerlink" title="æ¶²æ™¶æ˜¾ç¤ºå·¥å…·åŒ…"></a>æ¶²æ™¶æ˜¾ç¤ºå·¥å…·åŒ…</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;oled.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdlib.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;oledfont.h&quot;</span>   </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;delay.h&quot;</span></span></span><br><span class="line"><span class="comment">//OLEDçš„æ˜¾å­˜</span></span><br><span class="line"><span class="comment">//å­˜æ”¾æ ¼å¼å¦‚ä¸‹.</span></span><br><span class="line"><span class="comment">//[0]0 1 2 3 ... 127</span></span><br><span class="line"><span class="comment">//[1]0 1 2 3 ... 127</span></span><br><span class="line"><span class="comment">//[2]0 1 2 3 ... 127</span></span><br><span class="line"><span class="comment">//[3]0 1 2 3 ... 127</span></span><br><span class="line"><span class="comment">//[4]0 1 2 3 ... 127</span></span><br><span class="line"><span class="comment">//[5]0 1 2 3 ... 127</span></span><br><span class="line"><span class="comment">//[6]0 1 2 3 ... 127</span></span><br><span class="line"><span class="comment">//[7]0 1 2 3 ... 127    </span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> OLED_MODE==1</span></span><br><span class="line"><span class="comment">//å‘SSD1106å†™å…¥ä¸€ä¸ªå­—èŠ‚ã€‚</span></span><br><span class="line"><span class="comment">//dat:è¦å†™å…¥çš„æ•°æ®/å‘½ä»¤</span></span><br><span class="line"><span class="comment">//cmd:æ•°æ®/å‘½ä»¤æ ‡å¿— 0,è¡¨ç¤ºå‘½ä»¤;1,è¡¨ç¤ºæ•°æ®;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OLED_WR_Byte</span><span class="params">(u8 dat,u8 cmd)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">DATAOUT(dat);    </span><br><span class="line"><span class="keyword">if</span>(cmd)</span><br><span class="line">  OLED_DC_Set();</span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line">  OLED_DC_Clr();   </span><br><span class="line">OLED_CS_Clr();</span><br><span class="line">OLED_WR_Clr(); </span><br><span class="line">OLED_WR_Set();</span><br><span class="line">OLED_CS_Set();  </span><br><span class="line">OLED_DC_Set(); </span><br><span class="line">&#125;         </span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="comment">//å‘SSD1106å†™å…¥ä¸€ä¸ªå­—èŠ‚ã€‚</span></span><br><span class="line"><span class="comment">//dat:è¦å†™å…¥çš„æ•°æ®/å‘½ä»¤</span></span><br><span class="line"><span class="comment">//cmd:æ•°æ®/å‘½ä»¤æ ‡å¿— 0,è¡¨ç¤ºå‘½ä»¤;1,è¡¨ç¤ºæ•°æ®;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OLED_WR_Byte</span><span class="params">(u8 dat,u8 cmd)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">u8 i;  </span><br><span class="line"><span class="keyword">if</span>(cmd)</span><br><span class="line">  OLED_DC_Set();</span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line">  OLED_DC_Clr();  </span><br><span class="line">OLED_CS_Clr();</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++)</span><br><span class="line">&#123;  </span><br><span class="line">OLED_SCLK_Clr();</span><br><span class="line"><span class="keyword">if</span>(dat&amp;<span class="number">0x80</span>)</span><br><span class="line">   OLED_SDIN_Set();</span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line">   OLED_SDIN_Clr();</span><br><span class="line">OLED_SCLK_Set();</span><br><span class="line">dat&lt;&lt;=<span class="number">1</span>;   </span><br><span class="line">&#125;   </span><br><span class="line">OLED_CS_Set();</span><br><span class="line">OLED_DC_Set();     </span><br><span class="line">&#125; </span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OLED_Set_Pos</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> x, <span class="keyword">unsigned</span> <span class="keyword">char</span> y)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">OLED_WR_Byte(<span class="number">0xb0</span>+y,OLED_CMD);</span><br><span class="line">OLED_WR_Byte(((x&amp;<span class="number">0xf0</span>)&gt;&gt;<span class="number">4</span>)|<span class="number">0x10</span>,OLED_CMD);</span><br><span class="line">OLED_WR_Byte((x&amp;<span class="number">0x0f</span>)|<span class="number">0x01</span>,OLED_CMD); </span><br><span class="line">&#125;     </span><br><span class="line"><span class="comment">//å¼€å¯OLEDæ˜¾ç¤º    </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OLED_Display_On</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">OLED_WR_Byte(<span class="number">0X8D</span>,OLED_CMD);  <span class="comment">//SET DCDCå‘½ä»¤</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0X14</span>,OLED_CMD);  <span class="comment">//DCDC ON</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0XAF</span>,OLED_CMD);  <span class="comment">//DISPLAY ON</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å…³é—­OLEDæ˜¾ç¤º     </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OLED_Display_Off</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">OLED_WR_Byte(<span class="number">0X8D</span>,OLED_CMD);  <span class="comment">//SET DCDCå‘½ä»¤</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0X10</span>,OLED_CMD);  <span class="comment">//DCDC OFF</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0XAE</span>,OLED_CMD);  <span class="comment">//DISPLAY OFF</span></span><br><span class="line">&#125;    </span><br><span class="line"><span class="comment">//æ¸…å±å‡½æ•°,æ¸…å®Œå±,æ•´ä¸ªå±å¹•æ˜¯é»‘è‰²çš„!å’Œæ²¡ç‚¹äº®ä¸€æ ·!!!  </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OLED_Clear</span><span class="params">(<span class="keyword">void</span>)</span>  </span></span><br><span class="line"><span class="function"></span>&#123;  </span><br><span class="line">u8 i,n;    </span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++)  </span><br><span class="line">&#123;  </span><br><span class="line">OLED_WR_Byte (<span class="number">0xb0</span>+i,OLED_CMD);    <span class="comment">//è®¾ç½®é¡µåœ°å€ï¼ˆ0~7ï¼‰</span></span><br><span class="line">OLED_WR_Byte (<span class="number">0x00</span>,OLED_CMD);      <span class="comment">//è®¾ç½®æ˜¾ç¤ºä½ç½®â€”åˆ—ä½åœ°å€</span></span><br><span class="line">OLED_WR_Byte (<span class="number">0x10</span>,OLED_CMD);      <span class="comment">//è®¾ç½®æ˜¾ç¤ºä½ç½®â€”åˆ—é«˜åœ°å€   </span></span><br><span class="line"><span class="keyword">for</span>(n=<span class="number">0</span>;n&lt;<span class="number">128</span>;n++)OLED_WR_Byte(<span class="number">0</span>,OLED_DATA); </span><br><span class="line">&#125; <span class="comment">//æ›´æ–°æ˜¾ç¤º</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//åœ¨æŒ‡å®šä½ç½®æ˜¾ç¤ºä¸€ä¸ªå­—ç¬¦,åŒ…æ‹¬éƒ¨åˆ†å­—ç¬¦</span></span><br><span class="line"><span class="comment">//x:0~127</span></span><br><span class="line"><span class="comment">//y:0~63</span></span><br><span class="line"><span class="comment">//mode:0,åç™½æ˜¾ç¤º;1,æ­£å¸¸æ˜¾ç¤º </span></span><br><span class="line"><span class="comment">//size:é€‰æ‹©å­—ä½“ 16/12 </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OLED_ShowChar</span><span class="params">(u8 x,u8 y,u8 chr)</span></span></span><br><span class="line"><span class="function"></span>&#123;      </span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> c=<span class="number">0</span>,i=<span class="number">0</span>;</span><br><span class="line">c=chr-<span class="string">&#x27; &#x27;</span>;<span class="comment">//å¾—åˆ°åç§»åçš„å€¼</span></span><br><span class="line"><span class="keyword">if</span>(x&gt;Max_Column<span class="number">-1</span>)&#123;x=<span class="number">0</span>;y=y+<span class="number">2</span>;&#125;</span><br><span class="line"><span class="keyword">if</span>(SIZE ==<span class="number">16</span>)</span><br><span class="line">&#123;</span><br><span class="line">OLED_Set_Pos(x,y);</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++)</span><br><span class="line">OLED_WR_Byte(F8X16[c*<span class="number">16</span>+i],OLED_DATA);</span><br><span class="line">OLED_Set_Pos(x,y+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++)</span><br><span class="line">OLED_WR_Byte(F8X16[c*<span class="number">16</span>+i+<span class="number">8</span>],OLED_DATA);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">OLED_Set_Pos(x,y+<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">6</span>;i++)</span><br><span class="line">OLED_WR_Byte(F6x8[c][i],OLED_DATA);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//m^nå‡½æ•°</span></span><br><span class="line"><span class="function">u32 <span class="title">oled_pow</span><span class="params">(u8 m,u8 n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">u32 result=<span class="number">1</span>; </span><br><span class="line"><span class="keyword">while</span>(n--)result*=m;    </span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;  </span><br><span class="line"><span class="comment">//æ˜¾ç¤º2ä¸ªæ•°å­—</span></span><br><span class="line"><span class="comment">//x,y :èµ·ç‚¹åæ ‡ </span></span><br><span class="line"><span class="comment">//len :æ•°å­—çš„ä½æ•°</span></span><br><span class="line"><span class="comment">//size:å­—ä½“å¤§å°</span></span><br><span class="line"><span class="comment">//mode:æ¨¡å¼0,å¡«å……æ¨¡å¼;1,å åŠ æ¨¡å¼</span></span><br><span class="line"><span class="comment">//num:æ•°å€¼(0~4294967295);   </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OLED_ShowNum</span><span class="params">(u8 x,u8 y,u32 num,u8 len,u8 size)</span></span></span><br><span class="line"><span class="function"></span>&#123;         </span><br><span class="line">u8 t,temp;</span><br><span class="line">u8 enshow=<span class="number">0</span>;   </span><br><span class="line"><span class="keyword">for</span>(t=<span class="number">0</span>;t&lt;len;t++)</span><br><span class="line">&#123;</span><br><span class="line">temp=(num/oled_pow(<span class="number">10</span>,len-t<span class="number">-1</span>))%<span class="number">10</span>;</span><br><span class="line"><span class="keyword">if</span>(enshow==<span class="number">0</span>&amp;&amp;t&lt;(len<span class="number">-1</span>))</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(temp==<span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">OLED_ShowChar(x+(size/<span class="number">2</span>)*t,y,<span class="string">&#x27; &#x27;</span>);</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> enshow=<span class="number">1</span>; </span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"> OLED_ShowChar(x+(size/<span class="number">2</span>)*t,y,temp+<span class="string">&#x27;0&#x27;</span>); </span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">//æ˜¾ç¤ºä¸€ä¸ªå­—ç¬¦å·ä¸²</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OLED_ShowString</span><span class="params">(u8 x,u8 y,u8 *chr)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> j=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (chr[j]!=<span class="string">&#x27;\0&#x27;</span>)</span><br><span class="line">&#123;OLED_ShowChar(x,y,chr[j]);</span><br><span class="line">x+=<span class="number">8</span>;</span><br><span class="line"><span class="keyword">if</span>(x&gt;<span class="number">120</span>)&#123;x=<span class="number">0</span>;y+=<span class="number">2</span>;&#125;</span><br><span class="line">j++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ˜¾ç¤ºæ±‰å­—--noè¡¨ç¤ºè¡Œæ•°</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OLED_ShowCHinese</span><span class="params">(u8 x,u8 y,u8 no)</span></span></span><br><span class="line"><span class="function"></span>&#123;          </span><br><span class="line">u8 t,adder=<span class="number">0</span>;</span><br><span class="line">OLED_Set_Pos(x,y);</span><br><span class="line">    <span class="keyword">for</span>(t=<span class="number">0</span>;t&lt;<span class="number">16</span>;t++)</span><br><span class="line">&#123;</span><br><span class="line">OLED_WR_Byte(Hzk[<span class="number">2</span>*no][t],OLED_DATA);</span><br><span class="line">adder+=<span class="number">1</span>;</span><br><span class="line">     &#125;</span><br><span class="line">OLED_Set_Pos(x,y+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(t=<span class="number">0</span>;t&lt;<span class="number">16</span>;t++)</span><br><span class="line">&#123;</span><br><span class="line">OLED_WR_Byte(Hzk[<span class="number">2</span>*no+<span class="number">1</span>][t],OLED_DATA);</span><br><span class="line">adder+=<span class="number">1</span>;</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/***********åŠŸèƒ½æè¿°ï¼šæ˜¾ç¤ºæ˜¾ç¤ºBMPå›¾ç‰‡128Ã—64èµ·å§‹ç‚¹åæ ‡(x,y),xçš„èŒƒå›´0ï½127ï¼Œyä¸ºé¡µçš„èŒƒå›´0ï½7*****************/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OLED_DrawBMP</span><span class="params">(<span class="keyword">unsigned</span> <span class="keyword">char</span> x0, <span class="keyword">unsigned</span> <span class="keyword">char</span> y0,<span class="keyword">unsigned</span> <span class="keyword">char</span> x1, <span class="keyword">unsigned</span> <span class="keyword">char</span> y1,<span class="keyword">unsigned</span> <span class="keyword">char</span> BMP[])</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line"> <span class="keyword">unsigned</span> <span class="keyword">int</span> j=<span class="number">0</span>;</span><br><span class="line"> <span class="keyword">unsigned</span> <span class="keyword">char</span> x,y;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span>(y1%<span class="number">8</span>==<span class="number">0</span>) y=y1/<span class="number">8</span>;      </span><br><span class="line">  <span class="keyword">else</span> y=y1/<span class="number">8</span>+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(y=y0;y&lt;y1;y++)</span><br><span class="line">&#123;</span><br><span class="line">OLED_Set_Pos(x0,y);</span><br><span class="line">    <span class="keyword">for</span>(x=x0;x&lt;x1;x++)</span><br><span class="line">    &#123;      </span><br><span class="line">    OLED_WR_Byte(BMP[j++],OLED_DATA);    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆå§‹åŒ–SSD1306    </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OLED_Init</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line"> </span><br><span class="line">  </span><br><span class="line"> GPIO_InitTypeDef  GPIO_InitStructure;</span><br><span class="line"> </span><br><span class="line"> RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE); <span class="comment">//ä½¿èƒ½Aç«¯å£æ—¶é’Ÿ</span></span><br><span class="line">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_3 | GPIO_Pin_6| GPIO_Pin_4|GPIO_Pin_5|GPIO_Pin_7; </span><br><span class="line"> GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;  <span class="comment">//æ¨æŒ½è¾“å‡º</span></span><br><span class="line">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;<span class="comment">//é€Ÿåº¦50MHz</span></span><br><span class="line"> GPIO_Init(GPIOA, &amp;GPIO_InitStructure);  <span class="comment">//åˆå§‹åŒ–GPIOD3,6</span></span><br><span class="line"> GPIO_SetBits(GPIOA,GPIO_Pin_5|GPIO_Pin_7|GPIO_Pin_4);</span><br><span class="line"></span><br><span class="line">RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOB, ENABLE); <span class="comment">//ä½¿èƒ½Aç«¯å£æ—¶é’Ÿ</span></span><br><span class="line">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_8; </span><br><span class="line"> GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;  <span class="comment">//æ¨æŒ½è¾“å‡º</span></span><br><span class="line">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;<span class="comment">//é€Ÿåº¦50MHz</span></span><br><span class="line"> GPIO_Init(GPIOB, &amp;GPIO_InitStructure);  <span class="comment">//åˆå§‹åŒ–GPIOD3,6</span></span><br><span class="line"></span><br><span class="line"> GPIO_SetBits(GPIOB,GPIO_Pin_8);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">  OLED_RST_Set();</span><br><span class="line">delay_ms(<span class="number">100</span>);</span><br><span class="line">OLED_RST_Clr();</span><br><span class="line">delay_ms(<span class="number">200</span>);</span><br><span class="line">OLED_RST_Set(); </span><br><span class="line">  </span><br><span class="line">OLED_WR_Byte(<span class="number">0xAE</span>,OLED_CMD);<span class="comment">//--turn off oled panel</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0x00</span>,OLED_CMD);<span class="comment">//---set low column address</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0x10</span>,OLED_CMD);<span class="comment">//---set high column address</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0x40</span>,OLED_CMD);<span class="comment">//--set start line address  Set Mapping RAM Display Start Line (0x00~0x3F)</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0x81</span>,OLED_CMD);<span class="comment">//--set contrast control register</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0xCF</span>,OLED_CMD); <span class="comment">// Set SEG Output Current Brightness</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0xA1</span>,OLED_CMD);<span class="comment">//--Set SEG/Column Mapping     0xa0å·¦å³åç½® 0xa1æ­£å¸¸</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0xC8</span>,OLED_CMD);<span class="comment">//Set COM/Row Scan Direction   0xc0ä¸Šä¸‹åç½® 0xc8æ­£å¸¸</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0xA6</span>,OLED_CMD);<span class="comment">//--set normal display</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0xA8</span>,OLED_CMD);<span class="comment">//--set multiplex ratio(1 to 64)</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0x3f</span>,OLED_CMD);<span class="comment">//--1/64 duty</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0xD3</span>,OLED_CMD);<span class="comment">//-set display offsetShift Mapping RAM Counter (0x00~0x3F)</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0x00</span>,OLED_CMD);<span class="comment">//-not offset</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0xd5</span>,OLED_CMD);<span class="comment">//--set display clock divide ratio/oscillator frequency</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0x80</span>,OLED_CMD);<span class="comment">//--set divide ratio, Set Clock as 100 Frames/Sec</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0xD9</span>,OLED_CMD);<span class="comment">//--set pre-charge period</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0xF1</span>,OLED_CMD);<span class="comment">//Set Pre-Charge as 15 Clocks &amp; Discharge as 1 Clock</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0xDA</span>,OLED_CMD);<span class="comment">//--set com pins hardware configuration</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0x12</span>,OLED_CMD);</span><br><span class="line">OLED_WR_Byte(<span class="number">0xDB</span>,OLED_CMD);<span class="comment">//--set vcomh</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0x40</span>,OLED_CMD);<span class="comment">//Set VCOM Deselect Level</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0x20</span>,OLED_CMD);<span class="comment">//-Set Page Addressing Mode (0x00/0x01/0x02)</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0x02</span>,OLED_CMD);<span class="comment">//</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0x8D</span>,OLED_CMD);<span class="comment">//--set Charge Pump enable/disable</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0x14</span>,OLED_CMD);<span class="comment">//--set(0x10) disable</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0xA4</span>,OLED_CMD);<span class="comment">// Disable Entire Display On (0xa4/0xa5)</span></span><br><span class="line">OLED_WR_Byte(<span class="number">0xA6</span>,OLED_CMD);<span class="comment">// Disable Inverse Display On (0xa6/a7) </span></span><br><span class="line">OLED_WR_Byte(<span class="number">0xAF</span>,OLED_CMD);<span class="comment">//--turn on oled panel</span></span><br><span class="line"></span><br><span class="line">OLED_WR_Byte(<span class="number">0xAF</span>,OLED_CMD); <span class="comment">/*display ON*/</span> </span><br><span class="line">OLED_Clear();</span><br><span class="line">OLED_Set_Pos(<span class="number">0</span>,<span class="number">0</span>); </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure><h5 id="ä¸­æ–­ä¼˜å…ˆå·¥å…·åŒ…"><a href="#ä¸­æ–­ä¼˜å…ˆå·¥å…·åŒ…" class="headerlink" title="ä¸­æ–­ä¼˜å…ˆå·¥å…·åŒ…"></a>ä¸­æ–­ä¼˜å…ˆå·¥å…·åŒ…</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;sys.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">NVIC_Configuration</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    NVIC_PriorityGroupConfig(NVIC_PriorityGroup_2);<span class="comment">//è®¾ç½®NVICä¸­æ–­åˆ†ç»„2:2ä½æŠ¢å ä¼˜å…ˆçº§ï¼Œ2ä½å“åº”ä¼˜å…ˆçº§</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸²å£é€šä¿¡é…ç½®å·¥å…·åŒ…</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;sys.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;usart.h&quot;</span>  </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åŠ å…¥ä»¥ä¸‹ä»£ç ,æ”¯æŒprintfå‡½æ•°,è€Œä¸éœ€è¦é€‰æ‹©use MicroLIB  </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> import(__use_no_semihosting)             </span></span><br><span class="line"><span class="comment">//æ ‡å‡†åº“éœ€è¦çš„æ”¯æŒå‡½æ•°                 </span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> __<span class="title">FILE</span> </span></span><br><span class="line"><span class="class">&#123;</span> </span><br><span class="line"><span class="keyword">int</span> handle; </span><br><span class="line"></span><br><span class="line">&#125;; </span><br><span class="line"></span><br><span class="line">FILE __stdout;       </span><br><span class="line"><span class="comment">//å®šä¹‰_sys_exit()ä»¥é¿å…ä½¿ç”¨åŠä¸»æœºæ¨¡å¼    </span></span><br><span class="line">_sys_exit(<span class="keyword">int</span> x) </span><br><span class="line">&#123; </span><br><span class="line">x = x; </span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">//é‡å®šä¹‰fputcå‡½æ•° </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fputc</span><span class="params">(<span class="keyword">int</span> ch, FILE *f)</span></span></span><br><span class="line"><span class="function"></span>&#123;      </span><br><span class="line"><span class="keyword">while</span>((USART1-&gt;SR&amp;<span class="number">0X40</span>)==<span class="number">0</span>);<span class="comment">//å¾ªç¯å‘é€,ç›´åˆ°å‘é€å®Œæ¯•   </span></span><br><span class="line">    USART1-&gt;DR = (u8) ch;      </span><br><span class="line"><span class="keyword">return</span> ch;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> </span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*ä½¿ç”¨microLibçš„æ–¹æ³•*/</span></span><br><span class="line"> <span class="comment">/* </span></span><br><span class="line"><span class="comment">int fputc(int ch, FILE *f)</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">USART_SendData(USART1, (uint8_t) ch);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">while (USART_GetFlagStatus(USART1, USART_FLAG_TC) == RESET) &#123;&#125;</span></span><br><span class="line"><span class="comment">   </span></span><br><span class="line"><span class="comment">    return ch;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">int GetKey (void)  &#123; </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    while (!(USART1-&gt;SR &amp; USART_FLAG_RXNE));</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    return ((int)(USART1-&gt;DR &amp; 0x1FF));</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> EN_USART1_RX   <span class="comment">//å¦‚æœä½¿èƒ½äº†æ¥æ”¶</span></span></span><br><span class="line"><span class="comment">//ä¸²å£1ä¸­æ–­æœåŠ¡ç¨‹åº</span></span><br><span class="line"><span class="comment">//æ³¨æ„,è¯»å–USARTx-&gt;SRèƒ½é¿å…è«åå…¶å¦™çš„é”™è¯¯   </span></span><br><span class="line">u8 USART_RX_BUF[USART_REC_LEN];     <span class="comment">//æ¥æ”¶ç¼“å†²,æœ€å¤§USART_REC_LENä¸ªå­—èŠ‚.</span></span><br><span class="line"><span class="comment">//æ¥æ”¶çŠ¶æ€</span></span><br><span class="line"><span class="comment">//bit15ï¼Œæ¥æ”¶å®Œæˆæ ‡å¿—</span></span><br><span class="line"><span class="comment">//bit14ï¼Œæ¥æ”¶åˆ°0x0d</span></span><br><span class="line"><span class="comment">//bit13~0ï¼Œæ¥æ”¶åˆ°çš„æœ‰æ•ˆå­—èŠ‚æ•°ç›®</span></span><br><span class="line">u16 USART_RX_STA=<span class="number">0</span>;       <span class="comment">//æ¥æ”¶çŠ¶æ€æ ‡è®°  </span></span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">uart_init</span><span class="params">(u32 bound)</span></span>&#123;</span><br><span class="line">    <span class="comment">//GPIOç«¯å£è®¾ç½®</span></span><br><span class="line">    GPIO_InitTypeDef GPIO_InitStructure;</span><br><span class="line">USART_InitTypeDef USART_InitStructure;</span><br><span class="line">NVIC_InitTypeDef NVIC_InitStructure;</span><br><span class="line"> </span><br><span class="line">RCC_APB2PeriphClockCmd(RCC_APB2Periph_USART1|RCC_APB2Periph_GPIOA|RCC_APB2Periph_AFIO, ENABLE);<span class="comment">//ä½¿èƒ½USART1ï¼ŒGPIOAæ—¶é’Ÿä»¥åŠå¤ç”¨åŠŸèƒ½æ—¶é’Ÿ</span></span><br><span class="line">     <span class="comment">//USART1_TX   PA.9</span></span><br><span class="line">    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_9; <span class="comment">//PA.9</span></span><br><span class="line">    GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class="line">    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP;<span class="comment">//å¤ç”¨æ¨æŒ½è¾“å‡º</span></span><br><span class="line">    GPIO_Init(GPIOA, &amp;GPIO_InitStructure);</span><br><span class="line">   </span><br><span class="line">    <span class="comment">//USART1_RX  PA.10</span></span><br><span class="line">    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_10;</span><br><span class="line">    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING;<span class="comment">//æµ®ç©ºè¾“å…¥</span></span><br><span class="line">    GPIO_Init(GPIOA, &amp;GPIO_InitStructure);  </span><br><span class="line"></span><br><span class="line">   <span class="comment">//Usart1 NVIC é…ç½®</span></span><br><span class="line"></span><br><span class="line">    NVIC_InitStructure.NVIC_IRQChannel = USART1_IRQn;</span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority=<span class="number">3</span> ;<span class="comment">//æŠ¢å ä¼˜å…ˆçº§3</span></span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannelSubPriority = <span class="number">3</span>;<span class="comment">//å­ä¼˜å…ˆçº§3</span></span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;<span class="comment">//IRQé€šé“ä½¿èƒ½</span></span><br><span class="line">NVIC_Init(&amp;NVIC_InitStructure);<span class="comment">//æ ¹æ®æŒ‡å®šçš„å‚æ•°åˆå§‹åŒ–VICå¯„å­˜å™¨</span></span><br><span class="line">  </span><br><span class="line">   <span class="comment">//USART åˆå§‹åŒ–è®¾ç½®</span></span><br><span class="line"></span><br><span class="line">USART_InitStructure.USART_BaudRate = bound;<span class="comment">//ä¸€èˆ¬è®¾ç½®ä¸º9600;</span></span><br><span class="line">USART_InitStructure.USART_WordLength = USART_WordLength_8b;<span class="comment">//å­—é•¿ä¸º8ä½æ•°æ®æ ¼å¼</span></span><br><span class="line">USART_InitStructure.USART_StopBits = USART_StopBits_1;<span class="comment">//ä¸€ä¸ªåœæ­¢ä½</span></span><br><span class="line">USART_InitStructure.USART_Parity = USART_Parity_No;<span class="comment">//æ— å¥‡å¶æ ¡éªŒä½</span></span><br><span class="line">USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;<span class="comment">//æ— ç¡¬ä»¶æ•°æ®æµæ§åˆ¶</span></span><br><span class="line">USART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;<span class="comment">//æ”¶å‘æ¨¡å¼</span></span><br><span class="line"></span><br><span class="line">    USART_Init(USART1, &amp;USART_InitStructure); <span class="comment">//åˆå§‹åŒ–ä¸²å£</span></span><br><span class="line">    USART_ITConfig(USART1, USART_IT_RXNE, ENABLE);<span class="comment">//å¼€å¯ä¸­æ–­</span></span><br><span class="line">    USART_Cmd(USART1, ENABLE);                    <span class="comment">//ä½¿èƒ½ä¸²å£ </span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">USART1_IRQHandler</span><span class="params">(<span class="keyword">void</span>)</span>                <span class="comment">//ä¸²å£1ä¸­æ–­æœåŠ¡ç¨‹åº</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">u8 Res;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> OS_TICKS_PER_SEC <span class="comment">//å¦‚æœæ—¶é’ŸèŠ‚æ‹æ•°å®šä¹‰äº†,è¯´æ˜è¦ä½¿ç”¨ucosIIäº†.</span></span></span><br><span class="line">OSIntEnter();    </span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"><span class="keyword">if</span>(USART_GetITStatus(USART1, USART_IT_RXNE) != RESET)  <span class="comment">//æ¥æ”¶ä¸­æ–­(æ¥æ”¶åˆ°çš„æ•°æ®å¿…é¡»æ˜¯0x0d 0x0aç»“å°¾)</span></span><br><span class="line">&#123;</span><br><span class="line">Res =USART_ReceiveData(USART1);<span class="comment">//(USART1-&gt;DR);//è¯»å–æ¥æ”¶åˆ°çš„æ•°æ®</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>((USART_RX_STA&amp;<span class="number">0x8000</span>)==<span class="number">0</span>)<span class="comment">//æ¥æ”¶æœªå®Œæˆ</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(USART_RX_STA&amp;<span class="number">0x4000</span>)<span class="comment">//æ¥æ”¶åˆ°äº†0x0d</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(Res!=<span class="number">0x0a</span>)USART_RX_STA=<span class="number">0</span>;<span class="comment">//æ¥æ”¶é”™è¯¯,é‡æ–°å¼€å§‹</span></span><br><span class="line"><span class="keyword">else</span> USART_RX_STA|=<span class="number">0x8000</span>;<span class="comment">//æ¥æ”¶å®Œæˆäº† </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="comment">//è¿˜æ²¡æ”¶åˆ°0X0D</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(Res==<span class="number">0x0d</span>)USART_RX_STA|=<span class="number">0x4000</span>;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">USART_RX_BUF[USART_RX_STA&amp;<span class="number">0X3FFF</span>]=Res ;</span><br><span class="line">USART_RX_STA++;</span><br><span class="line"><span class="keyword">if</span>(USART_RX_STA&gt;(USART_REC_LEN<span class="number">-1</span>))USART_RX_STA=<span class="number">0</span>;<span class="comment">//æ¥æ”¶æ•°æ®é”™è¯¯,é‡æ–°å¼€å§‹æ¥æ”¶  </span></span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line">&#125;    </span><br><span class="line">     &#125; </span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> OS_TICKS_PER_SEC <span class="comment">//å¦‚æœæ—¶é’ŸèŠ‚æ‹æ•°å®šä¹‰äº†,è¯´æ˜è¦ä½¿ç”¨ucosIIäº†.</span></span></span><br><span class="line">OSIntExit();   </span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">&#125; </span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>æ”¯æŒä¸­æ–­å¤„ç†ä¸²å£é€šä¿¡</li><li>æ”¯æŒprintfè¾“å‡ºå†…å®¹åˆ°ä¸²å£</li></ul><h5 id="æ–‡å­—å–æ¨¡æ·»åŠ "><a href="#æ–‡å­—å–æ¨¡æ·»åŠ " class="headerlink" title="æ–‡å­—å–æ¨¡æ·»åŠ "></a>æ–‡å­—å–æ¨¡æ·»åŠ </h5><p>åœ¨oledfont.hå¯ä»¥çœ‹åˆ°å­—ç¬¦ä¸²çš„16è¿›åˆ¶å¯¹åº”ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å–æ¨¡ç„¶åæ·»åŠ æ±‰å­—</p><h5 id="æ±‰å­—æ˜¾ç¤º"><a href="#æ±‰å­—æ˜¾ç¤º" class="headerlink" title="æ±‰å­—æ˜¾ç¤º"></a>æ±‰å­—æ˜¾ç¤º</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stm32f10x.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;delay.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;sys.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;oled.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;bmp.h&quot;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">u8 t;</span><br><span class="line">delay_init();     <span class="comment">//å»¶æ—¶å‡½æ•°åˆå§‹åŒ–  </span></span><br><span class="line">NVIC_Configuration();  <span class="comment">//è®¾ç½®NVICä¸­æ–­åˆ†ç»„2:2ä½æŠ¢å ä¼˜å…ˆçº§ï¼Œ2ä½å“åº”ä¼˜å…ˆçº§ LED_Init(); </span></span><br><span class="line">    <span class="comment">//LEDç«¯å£åˆå§‹åŒ–</span></span><br><span class="line">OLED_Init();<span class="comment">//åˆå§‹åŒ–OLED  </span></span><br><span class="line">OLED_Clear()  ; </span><br><span class="line">t=<span class="string">&#x27; &#x27;</span>;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>) </span><br><span class="line">&#123;</span><br><span class="line">OLED_Clear();</span><br><span class="line"><span class="comment">//LED_ON;</span></span><br><span class="line">OLED_ShowCHinese(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);<span class="comment">//ä¸­</span></span><br><span class="line">OLED_ShowCHinese(<span class="number">18</span>,<span class="number">0</span>,<span class="number">1</span>);<span class="comment">//æ™¯</span></span><br><span class="line">OLED_ShowCHinese(<span class="number">36</span>,<span class="number">0</span>,<span class="number">2</span>);<span class="comment">//å›­</span></span><br><span class="line">OLED_ShowCHinese(<span class="number">54</span>,<span class="number">0</span>,<span class="number">3</span>);<span class="comment">//ç”µ</span></span><br><span class="line">OLED_ShowCHinese(<span class="number">72</span>,<span class="number">0</span>,<span class="number">4</span>);<span class="comment">//å­</span></span><br><span class="line">OLED_ShowCHinese(<span class="number">90</span>,<span class="number">0</span>,<span class="number">5</span>);<span class="comment">//ç§‘</span></span><br><span class="line">OLED_ShowCHinese(<span class="number">108</span>,<span class="number">0</span>,<span class="number">6</span>);<span class="comment">//æŠ€</span></span><br><span class="line"></span><br><span class="line">OLED_ShowCHinese(<span class="number">0</span>,<span class="number">6</span>,<span class="number">7</span>);<span class="comment">//ä½›</span></span><br><span class="line">OLED_ShowCHinese(<span class="number">18</span>,<span class="number">6</span>,<span class="number">8</span>);<span class="comment">//ç§‘</span></span><br><span class="line">OLED_ShowString(<span class="number">0</span>,<span class="number">3</span>,(<span class="keyword">unsigned</span> <span class="keyword">char</span> *)<span class="string">&quot;1.3&#x27; OLED TEST&quot;</span>);</span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ¸©åº¦æµ‹é‡"><a href="#æ¸©åº¦æµ‹é‡" class="headerlink" title="æ¸©åº¦æµ‹é‡"></a>æ¸©åº¦æµ‹é‡</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stm32f10x.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//GPIOä¿¡æ¯ç»“æ„ä½“ä½“åˆå§‹åŒ–</span></span><br><span class="line">GPIO_InitTypeDef   GPIO_InitStructure;</span><br><span class="line">EXTI_InitTypeDef   EXTI_InitStructure;</span><br><span class="line">NVIC_InitTypeDef   NVIC_InitStructure;</span><br><span class="line">USART_InitTypeDef USART_InitStructure; <span class="comment">//ä¸²å£é…ç½®çš„ä¿¡æ¯ç»“æ„ä½“</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> dht11_data[<span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> data;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡å®šä¹‰fputcå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fputc</span><span class="params">(<span class="keyword">int</span> ch, FILE *f)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//å‘é€å­—ç¬¦åˆ°ä¸²å£1</span></span><br><span class="line">USART_SendData(USART1,ch);</span><br><span class="line"><span class="keyword">while</span>(USART_GetFlagStatus(USART1,USART_FLAG_TXE)==RESET);  </span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> ch;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å»¶æ—¶100ms ï¼Œè®¡æ•°72000000æ¬¡æ—¶é—´è¿‡äº†1s  , è®¡æ•°72000æ¬¡æ—¶é—´è¿‡äº†1ms,è®¡æ•°72æ¬¡è¡¨ç¤ºæ—¶é—´è¿‡äº†1us</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delay_ms</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SysTick-&gt;LOAD = <span class="number">72000</span>*x; <span class="comment">//æŠŠè®¡æ•°å€¼åŠ è½½åˆ°LOADå¯„å­˜å™¨ ---&gt;æ¯æ¬¡è®¡æ•°100ms</span></span><br><span class="line"></span><br><span class="line">SysTick-&gt;VAL = <span class="number">0</span>; <span class="comment">//æ¸…ç©ºVALå¯„å­˜å™¨çš„è®¡æ•°å€¼</span></span><br><span class="line"></span><br><span class="line">SysTick-&gt;CTRL |= <span class="number">0x1</span>&lt;&lt;<span class="number">0</span>; <span class="comment">//å¼€å§‹è®¡æ—¶,æ‰“å¼€å®šæ—¶å™¨æŠŠCTRLçš„ç¬¬0ä½ç½®1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(<span class="number">0</span> == (SysTick-&gt;CTRL &amp; (<span class="number">0x1</span>&lt;&lt;<span class="number">16</span>)) ); <span class="comment">//åˆ¤æ–­CTRLæ˜¯å¦ä¸º1ï¼Œå¦‚æœä¸º1è¡¨ç¤ºè®¡æ—¶æ—¶é—´åˆ°äº†</span></span><br><span class="line"></span><br><span class="line">SysTick-&gt;CTRL &amp;= ~(<span class="number">0x1</span>&lt;&lt;<span class="number">0</span>); <span class="comment">//å…³é—­å®šæ—¶å™¨ï¼ŒæŠŠCTRLçš„ç¬¬0ä½æ¸…é›¶</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¾®å¦™çº§åˆ«å»¶æ—¶</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delay_us</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SysTick-&gt;LOAD = <span class="number">72</span>*x; <span class="comment">//æŠŠè®¡æ•°å€¼åŠ è½½åˆ°LOADå¯„å­˜å™¨ ---&gt;æ¯æ¬¡è®¡æ•°100ms</span></span><br><span class="line"></span><br><span class="line">SysTick-&gt;VAL = <span class="number">0</span>; <span class="comment">//æ¸…ç©ºVALå¯„å­˜å™¨çš„è®¡æ•°å€¼</span></span><br><span class="line"></span><br><span class="line">SysTick-&gt;CTRL |= <span class="number">0x1</span>&lt;&lt;<span class="number">0</span>; <span class="comment">//å¼€å§‹è®¡æ—¶,æ‰“å¼€å®šæ—¶å™¨æŠŠCTRLçš„ç¬¬0ä½ç½®1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(<span class="number">0</span> == (SysTick-&gt;CTRL &amp; (<span class="number">0x1</span>&lt;&lt;<span class="number">16</span>)) ); <span class="comment">//åˆ¤æ–­CTRLæ˜¯å¦ä¸º1ï¼Œå¦‚æœä¸º1è¡¨ç¤ºè®¡æ—¶æ—¶é—´åˆ°äº†</span></span><br><span class="line"></span><br><span class="line">SysTick-&gt;CTRL &amp;= ~(<span class="number">0x1</span>&lt;&lt;<span class="number">0</span>); <span class="comment">//å…³é—­å®šæ—¶å™¨ï¼ŒæŠŠCTRLçš„ç¬¬0ä½æ¸…é›¶</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//led-ã€‹GPIOä¿¡æ¯ç»“æ„ä½“åˆå§‹åŒ–</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">led_init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//å…³é—­å¼•è„šJTAGå¤ç”¨åŠŸèƒ½--&gt;PA13ã€PA14ã€PA15ã€PB3ã€PB4</span></span><br><span class="line">RCC_APB2PeriphClockCmd( RCC_APB2Periph_AFIO | RCC_APB2Periph_GPIOA | RCC_APB2Periph_GPIOB, ENABLE);</span><br><span class="line">GPIO_PinRemapConfig(GPIO_Remap_SWJ_JTAGDisable, ENABLE);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* GPIOB Periph clock enable */</span></span><br><span class="line">RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOB, ENABLE);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Configure PD0 and PD2 in output pushpull mode */</span></span><br><span class="line">GPIO_InitStructure.GPIO_Pin = <span class="number">0xff</span> ;<span class="comment">//GPIO_Pin_0~GPIO_Pin_7</span></span><br><span class="line">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;<span class="comment">//è®¾ç½®è¿è¡Œé¢‘ç‡50MHz</span></span><br><span class="line">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP; <span class="comment">//è®¾ç½®æ¨æŒ½è¾“å‡º</span></span><br><span class="line">GPIO_Init(GPIOB, &amp;GPIO_InitStructure);</span><br><span class="line"></span><br><span class="line">GPIO_SetBits(GPIOB, <span class="number">0xff</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">delay</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> i, j;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;<span class="number">100</span>; i++)</span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">0</span>; j&lt;<span class="number">10000</span>; j++);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//è®¾ç½®ä¸²å£1--&gt;PA9+PA10</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">usart1_init</span><span class="params">(u32 bound)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1.ä½¿èƒ½GPIOå¤–è®¾ã€IOå¤ç”¨æ—¶é’Ÿã€USART2æ—¶é’Ÿ PA9 å’ŒPA10</span></span><br><span class="line">RCC_APB2PeriphClockCmd(RCC_APB2Periph_USART1, ENABLE);</span><br><span class="line">RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA | RCC_APB2Periph_AFIO, ENABLE);</span><br><span class="line">    </span><br><span class="line"><span class="comment">//2.é…ç½®GPIO + åˆå§‹åŒ–GPIO</span></span><br><span class="line">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_9; <span class="comment">//  PA2   TX</span></span><br><span class="line">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP;  <span class="comment">//å¤ç”¨æ¨æŒ½è¾“å‡º</span></span><br><span class="line">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class="line">GPIO_Init(GPIOA, &amp;GPIO_InitStructure);<span class="comment">//åˆå§‹åŒ–GPIO</span></span><br><span class="line"></span><br><span class="line">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_10; <span class="comment">//  PA3   RX</span></span><br><span class="line">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING;  <span class="comment">//æµ®ç©ºè¾“å…¥   PA10  RX</span></span><br><span class="line">GPIO_Init(GPIOA, &amp;GPIO_InitStructure);<span class="comment">//åˆå§‹åŒ–GPIO</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3.é…ç½®USART1 + åˆå§‹åŒ–USART1</span></span><br><span class="line">USART_InitStructure.USART_BaudRate = bound;<span class="comment">//æ³¢ç‰¹ç‡</span></span><br><span class="line">USART_InitStructure.USART_WordLength = USART_WordLength_8b;<span class="comment">//æ•°æ®ä½8ä½</span></span><br><span class="line">USART_InitStructure.USART_StopBits = USART_StopBits_1;<span class="comment">//åœæ­¢ä½1ä½</span></span><br><span class="line">USART_InitStructure.USART_Parity = USART_Parity_No;<span class="comment">//æ— å¥‡å¶æ£€éªŒ</span></span><br><span class="line">USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;<span class="comment">//æ— ç¡¬ä»¶æ•°æ®æµæ§åˆ¶</span></span><br><span class="line">USART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;<span class="comment">//æ”¶å‘æ¨¡å¼</span></span><br><span class="line">USART_Init(USART1, &amp;USART_InitStructure);<span class="comment">//æŠŠé…ç½®ä¿¡æ¯åŠ è½½åˆ°ä¸²å£2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//4.é…ç½®NVIC + åˆå§‹åŒ–NVIC </span></span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannel = USART1_IRQn;<span class="comment">//é€‰æ‹©ä¸²å£2çš„ä¸­æ–­</span></span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannelSubPriority = <span class="number">0</span>;<span class="comment">//è®¾ç½®æŠ¢å ä¼˜å…ˆçº§</span></span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = <span class="number">0</span>; <span class="comment">//è®¾ç½®å“åº”ä¼˜å…ˆçº§</span></span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;<span class="comment">//ä½¿èƒ½ä¸²å£2çš„ä¸­æ–­</span></span><br><span class="line">NVIC_Init(&amp;NVIC_InitStructure);<span class="comment">//æŠŠé…ç½®ä¿¡æ¯åŠ è½½åˆ°ä¸­æ–­</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//5.ä½¿èƒ½ä¸²å£ä¸­æ–­</span></span><br><span class="line">USART_ITConfig(USART1,USART_IT_RXNE,ENABLE);<span class="comment">//æ¥æ”¶åˆ°æ•°æ®è§¦å‘ä¸­æ–­</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//6.ä½¿èƒ½ä¸²å£</span></span><br><span class="line">USART_Cmd(USART1,ENABLE);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//æŠŠPB15è®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set_PA15_outputmode</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">/* GPIOB Peripheral clock enable ä½¿èƒ½å¯¹åº”GPIOç»„çš„ç¡¬ä»¶æ—¶é’Ÿï¼Œä½¿èƒ½ç¬¬Bç»„çš„ç¡¬ä»¶æ—¶é’Ÿ*/</span></span><br><span class="line">RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOB, ENABLE);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Configure PB15 in output pushpull mode */</span></span><br><span class="line">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_15;<span class="comment">//é€‰æ‹©15å·å¼•è„š</span></span><br><span class="line">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;<span class="comment">//é€‰æ‹©è¾“å‡ºæ¨¡å¼</span></span><br><span class="line">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;<span class="comment">//è®¾ç½®è¿è¡Œé€Ÿåº¦ä¸º100MHz</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">GPIO_Init(GPIOA, &amp;GPIO_InitStructure);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æŠŠPB15è®¾ç½®ä¸ºè¾“å…¥æ¨¡å¼</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">set_PA15_inputmode</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* GPIOB Periph clock enable */</span></span><br><span class="line">RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Configure PD0 and PD2 in output pushpull mode */</span></span><br><span class="line">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_15; </span><br><span class="line">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;<span class="comment">//è®¾ç½®è¿è¡Œé¢‘ç‡50MHz</span></span><br><span class="line">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING; <span class="comment">//è®¾ç½®æ¨æŒ½è¾“å‡º</span></span><br><span class="line">GPIO_Init(GPIOA, &amp;GPIO_InitStructure);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//MCUè¯·æ±‚dht11å‘é€æ•°æ®</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">ask_dht11_data</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> i=<span class="number">0</span>;</span><br><span class="line"><span class="comment">//è¯·æ±‚dht11å‘é€æ•°æ®</span></span><br><span class="line">set_PA15_outputmode(); <span class="comment">//--ã€‹è®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼</span></span><br><span class="line">GPIO_ResetBits(GPIOA,  GPIO_Pin_15);</span><br><span class="line">delay_ms(<span class="number">20</span>);</span><br><span class="line">GPIO_SetBits(GPIOA, GPIO_Pin_15);</span><br><span class="line"></span><br><span class="line">delay_us(<span class="number">30</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¤æ–­dht11æ˜¯å¦æœ‰å›åº”--ã€‹åœ¨ä¸€å®šçš„æ—¶é—´å†…æ²¡æœ‰å›åº”ï¼Œå°±è¦é‡æ–°è¯·æ±‚æ•°æ®</span></span><br><span class="line">set_PA15_inputmode();</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¶…æ—¶æ§åˆ¶--ã€‹è®¾ç½®100us</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(i&lt;<span class="number">100</span>)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="number">0</span> == GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_15))</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">delay_us(<span class="number">1</span>);</span><br><span class="line">i++;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"> <span class="comment">//å¦‚æœè¶…æ—¶ï¼Œå°±ç»“æŸå‡½æ•°</span></span><br><span class="line"><span class="keyword">if</span>(i&gt;= <span class="number">100</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>; </span><br><span class="line"></span><br><span class="line">i=<span class="number">0</span>;</span><br><span class="line"><span class="comment">//æ£€æµ‹ä½ç”µå¹³æŒç»­æ—¶é—´--ã€‹ä¹Ÿè¦è®¾ç½®è¶…æ—¶æ§åˆ¶</span></span><br><span class="line"><span class="keyword">while</span>(i&lt;<span class="number">100</span>)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="number">1</span> == GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_15))</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">delay_us(<span class="number">1</span>);</span><br><span class="line">i++;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"> <span class="comment">//å¦‚æœè¶…æ—¶ï¼Œå°±ç»“æŸå‡½æ•°</span></span><br><span class="line"><span class="keyword">if</span>(i&gt;= <span class="number">100</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¯æ¬¡è¯»å–ä¸€ä¸ªå­—èŠ‚æ•°æ®</span></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> <span class="keyword">char</span> <span class="title">read_dht11_data_1byte</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> i;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">char</span> data=<span class="number">0</span>;</span><br><span class="line"><span class="comment">//ç­‰å¾…é«˜ç”µå¹³æ—¶é—´æŒç»­ç»“æŸ</span></span><br><span class="line"><span class="comment">//while(1 == PAin(15));</span></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span> ==  GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_15));</span><br><span class="line"><span class="comment">//è¯»å–8bitæ•°æ®--ã€‹åˆæˆä¸€ä¸ªunsigned char æ•°æ®</span></span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;<span class="number">8</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¤æ–­æ˜¯1è¿˜æ˜¯0--&gt;ç­‰å¾…ä½ç”µå¹³æ—¶é—´æŒç»­ç»“æŸ</span></span><br><span class="line"><span class="keyword">while</span>( <span class="number">0</span> == GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_15));</span><br><span class="line">delay_us(<span class="number">40</span>);</span><br><span class="line"><span class="comment">//40usåï¼Œä»ç„¶æ˜¯é«˜ç”µå¹³ï¼Œè¯¥bitåˆ™ä¸º1</span></span><br><span class="line"><span class="keyword">if</span>(<span class="number">1</span> == GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_15))</span><br><span class="line">&#123;</span><br><span class="line">data |=  <span class="number">1</span>&lt;&lt; (<span class="number">7</span>-i); <span class="comment">//å…ˆè¯»åˆ°æ˜¯é«˜ä½</span></span><br><span class="line">&#125;</span><br><span class="line"> <span class="comment">//ç­‰å¾…é«˜ç”µå¹³æ—¶é—´æŒç»­ç»“æŸ</span></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span> == GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_15));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> data;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¯»å–å…¨éƒ¨æ•°æ®</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">read_dht11_all_data</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> i;</span><br><span class="line"><span class="comment">//ä¸æ–­è¯·æ±‚dht11å‘é€æ•°æ®</span></span><br><span class="line"><span class="keyword">while</span>( <span class="number">-1</span> == ask_dht11_data());</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;<span class="number">5</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">dht11_data[i]= read_dht11_data_1byte();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ¤æ–­æ ¡éªŒå’Œ</span></span><br><span class="line"><span class="keyword">if</span>(dht11_data[<span class="number">4</span>] == dht11_data[<span class="number">0</span>]+dht11_data[<span class="number">1</span>]+dht11_data[<span class="number">2</span>]+dht11_data[<span class="number">3</span>])</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆå§‹åŒ–ç³»ç»Ÿå®šæ—¶å™¨æ—¶é’Ÿ--ã€‹æ—¶é’Ÿé¢‘ç‡ä¸º72MHz</span></span><br><span class="line">SysTick_CLKSourceConfig(SysTick_CLKSource_HCLK);</span><br><span class="line">led_init();</span><br><span class="line"></span><br><span class="line">usart1_init(<span class="number">9600</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">delay();</span><br><span class="line"><span class="comment">//if(data == &#x27;D&#x27;)</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//è¯»å–æ¸©æ¹¿åº¦æ•°æ® æˆåŠŸ</span></span><br><span class="line"><span class="keyword">if</span>(<span class="number">1</span> == read_dht11_all_data())</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;H:%d.%d T:%d.%d\r\n&quot;</span>, dht11_data[<span class="number">0</span>],dht11_data[<span class="number">1</span>], dht11_data[<span class="number">2</span>],dht11_data[<span class="number">3</span>]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸²å£1ä¸­æ–­æœåŠ¡å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">USART1_IRQHandler</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¤æ–­ä¸­æ–­æ˜¯å¦äº§ç”Ÿ</span></span><br><span class="line"><span class="keyword">if</span>( USART_GetITStatus(USART1,USART_IT_RXNE) == SET )<span class="comment">//å¦‚æœæ¥æ”¶åˆ°æ•°æ®</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//æ¥æ”¶æ•°æ®</span></span><br><span class="line">data = USART_ReceiveData(USART1);<span class="comment">//æ¥æ”¶ä»USART2å‘é€è¿‡æ¥çš„ä¸­æ–­</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>( USART_GetFlagStatus(USART1, USART_FLAG_TXE) == RESET);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¸…ç©ºä¸­æ–­æ ‡å¿—ä½</span></span><br><span class="line">USART_ClearITPendingBit(USART1,USART_IT_RXNE);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041048103.png&quot; alt=&quot;image-20210904104854742&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="ç¡¬ä»¶å¼€å‘" scheme="https://autovy.github.io/categories/%E7%A1%AC%E4%BB%B6%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="å…¥é—¨æ•™ç¨‹" scheme="https://autovy.github.io/tags/%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/"/>
    
      <category term="stm32" scheme="https://autovy.github.io/tags/stm32/"/>
    
      <category term="ç¡¬ä»¶" scheme="https://autovy.github.io/tags/%E7%A1%AC%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>å¼€å‘å·¥å…·|Dockeræ­å»ºLNMP</title>
    <link href="https://autovy.github.io/2021/06/06/Tool/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7-Docker%E6%90%AD%E5%BB%BALNMP/"/>
    <id>https://autovy.github.io/2021/06/06/Tool/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7-Docker%E6%90%AD%E5%BB%BALNMP/</id>
    <published>2021-06-06T06:30:00.000Z</published>
    <updated>2021-09-04T01:55:32.807Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040845042.jpeg" alt="git"></p><span id="more"></span><h2 id="å‘½ä»¤è¡Œæ­å»º"><a href="#å‘½ä»¤è¡Œæ­å»º" class="headerlink" title="å‘½ä»¤è¡Œæ­å»º"></a>å‘½ä»¤è¡Œæ­å»º</h2><h3 id="å®‰è£…mysql"><a href="#å®‰è£…mysql" class="headerlink" title="å®‰è£…mysql"></a>å®‰è£…mysql</h3><h4 id="1-mysqlé•œåƒæ‹‰å–"><a href="#1-mysqlé•œåƒæ‹‰å–" class="headerlink" title="1.mysqlé•œåƒæ‹‰å–"></a>1.mysqlé•œåƒæ‹‰å–</h4><p>ä»ä»“åº“ä¸­æ‹‰å–å¯¹åº”çš„mysqlé•œåƒï¼Œæ³¨æ„å¦‚æœä¸æ ‡æ³¨tagï¼ˆç‰ˆæœ¬å·ç­‰ï¼‰ï¼Œä¼šé»˜è®¤ä½¿ç”¨lastestï¼ˆæœ€æ–°ç‰ˆï¼‰è¿™ä¸ªç‰ˆæœ¬</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docekr pull mysql:5.6</span><br></pre></td></tr></table></figure><h4 id="2-åˆ›å»ºmysqlå®¹å™¨"><a href="#2-åˆ›å»ºmysqlå®¹å™¨" class="headerlink" title="2.åˆ›å»ºmysqlå®¹å™¨"></a>2.åˆ›å»ºmysqlå®¹å™¨</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 3307:3306 -e MYSQL_ROOT_PASSWORD=xy123456 --name xy_mysql mysql:5.6</span><br></pre></td></tr></table></figure><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li>-d è®©å®¹å™¨åœ¨åå°è¿è¡Œï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªæ¡ä»¶ï¼Œä¼šåœ¨ç»ˆç«¯å±•ç¤ºmysqlåŠ è½½è¿‡ç¨‹ï¼Œè€Œä¸”æ— æ³•è¿›è¡Œæ“ä½œï¼ˆåœ¨å¦ä¸€ä¸ªç»ˆç«¯æŸ¥çœ‹ï¼Œä¼šå‘ç°mysqlçš„å®¹å™¨æ­£åœ¨è¿è¡Œä¸­ï¼Œå…³é—­åŸæ¥çš„ç»ˆç«¯ï¼Œè¯¥å®¹å™¨å¹¶ä¸ä¼šéšä¹‹å…³é—­ï¼‰</li><li>-p æ·»åŠ ä¸»æœºåˆ°å®¹å™¨çš„ç«¯å£æ˜ å°„ï¼Œ3306æ˜¯å®¹å™¨å†…mysqlé»˜è®¤ä½¿ç”¨çš„ç«¯å£å·</li><li>-e è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œè¿™é‡Œæ˜¯è®¾ç½®mysqlçš„rootç”¨æˆ·çš„åˆå§‹å¯†ç ï¼Œè¿™ä¸ªå¿…é¡»è®¾ç½®ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®å®¹å™¨ä¼šè¢«è‡ªåŠ¨å…³åœ</li><li>â€“name å®¹å™¨çš„åå­—ï¼Œå®¹å™¨åå¿…é¡»å”¯ä¸€</li></ul><h4 id="3-è¿›å…¥mysqlå®¹å™¨"><a href="#3-è¿›å…¥mysqlå®¹å™¨" class="headerlink" title="3.è¿›å…¥mysqlå®¹å™¨"></a>3.è¿›å…¥mysqlå®¹å™¨</h4><p>å®¹å™¨å¯åŠ¨åï¼Œæˆ‘ä»¬å¯ä»¥è¿›å…¥è¿è¡Œä¸­çš„å®¹å™¨æŸ¥çœ‹mysqlçš„ç›¸å…³æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -ti xy_mysql /bin/bash</span><br></pre></td></tr></table></figure><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li>-t åœ¨å®¹å™¨é‡Œç”Ÿäº§ä¸€ä¸ªä¼ªç»ˆç«¯</li><li>-i å¯¹å®¹å™¨å†…çš„æ ‡å‡†è¾“å…¥ (STDIN) è¿›è¡Œäº¤äº’</li><li>exitå‘½ä»¤æ˜¯ç¦»å¼€å¹¶å…³é—­å®¹å™¨ï¼Œä½†æ˜¯ç”±äºå®¹å™¨è¿˜æœ‰ä»»åŠ¡æ‰€ä»¥ä¸ä¼šå…³åœ</li></ul><h3 id="å®‰è£…PHP"><a href="#å®‰è£…PHP" class="headerlink" title="å®‰è£…PHP"></a>å®‰è£…PHP</h3><h4 id="1-PHPé•œåƒæ‹‰å–"><a href="#1-PHPé•œåƒæ‹‰å–" class="headerlink" title="1.PHPé•œåƒæ‹‰å–"></a>1.PHPé•œåƒæ‹‰å–</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull php:7.0-fpm</span><br></pre></td></tr></table></figure><h4 id="2-åˆ›å»ºPHPå®¹å™¨"><a href="#2-åˆ›å»ºPHPå®¹å™¨" class="headerlink" title="2.åˆ›å»ºPHPå®¹å™¨"></a>2.åˆ›å»ºPHPå®¹å™¨</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -v /var/nginx/www/html:/var/www/html -p 9000:9000 --link xy_mysql:mysql --name xy_phpfpm php:fpm </span><br></pre></td></tr></table></figure><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li>-p æ·»åŠ ä¸»æœºåˆ°å®¹å™¨çš„ç«¯å£æ˜ å°„ï¼Œè®¾å®šphpä½¿ç”¨9000ç«¯å£</li><li>-v æ·»åŠ ç›®å½•æ˜ å°„ï¼Œå³ä¸»æœºä¸Šçš„/var/nginx/www/htmlå’Œå®¹å™¨ä¸­/var/www/htmlç›®å½•æ˜¯åŒæ­¥çš„ï¼Œä¸»æœºä¸Šçš„è·¯å¾„å¦‚æœä¸å­˜åœ¨ï¼Œä¹Ÿä¼šè‡ªåŠ¨ç”Ÿæˆ</li><li>â€“link ä¸å¦å¤–ä¸€ä¸ªå®¹å™¨å»ºç«‹èµ·è”ç³»ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨å½“å‰å®¹å™¨ä¸­å»ä½¿ç”¨å¦ä¸€ä¸ªå®¹å™¨é‡Œçš„æœåŠ¡</li></ul><h4 id="3-åˆ›å»ºæ–‡ä»¶"><a href="#3-åˆ›å»ºæ–‡ä»¶" class="headerlink" title="3.åˆ›å»ºæ–‡ä»¶"></a>3.åˆ›å»ºæ–‡ä»¶</h4><p>è¿™æ—¶æˆ‘ä»¬å¯ä»¥ä¸è¿›å…¥å®¹å™¨å†…å¢åŠ æ–‡ä»¶ï¼Œè€Œæ˜¯å¯ä»¥åœ¨ä¸»æœºçš„æŒ‚è½½ç›®å½•ä¸‹æ·»åŠ æ–‡ä»¶</p><p>åœ¨/var/nginx/www/htmlç›®å½•ä¸‹æ–°å»ºindex.phpæ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim index.php</span><br></pre></td></tr></table></figure><p>å†™å…¥å†…å®¹ä½œä¸ºæµ‹è¯•</p><p>å› ä¸ºdockeréœ€è¦åœ¨æœ€é«˜æƒé™ä¸‹è¿è¡Œï¼Œæ‰€æœ‰åœ¨ä¸»æœºä¸Šåˆ›å»ºçš„ç›®å½•éœ€è¦æœ€é«˜æƒé™è®¿é—®</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> phpinfo() <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å®‰è£…nignx"><a href="#å®‰è£…nignx" class="headerlink" title="å®‰è£…nignx"></a>å®‰è£…nignx</h3><h4 id="1-nginxé•œåƒæ‹‰å–"><a href="#1-nginxé•œåƒæ‹‰å–" class="headerlink" title="1.nginxé•œåƒæ‹‰å–"></a>1.nginxé•œåƒæ‹‰å–</h4><p>è¿™é‡Œæ‹‰å–çš„å°±æ˜¯æœ€æ–°ç‰ˆ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull nginx</span><br></pre></td></tr></table></figure><h4 id="2-åˆ›å»ºnginxå·¥å…·äººå®¹å™¨"><a href="#2-åˆ›å»ºnginxå·¥å…·äººå®¹å™¨" class="headerlink" title="2.åˆ›å»ºnginxå·¥å…·äººå®¹å™¨"></a>2.åˆ›å»ºnginxå·¥å…·äººå®¹å™¨</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 80:80 \</span><br><span class="line">--link xy_phpfpm:phpfpm --name xy_nginx nginx</span><br></pre></td></tr></table></figure><p>å‚æ•°è¯´æ˜ï¼š</p><p>åˆ›å»ºä¸€ä¸ªæ— æŒ‚è½½çš„å®¹å™¨ï¼Œæ–¹ä¾¿ä¸‹ä¸€æ­¥æå–å‡ºé…ç½®æ–‡ä»¶ï¼ˆå¦‚æœæŒ‚è½½äº†ï¼Œä¼šå¯¼è‡´å¤åˆ¶é…ç½®æ–‡ä»¶æ—¶ï¼Œä¸€ç›´ä¸å®¹å™¨åŒæ­¥ï¼‰</p><h4 id="3-å¤åˆ¶é…ç½®æ–‡ä»¶"><a href="#3-å¤åˆ¶é…ç½®æ–‡ä»¶" class="headerlink" title="3.å¤åˆ¶é…ç½®æ–‡ä»¶"></a>3.å¤åˆ¶é…ç½®æ–‡ä»¶</h4><p>å®¹å™¨çš„æŒ‚è½½åªé™äºç›®å½•ï¼Œå¦‚æœç›´æ¥æŒ‚è½½æ–‡ä»¶ï¼Œå…¶ä»ä½œä¸ºç›®å½•è¢«å¤„ç†</p><p>è¦å®ç°æ–‡ä»¶åŒæ­¥ï¼Œæˆ‘ä»¬å¿…é¡»è¦å…ˆä»å®¹å™¨ä¸­å¤åˆ¶å‡ºä¸€ä»½é…ç½®æ–‡ä»¶ï¼ˆå¦‚æœæ˜¯ç›´æ¥æ–°å»ºä¸€ä¸ªï¼ŒæŒ‚è½½æ—¶ä¸»æœºä¸Šçš„ç©ºç™½æ–‡ä»¶ä¼šåŒæ­¥åˆ°å®¹å™¨ä¸­ï¼‰</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker cp xy_nginx:/etc/nginx/nginx.conf /var/nginx/nginx.conf</span><br><span class="line">docker cp xy_nginx:/etc/nginx/conf.d/default.conf /var/nginx/conf.d/</span><br></pre></td></tr></table></figure><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li>docker cp  åŸè·¯å¾„:è½¬ç§»è·¯å¾„</li><li>å®¹å™¨çš„è·¯å¾„ç”¨ï¼š <code>å®¹å™¨å:å®¹å™¨å†…æ–‡ä»¶è·¯å¾„</code>è¡¨ç¤º</li><li>cpæ—¶è·¯å¾„ä¸Šçš„ç›®å½•å¿…é¡»å­˜åœ¨ï¼ˆè€ŒæŒ‚è½½æ—¶ï¼Œä¸»æœºä¼šè‡ªåŠ¨åˆ›å»ºä¸å­˜åœ¨çš„ç›®å½•ï¼‰</li></ul><h4 id="4-åˆ›å»ºnginxæŒ‚è½½å®¹å™¨"><a href="#4-åˆ›å»ºnginxæŒ‚è½½å®¹å™¨" class="headerlink" title="4.åˆ›å»ºnginxæŒ‚è½½å®¹å™¨"></a>4.åˆ›å»ºnginxæŒ‚è½½å®¹å™¨</h4><p>å…ˆæŠŠå……å½“å·¥å…·äººçš„nginxå®¹å™¨åˆ é™¤</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm -f xy_nginx</span><br></pre></td></tr></table></figure><p>é‡æ–°åˆ›å»ºä¸€ä¸ªå¸¦æŒ‚è½½çš„nginxå®¹å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 80:80 \</span><br><span class="line">-v /var/nginx/nginx.conf:/ect/nginx/nginx.conf\</span><br><span class="line">-v /var/nginx/conf.d/default.conf:/ect/nginx/conf.d/default.conf\</span><br><span class="line">-v /var/nginx/www/html:/var/www/html\</span><br><span class="line">--link xy_phpfpm:phpfpm --name xy_nginx nginx</span><br></pre></td></tr></table></figure><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li>-p æ·»åŠ ä¸»æœºåˆ°å®¹å™¨çš„ç«¯å£æ˜ å°„ï¼Œnginxé»˜è®¤ä½¿ç”¨80ç«¯å£ï¼Œä¹Ÿæ˜¯ç½‘é¡µèŒƒå›´é»˜è®¤ä½¿ç”¨çš„ç«¯å£</li><li>-v æŒ‚è½½äº†ä¸‰ä¸ªæ–‡ä»¶åˆ°æœ¬åœ°ï¼Œå…¶ä¸­<code>/var/nginx/nginx.conf</code>å’Œ<code>/var/nginx/conf.d/default.conf</code>åœ¨æœ¬åœ°åŒæ­¥äº†nginxä¸¤ä¸ªé‡è¦çš„é…ç½®æ–‡ä»¶ï¼Œ<code>/var/www/html</code>åˆ™åŒæ­¥äº†nginxç½‘é¡µå±•ç¤ºæ–‡ä»¶</li><li>æŒ‚è½½æ—¶åº”è¯¥è¦ä¿æŒæœ€åä¸€ä¸ªæ–‡ä»¶ç›¸åŒ</li></ul><h4 id="5-ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#5-ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="5.ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>5.ä¿®æ”¹é…ç½®æ–‡ä»¶</h4><p>ä¿®æ”¹nginxçš„é…ç½®æ–‡ä»¶è®©å…¶ç›‘å¬phpï¼Œè¿™é‡Œå¯ä»¥ç›´æ¥åœ¨ä¸»æœºä¿®æ”¹é…ç½®æ–‡ä»¶</p><p>ä¸»æœºï¼š<code>/var/nginx/conf.d/default.conf</code>    å®¹å™¨ï¼š<code>/ect/nginx/conf.d/default.conf</code></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span></span><br><span class="line">location ~ \.php$ &#123;</span><br><span class="line">    root           /<span class="keyword">var</span>/www/html;</span><br><span class="line">    fastcgi_pass   <span class="number">172.17</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">9000</span>;</span><br><span class="line">    fastcgi_index  index.php;</span><br><span class="line">    fastcgi_param  SCRIPT_FILENAME  <span class="variable">$document</span>_root<span class="variable">$fastcgi_script_name</span>;</span><br><span class="line">    <span class="keyword">include</span>        fastcgi_params;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†…å®¹è§£æï¼š</p><ul><li>rootä¸ºæ–‡ä»¶phpæ ¹ç›®å½•ï¼Œæ‰€ä»¥ä¿®æ”¹ä¸º <code>/var/www/html</code></li><li>fastcgi_pass ä¿®æ”¹ä¸º<code>æœ¬åœ°ipåœ°å€:phpç«¯å£</code>ï¼Œæ³¨æ„ä½¿ç”¨å›ç¯åœ°å€ä¹Ÿæ˜¯ä¸å…è®¸çš„</li><li>fastcgi_indexä¸ºé»˜è®¤è®¿é—®çš„é¡µé¢</li><li>fastcgi_paramåº”è¯¥æ”¹ä¸º $document_root$fastcgi_script_nameæ‰èƒ½å‡†ç¡®æ‰¾åˆ°ä½ç½®</li></ul><h4 id="6-é…ç½®å‡ºé”™å¤„ç†æ–¹æ³•"><a href="#6-é…ç½®å‡ºé”™å¤„ç†æ–¹æ³•" class="headerlink" title="6.é…ç½®å‡ºé”™å¤„ç†æ–¹æ³•"></a>6.é…ç½®å‡ºé”™å¤„ç†æ–¹æ³•</h4><p>å½“é…ç½®æ–‡ä»¶å‡ºé”™æ—¶ï¼Œå®¹å™¨å°†æ— æ³•è¿è¡Œ</p><ul><li>å…ˆæŸ¥çœ‹æ—¥å¿—ï¼ŒæŸ¥æ‰¾å‡ºé”™çš„åœ°æ–¹</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs xy_nginx</span><br></pre></td></tr></table></figure><ul><li>ç”±äºå®¹å™¨æ²¡æœ‰å¯åŠ¨ï¼Œæˆ‘ä»¬æ— æ³•ç›´æ¥è¿›å…¥å®¹å™¨ä¿®æ”¹ï¼Œæ‰€ä»¥éœ€è¦ç”¨docker cpä¸‹è½½å‡ºé—®é¢˜çš„æ–‡ä»¶ï¼Œç„¶åå†é€šè¿‡cpè¦†ç›–é—®é¢˜æ–‡ä»¶</li><li>å¦‚æœè¯¥å‡ºé”™æ–‡ä»¶æœ‰æŒ‚è½½ï¼Œåœ¨æœ¬åœ°ä¿®æ”¹å³å¯</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040845042.jpeg&quot; alt=&quot;git&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="å¼€å‘å·¥å…·" scheme="https://autovy.github.io/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="å…¥é—¨æ•™ç¨‹" scheme="https://autovy.github.io/tags/%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/"/>
    
      <category term="å¼€å‘å·¥å…·" scheme="https://autovy.github.io/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
      <category term="docker" scheme="https://autovy.github.io/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>å¼€å‘å·¥å…·|å­¦ç‚¹docker</title>
    <link href="https://autovy.github.io/2021/05/28/Tool/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7-Docker%E5%AD%A6%E4%B9%A0/"/>
    <id>https://autovy.github.io/2021/05/28/Tool/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7-Docker%E5%AD%A6%E4%B9%A0/</id>
    <published>2021-05-28T06:30:00.000Z</published>
    <updated>2021-09-04T01:19:29.607Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040845042.jpeg" alt="git"></p><span id="more"></span><h3 id="Dockeræ¦‚è¿°"><a href="#Dockeræ¦‚è¿°" class="headerlink" title="Dockeræ¦‚è¿°"></a>Dockeræ¦‚è¿°</h3><h4 id="Dockeråº”ç”¨"><a href="#Dockeråº”ç”¨" class="headerlink" title="Dockeråº”ç”¨"></a>Dockeråº”ç”¨</h4><ul><li>éƒ¨ç½²ç¯å¢ƒå¤æ‚ï¼Œéå¸¸è´¹æ—¶è´¹åŠ›</li><li>ç¯å¢ƒä¸èƒ½è·¨å¹³å°</li><li>dockerå¯ä»¥æŠŠç¯å¢ƒæ‰“åŒ…æˆé•œåƒï¼Œç›´æ¥è¿è¡Œå³å¯</li><li>dockeré€šè¿‡éš”ç¦»æœºåˆ¶ï¼Œå¯ä»¥å°†æœåŠ¡å™¨åˆ©ç”¨åˆ°æè‡´</li></ul><h4 id="Dockerçš„åŠŸèƒ½"><a href="#Dockerçš„åŠŸèƒ½" class="headerlink" title="Dockerçš„åŠŸèƒ½"></a>Dockerçš„åŠŸèƒ½</h4><ul><li><p>è™šæ‹ŸæœºæŠ€æœ¯</p></li><li><p>å®¹å™¨åŒ–æŠ€æœ¯</p></li><li><p>DevOpsï¼ˆå¼€å‘ + è¿ç»´ï¼‰</p></li><li><p>åº”ç”¨æ›´åŠ å¿«é€Ÿçš„äº¤ä»˜å’Œéƒ¨ç½²</p></li><li><p>æ›´ä¾¿æ·çš„å‡çº§å’Œæ‰©ç¼©å®¹</p></li><li><p>æ›´åŠ ç®€å•çš„ç³»ç»Ÿè¿ç»´</p></li><li><p>æ›´åŠ é«˜æ•ˆçš„è®¡ç®—èµ„æºåˆ©ç”¨</p></li></ul><h3 id="Dockerå®‰è£…"><a href="#Dockerå®‰è£…" class="headerlink" title="Dockerå®‰è£…"></a>Dockerå®‰è£…</h3><h4 id="1-DockeråŸºæœ¬ç»„æˆ"><a href="#1-DockeråŸºæœ¬ç»„æˆ" class="headerlink" title="1.DockeråŸºæœ¬ç»„æˆ"></a>1.DockeråŸºæœ¬ç»„æˆ</h4><ul><li><p>ä»“åº“ï¼šä»“åº“å°±æ˜¯å­˜æ”¾é•œåƒçš„åœ°æ–¹</p></li><li><p>é•œåƒï¼šdockeré•œåƒå°±åƒä¸€ä¸ªæ¨¡æ¿ï¼Œé€šè¿‡é•œåƒå¯ä»¥åˆ›å»ºå¤šä¸ªå®¹å™¨</p></li><li><p>å®¹å™¨ï¼šå®¹å™¨å¯ä»¥ç‹¬ç«‹è¿è¡Œä¸€ä¸ªæˆ–è€…å¤šç»„åº”ç”¨ï¼ˆå¯åŠ¨ï¼Œåœæ­¢ï¼Œåˆ é™¤ï¼‰</p></li></ul><h4 id="2-runå·¥ä½œæµç¨‹"><a href="#2-runå·¥ä½œæµç¨‹" class="headerlink" title="2.runå·¥ä½œæµç¨‹"></a>2.runå·¥ä½œæµç¨‹</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040846845.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h4 id="3-Dockerå·¥ä½œåŸç†"><a href="#3-Dockerå·¥ä½œåŸç†" class="headerlink" title="3.Dockerå·¥ä½œåŸç†"></a>3.Dockerå·¥ä½œåŸç†</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040846904.png" alt="Docker å·¥ä½œåŸç†"></p><h4 id="4-Dockerä¸VMçš„åŒºåˆ«"><a href="#4-Dockerä¸VMçš„åŒºåˆ«" class="headerlink" title="4.Dockerä¸VMçš„åŒºåˆ«"></a>4.Dockerä¸VMçš„åŒºåˆ«</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040846873.jpeg" alt="containers-vs-virtual-machines.jpg"></p><ul><li>Dockerçš„æŠ½è±¡å±‚æ¯”è™šæ‹Ÿæœºå°‘</li><li>dockeråˆ©ç”¨çš„æ˜¯å®¿ä¸»æœºçš„å†…æ ¸ï¼Œvméœ€è¦çš„æ˜¯Guest OSï¼ˆvmæ¯æ¬¡éƒ½è¦åŠ è½½æ“ä½œç³»ç»Ÿçš„å†…æ ¸ï¼‰</li></ul><h3 id="Dockerå‘½ä»¤"><a href="#Dockerå‘½ä»¤" class="headerlink" title="Dockerå‘½ä»¤"></a>Dockerå‘½ä»¤</h3><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040846335.jpeg" alt="img"></p><h4 id="1-å¸®åŠ©å‘½ä»¤"><a href="#1-å¸®åŠ©å‘½ä»¤" class="headerlink" title="1.å¸®åŠ©å‘½ä»¤"></a>1.å¸®åŠ©å‘½ä»¤</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker version</span><br><span class="line">docker info</span><br><span class="line">docker --help</span><br></pre></td></tr></table></figure><h4 id="2-é•œåƒå‘½ä»¤"><a href="#2-é•œåƒå‘½ä»¤" class="headerlink" title="2.é•œåƒå‘½ä»¤"></a>2.é•œåƒå‘½ä»¤</h4><p>ï¼ˆ1ï¼‰docker imagesæŸ¥çœ‹æœ¬åœ°ä¸»æœºä¸Šçš„é•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo docker images</span></span><br><span class="line">REPOSITORY    TAG       IMAGE ID       CREATED        SIZE</span><br></pre></td></tr></table></figure><p>è§£æï¼š</p><ul><li>REPOSITORY :é•œåƒçš„ä»“åº“æº</li><li>TAGï¼šé•œåƒçš„æ ‡ç­¾</li><li>IMAGE IDï¼šé•œåƒçš„id</li><li>CREATEDï¼šé•œåƒçš„åˆ›å»ºæ—¶é—´    </li><li>SIZEï¼šé•œåƒå¤§å°</li></ul><p>å¯é€‰é¡¹ï¼š</p><ul><li>-a : åˆ—å‡ºæ‰€æœ‰é•œåƒ</li><li>-qï¼šåªæ˜¾ç¤ºé•œåƒid</li></ul><p>ï¼ˆ2ï¼‰docker search æœç´¢é•œåƒ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NAME  DESCRIPTION   STARS  OFFICIAL   AUTOMATED</span><br></pre></td></tr></table></figure><p>å¯é€‰é¡¹ï¼Œå¯ä»¥è¿‡æ»¤æœç´¢ç»“æœï¼š</p><p>â€“filter=STARS=3000 ï¼šæœç´¢starså¤§äº3000çš„é•œåƒ</p><p>ï¼ˆ3ï¼‰docker pull æ‹‰å–é•œåƒ:tag ï¼Œé»˜è®¤æ‹‰å–æœ€æ–°ç‰ˆ</p><p>ï¼ˆ4ï¼‰docker rmi åˆ é™¤é•œåƒåç§°/id   </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> åˆ é™¤mysqlé•œåƒ</span></span><br><span class="line">docker rmi -f mysql:5.7</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> é€’å½’åˆ é™¤æ‰€æœ‰é•œåƒ</span></span><br><span class="line">docker -f $(docker images -aq)</span><br></pre></td></tr></table></figure><h4 id="3-å®¹å™¨å‘½ä»¤"><a href="#3-å®¹å™¨å‘½ä»¤" class="headerlink" title="3.å®¹å™¨å‘½ä»¤"></a>3.å®¹å™¨å‘½ä»¤</h4><p>æœ‰äº†é•œåƒæˆ‘ä»¬æ‰èƒ½åˆ›å»ºå®¹å™¨</p><p>ï¼ˆ1ï¼‰æ–°å»ºé•œåƒå¹¶å¯åŠ¨ï¼šdokcer run [å¯é€‰å‚æ•°] image</p><p>å®¹å™¨å†…ç›¸å½“äºä¸€ä¸ªæ–°çš„è™šæ‹Ÿç¯å¢ƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it centos /bin/bash</span><br></pre></td></tr></table></figure><p>ç›¸å…³å‚æ•°ï¼š</p><ul><li>â€“name = â€œNameâ€ ï¼šå®¹å™¨åå­—ï¼Œç”¨äºåŒºåˆ†å®¹å™¨</li><li>-d ï¼šåå°æ–¹å¼è¿è¡Œ</li><li>-it : ä½¿ç”¨äº¤äº’æ–¹å¼è¿è¡Œï¼Œå¯è¿›å…¥å®¹å™¨æŸ¥çœ‹å†…å®¹ï¼ˆå¼€å¯å®¹å™¨ç»ˆç«¯ï¼‰</li><li>-pï¼šæŒ‡å®šå®¹å™¨ç«¯å£</li></ul><p>ï¼ˆ2ï¼‰æŸ¥çœ‹å®¹å™¨ï¼šdocker ps</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps    #æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨</span><br></pre></td></tr></table></figure><p>ç›¸å…³å‚æ•°ï¼š</p><ul><li>-a  ï¼šæŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ˆåŒ…æ‹¬å·²ç»ˆæ­¢çš„å®¹å™¨ï¼‰</li><li>-n = ? :æ˜¾ç¤ºæœ€è¿‘åˆ›å»ºçš„å®¹å™¨</li><li>-q ï¼š åªæ˜¾ç¤ºå®¹å™¨çš„ç¼–å·</li></ul><p>ï¼ˆ3ï¼‰é€€å‡ºå®¹å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">exit # å®¹å™¨åœæ­¢å¹¶é€€å‡º</span><br><span class="line">ctrl + P + Q # å®¹å™¨ä¸åœæ­¢é€€å‡º(æŒ‰P,Qè¿™ä¸ªè®¾è®¡å¤šå°‘æœ‰ç‚¹åäººç±»)</span><br></pre></td></tr></table></figure><p>ï¼ˆ4ï¼‰åˆ é™¤å®¹å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker rm å®¹å™¨id# åˆ é™¤æŒ‡å®šçš„å®¹å™¨(ä¸èƒ½åˆ é™¤è¿è¡Œä¸­çš„å®¹å™¨ï¼ŒåŠ -få¼ºåˆ¶åˆ é™¤)</span><br><span class="line">docker rm -f $(docker ps -aq)  # åˆ é™¤æ‰€æœ‰å®¹å™¨</span><br></pre></td></tr></table></figure><p>ï¼ˆ5ï¼‰å¯åŠ¨å’Œåœæ­¢å®¹å™¨çš„æ“ä½œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker start å®¹å™¨id # å¯åŠ¨å®¹å™¨</span><br><span class="line">docker restart å®¹å™¨id # é‡å¯å®¹å™¨</span><br><span class="line">docker stop å®¹å™¨id # åœæ­¢å½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨</span><br><span class="line">docker kill å®¹å™¨id # å¼ºåˆ¶åœæ­¢å½“å‰å®¹å™¨</span><br></pre></td></tr></table></figure><h4 id="4-æ“ä½œå‘½ä»¤"><a href="#4-æ“ä½œå‘½ä»¤" class="headerlink" title="4.æ“ä½œå‘½ä»¤"></a>4.æ“ä½œå‘½ä»¤</h4><p>ï¼ˆ1ï¼‰åå°å¯åŠ¨å‘½ä»¤</p><p>dockerå®¹å™¨ä½¿ç”¨åå°è¿è¡Œæ—¶ï¼ˆ<code>docker run -d centos</code>ï¼‰ï¼Œå¿…é¡»è¦æœ‰ä¸€ä¸ªå‰å°è¿›ç¨‹ï¼Œå¦‚æœdockerå‘ç°è‡ªå·±æ²¡æœ‰åº”ç”¨äº†ï¼Œå°±ä¼šè‡ªåŠ¨åœæ­¢</p><p>ï¼ˆ2ï¼‰æŸ¥çœ‹æ—¥å¿—å‘½ä»¤</p><p>æŸ¥çœ‹å®¹å™¨è¿è¡Œçš„æ—¥å¿—</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs -f -t --tail å®¹å™¨</span><br></pre></td></tr></table></figure><p>ï¼ˆ3ï¼‰æŸ¥çœ‹å®¹å™¨è¿›ç¨‹ä¿¡æ¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker top å®¹å™¨id</span><br></pre></td></tr></table></figure><p>ï¼ˆ4ï¼‰æŸ¥çœ‹é•œåƒå…ƒæ•°æ®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect å®¹å™¨id</span><br></pre></td></tr></table></figure><p>ï¼ˆ5ï¼‰è¿›å…¥å½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æˆ‘ä»¬é€šå¸¸å®¹å™¨éƒ½æ˜¯ä½¿ç”¨åå°æ–¹å¼è¿è¡Œçš„ï¼Œéœ€è¦è¿›å…¥å®¹å™¨ï¼Œä¿®æ”¹ä¸€äº›é…ç½®</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å‘½ä»¤1:è¿›å…¥å®¹å™¨åå¼€å¯ä¸€ä¸ªæ–°çš„ç»ˆç«¯ï¼ˆç›¸å½“äºå¼€å¯äº†å¦ä¸€ä¸ªè¿›ç¨‹ï¼‰</span></span><br><span class="line">docker exec -it å®¹å™¨id bashShell</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å‘½ä»¤2ï¼šè¿›å…¥å®¹å™¨æ­£åœ¨æ‰§è¡Œçš„ç»ˆç«¯ä¸­ï¼Œä¸ä¼šå¯åŠ¨æ–°çš„è¿›ç¨‹</span></span><br><span class="line">docker attach å®¹å™¨id</span><br></pre></td></tr></table></figure><p>ï¼ˆ6ï¼‰ä»å®¹å™¨ä¸­æ‹·è´æ–‡ä»¶åˆ°ä¸»æœºä¸Š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker cp 2e18c3e0375a:/home/test.py /home/autovy/æ¡Œé¢</span><br></pre></td></tr></table></figure><p>æ‹·è´æ˜¯ä¸€ä¸ªæ‰‹åŠ¨è¿‡ç¨‹ï¼Œä»å°é—­çš„å®¹å™¨ä¸­æ‹¿åˆ°éœ€è¦ç•™å­˜çš„æ•°æ®ï¼Œè€Œä½¿ç”¨æ•°æ®å·</p><p>åˆ™å¯ä»¥å®ç°è‡ªåŠ¨åŒæ­¥</p><h3 id="Dockeré•œåƒ"><a href="#Dockeré•œåƒ" class="headerlink" title="Dockeré•œåƒ"></a>Dockeré•œåƒ</h3><p>æ¨èæ–‡ç« ï¼š<a href="http://linyishui.top/2019101101.html">dockeré•œåƒè®²è§£</a></p><h4 id="1-Portainerå¯è§†åŒ–å·¥å…·"><a href="#1-Portainerå¯è§†åŒ–å·¥å…·" class="headerlink" title="1.Portainerå¯è§†åŒ–å·¥å…·"></a>1.Portainerå¯è§†åŒ–å·¥å…·</h4><h4 id="2-é•œåƒç®€ä»‹"><a href="#2-é•œåƒç®€ä»‹" class="headerlink" title="2.é•œåƒç®€ä»‹"></a>2.é•œåƒç®€ä»‹</h4><ul><li>é•œåƒå°±æ˜¯ä¸€ç§è½»é‡çº§ï¼Œå¯æ‰§è¡Œçš„ç‹¬ç«‹è½¯ä»¶åŒ…ï¼Œç”¨æ¥æ‰“åŒ…è½¯ä»¶è¿è¡Œç¯å¢ƒå’ŒåŸºäºç¯å¢ƒå¼€ä¼šçš„è½¯ä»¶ï¼ˆåŒ…æ‹¬ä»£ç ï¼Œè¿è¡Œæ—¶ï¼Œåº“ï¼Œç¯å¢ƒå˜é‡ï¼Œé…ç½®æ–‡ä»¶ï¼‰</li><li>é•œåƒæ¥æºï¼š<ul><li>ä»è¿œç¨‹ä»“åº“ä¸‹è½½</li><li>è‡ªå·±åˆ¶ä½œçš„é•œåƒDockerFile</li></ul></li></ul><h4 id="3-é•œåƒåŠ è½½åŸç†"><a href="#3-é•œåƒåŠ è½½åŸç†" class="headerlink" title="3.é•œåƒåŠ è½½åŸç†"></a>3.é•œåƒåŠ è½½åŸç†</h4><p>ï¼ˆ1ï¼‰è”åˆæ–‡ä»¶ç³»ç»Ÿï¼ˆUnionFSï¼‰</p><p>é•œåƒå’Œå®¹å™¨ä¸åŒï¼Œå®¹å™¨æ˜¯å½¼æ­¤ç‹¬ç«‹çš„ï¼Œè€Œå®¹å™¨æ˜¯åˆ†å±‚å åŠ çš„ï¼Œå¯ä»¥å…±äº«ç›¸åŒçš„åº•å±‚æ–‡ä»¶å’Œç›®å½•</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040846837.webp" alt="img"></p><p>ï¼ˆ2ï¼‰é•œåƒåŠ è½½åŸç†</p><p>å…±äº«åº•å±‚èµ„æº</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040846524.png" alt="dockeræ–‡ä»¶ç³»ç»Ÿåˆ†å±‚å­˜å‚¨åŸç†"></p><h4 id="4-åˆ†å±‚ç†è§£"><a href="#4-åˆ†å±‚ç†è§£" class="headerlink" title="4.åˆ†å±‚ç†è§£"></a>4.åˆ†å±‚ç†è§£</h4><p>åŸºäºUbuntu Linux 16.04åˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒï¼Œè¿™å°±æ˜¯æ–°é•œåƒçš„ç¬¬ä¸€å±‚ï¼›å¦‚æœåœ¨è¯¥é•œåƒä¸­æ·»åŠ PythonåŒ…ï¼Œå°±ä¼šåœ¨åŸºç¡€é•œåƒå±‚ä¹‹ä¸Šåˆ›å»ºç¬¬äºŒä¸ªé•œåƒå±‚ï¼›å¦‚æœç»§ç»­æ·»åŠ ä¸€ä¸ªå®‰å…¨è¡¥ä¸ï¼Œå°±ä¼šåˆ›å»ºç¬¬ä¸‰ä¸ªé•œåƒå±‚ã€‚è¯¥é•œåƒå½“å‰å·²ç»åŒ…å«3ä¸ªé•œåƒå±‚</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040846403.png" alt="åŸºäºUbuntu Linux 16.04åˆ›å»ºé•œåƒ"></p><p>dockeré•œåƒé»˜è®¤åªè¯»ï¼Œå½“å®¹å™¨å¯åŠ¨æ—¶ï¼Œä¸€ä¸ªæ–°çš„å¯å†™å±‚è¢«åŠ è½½åˆ°é•œåƒé¡¶éƒ¨</p><p>è¿™ä¸€å±‚å³ä¸ºå®¹å™¨å±‚ï¼Œå®¹å™¨ä¹‹ä¸‹ç§°ä¸ºé•œåƒå±‚</p><h4 id="5-commité•œåƒ"><a href="#5-commité•œåƒ" class="headerlink" title="5.commité•œåƒ"></a>5.commité•œåƒ</h4><p>æäº¤ä¸€ä¸ªæ–°çš„é•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker commit æäº¤å®¹å™¨æˆä¸ºä¸€ä¸ªæ–°çš„å‰¯æœ¬</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å‘½ä»¤å’ŒgitåŸç†ç›¸ä¼¼</span></span><br><span class="line">docker commit -m=&quot;æäº¤çš„æè¿°ä¿¡æ¯&quot; -a=&quot;ä½œè€…&quot; å®¹å™¨id ç›®æ ‡é•œåƒå:[TAG]</span><br></pre></td></tr></table></figure><h3 id="å®¹å™¨æ•°æ®å·"><a href="#å®¹å™¨æ•°æ®å·" class="headerlink" title="å®¹å™¨æ•°æ®å·"></a>å®¹å™¨æ•°æ®å·</h3><h4 id="1-æ•°æ®å·åŸç†"><a href="#1-æ•°æ®å·åŸç†" class="headerlink" title="1.æ•°æ®å·åŸç†"></a>1.æ•°æ®å·åŸç†</h4><p>å®¹å™¨ä¹‹é—´æœ‰ä¸€ä¸ªæ•°æ®å…±äº«æŠ€æœ¯ï¼ŒDockerå®¹å™¨ä¸­äº§ç”Ÿçš„æ•°æ®ï¼ŒåŒæ­¥åˆ°æœ¬åœ°ï¼ˆä»è€Œå®ç°æ•°æ®å¯æŒä¹…åŒ–ï¼Œæ•°æ®åŒæ­¥æ“ä½œï¼Œæ•°æ®å­˜å‚¨åœ¨æœ¬åœ°ä¸ä¼šéšç€å®¹å™¨åˆ é™¤è€Œä¸¢å¤±ï¼‰</p><p>å…¶æœ¬è´¨æ˜¯å°†å®¹å™¨å†…çš„ç›®å½•æŒ‚è½½åˆ°ä¸»æœºä¸Š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040846330.png" alt="æ•°æ®å·å®¹å™¨å®è·µ_heima201907çš„åšå®¢-CSDNåšå®¢"></p><h4 id="2-æ•°æ®å·ä½¿ç”¨"><a href="#2-æ•°æ®å·ä½¿ç”¨" class="headerlink" title="2.æ•°æ®å·ä½¿ç”¨"></a>2.æ•°æ®å·ä½¿ç”¨</h4><p>ï¼ˆ1ï¼‰ä½¿ç”¨å‘½ä»¤æŒ‚è½½ -v</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run -it -v ä¸»æœºç›®å½•åœ°å€:å®¹å™¨ç›®å½•åœ°å€</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> æµ‹è¯•ï¼šå°†å®¹å™¨çš„ç›®å½•æŒ‚è½½åˆ°ä¸»æœºç›®å½•</span></span><br><span class="line">docker run -it -v /home/test:/home centos /bin/bash</span><br></pre></td></tr></table></figure><ul><li>ä¸»æœºå’Œå®¹å™¨æ²¡æœ‰å¯¹åº”ç›®å½•æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºç›®å½•</li><li>é€šè¿‡docker inspect å¯ä»¥æŸ¥çœ‹åˆ°æŒ‚è½½ä¿¡æ¯</li><li>æŒ‚è½½åŒæ–¹æ˜¯åŒå‘åŒæ­¥å…³ç³»ï¼Œä»–ä»¬çš„æ–‡ä»¶å†…å®¹æ— è®ºå“ªä¸€æ–¹æ›´æ”¹ï¼Œéƒ½ä¼šä¿æŒåŒæ­¥</li><li>ä¿®æ”¹æ–‡ä»¶æ—¶ï¼Œåªéœ€è¦åœ¨æœ¬åœ°ä¿®æ”¹å³å¯ï¼Œä¸éœ€è¦è¿›å…¥å®¹å™¨</li></ul><p>ï¼ˆ2ï¼‰å…·åæŒ‚è½½å’ŒåŒ¿åæŒ‚è½½</p><p>é™¤äº†ä¸Šæ–‡ä¸­çš„æŒ‡å®šè·¯å¾„æŒ‚è½½ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨å…·åæŒ‚è½½å’ŒåŒ¿åæŒ‚è½½</p><p>åŒ¿åæŒ‚è½½ï¼š<code>-v :å®¹å™¨ç›®å½•åœ°å€</code></p><p>å…·åæŒ‚è½½ï¼š<code>-v å·å:å®¹å™¨ç›®å½•åœ°å€</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> åŒ¿åæŒ‚è½½</span></span><br><span class="line">docker run -d -P --name test1 -v /home/new centos</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å…·åæŒ‚è½½</span></span><br><span class="line">docker run -d -P --name test1 -v mycentos:/home/new centos</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹æ‰€æœ‰å·(å¯ä»¥çœ‹åˆ°å­˜åœ¨åŒ¿åå·)</span></span><br><span class="line">docker volume ls</span><br></pre></td></tr></table></figure><p>æ‰€æœ‰çš„dockerå®¹å™¨å†…çš„å·é»˜è®¤æ”¾åœ¨æœ¬åœ°ä¸»æœºçš„<code>/var/lib/docker/volumesä¸‹</code></p><p>ï¼ˆ3ï¼‰æŒ‚è½½æƒé™</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å¯ä»¥é€šè¿‡ -v å®¹å™¨è·¯å¾„ï¼šro,rwæ”¹å˜è¯»å†™æƒé™</span></span><br><span class="line">ro # åªè¯»ï¼Œåªèƒ½é€šè¿‡å®¿ä¸»æœºæ¥æ“ä½œï¼Œå®¹å™¨å†…éƒ¨æ— æ³•è¿›è¡Œæ“ä½œ</span><br><span class="line">rw # å¯è¯»å¯å†™ï¼Œé»˜è®¤ä¸ºå¯è¯»å¯å†™</span><br></pre></td></tr></table></figure><h4 id="3-æ•°æ®å·å®¹å™¨"><a href="#3-æ•°æ®å·å®¹å™¨" class="headerlink" title="3.æ•°æ®å·å®¹å™¨"></a>3.æ•°æ®å·å®¹å™¨</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040846812.png" alt="Dockerå­¦ä¹ è¿‡ç¨‹ï¼ˆ5-æ•°æ®å·ï¼‰_gengli2017çš„åšå®¢-CSDNåšå®¢"></p><p>å®¹å™¨é—´ä¹Ÿå¯ä»¥è¿›è¡ŒæŒ‚è½½ä»è€Œå®ç°æ•°æ®åŒæ­¥ï¼Œå¤šä¸ªå­å®¹å™¨çš„æ•°æ®å¯ä»¥æŒ‚è½½åˆ°ä¸€ä¸ªçˆ¶å®¹å™¨ä¸­ï¼Œè¿™ä¸ªçˆ¶å®¹å™¨å°±æ˜¯æ•°æ®å·å®¹å™¨</p><p>â€“volumes-fromå³å¯ä»¥è®©docker3æŒ‚è½½åˆ°docker1ä¸Š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --name docker3 --volumes-from docker1 5ce91af318b3 /bin/bash</span><br></pre></td></tr></table></figure><p>å®¹å™¨ä¹‹é—´çš„é…ç½®ä¿¡æ¯çš„ä¼ é€’ï¼Œæ•°æ®å·å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸä¸€ç›´æŒç»­åˆ°æ²¡æœ‰å®¹å™¨ä½¿ç”¨ä¸ºæ­¢</p><h3 id="DockerFile"><a href="#DockerFile" class="headerlink" title="DockerFile"></a>DockerFile</h3><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://blog.52itstyle.vip/archives/2839/">DokcerFileå‘½ä»¤è¯¦è§£</a></p><h4 id="1-DockerFileç®€ä»‹"><a href="#1-DockerFileç®€ä»‹" class="headerlink" title="1.DockerFileç®€ä»‹"></a>1.DockerFileç®€ä»‹</h4><p>DockerFileæ˜¯æ„å»ºdockeré•œåƒçš„æ„å»ºæ–‡ä»¶ï¼Œå³å‘½ä»¤è„šæœ¬ã€‚é€šè¿‡è¿™ä¸ªè„šæœ¬æˆ‘ä»¬å¯ä»¥ç”Ÿæˆä¸€ä¸ªé•œåƒã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040846366.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h4 id="2-DockerFileæ„å»ºæµç¨‹"><a href="#2-DockerFileæ„å»ºæµç¨‹" class="headerlink" title="2.DockerFileæ„å»ºæµç¨‹"></a>2.DockerFileæ„å»ºæµç¨‹</h4><p>ï¼ˆ1ï¼‰DockerFileå†…å®¹ç¤ºä¾‹</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> centos</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨æ„å»ºé•œåƒå½¢æˆä¸¤ä¸ªæ•°æ®å·ï¼Œå› ä¸ºæ²¡æœ‰æŒ‡å®šçš„æŒ‚è½½å·ä¼šè‡ªåŠ¨è¿›è¡ŒåŒ¿åæŒ‚è½½</span></span><br><span class="line"><span class="keyword">VOLUME</span><span class="bash"> [<span class="string">&quot;volume01&quot;</span>,<span class="string">&quot;volume02&quot;</span>]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> <span class="built_in">echo</span> <span class="string">&quot;-----end------&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> /bin/bash</span></span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰é€šè¿‡DockerFileæ–‡ä»¶æ„å»ºé•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -f dockerfile -t test/centos .</span><br></pre></td></tr></table></figure><p>buildå‘½ä»¤ï¼Œ -f  æ‰“å¼€dockerfileæ–‡ä»¶çš„è·¯å¾„ï¼Œ-t  test/centoså‘½åå®¹å™¨ï¼Œ.å³ä¸ºç”Ÿæˆè·¯å¾„</p><p>ï¼ˆ3ï¼‰ç”¨è‡ªå·±çš„é•œåƒåˆ›å»ºå®¹å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it 5ce91af318b3 /bin/bash</span><br></pre></td></tr></table></figure><p>ï¼ˆ4ï¼‰docker push å‘å¸ƒé•œåƒï¼ˆå¼€æºè¿›è¡Œï¼‰</p><h4 id="3-DockerFileæŒ‡ä»¤è¯¦è§£"><a href="#3-DockerFileæŒ‡ä»¤è¯¦è§£" class="headerlink" title="3.DockerFileæŒ‡ä»¤è¯¦è§£"></a>3.DockerFileæŒ‡ä»¤è¯¦è§£</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040846106.png" alt="img"></p><p>ï¼ˆå›¾ä¸­æœ€åä¸€é¡¹åº”ä¸ºCMDæŒ‡ä»¤æ­¤å¤„æ›´æ­£ï¼‰</p><p>è¡¥å……é¡¹ï¼š</p><ul><li><p>CMDï¼šæŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨æ—¶è¦è¿è¡Œçš„å‘½ä»¤ï¼Œåªæœ‰æœ€åä¸€ä¸ªä¼šç”Ÿæ•ˆï¼Œå¯è¢«æ›¿ä»£</p></li><li><p>ENTRYPOINTï¼šæŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨æ—¶è¦è¿è¡Œçš„å‘½ä»¤ï¼Œå¯ä»¥è¿½åŠ å‘½ä»¤</p></li><li><p>COPYï¼šç±»ä¼¼äºADDï¼Œå°†æˆ‘ä»¬æ–‡ä»¶æ‹·è´åˆ°é•œåƒä¸­</p></li><li><p>ENVï¼šæ„å»ºçš„æ—¶å€™è®¾ç½®ç¯å¢ƒå˜é‡</p></li></ul><h4 id="4-åˆ›å»ºè‡ªå·±çš„DockerFile"><a href="#4-åˆ›å»ºè‡ªå·±çš„DockerFile" class="headerlink" title="4.åˆ›å»ºè‡ªå·±çš„DockerFile"></a>4.åˆ›å»ºè‡ªå·±çš„DockerFile</h4><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> centos</span><br><span class="line"><span class="keyword">MAINTAINER</span> Autovy&lt;autovys@gmail.com&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å·¥ä½œç›®å½•ä¸º/usr/local</span></span><br><span class="line"><span class="keyword">ENV</span> MYPATH /usr/local</span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> <span class="variable">$MYPATH</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…ç›¸å…³ä¾èµ–</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> yum -y install vim</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> yum -y install net-tools</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€æ”¾ç«¯å£80</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">80</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> <span class="built_in">echo</span> <span class="variable">$MYPATH</span></span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> <span class="built_in">echo</span> <span class="string">&quot;-----end------&quot;</span></span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> /bin/bash</span></span><br></pre></td></tr></table></figure><p> é€šè¿‡<code>docker history mycentos:0.1</code>  å‘½ä»¤å¯ä»¥æŸ¥çœ‹æ„å»ºé•œåƒçš„è¿‡ç¨‹</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109040845042.jpeg&quot; alt=&quot;git&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="å¼€å‘å·¥å…·" scheme="https://autovy.github.io/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="å…¥é—¨æ•™ç¨‹" scheme="https://autovy.github.io/tags/%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/"/>
    
      <category term="å¼€å‘å·¥å…·" scheme="https://autovy.github.io/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
      <category term="docker" scheme="https://autovy.github.io/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>è½¯è€ƒç¬”è®°|è€ƒå‰ä¸“é¢˜å¤ä¹ </title>
    <link href="https://autovy.github.io/2021/05/28/Exam/%E8%BD%AF%E8%80%83-%E4%B8%93%E9%A2%98%E5%A4%8D%E4%B9%A0/"/>
    <id>https://autovy.github.io/2021/05/28/Exam/%E8%BD%AF%E8%80%83-%E4%B8%93%E9%A2%98%E5%A4%8D%E4%B9%A0/</id>
    <published>2021-05-28T06:30:00.000Z</published>
    <updated>2021-09-04T06:12:05.637Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041211195.png" alt="image-20210904121059575"></p><span id="more"></span><h2 id="è½¯è€ƒä¸“é¢˜å¤ä¹ ï¼ˆä¸Šåˆé¢˜ï¼‰"><a href="#è½¯è€ƒä¸“é¢˜å¤ä¹ ï¼ˆä¸Šåˆé¢˜ï¼‰" class="headerlink" title="è½¯è€ƒä¸“é¢˜å¤ä¹ ï¼ˆä¸Šåˆé¢˜ï¼‰"></a>è½¯è€ƒä¸“é¢˜å¤ä¹ ï¼ˆä¸Šåˆé¢˜ï¼‰</h2><h3 id="1-è®¡ç®—æœºç»„æˆåŸç†"><a href="#1-è®¡ç®—æœºç»„æˆåŸç†" class="headerlink" title="1.è®¡ç®—æœºç»„æˆåŸç†"></a>1.è®¡ç®—æœºç»„æˆåŸç†</h3><h4 id="ï¼ˆ1ï¼‰ç³»ç»Ÿå¯é æ€§åˆ†æ"><a href="#ï¼ˆ1ï¼‰ç³»ç»Ÿå¯é æ€§åˆ†æ" class="headerlink" title="ï¼ˆ1ï¼‰ç³»ç»Ÿå¯é æ€§åˆ†æ"></a>ï¼ˆ1ï¼‰ç³»ç»Ÿå¯é æ€§åˆ†æ</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041201180.png" alt="image-20210513190738916"></p><ul><li>1.ä¸²è”æ¨¡å‹</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041201241.png" alt="image-20210309204541620"></p><ul><li>2.å¹¶è”æ¨¡å‹</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041201763.png" alt="image-20210309204634998"></p><h4 id="ï¼ˆ2ï¼‰æµ·æ˜æ ¡éªŒç "><a href="#ï¼ˆ2ï¼‰æµ·æ˜æ ¡éªŒç " class="headerlink" title="ï¼ˆ2ï¼‰æµ·æ˜æ ¡éªŒç "></a>ï¼ˆ2ï¼‰æµ·æ˜æ ¡éªŒç </h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041202905.png" alt="image-20210513191206232"></p><ul><li>ç¡®å®šæ ¡éªŒç ä½æ•°ï¼Œå¯ä»¥ç”¨å…¬å¼<code>2 ^ r &gt;=  ä¿¡æ¯ä½æ•° + r + 1</code>æ¥æ±‚</li><li>å°†é€‰é¡¹ä»£å…¥å³å¯æ±‚å‡º</li></ul><h4 id="ï¼ˆ3ï¼‰CacheçŸ¥è¯†ç‚¹"><a href="#ï¼ˆ3ï¼‰CacheçŸ¥è¯†ç‚¹" class="headerlink" title="ï¼ˆ3ï¼‰CacheçŸ¥è¯†ç‚¹"></a>ï¼ˆ3ï¼‰CacheçŸ¥è¯†ç‚¹</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041202145.png" alt="image-20210513191540921"></p><ul><li><p>å®ƒä½äºCPUå’Œä¸»å­˜ä¹‹é—´ï¼Œç”±ç¡¬ä»¶å®ç°ï¼›å®¹é‡å°ï¼Œä¸€èˆ¬åœ¨å‡ KBåˆ°å‡ MBä¹‹é—´ï¼›é€Ÿåº¦ä¸€èˆ¬æ¯”ä¸»å­˜å¿«5åˆ°10å€</p></li><li><p>Cacheå­˜å‚¨å™¨ç”¨æ¥å­˜æ”¾ä¸»å­˜çš„éƒ¨åˆ†æ‹·è´ï¼ˆå‰¯æœ¬ï¼‰ï¼Œæ— æ³•æ‰©å¤§ä¸»å­˜çš„å®¹é‡</p></li></ul><h4 id="ï¼ˆ4ï¼‰æµ®ç‚¹æ•°è¿ç®—"><a href="#ï¼ˆ4ï¼‰æµ®ç‚¹æ•°è¿ç®—" class="headerlink" title="ï¼ˆ4ï¼‰æµ®ç‚¹æ•°è¿ç®—"></a>ï¼ˆ4ï¼‰æµ®ç‚¹æ•°è¿ç®—</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041202687.png" alt="image-20210521154057747"></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041202491.png" alt="image-20210521154323251"></p><p>å¯¹é˜¶æ˜¯å°é˜¶å‘å¤§é˜¶å¯¹é½ï¼Œå°¾æ•°å³ç§»nä½</p><h4 id="ï¼ˆ5ï¼‰æµæ°´çº¿ç›¸å…³è®¡ç®—"><a href="#ï¼ˆ5ï¼‰æµæ°´çº¿ç›¸å…³è®¡ç®—" class="headerlink" title="ï¼ˆ5ï¼‰æµæ°´çº¿ç›¸å…³è®¡ç®—"></a>ï¼ˆ5ï¼‰æµæ°´çº¿ç›¸å…³è®¡ç®—</h4><p><strong>æµæ°´çº¿æ—¶é—´è®¡ç®—ï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041202529.png" alt="image-20210521155616121"></p><ul><li>æ‰¾æ‰§è¡Œæ—¶é—´æœ€é•¿çš„æŒ‡ä»¤ä½œä¸ºæµæ°´çº¿å‘¨æœŸ</li><li>å¥—å…¥æ‰§è¡ŒæŒ‡ä»¤çš„æ—¶é—´å…¬å¼ï¼ˆt1â€¦â€¦tkæŒ‡å„ä¸ªæ­¥éª¤è€—è´¹äº‹ä»¶ï¼ŒnæŒ‡éœ€è¦æ‰§è¡Œçš„æŒ‡ä»¤æ¡æ•°ï¼ŒkæŒ‡æ‰§è¡ŒæŒ‡ä»¤çš„æ­¥éª¤ä¸ªæ•°ï¼‰</li></ul><p><strong>æµæ°´çº¿ååç‡è®¡ç®—ï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041202753.png" alt="image-20210521155821047"></p><h4 id="ï¼ˆ6ï¼‰æµ®ç‚¹æ•°ç¼–ç èŒƒå›´"><a href="#ï¼ˆ6ï¼‰æµ®ç‚¹æ•°ç¼–ç èŒƒå›´" class="headerlink" title="ï¼ˆ6ï¼‰æµ®ç‚¹æ•°ç¼–ç èŒƒå›´"></a>ï¼ˆ6ï¼‰æµ®ç‚¹æ•°ç¼–ç èŒƒå›´</h4><p>é¢˜ç›®ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041202297.png" alt="image-20210525083130883"></p><p>ç¼–ç èŒƒå›´ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041202012.png" alt="image-20210308160402815"></p><h4 id="ï¼ˆ7ï¼‰å¥‡å¶æ ¡éªŒ"><a href="#ï¼ˆ7ï¼‰å¥‡å¶æ ¡éªŒ" class="headerlink" title="ï¼ˆ7ï¼‰å¥‡å¶æ ¡éªŒ"></a>ï¼ˆ7ï¼‰å¥‡å¶æ ¡éªŒ</h4><ul><li>å¥‡å¶æ ¡éªŒåªèƒ½æŸ¥é”™ä¸èƒ½çº é”™</li><li>å¯¹äºå¥‡å¶æ ¡éªŒï¼Œæ˜¯ç”±è‹¥å¹²ä½æœ‰æ”¾ä¿¡æ¯ï¼Œå†åŠ ä¸Šä¸€ä¸ªäºŒè¿›åˆ¶ä½ï¼ˆæ ¡éªŒä½ï¼‰ç»„æˆæ ¡éªŒç </li><li>å¥‡æ ¡éªŒâ€œ1â€çš„ä¸ªæ•°ä¸ºå¥‡æ•°ï¼Œè€Œå¶æ ¡éªŒâ€œ1â€çš„ä¸ªæ•°ä¸ºå¶æ•°ï¼Œä»¥æ­¤æ ¡éªŒå®Œæ•´æ€§</li><li>åªæœ‰å¥‡æ•°ä¸ªæ•°æ®ä½å‘ç”Ÿé”™è¯¯ï¼Œæ‰èƒ½å‘ç°é”™è¯¯</li></ul><h3 id="2-ç³»ç»Ÿå®‰å…¨åˆ†æä¸è®¾è®¡"><a href="#2-ç³»ç»Ÿå®‰å…¨åˆ†æä¸è®¾è®¡" class="headerlink" title="2.ç³»ç»Ÿå®‰å…¨åˆ†æä¸è®¾è®¡"></a>2.ç³»ç»Ÿå®‰å…¨åˆ†æä¸è®¾è®¡</h3><h4 id="ï¼ˆ1ï¼‰åŠ å¯†ç®—æ³•åº”ç”¨"><a href="#ï¼ˆ1ï¼‰åŠ å¯†ç®—æ³•åº”ç”¨" class="headerlink" title="ï¼ˆ1ï¼‰åŠ å¯†ç®—æ³•åº”ç”¨"></a>ï¼ˆ1ï¼‰åŠ å¯†ç®—æ³•åº”ç”¨</h4><ul><li>RSAæ˜¯ä¸€ç§å¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œè€ŒRSAç”±äºæ•ˆç‡é—®é¢˜ï¼Œä¸€èˆ¬ä¸ç›´æ¥ç”¨äºå¤§é‡çš„æ˜æ–‡åŠ å¯†</li><li>SHA-1ä¸MD5å±äºä¿¡æ¯æ‘˜è¦ç®—æ³•,SHA-1ä¸MD5æ˜¯ä¸èƒ½ç”¨æ¥åŠ å¯†æ•°æ®çš„</li><li>MD5æ˜¯ä¸€ç§æ‘˜è¦ç®—æ³•ï¼Œç»è¿‡å¤„ç†åç”Ÿæˆä¸€ä¸ª128ä½æ•£åˆ—å€¼</li><li>RC-5å±äºéå¯¹ç§°åŠ ç©ºç®—æ³•ï¼Œé€‚åˆåŠ å¤§é‡çš„æ˜æ–‡åŠ å¯†</li><li>DESæ˜¯å…±äº«å¯†é’¥åŠ å¯†</li></ul><p>vb</p><h4 id="ï¼ˆ2ï¼‰CAè®¤è¯"><a href="#ï¼ˆ2ï¼‰CAè®¤è¯" class="headerlink" title="ï¼ˆ2ï¼‰CAè®¤è¯"></a>ï¼ˆ2ï¼‰CAè®¤è¯</h4><p><img src="C:/Users/linghao/AppData/Roaming/Typora/typora-user-images/image-20210513193746919.png" alt="image-20210513193746919"></p><p>æ•°å­—è¯ä¹¦çš„äº§ç”Ÿï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041202376.png" alt="image-20210513194140782"></p><h3 id="3-æ³•å¾‹æ³•è§„çŸ¥è¯†"><a href="#3-æ³•å¾‹æ³•è§„çŸ¥è¯†" class="headerlink" title="3.æ³•å¾‹æ³•è§„çŸ¥è¯†"></a>3.æ³•å¾‹æ³•è§„çŸ¥è¯†</h3><h4 id="ï¼ˆ1ï¼‰åŸºæœ¬çŸ¥è¯†"><a href="#ï¼ˆ1ï¼‰åŸºæœ¬çŸ¥è¯†" class="headerlink" title="ï¼ˆ1ï¼‰åŸºæœ¬çŸ¥è¯†"></a>ï¼ˆ1ï¼‰åŸºæœ¬çŸ¥è¯†</h4><ul><li>ä¸¤äººåŒæ—¶æˆäºˆåŒä¸€ä¸“åˆ©æƒæ˜¯ä¸å¯èƒ½çš„</li><li>åœ¨åˆåŒæ²¡æœ‰è§„å®šçš„æƒ…å†µä¸‹ï¼Œå—æ‰˜æ–¹äº«æœ‰è‘—ä½œæƒ</li><li>èŒå·¥çš„èŒåŠ¡ä½œå“ï¼ŒèŒå·¥åªäº«æœ‰ç½²åæƒï¼Œå•ä½äº«æœ‰è‘—ä½œæƒï¼ˆä¸“åˆ©ï¼‰</li></ul><h4 id="ï¼ˆ2ï¼‰çŸ¥è¯†äº§æƒ"><a href="#ï¼ˆ2ï¼‰çŸ¥è¯†äº§æƒ" class="headerlink" title="ï¼ˆ2ï¼‰çŸ¥è¯†äº§æƒ"></a>ï¼ˆ2ï¼‰çŸ¥è¯†äº§æƒ</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041202730.png" alt="image-20210525085535372"></p><h3 id="4-å¤šåª’ä½“åŸºç¡€"><a href="#4-å¤šåª’ä½“åŸºç¡€" class="headerlink" title="4.å¤šåª’ä½“åŸºç¡€"></a>4.å¤šåª’ä½“åŸºç¡€</h3><h4 id="ï¼ˆ1ï¼‰éŸ³é¢‘è®¡ç®—"><a href="#ï¼ˆ1ï¼‰éŸ³é¢‘è®¡ç®—" class="headerlink" title="ï¼ˆ1ï¼‰éŸ³é¢‘è®¡ç®—"></a>ï¼ˆ1ï¼‰éŸ³é¢‘è®¡ç®—</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041202098.png" alt="image-20210513195104250"></p><ul><li>å¦‚æœå–æ ·é€Ÿç‡å¤§äºæ¨¡æ‹Ÿä¿¡å·æœ€é«˜é¢‘ç‡çš„2å€ï¼Œåˆ™å¯ä»¥ç”¨å¾—åˆ°çš„æ ·æœ¬ä¸­æ¢å¤åŸæ¥çš„æ¨¡æ‹Ÿä¿¡å·</li><li><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041202627.png" alt="image-20210513195204442"></li></ul><h4 id="ï¼ˆ2ï¼‰å›¾åƒè®¡ç®—"><a href="#ï¼ˆ2ï¼‰å›¾åƒè®¡ç®—" class="headerlink" title="ï¼ˆ2ï¼‰å›¾åƒè®¡ç®—"></a>ï¼ˆ2ï¼‰å›¾åƒè®¡ç®—</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041202945.png" alt="image-20210513195250383"></p><ul><li><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041202217.png" alt="image-20210513195439014"></li></ul><h3 id="5-è½¯ä»¶å·¥ç¨‹"><a href="#5-è½¯ä»¶å·¥ç¨‹" class="headerlink" title="5.è½¯ä»¶å·¥ç¨‹"></a>5.è½¯ä»¶å·¥ç¨‹</h3><h4 id="ï¼ˆ1ï¼‰ç»“æ„åŒ–å¼€å‘"><a href="#ï¼ˆ1ï¼‰ç»“æ„åŒ–å¼€å‘" class="headerlink" title="ï¼ˆ1ï¼‰ç»“æ„åŒ–å¼€å‘"></a>ï¼ˆ1ï¼‰ç»“æ„åŒ–å¼€å‘</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041203010.png" alt="image-20210513195714334"></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041203280.png" alt="image-20210513195725203"></p><ul><li><p>æ‰‡å‡ºæ˜¯æŒ‡æ¨¡å—ç›´æ¥è°ƒç”¨ä¸‹çº§æ¨¡å—çš„ä¸ªæ•°ï¼ˆæ‰‡å‡ºå¤§è¡¨ç¤ºæ¨¡å—å¤æ‚åº¦é«˜ï¼‰ï¼Œæ‰‡å…¥æ˜¯æŒ‡ç›´æ¥è°ƒç”¨è¯¥æ¨¡å—çš„ä¸Šçº§æ¨¡å—çš„ä¸ªæ•°ï¼ˆæ‰‡å…¥å¤§è¡¨ç¤ºæ¨¡å—å¤ç”¨ç¨‹åº¦é«˜ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041203088.png" alt="image-20210513195850913"></p></li></ul><ul><li><p>å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š</p><ul><li>ç ”ç©¶ã€åˆ†æå’Œå®¡æŸ¥<strong>æ•°æ®æµå›¾</strong></li><li>ç”±æ•°æ®æµå›¾æ¨å¯¼å‡ºç³»ç»Ÿçš„åˆå§‹ç»“æ„å›¾ï¼ˆ<strong>æ¥å£è®¾è®¡</strong>ï¼‰</li><li>æ ¹æ®åˆ†ææ¨¡å‹ä¸­çš„å®ä½“å…³ç³»å›¾å’Œæ•°æ®å­—å…¸è¿›è¡Œ<strong>æ•°æ®è®¾è®¡</strong></li><li>åœ¨è®¾è®¡çš„åŸºç¡€ä¸Šï¼Œä¾æ—§åˆ†ææ¨¡å‹ä¸­çš„åŠ å·¥è§„æ ¼è¯´æ˜ã€çŠ¶æ€è½¬æ¢å›¾è¿›è¡Œ<strong>è¿‡ç¨‹è®¾è®¡</strong>ï¼ˆä¸»è¦åŒ…å«å¯¹æ•°æ®ç»“æ„å’Œç®—æ³•çš„è®¾è®¡ï¼‰</li></ul></li></ul><p>ç»“æ„åŒ–åˆ†æç»„æˆï¼š</p><p>ç»“æ„åŒ–æ–¹æ³•çš„åˆ†æç»“æœç”±ä»¥ä¸‹å‡ éƒ¨åˆ†ç»„æˆ:æ•°æ®æµå›¾ã€æ•°æ®è¯å…¸ã€åŠ å·¥é€»è¾‘è¯´æ˜ã€è¡¥å……ææ–™ï¼ˆç»“æ„å›¾ä¸å±äºç»“æ„åŒ–åˆ†æçš„è¾“å‡ºï¼‰</p><h4 id="ï¼ˆ2ï¼‰é¡¹ç›®ç®¡ç†"><a href="#ï¼ˆ2ï¼‰é¡¹ç›®ç®¡ç†" class="headerlink" title="ï¼ˆ2ï¼‰é¡¹ç›®ç®¡ç†"></a>ï¼ˆ2ï¼‰é¡¹ç›®ç®¡ç†</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041203688.png" alt></p><p><strong>è§£é¢˜æ–¹æ³•ï¼š</strong></p><ul><li>ganttå›¾ä¼˜ç‚¹ï¼šè¿›åº¦æ—¶é—´æ¸…æ™°æ˜äº†</li><li>ganttå›¾ç¼ºç‚¹ï¼šä¸èƒ½æ¸…æ™°æè¿°ä»»åŠ¡é—´çš„ä¾èµ–å…³ç³»</li><li>æœ€å°‘å®Œæˆæ—¶é—´å–å†³äºæœ€é•¿çš„æ´»åŠ¨åºåˆ—ï¼ˆå›¾ä¸­æœ€å°‘å®Œæˆå¤©æ•°ä¸º20ï¼‰</li><li>æœ€æ—©å¼€å§‹æ—¶é—´ï¼šæ­£å‘æ¨ç†ï¼Œç›´æ¥ä»èµ·ç‚¹å‡ºå‘åˆ†æï¼Œå¦‚æœæŸä¸ªæ´»åŠ¨å–å†³äºä¸¤ä¸ªè·¯å¾„ï¼Œåˆ™å–æ—¶é—´æœ€é•¿çš„åšæœ€æ—©å¼€å§‹æ—¶é—´ï¼ˆBDæœ€æ—©å¼€å§‹æ—¶é—´ä¸º4ï¼ŒHKæœ€æ—©å¼€å§‹æ—¶é—´ä¸º10ï¼‰</li><li>æœ€æ™šå¼€å§‹æ—¶é—´ï¼šæœ€æ—©å®Œæˆæ—¶é—´åä»æœ€åä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹é€†æ¨å¾—æœ€æ™šå¼€å§‹æ—¶é—´</li><li>æ¾å¼›æ—¶é—´ï¼šæŒ‡ç”¨æœ€å°‘æ—¶é—´ï¼ˆæœ€é•¿çš„æ´»åŠ¨åºåˆ—ï¼‰å‡å»æŸæ´»åŠ¨åœ¨çš„åºåˆ—é•¿åº¦</li></ul><h4 id="ï¼ˆ3ï¼‰å¼€å‘æ¨¡å‹ç‰¹ç‚¹"><a href="#ï¼ˆ3ï¼‰å¼€å‘æ¨¡å‹ç‰¹ç‚¹" class="headerlink" title="ï¼ˆ3ï¼‰å¼€å‘æ¨¡å‹ç‰¹ç‚¹"></a>ï¼ˆ3ï¼‰å¼€å‘æ¨¡å‹ç‰¹ç‚¹</h4><p><a href="https://www.cnblogs.com/liuawen/p/11913603.html">è½¯ä»¶å¼€å‘æ¨¡å‹ä»‹ç»</a></p><p>ç€‘å¸ƒæ¨¡å‹</p><ul><li>ç‰¹ç‚¹ï¼š é˜¶æ®µé—´å…·æœ‰é¡ºåºæ€§å’Œä¾èµ–æ€§ï¼Œæ¨è¿Ÿå®ç°çš„è§‚ç‚¹</li><li>ç¼ºç‚¹ï¼šâ€œç€‘å¸ƒæ¨¡å‹æ˜¯ç”±æ–‡æ¡£é©±åŠ¨çš„â€,åœ¨å¯è¿è¡Œçš„è½¯ä»¶äº§å“äº¤ä»˜ç»™ç”¨æˆ·ä¹‹å‰ï¼Œç”¨æˆ·åªèƒ½é€šè¿‡æ–‡æ¡£æ¥äº†è§£äº§å“æ˜¯ä»€ä¹ˆæ ·çš„ã€‚å¾ˆå¯èƒ½å¯¼è‡´æœ€ç»ˆå¼€å‘å‡ºçš„è½¯ä»¶äº§å“ä¸èƒ½çœŸæ­£æ»¡è¶³ç”¨æˆ·çš„éœ€æ±‚</li></ul><p>å¿«é€ŸåŸå‹æ¨¡å‹</p><ul><li>ç‰¹ç‚¹ï¼šå¼€å‘äººå‘˜å°½å¯èƒ½å¿«åœ°å»ºé€ å‡ºåŸå‹ç³»ç»Ÿï¼Œä»¥åŠ é€Ÿè½¯ä»¶å¼€å‘è¿‡ç¨‹ï¼ŒèŠ‚çº¦è½¯ä»¶å¼€å‘æˆæœ¬</li><li>ä¼˜ç‚¹ï¼šæœ‰åŠ©äºä¿è¯ç”¨æˆ·çš„çœŸå®éœ€è¦å¾—åˆ°æ»¡è¶³</li></ul><p>å¢é‡æ¨¡å‹ï¼š</p><ul><li>ç‰¹ç‚¹ï¼šåˆ†æ‰¹åœ°é€æ­¥å‘ç”¨æˆ·æäº¤äº§å“ï¼Œæ¯æ¬¡æäº¤ä¸€ä¸ªæ»¡è¶³ç”¨æˆ·éœ€æ±‚å­é›†çš„å¯è¿è¡Œçš„äº§å“</li><li>ä¼˜ç‚¹ï¼šèƒ½åœ¨è¾ƒçŸ­æ—¶é—´å†…å‘ç”¨æˆ·æäº¤å¯å®Œæˆä¸€äº›æœ‰ç”¨çš„å·¥ä½œçš„äº§å“ï¼Œé€æ­¥å¢åŠ äº§å“åŠŸèƒ½å¯ä»¥ä½¿ç”¨æˆ·æœ‰è¾ƒå……è£•çš„æ—¶é—´å­¦ä¹ å’Œé€‚åº”æ–°äº§å“</li></ul><p>èºæ—‹æ¨¡å‹ï¼š</p><ul><li>ç‰¹ç‚¹ï¼šè§£è¿™ç§æ¨¡å‹çš„ä¸€ä¸ªç®€ä¾¿æ–¹æ³•ï¼Œæ˜¯æŠŠå®ƒçœ‹åšåœ¨æ¯ä¸ªé˜¶æ®µä¹‹å‰éƒ½å¢åŠ äº†é£é™©åˆ†æè¿‡ç¨‹çš„å¿«é€ŸåŸå‹æ¨¡å‹</li><li>ä¼˜ç‚¹ï¼š åœ¨èºæ—‹æ¨¡å‹ä¸­ç»´æŠ¤åªæ˜¯æ¨¡å‹çš„å¦ä¸€ä¸ªå‘¨æœŸï¼Œåœ¨ç»´æŠ¤å’Œå¼€å‘ä¹‹é—´å¹¶æ²¡æœ‰æœ¬è´¨åŒºåˆ«</li><li>èºæ—‹æ¨¡å‹ä¸»è¦é€‚ç”¨äºå†…éƒ¨å¼€å‘çš„å¤§è§„æ¨¡è½¯ä»¶é¡¹ç›®</li></ul><p>å–·æ³‰æ¨¡å‹ï¼š</p><ul><li>ï¼‚å–·æ³‰â€è¿™ä¸ªè¯ä½“ç°äº†é¢å‘å¯¹è±¡è½¯ä»¶å¼€å‘è¿‡ç¨‹è¿­ä»£å’Œæ— ç¼çš„ç‰¹æ€§</li></ul><p>æ¼”åŒ–æ¨¡å‹ï¼š</p><ul><li>å°½é‡æŠ•å…¥ä½¿ç”¨ï¼Œå¹¶å¯ä»¥å†ä½¿ç”¨è¿‡ç¨‹ä¸­ä¸æ–­å®Œå–„ï¼Œå¯¹äºåŸå‹æ¨¡å‹å’Œæ¼”åŒ–ï¼ˆè¿­ä»£ï¼‰æ¨¡å‹ï¼Œæ¼”åŒ–æ¨¡å‹æ›´åˆé€‚ï¼ŒåŸå‹æ¨¡å‹æ›´é€‚ç”¨äºéœ€æ±‚ä¸æ˜ç¡®æ—¶ç”¨ä»¥è·å–éœ€æ±‚</li></ul><h4 id="ï¼ˆ4ï¼‰å†…èšå’Œè€¦åˆåˆ†æ"><a href="#ï¼ˆ4ï¼‰å†…èšå’Œè€¦åˆåˆ†æ" class="headerlink" title="ï¼ˆ4ï¼‰å†…èšå’Œè€¦åˆåˆ†æ"></a>ï¼ˆ4ï¼‰å†…èšå’Œè€¦åˆåˆ†æ</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041203112.png" alt="image-20210514082309282"></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041203993.png" alt="image-20210514082516907"></p><p><strong>å†…èš</strong></p><p>å†…èšå³æ¨¡å—ä¸­å„ä¸ªéƒ¨ä»¶çš„è¿æ¥ç´§å¯†ç¨‹åº¦ï¼Œå†…èšç¨‹åº¦è¶Šé«˜è¶Šå¥½</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041203794.png" alt="image-20210329090028450"></p><p><strong>è€¦åˆ</strong></p><p>è€¦åˆå³æ¨¡å—é—´çš„è”ç³»çš„ç´§å¯†ç¨‹åº¦ï¼Œè€¦åˆç¨‹åº¦è¶Šä½è¶Šå¥½</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041203345.png" alt="image-20210329090217178"></p><p>å¶ç„¶å…§èšç”±äºå†…å®¹éƒ½æ˜°ä¸ç›¸å…³çš„ï¼Œæ‰€ä»¥å¿…ç„¶å¯¼è‡´å®ƒä¸å¤–æ˜¦å¤šä¸ªæ¨¡å—æœ‰å…³è”ï¼Œè¿™ä¹Ÿä½¿å¾—æ¨¡åŸ‰é—´çš„è€¦åˆå»ˆå¢—åŠ </p><h4 id="ï¼ˆ5ï¼‰è½¯ä»¶æµ‹è¯•è®¡ç®—"><a href="#ï¼ˆ5ï¼‰è½¯ä»¶æµ‹è¯•è®¡ç®—" class="headerlink" title="ï¼ˆ5ï¼‰è½¯ä»¶æµ‹è¯•è®¡ç®—"></a>ï¼ˆ5ï¼‰è½¯ä»¶æµ‹è¯•è®¡ç®—</h4><p>McCabeæµ‹é‡æ³•    </p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041203832.png" alt="image-20210514085901901"></p><p><strong>è¯­å¥è¦†ç›–æµ‹è¯•ç”¨ä¾‹è®¡ç®—ï¼š</strong></p><p>è‡³å°‘æ‰§è¡Œç¨‹åºä¸­çš„æ‰€æœ‰è¯­å¥ä¸€æ¬¡ï¼Œä¸¤æ¡è·¯å¾„å³å¯å®ç°</p><p><strong>è·¯å¾„è¦†ç›–æµ‹è¯•ç”¨ä¾‹è®¡ç®—ï¼š</strong></p><p>æ‰§è¡Œæ‰€æœ‰å¯èƒ½å¾—ç©¿è¿‡ç¨‹åºå¾—æ§åˆ¶æµç¨‹è·¯å¾„,æ‰€æœ‰è·¯å¾„è¦†ç›–ã€‚éœ€è¦4æ¡è·¯å¾„å®Œæˆå®Œå…¨è¦†ç›–</p><p><strong>åˆ¤å®šè¦†ç›–æµ‹è¯•è®¡ç®—ï¼š</strong></p><p>ä½¿ç¨‹åºæµç¨‹å›¾ä¸­æ¯ä¸€ä¸ªçœŸå‡åˆ†æ”¯è‡³å°‘è¢«æ‰§è¡Œä¸€æ¬¡</p><p><strong>ç¯è·¯å¤æ‚åº¦è®¡ç®—ï¼š</strong></p><p>æœ€ç®€è®¡ç®—æ–¹æ³•ï¼šé—­åˆç¯è·¯+1ï¼ˆåˆ¤æ–­æ¡ä»¶ä¸ªæ•°+1ï¼‰</p><p>ä¸€èˆ¬è®¡ç®—æ–¹æ³•ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041203661.png" alt="image-20210514090247799"></p><h4 id="ï¼ˆ6ï¼‰èƒ½åŠ›æˆç†Ÿåº¦æ¨¡å‹é›†æˆï¼ˆCMMIï¼‰"><a href="#ï¼ˆ6ï¼‰èƒ½åŠ›æˆç†Ÿåº¦æ¨¡å‹é›†æˆï¼ˆCMMIï¼‰" class="headerlink" title="ï¼ˆ6ï¼‰èƒ½åŠ›æˆç†Ÿåº¦æ¨¡å‹é›†æˆï¼ˆCMMIï¼‰"></a>ï¼ˆ6ï¼‰èƒ½åŠ›æˆç†Ÿåº¦æ¨¡å‹é›†æˆï¼ˆCMMIï¼‰</h4><ul><li>CL0ï¼ˆæœªå®Œæˆçš„ï¼‰:è¿‡ç¨‹åŸŸ<strong>æœªæ‰§è¡Œ</strong></li><li>CL1ï¼ˆå·²æ‰§è¡Œçš„ï¼‰:å…¶å…±æ€§ç›®æ ‡æ˜¯è¿‡ç¨‹å°†å¯æ ‡è¯†çš„è¾“å…¥å·¥ä½œäº§å“<strong>è½¬æ¢æˆ</strong>å¯æ ‡è¯†çš„è¾“å‡ºå·¥äº§å“</li><li>CL2ï¼ˆå·²ç®¡ç†çš„ï¼‰å…¶å…±æ€§ç›®æ ‡æ˜¯é›†ä¸­äº<strong>å·²ç®¡ç†</strong>çš„è¿‡ç¨‹çš„åˆ¶åº¦åŒ–</li><li>CL3ï¼ˆå·²å®šä¹‰çº§çš„ï¼‰:å…¶å…±æ€§ç›®æ ‡é›†ä¸­äº<strong>å·²å®šä¹‰</strong>çš„è¿‡ç¨‹çš„åˆ¶åº¦åŒ–</li><li>CL4ï¼ˆå®šé‡ç®¡ç†çš„ï¼‰:å…¶å…±æ€§ç›®æ ‡é›†ä¸­äº<strong>å¯å®šé‡ç®¡ç†</strong>çš„è¿‡ç¨‹çš„åˆ¶åº¦åŒ–</li><li>CL5ï¼ˆä¼˜åŒ–çš„ï¼‰:ä½¿ç”¨é‡åŒ–ï¼ˆç»Ÿè®¡å­¦ï¼‰æ‰‹æ®µæ”¹å˜å’Œ<strong>ä¼˜åŒ–è¿‡ç¨‹åŸŸ</strong>ï¼Œä»¥æ»¡è¶³å®¢æˆ·çš„æ”¹å˜å’ŒæŒç»­æ”¹è¿›è®¡åˆ’ä¸­çš„è¿‡ç¨‹åŸŸçš„åŠŸæ•ˆ</li></ul><h4 id="ï¼ˆ7ï¼‰è½¯ä»¶ç»´æŠ¤"><a href="#ï¼ˆ7ï¼‰è½¯ä»¶ç»´æŠ¤" class="headerlink" title="ï¼ˆ7ï¼‰è½¯ä»¶ç»´æŠ¤"></a>ï¼ˆ7ï¼‰è½¯ä»¶ç»´æŠ¤</h4><p>è½¯è€ƒç»´æŠ¤æœ‰ä»¥ä¸‹ç±»å‹ï¼š</p><ul><li>æ”¹æ­£æ€§ç»´æŠ¤ï¼šä¸ºäº†è¯†åˆ«å’Œçº æ­£è½¯ä»¶é”™è¯¯ã€æ”¹æ­£è½¯ä»¶æ€§èƒ½ä¸Šçš„ç¼ºé™·</li><li>é€‚åº”æ€§ç»´æŠ¤ï¼šåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå¤–éƒ¨ç¯å¢ƒï¼ˆæ–°çš„ç¡¬ã€è½¯ä»¶é…ç½®ï¼‰ã€æ•°æ®ç¯å¢ƒï¼ˆæ•°æ®åº“ã€æ•°æ®æ ¼å¼ã€æ•°æ®è¾“å…¥/è¾“å²€æ–¹å¼ã€æ•°æ®å­˜å‚¨ä»‹è´¨ï¼‰å¯èƒ½å‘ç”Ÿå˜åŒ–ã€‚ä¸ºä½¿è½¯ä»¶é€‚åº”è¿™äº›å˜åŒ–è€Œè¿›è¡Œçš„ä¿®æ”¹</li><li>å®Œå–„æ€§ç»´æŠ¤ï¼šåœ¨è½¯ä»¶çš„ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œç”¨æˆ·å¾€å¾€ä¼šå¯¹è½¯ä»¶æå²€æ–°çš„åŠŸèƒ½ä¸æ€§èƒ½è¦æ±‚ã€‚ä¸ºäº†æ»¡è¶³è¿™äº›è¦æ±‚ï¼Œéœ€è¦ä¿®æ”¹æˆ–å†å¼€å‘è½¯ä»¶ï¼Œä»¥æ‰©å……è½¯ä»¶åŠŸèƒ½ã€å¢å¼ºè½¯ä»¶æ€§èƒ½</li><li>é¢„é˜²æ€§ç»´æŠ¤ã€‚è¿™æ˜¯æŒ‡é¢„å…ˆæé«™è½¯ä»¶çš„å¯ç»´æŠ¤æ€§ã€å¯é æ€§ç­‰ï¼Œä¸ºä»¥åè¿›ä¸€æ­¥æ”¹è¿›è½¯ä»¶æ‰“ä¸‹è‰¯å¥½åŸºç¡€</li></ul><h3 id="6-ç¼–è¯‘åŸç†"><a href="#6-ç¼–è¯‘åŸç†" class="headerlink" title="6.ç¼–è¯‘åŸç†"></a>6.ç¼–è¯‘åŸç†</h3><h4 id="ï¼ˆ1ï¼‰æ­£è§„å¼"><a href="#ï¼ˆ1ï¼‰æ­£è§„å¼" class="headerlink" title="ï¼ˆ1ï¼‰æ­£è§„å¼"></a>ï¼ˆ1ï¼‰æ­£è§„å¼</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041203465.png" alt="image-20210513202920690"></p><ul><li>a|b ï¼šå¯è§£æå‡ºaæˆ–b</li><li>ï¼ˆa|bï¼‰*ï¼šä»»æ„ä¸ªa,bç»„åˆéƒ½å¯ä»¥è¡¨è¾¾å‡ºæ¥</li></ul><h4 id="ï¼ˆ2ï¼‰ç¼–è¯‘è¿‡ç¨‹"><a href="#ï¼ˆ2ï¼‰ç¼–è¯‘è¿‡ç¨‹" class="headerlink" title="ï¼ˆ2ï¼‰ç¼–è¯‘è¿‡ç¨‹"></a>ï¼ˆ2ï¼‰ç¼–è¯‘è¿‡ç¨‹</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041203458.png" alt="image-20210513203037685"></p><h4 id="ï¼ˆ3ï¼‰æœ‰é™è‡ªåŠ¨æœºçŠ¶æ€è½¬æ¢å›¾"><a href="#ï¼ˆ3ï¼‰æœ‰é™è‡ªåŠ¨æœºçŠ¶æ€è½¬æ¢å›¾" class="headerlink" title="ï¼ˆ3ï¼‰æœ‰é™è‡ªåŠ¨æœºçŠ¶æ€è½¬æ¢å›¾"></a>ï¼ˆ3ï¼‰æœ‰é™è‡ªåŠ¨æœºçŠ¶æ€è½¬æ¢å›¾</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041203538.png" alt="image-20210514110711386"></p><ul><li>è§£ææ€ï¼šæ‰¾ä¸€æ¡ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„è·¯ï¼Œè·¯ä¸Šçš„æ•°å€¼ä¸²èµ·æ¥å³å¾—åˆ°ä¸€ä¸ªè§£ææ€</li><li>è¯†åˆ«è·¯å¾„ï¼šæŒ‰é€‰é¡¹çš„è·¯å¾„ä¸€ä¸ªä¸ªå°è¯•ï¼Œè‹¥èƒ½ä»åˆæ€åˆ°ç»ˆæ€åˆ™è¯¥é€‰é¡¹æ­£ç¡®</li></ul><h4 id="ï¼ˆ4ï¼‰è¯­æ³•æ ‘åˆ†æ"><a href="#ï¼ˆ4ï¼‰è¯­æ³•æ ‘åˆ†æ" class="headerlink" title="ï¼ˆ4ï¼‰è¯­æ³•æ ‘åˆ†æ"></a>ï¼ˆ4ï¼‰è¯­æ³•æ ‘åˆ†æ</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041203360.png" alt="image-20210514111329550"></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041203986.png" alt="image-20210514111253610"></p><h3 id="7-æ“ä½œç³»ç»ŸåŸºæœ¬åŸç†"><a href="#7-æ“ä½œç³»ç»ŸåŸºæœ¬åŸç†" class="headerlink" title="7.æ“ä½œç³»ç»ŸåŸºæœ¬åŸç†"></a>7.æ“ä½œç³»ç»ŸåŸºæœ¬åŸç†</h3><h4 id="ï¼ˆ1ï¼‰æ•°æ®ä¼ è¾“æ§åˆ¶"><a href="#ï¼ˆ1ï¼‰æ•°æ®ä¼ è¾“æ§åˆ¶" class="headerlink" title="ï¼ˆ1ï¼‰æ•°æ®ä¼ è¾“æ§åˆ¶"></a>ï¼ˆ1ï¼‰æ•°æ®ä¼ è¾“æ§åˆ¶</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041203843.png" alt="image-20210513144736846"></p><ul><li>ç¨‹åºæ§åˆ¶æ–¹å¼ï¼šå¯¹è¯»å…¥çš„æ¯ä¸ªå­—ï¼ŒCPUéœ€è¦å¯¹å¤–è®¾çŠ¶æ€è¿›è¡Œå¾ªç¯æ£€æŸ¥ï¼Œç›´åˆ°ç¡®å®šè¯¥å­—å·²ç»åœ¨I/Oæ§åˆ¶å™¨çš„æ•°æ®å¯„å­˜å™¨ä¸­</li><li>ç¨‹åºä¸­æ–­æ–¹å¼ï¼šå…è®¸I/Oè®¾å¤‡ä¸»åŠ¨æ‰“æ–­CPUçš„è¿è¡Œå¹¶è¯·æ±‚æœåŠ¡ï¼Œä»è€Œâ€œè§£æ”¾â€CPUï¼Œä½¿å¾—å…¶å‘I/Oæ§åˆ¶å™¨å‘é€è¯»å‘½ä»¤åå¯ä»¥ç»§ç»­åšå…¶ä»–æœ‰ç”¨çš„å·¥ä½œ</li><li>DMAæ–¹å¼ï¼šåœ¨ç¨‹åºä¸­æ–­æ–¹å¼ä¸­ï¼ŒI/Oè®¾å¤‡ä¸å†…å­˜ä¹‹é—´çš„æ•°æ®äº¤æ¢å¿…é¡»è¦ç»è¿‡CPUä¸­çš„å¯„å­˜å™¨ï¼Œæ‰€ä»¥é€Ÿåº¦è¿˜æ˜¯å—é™ï¼Œè€ŒDMAï¼ˆç›´æ¥å­˜å‚¨å™¨å­˜å–ï¼‰æ–¹å¼çš„åŸºæœ¬æ€æƒ³æ˜¯åœ¨I/Oè®¾å¤‡å’Œå†…å­˜ä¹‹é—´<strong>å¼€è¾Ÿç›´æ¥çš„æ•°æ®äº¤æ¢é€šè·¯</strong>ï¼Œå½»åº•â€œè§£æ”¾â€ CPU</li></ul><h4 id="ï¼ˆ2ï¼‰ä½ç¤ºå›¾è®¡ç®—"><a href="#ï¼ˆ2ï¼‰ä½ç¤ºå›¾è®¡ç®—" class="headerlink" title="ï¼ˆ2ï¼‰ä½ç¤ºå›¾è®¡ç®—"></a>ï¼ˆ2ï¼‰ä½ç¤ºå›¾è®¡ç®—</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041204170.png" alt="image-20210513203333599"></p><ul><li><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041204312.png" alt="image-20210513203438697"></p></li><li><p>ä½ç¤ºå›¾çš„æ¯ä¸€ä½éƒ½è¡¨ç¤ºä¸€ä¸ªç£ç›˜å—çš„ä½¿ç”¨æƒ…å†µ</p></li><li><p>ç‰©ç†å—æ•° / å­—é•¿å³å¯å¾—éœ€è¦çš„å­—çš„ä¸ªæ•°</p></li><li><p>æ±‚å­—çš„ç¼–å·å³ä¸ºï¼ˆç‰©ç†å·+1ï¼‰ /  å­—é•¿</p></li></ul><h4 id="ï¼ˆ3ï¼‰æ­»é”é—®é¢˜è®¡ç®—"><a href="#ï¼ˆ3ï¼‰æ­»é”é—®é¢˜è®¡ç®—" class="headerlink" title="ï¼ˆ3ï¼‰æ­»é”é—®é¢˜è®¡ç®—"></a>ï¼ˆ3ï¼‰æ­»é”é—®é¢˜è®¡ç®—</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041204209.png" alt="image-20210513203908025"></p><ul><li>æ¯ä¸ªè¿›ç¨‹éƒ½åˆ†é…åˆ°èµ„æºæ•°ï¼ˆn-1ï¼‰ï¼Œæœ€åè¿˜å‰©ä¸‹ä¸€ä¸ªèµ„æºé€ä¸ªç­‰å¾…åˆ†é…</li><li>æ‰€ä»¥æ€»ä¸å‘ç”Ÿæ­»é”çš„èµ„æºæ˜¯ æ¯ä¸ªè¿›ç¨‹æ‰€éœ€ï¼ˆèµ„æºæ•°-1ï¼‰ä¹‹å’Œ åŠ 1</li></ul><h4 id="ï¼ˆ4ï¼‰é¡µå¼å­˜å‚¨åœ°å€æ¢ç®—"><a href="#ï¼ˆ4ï¼‰é¡µå¼å­˜å‚¨åœ°å€æ¢ç®—" class="headerlink" title="ï¼ˆ4ï¼‰é¡µå¼å­˜å‚¨åœ°å€æ¢ç®—"></a>ï¼ˆ4ï¼‰é¡µå¼å­˜å‚¨åœ°å€æ¢ç®—</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041204720.png" alt="image-20210513204201718"></p><ul><li><p><img src="C:/Users/linghao/AppData/Roaming/Typora/typora-user-images/image-20210513211105549.png" alt="image-20210513211105549"></p></li><li><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041204714.png" alt="image-20210313100151803"></p></li></ul><h4 id="ï¼ˆ5ï¼‰å‰è¶‹å›¾"><a href="#ï¼ˆ5ï¼‰å‰è¶‹å›¾" class="headerlink" title="ï¼ˆ5ï¼‰å‰è¶‹å›¾"></a>ï¼ˆ5ï¼‰å‰è¶‹å›¾</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041204402.png" alt="image-20210513211328449"></p><ul><li>Væ“ä½œå¯ä»¥å”¤é†’Pæ“ä½œï¼ˆç­‰å¾…çš„ä¸€æ–¹ä¼šæœ‰ä¸€ä¸ªPæ“ä½œï¼Œç­‰å¾…å¦ä¸€ä¸ªè¿›ç¨‹çš„Væ“ä½œè§¦å‘ï¼‰</li><li>ç®­å¤´æŒ‡å‘ä¸ºVï¼Œç®­å¤´èµ·å§‹ç‚¹ä¸ºPï¼Œç‰¢è®°è¿™ç‚¹å³å¯è§£å†³è¿™ç±»é—®é¢˜ï¼ˆP æ“ä½œâ€”&gt; è¿›ç¨‹ è¿è¡Œâ€”&gt; Væ“ä½œï¼‰</li></ul><h4 id="ï¼ˆ6ï¼‰è¿›ç¨‹ç®¡ç†ä¸PVæ“ä½œ"><a href="#ï¼ˆ6ï¼‰è¿›ç¨‹ç®¡ç†ä¸PVæ“ä½œ" class="headerlink" title="ï¼ˆ6ï¼‰è¿›ç¨‹ç®¡ç†ä¸PVæ“ä½œ"></a>ï¼ˆ6ï¼‰è¿›ç¨‹ç®¡ç†ä¸PVæ“ä½œ</h4><p><strong>é¢˜ç›®åˆ†æï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041204893.png" alt="image-20210521163208973"></p><p>ä¿¡æ¯é‡åº”å½“ä¸ºå•å…ƒæ•°ï¼Œé¢˜ç›®æ˜¯ä»¥æŸæ—¥æŸè¶Ÿè½¦ä½ä¸€ä¸ªå•å…ƒ</p><p>ï¼ˆaï¼‰æ˜¯ç”³è¯·èµ„æºæ‰€ä»¥ä¸ºpæ“ä½œï¼Œï¼ˆbï¼‰ï¼ˆcï¼‰éƒ½æ˜¯é‡Šæ”¾èµ„æºæ‰€ä»¥ä¸ºVæ“ä½œ</p><p><strong>PVæ“ä½œåŸç†ï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041204857.png" alt="image-20210521163135429"></p><p>ç”Ÿäº§è€…å…ˆP(s1)å†V(s2)ï¼Œè€Œæ¶ˆè´¹è€…ç›¸åï¼Œè¿™è®©ä¿è¯äº†æ”¾å…¥å’Œå–å‡ºéƒ½ä¸ä¼šå‡ºé”™</p><h4 id="ï¼ˆ8ï¼‰PVæ“ä½œä¸å‰é©±å›¾åˆ†æ"><a href="#ï¼ˆ8ï¼‰PVæ“ä½œä¸å‰é©±å›¾åˆ†æ" class="headerlink" title="ï¼ˆ8ï¼‰PVæ“ä½œä¸å‰é©±å›¾åˆ†æ"></a>ï¼ˆ8ï¼‰PVæ“ä½œä¸å‰é©±å›¾åˆ†æ</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041204353.png" alt="image-20210526104321660"></p><ul><li>æ ¹æ®å‰é©±å›¾å¯ä»¥åˆ†æï¼šP1ä¸éœ€è¦å‰è¶‹å”¤é†’ï¼Œè€Œå…¶å‚ä¸å”¤é†’åç»­P2ï¼ŒP3ï¼ˆæ‰€ä»¥p1è¿è¡Œå‰ä¸éœ€è¦å†™Pæ“ä½œï¼Œè€Œå…¶Væ“ä½œå”¤é†’åç»­çš„Pæ“ä½œï¼‰</li><li>è§£é¢˜æ—¶å¯ä»¥å¯¹åº”å‰é©±å›¾æ‰¾åˆ°å‰é©±ä¸åç»­ï¼Œå¯¹åº”PVæ“ä½œçš„ä¿¡å·é‡</li><li>ä¿¡å·é‡çš„æ ‡æ³¨ä¸¤ä¸ªPç¼–å·å€¼çš„å’Œä»å¤§åˆ°å°å¯¹åº”è®¡ç®—ï¼ˆä¹Ÿå¯ä»¥ä»å·¦åˆ°å³ï¼Œä»ä¸Šåˆ°ä¸‹ï¼‰</li></ul><h4 id="ï¼ˆ7ï¼‰I-Oè®¾å¤‡ç®¡ç†"><a href="#ï¼ˆ7ï¼‰I-Oè®¾å¤‡ç®¡ç†" class="headerlink" title="ï¼ˆ7ï¼‰I/Oè®¾å¤‡ç®¡ç†"></a>ï¼ˆ7ï¼‰I/Oè®¾å¤‡ç®¡ç†</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041204002.png" alt="image-20210521163731406"></p><h3 id="8-é¢å‘å¯¹è±¡"><a href="#8-é¢å‘å¯¹è±¡" class="headerlink" title="8.é¢å‘å¯¹è±¡"></a>8.é¢å‘å¯¹è±¡</h3><h4 id="ï¼ˆ1ï¼‰UMLå›¾åˆ†æ"><a href="#ï¼ˆ1ï¼‰UMLå›¾åˆ†æ" class="headerlink" title="ï¼ˆ1ï¼‰UMLå›¾åˆ†æ"></a>ï¼ˆ1ï¼‰UMLå›¾åˆ†æ</h4><p><strong>ç”¨ä¾‹å›¾ï¼š</strong></p><ul><li>åŒ…å«å…³ç³»ï¼ˆextendï¼‰</li><li>æ‰©å±•å…³ç³»ï¼ˆincludeï¼‰</li><li>æ³›åŒ–å…³ç³»</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041204450.png" alt="image-20210411075016076"></p><p><strong>ç±»å›¾ä¸å¯¹è±¡å›¾ï¼š</strong></p><p>ç±»å›¾æ˜¯æè¿°ç³»ç»Ÿä¸­çš„ç±»ï¼Œä»¥åŠå„ä¸ªç±»ä¹‹é—´çš„å…³ç³»çš„é™æ€è§†å›¾</p><ul><li><p>å¡«ç±»å</p></li><li><p>å¡«å¤šé‡åº¦</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041204491.png" alt="image-20210411075231497"></p></li><li><p>å¡«å…³ç³»</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041204985.png" alt="image-20210411075347236"></p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041204847.png" alt="image-20210514092707554"></p><p><strong>é€šä¿¡å›¾:</strong></p><ul><li><p>é€šä¿¡å›¾ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šå¯¹è±¡ï¼ˆObjectï¼‰ï¼Œé“¾ï¼ˆLinkï¼‰ å’Œæ¶ˆæ¯ï¼ˆMessageï¼‰</p></li><li><p>å¯¹è±¡å³ç±»çš„å®ä¾‹ å…¶ä¸­aOrderè¡¨ç¤ºå®ä¾‹åï¼ŒOrderè¡¨ç¤ºç±»å</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041204194.png" alt="image-20210514093533116"></p></li><li><p>é“¾çš„ä¸¤ç«¯æ˜¯æ¶ˆæ¯å‘é€è€…å’Œæ¶ˆæ¯æ¥æ”¶è€…</p></li><li><p>é€šä¿¡å›¾æ˜¯é€šè¿‡ä¸€ç³»åˆ—çš„æ¶ˆæ¯æ¥æè¿°ç³»ç»Ÿçš„åŠ¨æ€è¡Œä¸º</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041204085.png" alt="image-20210514093813668"></p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041204153.png" alt="image-20210411080106182"></p><h4 id="ï¼ˆ2ï¼‰-è®¾è®¡æ¨¡å¼åˆ†æ"><a href="#ï¼ˆ2ï¼‰-è®¾è®¡æ¨¡å¼åˆ†æ" class="headerlink" title="ï¼ˆ2ï¼‰*è®¾è®¡æ¨¡å¼åˆ†æ"></a>ï¼ˆ2ï¼‰*è®¾è®¡æ¨¡å¼åˆ†æ</h4><p><a href="https://design-patterns.readthedocs.io/zh_CN/latest/read_uml.html">å›¾è§£è®¾è®¡æ¨¡å¼</a></p><p><strong>å„æ¨¡å¼ç‰¹ç‚¹ï¼š</strong></p><p>åˆ›å»ºå‹</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041204955.png" alt="image-20210401075331145"></p><p>ç»“æ„å‹</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041204504.png" alt="image-20210514100625028"></p><p>ç»„åˆå‹</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041204249.png" alt="image-20210514100645295"></p><p><strong>è§‚å¯Ÿè€…æ¨¡å¼ï¼š</strong></p><ul><li>å»ºç«‹ä¸€ç§å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œä¸€ä¸ªå¯¹è±¡å‘ç”Ÿæ”¹å˜æ—¶å°†è‡ªåŠ¨é€šçŸ¥å…¶ä»–å¯¹è±¡ï¼Œå…¶ä»–å¯¹è±¡å°†ç›¸åº”åšå‡ºååº”</li><li>å‘ç”Ÿæ”¹å˜çš„å¯¹è±¡ç§°ä¸ºè§‚å¯Ÿç›®æ ‡ï¼Œè€Œè¢«é€šçŸ¥çš„å¯¹è±¡ç§°ä¸ºè§‚å¯Ÿè€…</li><li>è§‚å¯Ÿè€…å°†è‡ªå·±æ³¨å†Œåˆ°äº‹ä»¶ï¼Œé‚£ä¹ˆå…·ä½“çš„äº‹ä»¶å°±çŸ¥é“äº†è‡ªå·±çš„è§‚å¯Ÿè€…</li><li>è§‚å¯Ÿè€…å’Œäº‹ä»¶éƒ½æœ‰è‡ªå·±çš„æŠ½è±¡ï¼Œå½“å®ç°å…·ä½“çš„è§‚å¯Ÿè€…å’Œäº‹ä»¶çš„æ—¶ä¾¯éƒ½è¦å®ç°ç›¸åº”æ¥å£ï¼Œæ‰€ä»¥å¯¹æ‰©å±•æ˜¯å¼€æ”¾çš„</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041205144.png" alt="image-20210514095245429"></p><p><strong>çŠ¶æ€æ¨¡å¼ï¼š</strong></p><ul><li>å…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸ºï¼Œå¯¹è±¡çœ‹èµ·æ¥ä¼¼ä¹ä¿®æ”¹äº†å®ƒçš„ç±»</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041205041.png" alt="image-20210514110457412"></p><h4 id="ï¼ˆ3ï¼‰åŸºç¡€çŸ¥è¯†"><a href="#ï¼ˆ3ï¼‰åŸºç¡€çŸ¥è¯†" class="headerlink" title="ï¼ˆ3ï¼‰åŸºç¡€çŸ¥è¯†"></a>ï¼ˆ3ï¼‰åŸºç¡€çŸ¥è¯†</h4><p><strong>çŠ¶æ€ä¸è¡Œä¸ºï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041205690.png" alt="image-20210521171208234"></p><p><strong>å¤šæ€å«ä¹‰ï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041205169.png" alt="image-20210521171249312"></p><p><strong>å¤šæ€ç±»å‹ï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041205290.png" alt="image-20210526115031968"></p><h3 id="9-æ•°æ®åº“ç³»ç»Ÿ"><a href="#9-æ•°æ®åº“ç³»ç»Ÿ" class="headerlink" title="9.æ•°æ®åº“ç³»ç»Ÿ"></a>9.æ•°æ®åº“ç³»ç»Ÿ</h3><h4 id="ï¼ˆ1ï¼‰å°é”åè®®"><a href="#ï¼ˆ1ï¼‰å°é”åè®®" class="headerlink" title="ï¼ˆ1ï¼‰å°é”åè®®"></a>ï¼ˆ1ï¼‰å°é”åè®®</h4><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041205419.png" alt="image-20210514111808165" style="zoom:200%;"><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041205795.png" alt="image-20210514113124096"></p><h4 id="ï¼ˆ2ï¼‰æ±‚é”®"><a href="#ï¼ˆ2ï¼‰æ±‚é”®" class="headerlink" title="ï¼ˆ2ï¼‰æ±‚é”®"></a>ï¼ˆ2ï¼‰æ±‚é”®</h4><p><strong>é”®çš„å…³ç³»ï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041205000.png" alt="image-20210514113801142"></p><p><strong>æ±‚å€™é€‰é”®ï¼š</strong></p><p>åªå±•ç¤ºå¿«æ·æ–¹æ³•</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041205088.png" alt="image-20210514114033872"></p><h4 id="ï¼ˆ3ï¼‰E-Ræ¨¡å‹åˆ†æ"><a href="#ï¼ˆ3ï¼‰E-Ræ¨¡å‹åˆ†æ" class="headerlink" title="ï¼ˆ3ï¼‰E-Ræ¨¡å‹åˆ†æ"></a>ï¼ˆ3ï¼‰E-Ræ¨¡å‹åˆ†æ</h4><p><strong>E-Ræ¨¡å‹ç»„æˆï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041205082.png" alt="image-20210514115025317"></p><p><strong>è”ç³»ç±»å‹ï¼š</strong></p><ul><li><p>åˆ†æè”ç³»æ¨¡å¼</p></li><li><p>ä¸€ä¸ªå®ä½“å‹è½¬æ¢ä¸ºä¸€ä¸ªå…³ç³»æ¨¡å¼</p></li><li><p>å…³ç³»æ¨¡å¼ä¸ªæ•°ï¼šä¸€å¯¹ä¸€å‹æœ€å°‘çš„æƒ…å†µä¸ºå®ä½“æ•°ï¼Œä¸€å¯¹å¤šå‹æœ€å°‘çš„æƒ…å†µä¸ºå®ä½“æ•°ï¼Œå¤šå¯¹å¤šå‹æœ€å°‘çš„æƒ…å†µä¸ºï¼ˆå®ä½“æ•° +è”ç³»æ•°ï¼‰ </p></li></ul><h4 id="ï¼ˆ4ï¼‰sqlè¯­å¥"><a href="#ï¼ˆ4ï¼‰sqlè¯­å¥" class="headerlink" title="ï¼ˆ4ï¼‰sqlè¯­å¥"></a>ï¼ˆ4ï¼‰sqlè¯­å¥</h4><ul><li>æŸ¥è¯¢æ¡ä»¶whereä¸Hngçš„åŒºåˆ«è¦å¼„æ¸…æ¥šWheeæ˜¯é’ˆå¯¹å•æ¡è®°å½•çš„åˆ¤æ–­æ¡ä»¶ï¼Œè€Œ Havingæ˜¯é’ˆå¯¹åˆ†ç»„ä¹‹åçš„åˆ¤æ–­æ¡ä»¶</li></ul><h4 id="ï¼ˆ5ï¼‰å‡½æ•°ä¾èµ–æ¨å¯¼"><a href="#ï¼ˆ5ï¼‰å‡½æ•°ä¾èµ–æ¨å¯¼" class="headerlink" title="ï¼ˆ5ï¼‰å‡½æ•°ä¾èµ–æ¨å¯¼"></a>ï¼ˆ5ï¼‰å‡½æ•°ä¾èµ–æ¨å¯¼</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041206562.png" alt="image-20210521172502814"></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041206153.png" alt="image-20210521172552945"></p><h4 id="ï¼ˆ6ï¼‰-å…³ç³»ä»£æ•°è¡¨è¾¾å¼"><a href="#ï¼ˆ6ï¼‰-å…³ç³»ä»£æ•°è¡¨è¾¾å¼" class="headerlink" title="ï¼ˆ6ï¼‰*å…³ç³»ä»£æ•°è¡¨è¾¾å¼"></a>ï¼ˆ6ï¼‰*å…³ç³»ä»£æ•°è¡¨è¾¾å¼</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041206108.png" alt="image-20210521175255727"></p><p><strong>å…³ç³»ä»£æ•°çš„9ç§æ“ä½œï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041206148.png" alt="image-20210521175510573"></p><h3 id="10-æ•°æ®ç»“æ„"><a href="#10-æ•°æ®ç»“æ„" class="headerlink" title="10.æ•°æ®ç»“æ„"></a>10.æ•°æ®ç»“æ„</h3><h4 id="ï¼ˆ1ï¼‰-å›¾é‚»æ¥çŸ©é˜µ"><a href="#ï¼ˆ1ï¼‰-å›¾é‚»æ¥çŸ©é˜µ" class="headerlink" title="ï¼ˆ1ï¼‰*å›¾é‚»æ¥çŸ©é˜µ"></a>ï¼ˆ1ï¼‰*å›¾é‚»æ¥çŸ©é˜µ</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041206195.png" alt="image-20210521153841784"></p><p>é‚»æ¥çŸ©é˜µæœ‰n*nä¸ªç‚¹ï¼Œéƒ½éœ€è¦è¢«éå†</p><h4 id="ï¼ˆ2ï¼‰é¡ºåºå‚¨å­˜äºŒå‰æ ‘"><a href="#ï¼ˆ2ï¼‰é¡ºåºå‚¨å­˜äºŒå‰æ ‘" class="headerlink" title="ï¼ˆ2ï¼‰é¡ºåºå‚¨å­˜äºŒå‰æ ‘"></a>ï¼ˆ2ï¼‰é¡ºåºå‚¨å­˜äºŒå‰æ ‘</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041206896.png" alt="image-20210521174323106"></p><p>ç©ºèŠ‚ç‚¹ä¹Ÿä¼šæŒ‰é¡ºåºå­˜è¿›æ•°ç»„ä¸­</p><h3 id="11-ç®—æ³•è¿ç”¨"><a href="#11-ç®—æ³•è¿ç”¨" class="headerlink" title="11.*ç®—æ³•è¿ç”¨"></a>11.*ç®—æ³•è¿ç”¨</h3><h4 id="ï¼ˆ1ï¼‰åŠ¨æ€è§„åˆ’æ³•æ¡ˆä¾‹"><a href="#ï¼ˆ1ï¼‰åŠ¨æ€è§„åˆ’æ³•æ¡ˆä¾‹" class="headerlink" title="ï¼ˆ1ï¼‰åŠ¨æ€è§„åˆ’æ³•æ¡ˆä¾‹"></a>ï¼ˆ1ï¼‰åŠ¨æ€è§„åˆ’æ³•æ¡ˆä¾‹</h4><p>è¿™ç±»é¢˜è·³è¿‡æ–‡å­—åˆ†æå›¾åƒï¼Œæ‰¾åˆ°çªç ´ç‚¹ï¼Œç„¶åå†çœ‹æ–‡å­—åˆ†æ</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041206169.png" alt="image-20210514160327149"></p><p>æœ€çŸ­è·¯çº¿ä¸ºï¼šS11 -&gt; S22 -&gt; S13 ï¼ˆé•¿åº¦ä¸º 3+4+1+5+2+3+3 = 21 ï¼‰</p><p><strong>åŠ¨æ€è§„åˆ’æ³•ï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041206257.png" alt="image-20210411083609174"></p><p>åŠ¨æ€è§„åˆ’æ³•ä¼šæŠŠé—®é¢˜æ‹†æˆå¤šä¸ªå­é—®é¢˜ï¼Œç„¶åä¼šæœ‰æŸ¥è¡¨æ­¥éª¤</p><h4 id="ï¼ˆ2ï¼‰å…¶ä»–ç®—æ³•ç­–ç•¥"><a href="#ï¼ˆ2ï¼‰å…¶ä»–ç®—æ³•ç­–ç•¥" class="headerlink" title="ï¼ˆ2ï¼‰å…¶ä»–ç®—æ³•ç­–ç•¥"></a>ï¼ˆ2ï¼‰å…¶ä»–ç®—æ³•ç­–ç•¥</h4><p><strong>åˆ†æ²»æ³•ï¼š</strong></p><p>åˆ†æ²»æ³•-&gt;é€’å½’æŠ€æœ¯</p><p>ï¼ˆ1ï¼‰åˆ†æ²»æ³•ä½¿ç”¨è¦æ±‚ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041206763.png" alt="image-20210411081822777"></p><p>åˆ†æ²»æ³•çš„åŸºæœ¬è¿ç”¨ï¼šäºŒåˆ†æŸ¥æ‰¾ã€‚å¿«é€Ÿæ’åº</p><p><strong>å›æº¯æ³•ï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041206786.png" alt="image-20210411082526821"></p><p><img src="C:/Users/linghao/AppData/Roaming/Typora/typora-user-images/image-20210411082644241.png" alt="image-20210411082644241"></p><p>å›æº¯æ³•é€šè¿‡ä¸æ–­å›æº¯å‚æ•°ï¼ŒæŠŠæ‰€æœ‰å¯èƒ½æ€§éƒ½å°è¯•ä¸€éç›´åˆ°</p><p><strong>è´ªå¿ƒæ³•ï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041206473.png" alt="image-20210411083313668"></p><p>åœ¨æœ‰é™æ—¶é—´æ‰¾åˆ°æ»¡æ„çš„è§£ï¼ˆæ‰¾ä¸åˆ°æœ€ä¼˜è§£ï¼Œæ‰¾åˆ°æ¯ä¸€æ­¥çš„å±€éƒ¨æœ€ä¼˜è§£ï¼‰</p><p>é€šè¿‡é€’å½’åœ°è§£å†³è¿™äº›å­é—®é¢˜ç„¶åå†å°†è¿™äº›å­é—®é¢˜çš„è§£ç»„åˆæˆåŸé—®é¢˜çš„è§£ã€‚</p><h3 id="12-è®¡ç®—æœºç½‘ç»œ"><a href="#12-è®¡ç®—æœºç½‘ç»œ" class="headerlink" title="12.è®¡ç®—æœºç½‘ç»œ"></a>12.è®¡ç®—æœºç½‘ç»œ</h3><h4 id="ï¼ˆ1ï¼‰åŸŸåè§£æè¿‡ç¨‹"><a href="#ï¼ˆ1ï¼‰åŸŸåè§£æè¿‡ç¨‹" class="headerlink" title="ï¼ˆ1ï¼‰åŸŸåè§£æè¿‡ç¨‹"></a>ï¼ˆ1ï¼‰åŸŸåè§£æè¿‡ç¨‹</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041206064.png" alt="image-20210514160917608"></p><ul><li>æœ¬åœ°æœåŠ¡å™¨ä¸€èˆ¬é‡‡ç”¨é€’å½’æŸ¥è¯¢ï¼Œå¯¹å®¢æˆ·ç«¯è´Ÿè´£åˆ°åº•ï¼Œç›´åˆ°æŸ¥åˆ°ç»“æœ</li><li>å…¶ä»–åŸŸåæœåŠ¡å™¨ä¸€èˆ¬ä¼šç”¨è¿­ä»£æŸ¥è¯¢ï¼Œä¸æ–­è¸¢çš®çƒ</li></ul><h4 id="ï¼ˆ2ï¼‰åˆ†å±‚è®¾è®¡åˆ†æ"><a href="#ï¼ˆ2ï¼‰åˆ†å±‚è®¾è®¡åˆ†æ" class="headerlink" title="ï¼ˆ2ï¼‰åˆ†å±‚è®¾è®¡åˆ†æ"></a>ï¼ˆ2ï¼‰åˆ†å±‚è®¾è®¡åˆ†æ</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041206570.png" alt="image-20210514161610892"></p><ul><li>ä¸åŒå±‚çš„è®¾å¤‡ä¸åè®®<br><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041206240.png" alt="image-20210514161305972"></li></ul><ul><li><p>é€šè¿‡ç½‘ç»œå±‚åŠä»¥ä¸Šè®¾å¤‡è¿æ¥çš„è®¡ç®—æœºä¸åœ¨åŒä¸€å±€åŸŸç½‘</p></li><li><p>é€šè¿‡æ•°æ®é“¾è·¯å±‚æˆ–ç‰©ç†å±‚çš„è®¾å¤‡è¿æ¥çš„è®¡ç®—æœºåœ¨åŒä¸€å±€åŸŸç½‘ä¸­</p></li></ul><h4 id="ï¼ˆ3ï¼‰ç½‘ç»œå®‰å…¨ç®¡ç†"><a href="#ï¼ˆ3ï¼‰ç½‘ç»œå®‰å…¨ç®¡ç†" class="headerlink" title="ï¼ˆ3ï¼‰ç½‘ç»œå®‰å…¨ç®¡ç†"></a>ï¼ˆ3ï¼‰ç½‘ç»œå®‰å…¨ç®¡ç†</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041206962.png" alt="image-20210521160221698"></p><h4 id="ï¼ˆ4ï¼‰ç½‘ç»œæ”»å‡»åˆ†ç±»"><a href="#ï¼ˆ4ï¼‰ç½‘ç»œæ”»å‡»åˆ†ç±»" class="headerlink" title="ï¼ˆ4ï¼‰ç½‘ç»œæ”»å‡»åˆ†ç±»"></a>ï¼ˆ4ï¼‰ç½‘ç»œæ”»å‡»åˆ†ç±»</h4><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041206796.png" alt="image-20210318211044069"></p><h2 id="è½¯è€ƒä¸“é¢˜å¤ä¹ ï¼ˆä¸‹åˆé¢˜ï¼‰"><a href="#è½¯è€ƒä¸“é¢˜å¤ä¹ ï¼ˆä¸‹åˆé¢˜ï¼‰" class="headerlink" title="è½¯è€ƒä¸“é¢˜å¤ä¹ ï¼ˆä¸‹åˆé¢˜ï¼‰"></a>è½¯è€ƒä¸“é¢˜å¤ä¹ ï¼ˆä¸‹åˆé¢˜ï¼‰</h2><h3 id="1-æ•°æ®æµå›¾åˆ†æ"><a href="#1-æ•°æ®æµå›¾åˆ†æ" class="headerlink" title="1.æ•°æ®æµå›¾åˆ†æ"></a>1.æ•°æ®æµå›¾åˆ†æ</h3><h4 id="ï¼ˆ1ï¼‰åˆ†æå®ä½“"><a href="#ï¼ˆ1ï¼‰åˆ†æå®ä½“" class="headerlink" title="ï¼ˆ1ï¼‰åˆ†æå®ä½“"></a>ï¼ˆ1ï¼‰åˆ†æå®ä½“</h4><ul><li><p>ä¸Šä¸‹æ–‡æµå›¾</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041206162.png" alt="image-20210516111959965"></p></li><li><p>åˆ†æå®ä½“éœ€è¦ç»“åˆæ–‡å­—å’Œä¸Šä¸‹æ–‡æµå›¾ï¼ˆå¤–éƒ¨å®ä½“ä¹ŸåŒ…æ‹¬ç³»ç»Ÿå¤–çš„å­ç³»ç»Ÿï¼‰</p></li><li><p>å…ˆå¯»æ‰¾é¢˜ç›®æ–‡å­—ä¸­æœ‰å“ªäº›å®ä½“ï¼Œç„¶åçœ‹å®ä½“å‘å‡ºå’Œæ¥å—çš„æ•°æ®ï¼Œç„¶åå³å¯å’Œæ•°æ®æµå›¾å¯¹åº”èµ·æ¥</p></li><li><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041207746.png" alt="image-20210516112540903"></p></li></ul><h4 id="ï¼ˆ2ï¼‰åˆ†æå­˜å‚¨æ•°æ®"><a href="#ï¼ˆ2ï¼‰åˆ†æå­˜å‚¨æ•°æ®" class="headerlink" title="ï¼ˆ2ï¼‰åˆ†æå­˜å‚¨æ•°æ®"></a>ï¼ˆ2ï¼‰åˆ†æå­˜å‚¨æ•°æ®</h4><ul><li><p>0å±‚æ•°æ®æµå›¾</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041207471.png" alt="image-20210516112306633"></p></li></ul><ul><li><p>ä¸»è¦çœ‹0å±‚æ•°æ®æµå›¾ä¸­è¾“å…¥å’Œè¾“å‡ºçš„ä¿¡æ¯ï¼Œç„¶åç»“åˆæ–‡å­—ç¡®å®šä¿¡æ¯åœ¨é¢˜å¹²ä¸­çš„åç§°ï¼ˆä¸€èˆ¬æ˜¯æ•°æ®å+è¡¨è¿™ç§å½¢å¼ï¼‰</p></li><li><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041207016.png" alt="image-20210516112548314"></p></li><li><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041207641.png" alt="image-20210407213739002"></p></li></ul><h4 id="ï¼ˆ3ï¼‰å¯»æ‰¾ç¼ºå°‘æ•°æ®æµ"><a href="#ï¼ˆ3ï¼‰å¯»æ‰¾ç¼ºå°‘æ•°æ®æµ" class="headerlink" title="ï¼ˆ3ï¼‰å¯»æ‰¾ç¼ºå°‘æ•°æ®æµ"></a>ï¼ˆ3ï¼‰å¯»æ‰¾ç¼ºå°‘æ•°æ®æµ</h4><ul><li><p>é¢˜ç›®å¾€å¾€éœ€è¦æˆ‘ä»¬åœ¨0å±‚æ•°æ®æµå›¾ä¸­è¡¥å……ç¼ºå¤±çš„æ•°æ®æµ</p></li><li><p>ä»¥å’ŒåŠ å·¥å…ƒç´ ä¸ºèµ·ç‚¹ï¼ˆPæ“ä½œï¼‰åˆ†æé¢˜å¹²æ–‡æœ¬ï¼Œåˆ†ææ•°æ®æµæ˜¯å¦é½å…¨</p></li><li><p>ç¼ºå°‘çš„æ•°æ®æµæœ‰ä¸‰ç§ç±»å‹ï¼šP-E  P-P  P-D</p></li><li><p>å¾€å¾€å®¹æ˜“å¿½ç•¥çš„æ•°æ®æµç±»å‹ä¸ºP-Pï¼Œå¯ä»¥ç†è§£ä¸ºæ•°æ®ç»è¿‡ä¸€ä¸ªåŠ å·¥åï¼Œåˆè¢«ä¼ åˆ°å¦ä¸€ä¸ªåŠ å·¥è¿›è¡Œè¿›ä¸€æ­¥çš„åŠ å·¥</p></li><li><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041207720.png" alt="image-20210516115805196"></p></li><li><p>ä¿æŒæ•°æ®æµå›¾å¹³è¡¡</p><p><img src="C:/Users/linghao/AppData/Roaming/Typora/typora-user-images/image-20210516143418916.png" alt="image-20210516143418916"></p></li></ul><h3 id="2-E-Ræ¨¡å‹åˆ†æ"><a href="#2-E-Ræ¨¡å‹åˆ†æ" class="headerlink" title="2*.E-Ræ¨¡å‹åˆ†æ"></a>2*.E-Ræ¨¡å‹åˆ†æ</h3><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041207329.png" alt="image-20210516144214005"></p><p><img src="C:/Users/linghao/AppData/Roaming/Typora/typora-user-images/image-20210516144128568.png" alt="image-20210516144128568"></p><h4 id="ï¼ˆ1ï¼‰åˆ†æå®ä½“åŠè”ç³»ç±»å‹"><a href="#ï¼ˆ1ï¼‰åˆ†æå®ä½“åŠè”ç³»ç±»å‹" class="headerlink" title="ï¼ˆ1ï¼‰åˆ†æå®ä½“åŠè”ç³»ç±»å‹"></a>ï¼ˆ1ï¼‰åˆ†æå®ä½“åŠè”ç³»ç±»å‹</h4><ul><li><p>å®ä½“é—´è”ç³»ç±»å‹</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041207457.png" alt="image-20210408074731356"></p></li><li><p>å¯»æ‰¾é¢˜ç›®ä¸â€œç­¾çº¦â€ç›¸å…³æ–‡æœ¬ï¼Œå¯å¾—åˆ°ç­¾çº¦æ¶‰åŠçš„ä¸‰ä¸ªå®ä½“ï¼šç»ç†ï¼Œç§Ÿå®¢ï¼Œå…¬å¯“ã€‚å…¶ä¸­åˆåŒä¸­ç»ç†åªæœ‰ä¸€ä¸ªï¼Œè€Œç§Ÿå®¢å’Œå…¬å¯“éƒ½æ˜¯å¤šä¸ªï¼Œå¯å¾—åˆ°è”ç³»ç±»å‹</p></li></ul><h4 id="ï¼ˆ2ï¼‰åˆ†æå…³ç³»æ¨¡å¼"><a href="#ï¼ˆ2ï¼‰åˆ†æå…³ç³»æ¨¡å¼" class="headerlink" title="ï¼ˆ2ï¼‰åˆ†æå…³ç³»æ¨¡å¼"></a>ï¼ˆ2ï¼‰åˆ†æå…³ç³»æ¨¡å¼</h4><ul><li>è¡¥å…¨å…³ç³»æ¨¡å¼éœ€è¦åˆ†ææ–‡æœ¬ä¸­ç›¸å…³çš„å­—æ®µï¼ˆå³å¯¹è±¡å±æ€§ï¼‰</li><li>æ ¹æ®é¢˜ç›®ä¸­åˆ—å‡ºçš„å®ä½“æ‰¾å‡ºå…¶æ‰€æœ‰å±æ€§å³å¯</li></ul><h4 id="ï¼ˆ3ï¼‰æ–°å¢è”ç³»"><a href="#ï¼ˆ3ï¼‰æ–°å¢è”ç³»" class="headerlink" title="ï¼ˆ3ï¼‰æ–°å¢è”ç³»"></a>ï¼ˆ3ï¼‰æ–°å¢è”ç³»</h4><ul><li><p>å¢åŠ ä¸€ä¸ªæ–°çš„è”ç³»ç±»å‹ï¼Œéœ€è¦æˆ‘ä»¬è¡¥å……å…¶ä¸å„ä¸ªå®ä½“é—´çš„å…³ç³»ï¼Œä¸ï¼ˆ1ï¼‰ï¼ˆ2ï¼‰æ˜¯ä¸€ä¸ªé€†è¿‡ç¨‹</p></li><li><p>æå–ä¸ç»´ä¿®ç›¸å…³çš„å…³é”®å¯¹è±¡â€œç»´ä¿®å·¥ç»´ä¿®å…¬å¯“â€ï¼Œè¡¥å……E-Rå›¾</p></li><li><p>é¢˜å¹²ä¸­æ²¡æœ‰æŒ‡æ˜è”ç³»ç±»å‹ï¼Œå¯æ ¹æ®å®é™…æƒ…å†µï¼Œå¤šä¸ªç»´ä¿®å·¥å¯¹åº”å¤šä¸ªå…¬å¯“</p></li><li><p>æ ¹æ®E-Rå›¾å¾—åˆ°æ–°çš„å…³ç³»æ¨¡å¼â€œç»´ä¿®æƒ…å†µâ€ï¼Œç„¶åå°†E-Rå›¾è½¬æ¢ä¸ºå…³ç³»æ¨¡å¼ï¼ˆå…³é”®åœ¨äºæ‰¾åˆ°å„ç›¸å…³å®ä½“çš„é”®ï¼‰</p><p><img src="C:/Users/linghao/AppData/Roaming/Typora/typora-user-images/image-20210516150231262.png" alt="image-20210516150231262"></p></li><li><p>E-Rå›¾è½¬å…³ç³»æ¨¡å¼æ–¹æ³•ï¼š<a href="https://blog.csdn.net/gaoying_blogs/article/details/16843515?ops_request_misc={" request_id"%3a"161570558016780255285810"%2c"scm"%3a"20140713.130102334.pc_all."}&request_id="161570558016780255285810&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_v2~hot_rank-2-16843515.first_rank_v2_pc_rank_v29&utm_term=E-Ræ¨¡å‹"">E-Ræ¨¡å‹è½¬åŒ–æˆå…³ç³»æ¨¡å‹</a></p></li></ul><h3 id="3-UMLå›¾åˆ†æ"><a href="#3-UMLå›¾åˆ†æ" class="headerlink" title="3.*UMLå›¾åˆ†æ"></a>3.*UMLå›¾åˆ†æ</h3><h4 id="ï¼ˆ1ï¼‰è®¾è®¡ç±»åˆ†ç±»"><a href="#ï¼ˆ1ï¼‰è®¾è®¡ç±»åˆ†ç±»" class="headerlink" title="ï¼ˆ1ï¼‰è®¾è®¡ç±»åˆ†ç±»"></a>ï¼ˆ1ï¼‰è®¾è®¡ç±»åˆ†ç±»</h4><ul><li>å®ä½“ç±»ï¼šå¯¹å¿…é¡»å­˜å‚¨ä¿¡æ¯å’Œç›¸å…³è¡Œä¸ºå»ºæ¨¡çš„ç±»å‹ï¼ˆä¾‹å¦‚:äº‹ä»¶ã€äººå‘˜æˆ–è€…ä¸€äº›ç°å®ç”Ÿæ´»ä¸­çš„å¯¹è±¡ã€‚å®ä½“ç±»é€šå¸¸éƒ½æ˜¯æ°¸ä¹…æ€§çš„ï¼Œå®ƒä»¬æ‰€å…·æœ‰çš„å±æ€§å’Œå…³ç³»æ˜¯é•¿æœŸéœ€è¦çš„ï¼Œå…³é”®è¯ï¼š<strong>å‚¨å­˜</strong>ï¼Œ<strong>é…ç½®</strong>ï¼‰</li><li>æ¥å£ç±»ï¼šè¾¹ç•Œç±»æ˜¯ç³»ç»Ÿå†…éƒ¨ä¸ç³»ç»Ÿå¤–éƒ¨çš„ä¸šåŠ¡ä¸»è§’ä¹‹é—´è¿›è¡Œäº¤äº’å»ºæ¨¡çš„ç±»ï¼ˆæ¥å£ç±»ä¼šéšç€å¤–éƒ¨ç¯å¢ƒå˜åŒ–è€Œå˜åŒ–ï¼Œå¾€å¾€ä¸æŸç§æ“ä½œç›¸å…³ï¼Œå…³é”®è¯ï¼š<strong>æ˜¾ç¤º</strong>ï¼Œ<strong>è°ƒç”¨</strong>ï¼Œ<strong>å‘é€</strong>ï¼‰</li></ul><h4 id="ï¼ˆ2ï¼‰ç±»å›¾åˆ†æ"><a href="#ï¼ˆ2ï¼‰ç±»å›¾åˆ†æ" class="headerlink" title="ï¼ˆ2ï¼‰ç±»å›¾åˆ†æ"></a>ï¼ˆ2ï¼‰ç±»å›¾åˆ†æ</h4><ul><li><p>é¢˜ç›®å¾€å¾€è¦æ±‚åˆ†æè®¾è®¡ç”¨ä¾‹è¡¥å……ç±»å›¾ä¸­çš„ç±»å</p></li><li><p>ç±»å›¾</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041207696.png" alt="image-20210516153900737"></p></li><li><p>ç±»å›¾ä¸­å…³ç³»</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041207673.png" alt="image-20210411075347236"></p><p><strong>å…³è”å…³ç³»ï¼š</strong>å¦‚æœæ²¡æœ‰ç®­å¤´ï¼Œåˆ™è¡¨æ˜ä¸ºåŒå‘å¯¹çš„å…³è”å…³ç³»ï¼ˆå…³è”å…³ç³»é»˜è®¤ä¸å¼ºè°ƒæ–¹å‘ï¼Œè¡¨ç¤ºå¯¹è±¡é—´ç›¸äº’çŸ¥é“ï¼Œä¾‹å¦‚ï¼šä¹˜è½¦äººå’Œè½¦ç¥¨ä¹‹é—´å°±æ˜¯ä¸€ç§å…³è”å…³ç³»ï¼‰</p></li></ul><p>  <strong>æ³›åŒ–å…³ç³»ï¼š</strong>æ³›åŒ–å…³ç³»å®è´¨æ˜¯ç±»çš„ç»§æ‰¿ï¼ˆè¡¨ç°ä¸ºç»§æ‰¿éæŠ½è±¡ç±»ï¼Œä¾‹å¦‚ï¼šæ±½è½¦ä¸SUVä¹‹é—´ä¸ºæ³›åŒ–å…³ç³»ï¼Œç®­å¤´æŒ‡å‘çˆ¶ç±»ï¼‰</p><p>â€‹        <strong>å®ç°å…³ç³»ï¼š</strong>å®ç°å…³ç³»å®è´¨ä¹Ÿæ˜¯ç±»çš„ç»§æ‰¿ï¼ˆè¡¨ç°ä¸ºç»§æ‰¿æŠ½è±¡ç±»ï¼Œ        ç®­å¤´æŒ‡å‘çˆ¶ç±»ï¼‰</p><p>â€‹        <strong>ä¾èµ–å…³ç³»ï¼š</strong>æè¿°ä¸€ä¸ªå¯¹è±¡åœ¨è¿è¡ŒæœŸé—´ä¼šç”¨åˆ°å¦ä¸€ä¸ªå¯¹è±¡çš„å…³ç³»        ï¼ˆç®­å¤´çš„æŒ‡å‘ä¸ºè°ƒç”¨å…³ç³»ï¼‰</p><ul><li><p>ç±»å›¾å¤šé‡æ€§</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041207176.png" alt="image-20210411075231497"></p></li></ul><ul><li>æ‰¾åˆ°æœªçŸ¥ç±»ä¸å…¶ä»–ç±»çš„å…³ç³»ï¼Œé€šè¿‡ç”¨ä¾‹æ–‡å­—æ¨ç†ï¼ˆå¦‚ï¼šé…ç½®ä¿¡æ¯ä¸x1ï¼Œx2ï¼Œx3éƒ½æœ‰å…³è”ï¼Œåˆ™å®ƒä»¬éƒ½æ˜¯é…ç½®ä¿¡æ¯æŠ½è±¡å‡ºçš„ç±»ï¼Œç„¶åå†çœ‹å®ƒä»¬å’Œå…¶ä»–ç±»çš„å…³ç³»ï¼‰</li></ul><h4 id="ï¼ˆ3ï¼‰çŠ¶æ€å›¾åˆ†æ"><a href="#ï¼ˆ3ï¼‰çŠ¶æ€å›¾åˆ†æ" class="headerlink" title="ï¼ˆ3ï¼‰çŠ¶æ€å›¾åˆ†æ"></a>ï¼ˆ3ï¼‰çŠ¶æ€å›¾åˆ†æ</h4><ul><li><p>çŠ¶æ€å›¾ç›¸å…³å…ƒç´ </p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041207689.png" alt="image-20210516160923020"></p><p>çŠ¶æ€è½¬ç§»çš„çº¿ä¸Šæ–‡å­—å³çŠ¶æ€è½¬ç§»çš„æ–‡å­—</p></li></ul><ul><li><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041207393.png" alt="image-20210516160733494"></li></ul><ul><li>é¢˜ç›®å¾€å¾€è¦æ±‚è¡¥å……çŠ¶æ€ï¼Œä¸»è¦æ ¹æ®çŠ¶æ€è½¬ç§»æ¡ä»¶ç»“åˆæ–‡æœ¬æåˆ°çš„ç›¸å…³çŠ¶æ€è§¦å‘æµç¨‹åˆ†æå³å¯</li></ul><h3 id="4-Cè¯­è¨€ç¨‹åºåˆ†æ"><a href="#4-Cè¯­è¨€ç¨‹åºåˆ†æ" class="headerlink" title="4.Cè¯­è¨€ç¨‹åºåˆ†æ"></a>4.Cè¯­è¨€ç¨‹åºåˆ†æ</h3><ul><li><p>ä»¥å‡½æ•°ä¸ºå•ä½åˆ†æï¼Œæ‰¾å‡ºå‡½æ•°è°ƒç”¨æƒ…å†µ</p></li><li><p>ç¨‹åºä»£ç è¡¥å……ï¼Œå°½é‡ä¸å†™é‡å¤ä»£ç ã€‚ä¸Šä¸‹æ–‡å¯èƒ½ä¼šæœ‰å¯¹ç§°çš„ä»£ç </p></li><li><p>ææ˜ç™½å¡«å†™å¤„è¦å®ç°çš„åŠŸèƒ½</p></li><li><p>ç®—æ³•ç­–ç•¥ï¼š</p><ul><li>åŠ¨æ€è§„åˆ’æ³•ä¼šæŠŠé—®é¢˜æ‹†æˆå¤šä¸ªå­é—®é¢˜ï¼Œç„¶åä¼šæœ‰æŸ¥è¡¨æ­¥éª¤</li><li>åˆ†æ²»æ³•çš„åŸºæœ¬è¿ç”¨ï¼šäºŒåˆ†æŸ¥æ‰¾ã€‚å¿«é€Ÿæ’åº</li><li>å›æº¯æ³•é€šè¿‡ä¸æ–­å›æº¯å‚æ•°ï¼Œå§æ‰€æœ‰å¯èƒ½æ€§éƒ½å°è¯•ä¸€éç›´åˆ°</li><li>åœ¨æœ‰é™æ—¶é—´æ‰¾åˆ°æ»¡æ„çš„è§£ï¼Œå³å±€éƒ¨çš„æœ€ä¼˜è§£ï¼ˆæ‰¾ä¸åˆ°æœ€ä¼˜è§£ï¼‰</li></ul></li><li><p>æ—¶é—´å¤æ‚åº¦åˆ†æï¼ˆå»ºè®®è·³è¿‡ï¼‰</p></li><li><p>ç¨‹åºè¿è¡Œè¾“å…¥è¾“å‡ºï¼Œå¯ä»¥ä¸çœ‹ä»£ç ï¼Œè€Œæ˜¯ä»æ–‡å­—ä¸­æå–å‡ºç®—æ³•å®ç°åˆ†æ</p></li></ul><h3 id="5-C-ç¨‹åºåˆ†æ"><a href="#5-C-ç¨‹åºåˆ†æ" class="headerlink" title="5.C++ç¨‹åºåˆ†æ"></a>5.C++ç¨‹åºåˆ†æ</h3><ul><li><p>ä»¥å¯¹è±¡ä¸ºå•ä½åˆ†æï¼Œå¯ä»¥ç»“åˆç±»å›¾åˆ†æç¨‹åº</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041207178.png" alt="image-20210516194903836"></p></li><li><p>C++ç‰¹ç‚¹ï¼š</p><ul><li>æƒé™ä¿®é¥°ç¬¦ï¼špublic:+å±æ€§/æ–¹æ³•</li><li>c++ä¸­å½“å®šä¹‰ç±»å¯¹è±¡æ˜¯æŒ‡é’ˆå¯¹è±¡æ—¶å€™ï¼Œå°±éœ€è¦ç”¨åˆ° <strong>â€œ-&gt;â€</strong> æŒ‡å‘ç±»ä¸­çš„æˆå‘˜ï¼›å½“å®šä¹‰ä¸€èˆ¬å¯¹è±¡æ—¶å€™æ—¶å°±éœ€è¦ç”¨åˆ° <strong>â€œ.â€</strong> æŒ‡å‘ç±»ä¸­çš„æˆå‘˜</li><li>C++ä¸­è¦é‡å†™çš„æ–¹æ³•å¾€å¾€ç”¨virtualè™šå‡½æ•°ä¿®é¥°ï¼Œæœ‰æŠ½è±¡ä¹‹æ„</li><li>C++çš„ç»§æ‰¿ï¼š<code>class Dog : public Animal</code>è¡¨ç¤ºDogç»§æ‰¿Animal</li></ul></li></ul><ul><li><p>ä»å›¾å¯å¾—PizzaBuilderç¼ºå°‘buildPartæ–¹æ³•ï¼Œç”±å¯ä»¥çœ‹åˆ°PizzaBuilderçš„å­ç±»é‡å†™äº†buildPartï¼Œæ‰€ä»¥å¯ä»¥å‚ç…§é‡å†™çš„æ–¹æ³•è¡¥å……ï¼Œå› ä¸ºä½œä¸ºæŠ½è±¡ç±»æ‰€æœ‰æ˜¯ä¸€ä¸ªç©ºæ–¹æ³•<code>virtual void build Parts</code></p></li><li><p>è¡¥å……ç±»å†…æ–¹æ³•ä¸­çš„ä»£ç ï¼šè§‚å¯Ÿè¾“å…¥å‚æ•°ï¼Œè§‚å¯Ÿä¸Šä¸‹æ–‡è°ƒç”¨ï¼Œè§‚å¯Ÿç±»å†…å±æ€§</p></li><li><p>ä¸»å‡½æ•°ä¸­è§‚å¯Ÿä¸Šä¸‹æ–‡ç”Ÿæˆçš„å¯¹è±¡ï¼Œç¡®è®¤éœ€è¦è°ƒç”¨çš„æ–¹æ³•</p></li></ul><h3 id="6-Javaç¨‹åºåˆ†æ"><a href="#6-Javaç¨‹åºåˆ†æ" class="headerlink" title="6*.Javaç¨‹åºåˆ†æ"></a>6*.Javaç¨‹åºåˆ†æ</h3><ul><li><p>ä¸C++ç±»ä¼¼ï¼Œéœ€è¦ç”¨é¢å‘å¯¹è±¡çš„æ–¹æ³•ç»“åˆç±»å›¾è¿›è¡Œåˆ†æ</p><p><img src="https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041207628.png" alt="image-20210516202909167"></p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/Autovy/Image/img/202109041211195.png&quot; alt=&quot;image-20210904121059575&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="è€ƒè¯•ç¬”è®°" scheme="https://autovy.github.io/categories/%E8%80%83%E8%AF%95%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="å…¥é—¨æ•™ç¨‹" scheme="https://autovy.github.io/tags/%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/"/>
    
      <category term="è½¯è€ƒç¬”è®°" scheme="https://autovy.github.io/tags/%E8%BD%AF%E8%80%83%E7%AC%94%E8%AE%B0/"/>
    
      <category term="è€ƒè¯•ç›¸å…³" scheme="https://autovy.github.io/tags/%E8%80%83%E8%AF%95%E7%9B%B8%E5%85%B3/"/>
    
  </entry>
  
</feed>
